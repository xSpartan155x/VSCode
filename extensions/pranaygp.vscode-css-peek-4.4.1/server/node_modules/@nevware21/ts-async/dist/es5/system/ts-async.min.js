/*!
 * NevWare21 - ts-async, 0.2.6
 * https://github.com/nevware21/ts-async
 * Copyright (c) NevWare21 and contributors. All rights reserved.
 * Licensed under the MIT license.
 */
System.register("nevware21.ts-async",[],function(pt){"use strict";return{execute:function(){pt({createAsyncPromise:d,createIdlePromise:b,createNativePromise:y,createPromise:P,createSyncPromise:g,createTaskScheduler:function(a,n){function f(){var n=0<h(o)+h(v);0<e&&(r||(r=N(function(){mt(o,e),mt(v,e),r&&(r.enabled=0<h(o)+h(v))},c)).unref(),r)&&(r.enabled=n)}function l(c,u){return c.st=m(),o.push(c),f(),function(t,e){function r(n){c.rj=c.rj||n||yt(lt,c),c[w]=dt,i(c),t=null,e&&e(n),e=null}var n=c.id;if(c.rj)r(c.rj);else{c[w]=r;try{var o=u(n);c.to&&R(o)&&(c.t=N(function(){r(yt("Timeout",c))},c.to)),p(o,function(n){i(c),e=null,t&&t(n),t=null},r)}catch(n){r(n)}}}}function i(n){ht(o,n),n.t&&n.t.cancel(),n.t=null,s&&s===n&&(s=null,h(o)+h(v)===0)&&(r&&r.cancel(),r=null)}var s,e,r,t,o=[],v=[],c=(e=6e5)/10,d=0,y=(n?n+".":"")+st++,n=(a=a||P,{idle:!0,queue:function(n,t,e){var r,o,c,u=y+"."+d++,i=(t&&(u+="-("+t+")"),(t={id:u,cr:m(),to:e})[w]=function(n){i.rj=n||yt(lt,i),i[w]=dt},t);return i.p=s?(o=s,c=n,v.push(r=i),f(),a(function(n,t){r.id,o.id,$n(o.p,function(){ht(v,r),l(r,c)(n,t)})})):a(l(i,n)),(s=i).p},setStaleTimeout:function(n,t){r&&r.cancel(),r=null,e=n,c=t||n/10,f()}});return mn(n,"idle",{g:function(){return h(o)+h(v)===0}}),ft=ft||{toString:function(){return"[[SchedulerState]]"}},E(t=n,at=at||{toString:function(){return"[[SchedulerName]]"}},{get:function(){return y}}),E(t,ft,{get:function(){return{l:s,r:o,w:v}}}),n},doAwait:p,doAwaitResponse:$n,doFinally:Bn,setCreatePromiseImpl:function(n){ut=n?o(function(){return n}):null},setDetaultIdleTimeout:function(n){ct=n},setPromiseDebugState:function(n,t){Mn=n}});var f=void 0,s=null,q="",x="function",F="object",v="prototype",H="__proto__",t="undefined",J="Symbol",L="length",U="name",W="slice",e=Object,$=e[v],B=String,G=Array,K=G[v];function M(t){return function(n){return typeof n===t}}function Q(n){return $.toString.call(n)}function S(n){return typeof n===t||n===t}var j=M(x);function V(n){return(n||n!==s&&!S(n))&&n&&typeof n===F}var X=G.isArray,Y=M("number"),Z=function(n){return!(!n||"[object Error]"!==Q(n))};function R(n){return n&&j(n.then)}var nn=e.getOwnPropertyDescriptor,tn=e.hasOwn||function(n,t){return n&&$.hasOwnProperty.call(n,t)||!!nn(n,t)};function c(n,t,e){if(n&&V(n))for(var r in n)if(tn(n,r)&&-1===t.call(e||n,r,n[r]))break}function en(n){throw new TypeError(n)}var rn=e.freeze,G=rn||function(n){return n},on=e.getPrototypeOf||function(n){return n[H]||s},cn={};c({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12},function(n,t){cn[n]=n,cn[t]=n});an=cn,rn&&c(an,function(n,t){(X(t)||V(t))&&rn(t)});var un,an,fn=G(an),ln=B,sn="__tsUtils$gblCfg";function vn(){var n;return(n=(n=(n=typeof globalThis!==t?globalThis:n)||typeof self===t?n:self)||typeof window===t?n:window)||typeof global===t?n:global}function A(n,t){var e=q;if(Z(n))e="{ stack: '"+n.stack+"', message: '"+n.message+"', name: '"+n.name+"'";else try{e=JSON.stringify(n,s,t?Y(t)?t:4:f)}catch(n){e=" - "+A(n,t)}return Q(n)+": "+e}function dn(r,o,c){return function(n){var t,e=n&&n[r]||o&&o[r];if(e||c)return t=arguments,(e||c).apply(n,e?K[W].call(t,1):t);en("'"+ln(r)+"' not defined for "+A(n))}}var I,yn={},u={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"},E=e.defineProperty;function mn(n,t,e){var r,o;E(n,t,(r=e,(o={})[u.c]=!0,o[u.e]=!0,r.l&&(o.get=function(){return r.l.v},n=nn(r.l,"v"))&&n.set&&(o.set=function(n){r.l.v=n}),c(r,function(n,t){o[u[n]]=S(t)?o[u[n]]:t}),o))}var hn=function(){var n;un||(n=vn()||{},un=n[sn]=n[sn]||{}),I=un,hn=s};function o(t){var e={};return hn&&hn(),e.b=I.lzy,E(e,"v",{configurable:!0,get:function(){var n=t();return I.lzy||(E(e,"v",{value:n}),e.b&&delete e.b),I.lzy&&e.b!==I.lzy&&(e.b=I.lzy),n}}),e}function T(e,r){return o(function(){var n=e,t=r;try{t=n()}catch(n){}return t})}var r,k,z,pn,C,gn,bn,Pn="window";function O(n){return T(function(){return Sn(n)||f},f)}function wn(n){return(r=!r||!1===n||I.lzy&&!r.b?T(vn,s):r).v}function Sn(n,t){t=wn(t);return t&&t[n]?t[n]:n===Pn&&k?k.v:s}function jn(n){return T(function(){return C.v?C[n]:f},f)}function Rn(){var n=!C||I&&I.lzy&&!C.b;return n&&(C=O(J)),gn&&!n||(gn=jn("for")),bn&&!n||(bn=jn("keyFor")),C.v}function An(n,t,e){if(n)for(var r=n[L]>>>0,o=0;o<r&&!(o in n&&-1===t.call(e||n,n[o],o,n));o++);}var In,En=dn("indexOf",K),_=dn(W,K),Tn=e.create||function(n){if(!n)return{};var t=typeof n;if(t!==F&&t!=x)throw new TypeError("Prototype must be an Object or function: "+A(n));function e(){}return e[v]=n,new e};function kn(n,t){return(e.setPrototypeOf||function(e,n){(In=In||o(function(){var n={};return n[H]=[],n instanceof Array})).v?e[H]=n:c(n,function(n,t){return e[n]=t})})(n,t)}function zn(n,t){try{mn(n,U,{v:t,c:!0,e:!1})}catch(n){}}function Cn(n,t){try{t&&(n[U]=t)}catch(n){}}function m(){return(Date.now||function(){return(new Date).getTime()})()}var i,On=L,h=function(n){return n[On]};function _n(){var n=(i=!i||I.lzy&&!i.b?O("performance"):i).v;return n&&n.now?n.now():m()}var Nn,Dn="unref",qn="hasRef",xn="enabled";function Fn(n,t,e){function r(){return i=!1,a&&a[Dn]&&a[Dn](),u}function o(){return a=t(a),i||r(),u}function c(){a&&e(a),a=s}var u,i=!0,a=n?t(s):s,n={cancel:c,refresh:o,hasRef:function(){return a&&a[qn]?a[qn]():i},ref:function(){return i=!0,a&&a.ref&&a.ref(),u}};return n[Dn]=r,n[xn]=!1,E(u=n,xn,{get:function(){return!!a},set:function(n){!n&&a&&c(),n&&!a&&o()}}),{h:u,dn:function(){a=s}}}function N(){return t=this,n=f,e=_(arguments),o=(r=X(n))?n.length:0,c=(0<o?n[0]:r?f:n)||setTimeout,u=(1<o?n[1]:f)||clearTimeout,i=e[0],e[0]=function(){a.dn(),i.apply(t,arguments)},(a=Fn(!0,function(n){if(n){if(n.refresh)return n.refresh(),n;u.call(t,n)}return c.apply(t,e)},function(n){u.call(t,n)})).h;var t,n,e,r,o,c,u,i,a}var Hn,Jn,Ln,Un=100,Wn=50;function $n(n,t){return p(n,function(n){t&&t({value:n,rejected:!1})},function(n){t&&t({rejected:!0,reason:n})})}function p(n,t,e,r){var o=n;return R(n)?(t||e)&&(o=n.then(t,e)):t&&t(n),r?Bn(o,r):o}function Bn(n,t){var e=n;return t&&(R(n)?e=n.finally?n.finally(t):n.then(function(n){return t(),n},function(n){throw t(),n}):t()),e}var Gn,Kn,Mn=!1,Qn=["pending","resolving","resolved","rejected"],Vn="dispatchEvent",Xn="Promise",Yn="unhandledRejection",Zn=Yn.toLowerCase(),D=[],nt=0,tt=10;function et(n){return j(n)?n.toString():A(n)}function rt(n,t,e){function r(o,c){try{return D.push(h),g=!0,b&&b.cancel(),b=null,n(function(e,r){m.push(function(){try{var n=2===d?o:c,t=S(n)?a:j(n)?n(a):n;R(t)?t.then(e,r):(n||3!==d?e:r)(t)}catch(n){r(n)}}),y&&u()},v)}finally{D.pop()}}function o(){return Qn[d]}function u(){var n;0<m.length&&(n=m.slice(),m=[],g=!0,t(n),b&&b.cancel(),b=null)}function c(t,e){return function(n){d===e&&(2===t&&R(n)?(d=1,n.then(c(2,1),c(3,1))):(d=t,y=!0,a=n,u(),g||3!==t||(b=b||N(i,tt))))}}function i(){var n,t,e,r,o;g||((pn=pn||T(function(){return!(!process||!(process.versions||{}).node)},!1)).v?process.emit(Yn,a,P):(e=(k=!k||I.lzy&&!k.b?O(Pn):k).v||wn(),n=Zn,o=function(n){return mn(n,"promise",{g:function(){return P}}),n.reason=a,n},t=!!Kn.v,r=(z=!z||I.lzy&&!z.b?O("document"):z).v,o(o=(Gn=Gn||T(function(){var n;return!!(n=r&&r.createEvent?r.createEvent("Event"):n)&&n.initEvent},null)).v?r.createEvent("Event"):t?new Event(n):{}),Gn.v&&o.initEvent(n,!1,!0),o&&e[Vn]?e[Vn](o):(t=e["on"+n])?t(o):(e=Sn("console"))&&(e.error||e.log)(n,A(o))))}var a,f,l,s,v=_(arguments,3),d=0,y=!1,m=[],h=nt++,p=0<D.length?D[D.length-1]:void 0,g=!1,b=null,P=(Kn=Kn||O(Xn+"RejectionEvent"),{then:r,catch:function(n){return r(void 0,n)},finally:function(t){var n=t,e=t;return j(t)&&(n=function(n){return t&&t(),n},e=function(n){throw t&&t(),n}),r(n,e)}}),w=(E(P,"state",{get:o}),Mn&&(f=function(){return Q(a)},w=function(){return g},Jn=Jn||{toString:function(){return"[[PromiseResult]]"}},Ln=Ln||{toString:function(){return"[[PromiseIsHandled]]"}},E(s=P,Hn=Hn||{toString:function(){return"[[PromiseState]]"}},{get:o}),E(s,Jn,{get:f}),E(s,Ln,{get:w})),Rn()&&(P[f=fn[11],C&&(!I.lzy||C.b)||Rn(),C.v?C.v[f||11]:(s=fn[11])?yn[s]=yn[s]||{description:ln(l=J+"."+s),toString:function(){return J+"("+l+")"},_polyfill:!0}:void 0]="IPromise"),P.toString=function(){return"IPromise"+(Mn?"["+h+(S(p)?"":":"+p)+"]":"")+" "+o()+(y?" - "+et(a):"")},j(e)||en(Xn+": executor is not a function - "+et(e)),c(3,0));try{e.call(P,c(2,0),w)}catch(n){w(n)}return P}function n(e){return function(n){var t=_(arguments,1);return e(function(e,r){try{var o=[],c=1;An(n,function(n,t){n&&(c++,p(n,function(n){o[t]=n,0==--c&&e(o)},r))}),0==--c&&e(o)}catch(n){r(n)}},t)}}function a(e){return function(t){var n=_(arguments,1);return R(t)?t:e(function(n){n(t)},n)}}function l(t){return function(e){var n=_(arguments,1);return t(function(n,t){t(e)},n)}}var ot,ct,ut,it=function(n){An(n,function(n){try{n()}catch(n){}})};function d(n,t){return rt(d,(r=Y(e=t)?e:0,function(n){N(function(){it(n)},r)}),n,t);var e,r}function y(n,t){var e=(ot=ot||O(Xn)).v;if(!e)return d(n);j(n)||en(Xn+": executor is not a function - "+A(n));var r=0,e=new e(function(t,e){n(function(n){r=2,t(n)},function(n){r=3,e(n)})});return E(e,"state",{get:function(){return Qn[r]}}),e}function g(n){return rt(g,it,n)}function b(n,t){var u,t=S(t)?ct:t;return rt(b,(0<=t&&(u={timeout:+t}),function(t){var e,n,r=function(n){it(t)},o=u;function c(n){var t=_n();return{didTimeout:n,timeRemaining:function(){return Wn-(n=t,_n()-n);var n}}}(Nn=Nn||T(function(){return!!(n=requestIdleCallback)||n!==f;var n},!1)).v&&requestIdleCallback?(e=Fn(!0,function(n){return n&&cancelIdleCallback(n),requestIdleCallback(function(n){e.dn(),r(n||c(!1))},o)},function(n){cancelIdleCallback(n)})).h:N(function(){r(c(!0))},S(n=(o||{}).timeout)?Un:n)}),n,t)}function P(n,t){return(ut=ut||o(function(){return y})).v.call(this,n,t)}pt("createAsyncAllPromise",n(d)),pt("createAsyncResolvedPromise",a(d)),pt("createAsyncRejectedPromise",l(d)),pt("createNativeAllPromise",n(y)),pt("createNativeResolvedPromise",a(y)),pt("createNativeRejectedPromise",l(y)),pt("createSyncAllPromise",n(g)),pt("createSyncResolvedPromise",a(g)),pt("createSyncRejectedPromise",l(g)),pt("createIdleAllPromise",n(b)),pt("createIdleResolvedPromise",a(b)),pt("createIdleRejectedPromise",l(b)),pt("createAllPromise",n(P)),pt("createResolvedPromise",a(P)),pt("createRejectedPromise",l(P));var at,ft,w="reject",lt="Rejected",st=0,vt={},dt=function(){},yt=function(n,t,e){function r(){this.constructor=c,zn(this,o)}var o,c;vt[n]||(vt[n]=(a=(i=Error)[v][U],f=Error.captureStackTrace,l=i,zn(c=function(){var n=this;try{Cn(i,u);var t,e=i.apply(n,arguments)||n;return e!==n&&(t=on(n))!==on(e)&&kn(e,t),f&&f(e,n.constructor),e}finally{Cn(i,a)}},o=u=n),(c=kn(c,l))[v]=l===s?Tn(l):(r[v]=l[v],new r),c));var u,i,a,f,l=m();return new vt[n]("Task [".concat(t.id,"] ").concat(e||"","- ").concat(t.st?"Running":"Waiting",": ").concat((l-(t.st||t.cr)||"0")+" ms"))};function mt(n,t){var e=m()-t;An(n,function(n){(n&&!n.rj&&n.st&&n.st<e||!n.st&&n.cr&&n.cr<e)&&n&&n[w](n.rj||yt("Aborted",n,"Stale "))})}function ht(n,t){t=En(n,t);-1!==t&&n.splice(t,1)}}}});
//# sourceMappingURL=ts-async.min.js.map
