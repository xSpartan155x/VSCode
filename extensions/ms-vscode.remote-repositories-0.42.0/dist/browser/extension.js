var Fc=Object.defineProperty;var o=(Ao,Va)=>Fc(Ao,"name",{value:Va,configurable:!0});(()=>{var Ao={850:(at,l,b)=>{"use strict";b.r(l),b.d(l,{AppInsightsCore:()=>Lt,BaseCore:()=>wn,BaseTelemetryPlugin:()=>Br.i,CoreUtils:()=>J.Tr,DiagnosticLogger:()=>be.AQ,ESPromise:()=>vr,ESPromiseScheduler:()=>ar,EventHelper:()=>Ar.zB,EventLatency:()=>N,EventPersistence:()=>y,EventPropertyType:()=>m,EventsDiscardedReason:()=>Xn.h,FullVersionString:()=>J.vs,InternalAppInsightsCore:()=>Re.F,InternalBaseCore:()=>Gt.A,LoggingSeverity:()=>w.X,MinChannelPriorty:()=>Kn,NotificationManager:()=>mr.f,PerfEvent:()=>xe.zn,PerfManager:()=>xe.Jk,ProcessTelemetryContext:()=>xn.Vi,TraceLevel:()=>U,Undefined:()=>Tr.jA,Utils:()=>J.cQ,ValueKind:()=>B,ValueSanitizer:()=>pr,Version:()=>J.Gf,_ExtendedInternalMessageId:()=>W,_InternalLogMessage:()=>be.lQ,_InternalMessageId:()=>w.v,__getRegisteredEvents:()=>Sn.um,_logInternalMessage:()=>be.L4,_throwInternal:()=>be.kP,_warnToConsole:()=>be.jV,addEventHandler:()=>Sn.Ib,addEventListeners:()=>Sn.yw,addPageHideEventListener:()=>Sn.TJ,addPageShowEventListener:()=>Sn.nD,addPageUnloadEventListener:()=>Sn.c9,areCookiesSupported:()=>Hr.p7,arrForEach:()=>I.tO,arrIndexOf:()=>I.UA,arrMap:()=>I.Mr,arrReduce:()=>I.Xz,attachEvent:()=>Sn.pZ,cookieAvailable:()=>Hr.p7,createCookieMgr:()=>Hr.Nz,createEnumStyle:()=>v.By,createGuid:()=>J.cm,createProcessTelemetryContext:()=>xn.CD,createTraceParent:()=>ur.SU,createUniqueNamespace:()=>Ci.J,createUnloadHandlerContainer:()=>di.Y,dateNow:()=>I.m6,deleteCookie:()=>J.kT,detachEvent:()=>Sn.pD,disableCookies:()=>J.oF,disallowsSameSiteNone:()=>Hr.UY,doPerf:()=>xe.Lm,dumpObj:()=>q.eU,eventOff:()=>Sn.QY,eventOn:()=>Sn.XO,extend:()=>J.l7,findW3cTraceParent:()=>ur.lq,formatTraceParent:()=>ur.aR,generateW3CId:()=>Ar.DO,getCommonSchemaMetaData:()=>J.Vv,getConsole:()=>q.dr,getCookie:()=>J.ej,getCookieValue:()=>J.Do,getCrypto:()=>q.MX,getDocument:()=>q.Me,getExceptionName:()=>I.jj,getFieldValueType:()=>J.Sy,getGlobal:()=>Ir.Rd,getGlobalInst:()=>q.a8,getHistory:()=>q.s1,getIEVersion:()=>q.sA,getISOString:()=>I.Y6,getJSON:()=>q.xA,getLocation:()=>q.k$,getMsCrypto:()=>q.gz,getNavigator:()=>q.jW,getPerformance:()=>q.r,getSetValue:()=>I.qK,getTenantId:()=>J.jM,getTime:()=>J.hK,getWindow:()=>q.Jj,hasDocument:()=>q.Nv,hasHistory:()=>q.fE,hasJSON:()=>q.nS,hasNavigator:()=>q.d6,hasOwnProperty:()=>I.nr,hasWindow:()=>q.Ym,isArray:()=>I.kJ,isArrayValid:()=>J.JT,isBeaconsSupported:()=>q.MF,isBoolean:()=>I.jn,isChromium:()=>J.mJ,isDate:()=>I.J_,isDocumentObjectAvailable:()=>J.x9,isError:()=>I.VZ,isFetchSupported:()=>q.JO,isFunction:()=>I.mf,isIE:()=>q.w1,isLatency:()=>J.r7,isNotTruthy:()=>I.F,isNullOrUndefined:()=>I.le,isNumber:()=>I.hj,isObject:()=>I.Kn,isReactNative:()=>q.b$,isSampledFlag:()=>ur.Pn,isString:()=>I.HD,isTruthy:()=>I.fQ,isTypeof:()=>I.Ym,isUint8ArrayAvailable:()=>J.IZ,isUndefined:()=>I.o8,isValidSpanId:()=>ur.Lc,isValidTraceId:()=>ur.jN,isValidTraceParent:()=>ur.J6,isValueAssigned:()=>J.Sn,isValueKind:()=>J.oS,isWindowObjectAvailable:()=>J.dH,isXhrSupported:()=>q.Z3,mergeEvtNamespace:()=>Sn.jU,newGuid:()=>Ar.GW,newId:()=>Yr.pZ,normalizeJsName:()=>I.Gf,objCreate:()=>Ir.pu,objDefineAccessors:()=>I.l_,objForEachKey:()=>I.rW,objFreeze:()=>I.FL,objKeys:()=>I.FY,objSeal:()=>I.Xi,openXhr:()=>J.ot,optimizeObject:()=>I.Ax,parseTraceParent:()=>ur.j_,perfNow:()=>Ar.Jj,proxyAssign:()=>I.cf,proxyFunctionAs:()=>I.Oi,proxyFunctions:()=>I.Vb,random32:()=>Yr._l,randomValue:()=>Yr.az,removeEventHandler:()=>Sn.C1,removeEventListeners:()=>Sn.nJ,removePageHideEventListener:()=>Sn.C9,removePageShowEventListener:()=>Sn.Yl,removePageUnloadEventListener:()=>Sn.JA,safeGetCookieMgr:()=>Hr.JP,safeGetLogger:()=>be.vH,sanitizeProperty:()=>J.yj,setCookie:()=>J.d8,setEnableEnvMocks:()=>q.dI,setProcessTelemetryTimings:()=>J.if,setValue:()=>I.sO,strContains:()=>I._Q,strEndsWith:()=>I.Id,strFunction:()=>Tr.cb,strObject:()=>Tr.fK,strPrototype:()=>Tr.hB,strStartsWith:()=>I.xe,strTrim:()=>I.nd,strUndefined:()=>Tr.jA,throwError:()=>I._y,toISOString:()=>I.Y6,useXDomainRequest:()=>q.cp});var R=b(1088),v=b(4873),I=b(6708),w=b(7310),B=(0,v.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),N=(0,v.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),m=(0,v.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),y=(0,v.By)({Normal:1,Critical:2}),U=(0,v.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),W=(0,I.FL)((0,R.uc)((0,R.uc)({},w.v),(0,v.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520})));/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var _,O="undefined",F="constructor",V="prototype",se="function",Ae="_dynInstFuncs",$="_isDynProxy",X="_dynClass",Z="_dynCls$",k="_dynInstChk",j=k,x="_dfOpts",le="_unknown_",K="__proto__",ve="_dyn"+K,_e="__dynProto$Gbl",Pe="_dynInstProto",ne="useBaseInst",Se="setInstFuncs",D=Object,He=D.getPrototypeOf,fe=D.getOwnPropertyNames;function ue(){var T;return typeof globalThis!==O&&(T=globalThis),!T&&typeof self!==O&&(T=self),!T&&typeof window!==O&&(T=window),!T&&typeof b.g!==O&&(T=b.g),T||{}}o(ue,"_getGlobal");var G=ue(),he=G[_e]||(G[_e]={o:(_={},_[Se]=!0,_[ne]=!0,_),n:1e3});function Le(T,ce){return T&&D[V].hasOwnProperty.call(T,ce)}o(Le,"_hasOwnProperty");function Je(T){return T&&(T===D[V]||T===Array[V])}o(Je,"_isObjectOrArrayPrototype");function oe(T){return Je(T)||T===Function[V]}o(oe,"_isObjectArrayOrFunctionPrototype");function nt(T){var ce;if(T){if(He)return He(T);var Ee=T[K]||T[V]||(T[F]?T[F][V]:null);ce=T[ve]||Ee,Le(T,ve)||(delete T[Pe],ce=T[ve]=T[Pe]||T[ve],T[Pe]=Ee)}return ce}o(nt,"_getObjProto");function ft(T,ce){var Ee=[];if(fe)Ee=fe(T);else for(var Oe in T)typeof Oe=="string"&&Le(T,Oe)&&Ee.push(Oe);if(Ee&&Ee.length>0)for(var et=0;et<Ee.length;et++)ce(Ee[et])}o(ft,"_forEachProp");function ht(T,ce,Ee){return ce!==F&&typeof T[ce]===se&&(Ee||Le(T,ce))}o(ht,"_isDynamicCandidate");function L(T){throw new TypeError("DynamicProto: "+T)}o(L,"_throwTypeError");function H(T){var ce={};return ft(T,function(Ee){!ce[Ee]&&ht(T,Ee,!1)&&(ce[Ee]=T[Ee])}),ce}o(H,"_getInstanceFuncs");function te(T,ce){for(var Ee=T.length-1;Ee>=0;Ee--)if(T[Ee]===ce)return!0;return!1}o(te,"_hasVisited");function ge(T,ce,Ee,Oe){function et(Rt,cn,St){var Jt=cn[St];if(Jt[$]&&Oe){var Nt=Rt[Ae]||{};Nt[j]!==!1&&(Jt=(Nt[cn[X]]||{})[St]||Jt)}return function(){return Jt.apply(Rt,arguments)}}o(et,"_instFuncProxy");var Ue={};ft(Ee,function(Rt){Ue[Rt]=et(ce,Ee,Rt)});for(var lt=nt(T),_t=[];lt&&!oe(lt)&&!te(_t,lt);)ft(lt,function(Rt){!Ue[Rt]&&ht(lt,Rt,!He)&&(Ue[Rt]=et(ce,lt,Rt))}),_t.push(lt),lt=nt(lt);return Ue}o(ge,"_getBaseFuncs");function $e(T,ce,Ee,Oe){var et=null;if(T&&Le(Ee,X)){var Ue=T[Ae]||{};if(et=(Ue[Ee[X]]||{})[ce],et||L("Missing ["+ce+"] "+se),!et[k]&&Ue[j]!==!1){for(var lt=!Le(T,ce),_t=nt(T),Rt=[];lt&&_t&&!oe(_t)&&!te(Rt,_t);){var cn=_t[ce];if(cn){lt=cn===Oe;break}Rt.push(_t),_t=nt(_t)}try{lt&&(T[ce]=et),et[k]=1}catch(St){Ue[j]=!1}}}return et}o($e,"_getInstFunc");function ke(T,ce,Ee){var Oe=ce[T];return Oe===Ee&&(Oe=nt(ce)[T]),typeof Oe!==se&&L("["+T+"] is not a "+se),Oe}o(ke,"_getProtoFunc");function de(T,ce,Ee,Oe,et){function Ue(Rt,cn){var St=o(function(){var Jt=$e(this,cn,Rt,St)||ke(cn,Rt,St);return Jt.apply(this,arguments)},"dynProtoProxy");return St[$]=1,St}if(o(Ue,"_createDynamicPrototype"),!Je(T)){var lt=Ee[Ae]=Ee[Ae]||{},_t=lt[ce]=lt[ce]||{};lt[j]!==!1&&(lt[j]=!!et),ft(Ee,function(Rt){ht(Ee,Rt,!1)&&Ee[Rt]!==Oe[Rt]&&(_t[Rt]=Ee[Rt],delete Ee[Rt],(!Le(T,Rt)||T[Rt]&&!T[Rt][$])&&(T[Rt]=Ue(T,Rt)))})}}o(de,"_populatePrototype");function Ce(T,ce){if(He){for(var Ee=[],Oe=nt(ce);Oe&&!oe(Oe)&&!te(Ee,Oe);){if(Oe===T)return!0;Ee.push(Oe),Oe=nt(Oe)}return!1}return!0}o(Ce,"_checkPrototype");function Me(T,ce){return Le(T,V)?T.name||ce||le:((T||{})[F]||{}).name||ce||le}o(Me,"_getObjName");function Xe(T,ce,Ee,Oe){Le(T,V)||L("theClass is an invalid class definition.");var et=T[V];Ce(et,ce)||L("["+Me(T)+"] not in hierarchy of ["+Me(ce)+"]");var Ue=null;Le(et,X)?Ue=et[X]:(Ue=Z+Me(T,"_")+"$"+he.n,he.n++,et[X]=Ue);var lt=Xe[x],_t=!!lt[ne];_t&&Oe&&Oe[ne]!==void 0&&(_t=!!Oe[ne]);var Rt=H(ce),cn=ge(et,ce,Rt,_t);Ee(ce,cn);var St=!!He&&!!lt[Se];St&&Oe&&(St=!!Oe[Se]),de(et,Ue,ce,Rt,St!==!1)}o(Xe,"dynamicProto"),Xe[x]=he.o;var be=b(5018),xe=b(9288),q=b(7630),Re=b(5121),re=b(7984),J=b(3599),qe=function(T){(0,R.ne)(ce,T);function ce(){var Ee=T.call(this)||this;return Ee.pluginVersionStringArr=[],Xe(ce,Ee,function(Oe,et){(!Oe.logger||!Oe.logger.queue)&&(Oe.logger=new be.AQ({loggingLevelConsole:1})),Oe.initialize=function(Ue,lt,_t,Rt){(0,xe.Lm)(Oe,function(){return"AppInsightsCore.initialize"},function(){var cn=Oe.pluginVersionStringArr;if(Ue){Ue.endpointUrl||(Ue.endpointUrl=re.YT);var St=Ue.propertyStorageOverride;St&&(!St.getProperty||!St.setProperty)&&(0,I._y)("Invalid property storage override passed."),Ue.channels&&(0,I.tO)(Ue.channels,function(Ot){Ot&&(0,I.tO)(Ot,function(Tt){if(Tt.identifier&&Tt.version){var Gn=Tt.identifier+"="+Tt.version;cn.push(Gn)}})})}Oe.getWParam=function(){return typeof document!="undefined"||!!Ue.enableWParam?0:-1},lt&&(0,I.tO)(lt,function(Ot){if(Ot&&Ot.identifier&&Ot.version){var Tt=Ot.identifier+"="+Ot.version;cn.push(Tt)}}),Oe.pluginVersionString=cn.join(";"),Oe.pluginVersionStringArr=cn;try{et.initialize(Ue,lt,_t,Rt),Oe.pollInternalLogs("InternalLog")}catch(Ot){var Jt=Oe.logger,Nt=(0,q.eU)(Ot);Nt.indexOf("channels")!==-1&&(Nt+=`
 - Channels must be provided through config.channels only!`),(0,be.kP)(Jt,1,514,"SDK Initialization Failed - no telemetry will be sent: "+Nt)}},function(){return{config:Ue,extensions:lt,logger:_t,notificationManager:Rt}})},Oe.track=function(Ue){(0,xe.Lm)(Oe,function(){return"AppInsightsCore.track"},function(){var lt=Ue;if(lt){lt.timings=lt.timings||{},lt.timings.trackStart=(0,J.hK)(),(0,J.r7)(lt.latency)||(lt.latency=1);var _t=lt.ext=lt.ext||{};_t.sdk=_t.sdk||{},_t.sdk.ver=J.vs;var Rt=lt.baseData=lt.baseData||{};Rt[re.o6]=Rt[re.o6]||{};var cn=Rt[re.o6];cn[re.p8]=cn[re.p8]||Oe.pluginVersionString||re.qS}et.track(lt)},function(){return{item:Ue}},!Ue.sync)}}),Ee}return o(ce,"AppInsightsCore"),ce.__ieDyn=1,ce}(Re.F);const Lt=qe;var Gt=b(6900),Ln=function(T){(0,R.ne)(ce,T);function ce(){var Ee=T.call(this)||this;return Xe(ce,Ee,function(Oe,et){Oe.initialize=function(Ue,lt,_t,Rt){Ue&&!Ue.endpointUrl&&(Ue.endpointUrl=re.YT),Oe.getWParam=function(){return J.x9||!!Ue.enableWParam?0:-1};try{et.initialize(Ue,lt,_t,Rt)}catch(cn){(0,be.kP)(Oe.logger,1,514,"Initialization Failed: "+(0,q.eU)(cn)+`
 - Note: Channels must be provided through config.channels only`)}},Oe.track=function(Ue){var lt=Ue;if(lt){var _t=lt.ext=lt.ext||{};_t.sdk=_t.sdk||{},_t.sdk.ver=J.vs}et.track(lt)}}),Ee}return o(ce,"BaseCore"),ce.__ieDyn=1,ce}(Gt.A);const wn=Ln;var jn=I.mf;function Qn(T,ce,Ee){return function(Oe){T[ce]=Oe,Ee()}}o(Qn,"_createPromiseAllOnResolvedFunction");var $n=function(){function T(ce){var Ee=0,Oe=null,et=[];Xe(T,this,function(cn){cn.then=function(St,Jt){return new T(function(Nt,Ot){Ue(St,Jt,Nt,Ot)})},cn.catch=function(St){return cn.then(null,St)}});function Ue(cn,St,Jt,Nt){et.push(function(){var Ot;try{Ee===1?Ot=jn(cn)?cn(Oe):Oe:Ot=jn(St)?St(Oe):Oe,Ot instanceof T?Ot.then(Jt,Nt):Ee===2&&!jn(St)?Nt(Ot):Jt(Ot)}catch(Tt){Nt(Tt);return}}),Ee!==0&&lt()}o(Ue,"_enqueue");function lt(){if(et.length>0){var cn=et.slice();et=[],setTimeout(function(){for(var St=0,Jt=cn.length;St<Jt;++St)try{cn[St]()}catch(Nt){}},0)}}o(lt,"_processQueue");function _t(cn){Ee===0&&(Oe=cn,Ee=1,lt())}o(_t,"_resolve");function Rt(cn){Ee===0&&(Oe=cn,Ee=2,lt())}o(Rt,"_reject"),o(function(){if(!jn(ce))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ce(_t,Rt)}catch(St){Rt(St)}},"_initialize")()}return o(T,"ESPromise"),T.resolve=function(ce){return ce instanceof T?ce:ce&&jn(ce.then)?new T(function(Ee,Oe){try{ce.then(Ee,Oe)}catch(et){Oe(et)}}):new T(function(Ee){Ee(ce)})},T.reject=function(ce){return new T(function(Ee,Oe){Oe(ce)})},T.all=function(ce){if(!(!ce||!ce.length))return new T(function(Ee,Oe){try{for(var et=[],Ue=0,lt=0;lt<ce.length;lt++){var _t=ce[lt];_t&&jn(_t.then)?(Ue++,_t.then(Qn(et,lt,function(){--Ue==0&&Ee(et)}),Oe)):et[lt]=_t}Ue===0&&setTimeout(function(){Ee(et)},0)}catch(Rt){Oe(Rt)}})},T.race=function(ce){return new T(function(Ee,Oe){if(!(!ce||!ce.length))try{for(var et=o(function(lt){var _t=ce[lt];_t&&jn(_t.then)?_t.then(Ee,Oe):setTimeout(function(){Ee(_t)},0)},"_loop_1"),Ue=0;Ue<ce.length;Ue++)et(Ue)}catch(lt){Oe(lt)}})},T}();const vr=$n;var Ir=b(2091),Lr=6e5,ct=0,$t=[],nn=[],en=[];function an(){return new Date().getTime()}o(an,"_getTime");var Rn=function(){function T(ce,Ee){var Oe=0,et=(ce||"<unnamed>")+"."+ct;ct++,Xe(T,this,function(_t){var Rt=null,cn=0;_t.scheduleEvent=function(Jt,Nt,Ot){var Tt=et+"."+cn;cn++,Nt&&(Tt+="-("+Nt+")");var Gn=Tt+"{"+Oe+"}";Oe++;var Cn={evt:null,tm:an(),id:Gn,isRunning:!1,isAborted:!1};return Rt?Cn.evt=kr(Cn,Rt):Cn.evt=Zn(Cn),Rt=Cn,Rt.evt._schId=Gn,Cn.evt;function dr(Dt){for(var zn=an(),bn=zn-Lr,Tn=Dt.length,Un=0;Un<Tn;){var sr=Dt[Un];if(sr&&sr.tm<bn){var Sr=null;sr.abort?(Sr="Aborting ["+sr.id+"] due to Excessive runtime ("+(zn-sr.tm)+" ms)",sr.abort(Sr)):Sr="Removing ["+sr.id+"] due to Excessive runtime ("+(zn-sr.tm)+" ms)",lt(Sr),Dt.splice(Un,1),Tn--}else Un++}}o(dr,"_abortAndRemoveOldEvents");function On(Dt,zn){var bn=!1,Tn=St($t,Dt);if(Tn||(Tn=St(en,Dt),bn=!0),Tn){Tn.to&&(clearTimeout(Tn.to),Tn.to=null);var Un=an()-Tn.tm;zn?bn?lt("Timed out event ["+Dt+"] finally complete -- "+Un+" ms"):Ue("Promise ["+Dt+"] Complete -- "+Un+" ms"):(en.push(Tn),lt("Event ["+Dt+"] Timed out and removed -- "+Un+" ms"))}else Ue("Failed to remove ["+Dt+"] from running queue");Rt&&Rt.id===Dt&&(Rt=null),dr($t),dr(nn),dr(en)}o(On,"_cleanup");function fr(Dt,zn){return function(bn){return On(Dt,!0),zn&&zn(bn),bn}}o(fr,"_removeScheduledEvent");function qr(Dt,zn,bn,Tn){zn.then(function(Un){return Un instanceof vr?(Ue("Event ["+Dt+"] returned a promise -- waiting"),qr(Dt,Un,bn,Tn),Un):fr(Dt,bn)(Un)},fr(Dt,Tn))}o(qr,"_waitForFinalResult");function Wr(Dt,zn){var bn=Dt.id;return new vr(function(Tn,Un){Ue("Event ["+bn+"] Starting -- waited for "+(Dt.wTm||"--")+" ms"),Dt.isRunning=!0,Dt.abort=function(Sr){Dt.abort=null,Dt.isAborted=!0,On(bn,!1),Un(new Error(Sr))};var sr=zn(bn);sr instanceof vr?(Ot&&(Dt.to=setTimeout(function(){On(bn,!1),Un(new Error("Timed out after ["+Ot+"] ms"))},Ot)),qr(bn,sr,function(Sr){Ue("Event ["+bn+"] Resolving after "+(an()-Dt.tm)+" ms"),Tn(Sr)},Un)):(Ue("Promise ["+bn+"] Auto completed as the start action did not return a promise"),Tn())})}o(Wr,"_createScheduledEvent");function Zn(Dt){var zn=an();return Dt.wTm=zn-Dt.tm,Dt.tm=zn,Dt.isAborted?vr.reject(new Error("["+Tt+"] was aborted")):($t.push(Dt),Wr(Dt,Jt))}o(Zn,"_startWaitingEvent");function kr(Dt,zn){var bn=new vr(function(Tn,Un){var sr=an()-zn.tm,Sr=zn.id;Ue("["+Tt+"] is waiting for ["+Sr+":"+sr+" ms] to complete before starting -- ["+nn.length+"] waiting and ["+$t.length+"] running"),Dt.abort=function(xr){Dt.abort=null,St(nn,Tt),Dt.isAborted=!0,Un(new Error(xr))},zn.evt.then(function(xr){St(nn,Tt),Zn(Dt).then(Tn,Un)},function(xr){St(nn,Tt),Zn(Dt).then(Tn,Un)})});return nn.push(Dt),bn}o(kr,"_waitForPreviousEvent")};function St(Jt,Nt){for(var Ot=0;Ot<Jt.length;Ot++)if(Jt[Ot].id===Nt)return Jt.splice(Ot,1)[0];return null}o(St,"_removeQueuedEvent")});function Ue(_t){var Rt=(0,Ir.Rd)();Rt&&Rt.QUnit&&console&&console.log("ESPromiseScheduler["+et+"] "+_t)}o(Ue,"_debugLog");function lt(_t){(0,be.jV)(Ee,"ESPromiseScheduler["+et+"] "+_t)}o(lt,"_warnLog")}return o(T,"ESPromiseScheduler"),T.incomplete=function(){return $t},T.waitingToStart=function(){return nn},T}();const ar=Rn;var pr=function(){function T(ce){var Ee=this,Oe={},et=[],Ue=[];ce&&Ue.push(ce);function lt(St,Jt){var Nt,Ot=Oe[St];if(Ot&&(Nt=Ot[Jt]),!Nt&&Nt!==null){if((0,I.HD)(St)&&(0,I.HD)(Jt))if(Ue.length>0){for(var Tt=0;Tt<Ue.length;Tt++)if(Ue[Tt].handleField(St,Jt)){Nt={canHandle:!0,fieldHandler:Ue[Tt]};break}}else et.length===0&&(Nt={canHandle:!0});if(!Nt&&Nt!==null){Nt=null;for(var Tt=0;Tt<et.length;Tt++)if(et[Tt].handleField(St,Jt)){Nt={canHandle:!0,handler:et[Tt],fieldHandler:null};break}}Ot||(Ot=Oe[St]={}),Ot[Jt]=Nt}return Nt}o(lt,"_getFieldSanitizer"),Ee.addSanitizer=function(St){St&&(et.push(St),Oe={})},Ee.addFieldSanitizer=function(St){St&&(Ue.push(St),Oe={})},Ee.handleField=function(St,Jt){var Nt=lt(St,Jt);return Nt?Nt.canHandle:!1},Ee.value=function(St,Jt,Nt,Ot){var Tt=lt(St,Jt);if(Tt&&Tt.canHandle){if(!Tt||!Tt.canHandle)return null;if(Tt.handler)return Tt.handler.value(St,Jt,Nt,Ot);if(!(0,I.HD)(Jt)||(0,I.le)(Nt)||Nt===re.qS)return null;var Gn=null,Cn=(0,J.Sy)(Nt);if((Cn&8192)==8192){var dr=Cn&~8192;if(Gn=Nt,!(0,J.Sn)(Gn.value)||dr!==1&&dr!==2&&dr!==3&&(dr&4096)!=4096)return null}else Cn===1||Cn===2||Cn===3||(Cn&4096)==4096?Gn=Rt(St,Jt,Nt):Cn===4&&(Gn=Rt(St,Jt,Ot?JSON.stringify(Nt):Nt));if(Gn)return _t(Tt,St,Jt,Cn,Gn,Ot)}return null},Ee.property=function(St,Jt,Nt,Ot){var Tt=lt(St,Jt);if(!Tt||!Tt.canHandle||!(0,I.HD)(Jt)||(0,I.le)(Nt)||!(0,J.Sn)(Nt.value))return null;var Gn=(0,J.Sy)(Nt.value);return Gn===0?null:_t(Tt,St,Jt,Gn,Nt,Ot)};function _t(St,Jt,Nt,Ot,Tt,Gn){if(St.handler)return St.handler.property(Jt,Nt,Tt,Gn);if(!(0,I.le)(Tt.kind)){if((Ot&4096)==4096||!(0,J.oS)(Tt.kind))return null;Tt.value=Tt.value.toString()}return cn(St.fieldHandler,Jt,Nt,Ot,Tt)}o(_t,"_handleProperty");function Rt(St,Jt,Nt){return(0,J.Sn)(Nt)?{value:Nt}:null}o(Rt,"_convertToProperty");function cn(St,Jt,Nt,Ot,Tt){if(Tt&&St){var Gn=St.getSanitizer(Jt,Nt,Ot,Tt.kind,Tt.propertyType);if(Gn)if(Ot===4){var Cn={},dr=Tt.value;(0,I.rW)(dr,function(fr,qr){var Wr=Jt+"."+Nt;if((0,J.Sn)(qr)){var Zn=Rt(Wr,fr,qr);Zn=cn(St,Wr,fr,(0,J.Sy)(qr),Zn),Zn&&(Cn[fr]=Zn.value)}}),Tt.value=Cn}else{var On={path:Jt,name:Nt,type:Ot,prop:Tt,sanitizer:Ee};Tt=Gn.call(Ee,On)}}return Tt}o(cn,"_callFieldSanitizer")}return o(T,"ValueSanitizer"),T.getFieldType=J.Sy,T}(),Kn=100,mr=b(1880),Br=b(4063),xn=b(1589),Xn=b(5928),Ar=b(5843),Sn=b(4869),Yr=b(4878),Tr=b(4392),Hr=b(3242),Ci=b(5883),di=b(310),ur=b(4206)},7984:(at,l,b)=>{"use strict";b.d(l,{YT:()=>v,o6:()=>N,p8:()=>B,qS:()=>R});var R="",v="https://browser.events.data.microsoft.com/OneCollector/1.0/",I="pluginVersionString",w=I+"Arr",B="version",N="properties"},3599:(at,l,b)=>{"use strict";b.d(l,{Do:()=>D,Gf:()=>_,IZ:()=>x,JT:()=>Je,Sn:()=>k,Sy:()=>nt,Tr:()=>ht,Vv:()=>ve,cQ:()=>ft,cm:()=>He,d8:()=>Pe,dH:()=>Z,ej:()=>Se,hK:()=>ue,if:()=>oe,jM:()=>j,kT:()=>ne,l7:()=>fe,mJ:()=>L,oF:()=>_e,oS:()=>G,ot:()=>H,r7:()=>le,vs:()=>O,x9:()=>X,yj:()=>K});var R=b(7630),v=b(6708),I=b(3242),w=b(5843),B=b(4392),N=b(4869),m=b(4878),y=b(2091),U=b(7984),W,_="3.2.10",O="1DS-Web-JS-"+_,F="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",V="withCredentials",se="timeout",Ae=(W={},W[0]=0,W[2]=6,W[1]=1,W[3]=7,W[4096|2]=6,W[4096|1]=1,W[4096|3]=7,W),$=null,X=Boolean((0,R.Me)()),Z=Boolean((0,R.Jj)());function k(te){return!(te===U.qS||(0,v.le)(te))}o(k,"isValueAssigned");function j(te){if(te){var ge=te.indexOf("-");if(ge>-1)return te.substring(0,ge)}return U.qS}o(j,"getTenantId");function x(){return $===null&&($=!(0,v.o8)(Uint8Array)&&!Le()&&!(0,R.b$)()),$}o(x,"isUint8ArrayAvailable");function le(te){return!!(te&&(0,v.hj)(te)&&te>=1&&te<=4)}o(le,"isLatency");function K(te,ge,$e){if(!ge&&!k(ge)||typeof te!="string")return null;var ke=typeof ge;if(ke==="string"||ke==="number"||ke==="boolean"||(0,v.kJ)(ge))ge={value:ge};else if(ke==="object"&&!B.CY.call(ge,"value"))ge={value:$e?JSON.stringify(ge):ge};else if((0,v.le)(ge.value)||ge.value===U.qS||!(0,v.HD)(ge.value)&&!(0,v.hj)(ge.value)&&!(0,v.jn)(ge.value)&&!(0,v.kJ)(ge.value))return null;if((0,v.kJ)(ge.value)&&!Je(ge.value))return null;if(!(0,v.le)(ge.kind)){if((0,v.kJ)(ge.value)||!G(ge.kind))return null;ge.value=ge.value.toString()}return ge}o(K,"sanitizeProperty");function ve(te,ge,$e){var ke=-1;if(!(0,v.o8)(te))if(ge>0&&(ge===32?ke=1<<13:ge<=13&&(ke=ge<<5)),he($e))ke===-1&&(ke=0),ke|=$e;else{var de=Ae[nt(te)]||-1;ke!==-1&&de!==-1?ke|=de:de===6&&(ke=de)}return ke}o(ve,"getCommonSchemaMetaData");function _e(){(0,I.JP)(null).setEnabled(!1)}o(_e,"disableCookies");function Pe(te,ge,$e){(0,I.p7)(null)&&(0,I.JP)(null).set(te,ge,$e*86400,null,"/")}o(Pe,"setCookie");function ne(te){(0,I.p7)(null)&&(0,I.JP)(null).del(te)}o(ne,"deleteCookie");function Se(te){return(0,I.p7)(null)?D((0,I.JP)(null),te):U.qS}o(Se,"getCookie");function D(te,ge,$e){$e===void 0&&($e=!0);var ke;return te&&(ke=te.get(ge),$e&&ke&&decodeURIComponent&&(ke=decodeURIComponent(ke))),ke||U.qS}o(D,"getCookieValue");function He(te){te===void 0&&(te="D");var ge=(0,w.GW)();return te==="B"?ge="{"+ge+"}":te==="P"?ge="("+ge+")":te==="N"&&(ge=ge.replace(/-/g,U.qS)),ge}o(He,"createGuid");function fe(te,ge,$e,ke,de){var Ce={},Me=!1,Xe=0,be=arguments.length,xe=Object[B.hB],q=arguments;for(xe.toString.call(q[0])==="[object Boolean]"&&(Me=q[0],Xe++);Xe<be;Xe++){var te=q[Xe];(0,v.rW)(te,function(re,J){Me&&J&&(0,v.Kn)(J)?(0,v.kJ)(J)?(Ce[re]=Ce[re]||[],(0,v.tO)(J,function(qe,Lt){qe&&(0,v.Kn)(qe)?Ce[re][Lt]=fe(!0,Ce[re][Lt],qe):Ce[re][Lt]=qe})):Ce[re]=fe(!0,Ce[re],J):Ce[re]=J})}return Ce}o(fe,"extend");var ue=w.Jj;function G(te){return te===0||te>0&&te<=13||te===32}o(G,"isValueKind");function he(te){return te>=0&&te<=9}o(he,"isDataType");function Le(){var te=(0,R.jW)();if(!(0,v.o8)(te)&&te.userAgent){var ge=te.userAgent.toLowerCase();if((ge.indexOf("safari")>=0||ge.indexOf("firefox")>=0)&&ge.indexOf("chrome")<0)return!0}return!1}o(Le,"isSafariOrFirefox");function Je(te){return te.length>0}o(Je,"isArrayValid");function oe(te,ge){var $e=te;$e.timings=$e.timings||{},$e.timings.processTelemetryStart=$e.timings.processTelemetryStart||{},$e.timings.processTelemetryStart[ge]=ue()}o(oe,"setProcessTelemetryTimings");function nt(te){var ge=0;if(te!=null){var $e=typeof te;$e==="string"?ge=1:$e==="number"?ge=2:$e==="boolean"?ge=3:$e===B.fK&&(ge=4,(0,v.kJ)(te)?(ge=4096,te.length>0&&(ge|=nt(te[0]))):B.CY.call(te,"value")&&(ge=8192|nt(te.value)))}return ge}o(nt,"getFieldValueType");var ft={Version:_,FullVersionString:O,strUndefined:B.jA,strObject:B.fK,Undefined:B.jA,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,objKeys:v.FY,toISOString:v.Y6,isReactNative:R.b$,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,isFunction:v.mf,isArray:v.kJ,isObject:v.Kn,strTrim:v.nd,isDocumentObjectAvailable:X,isWindowObjectAvailable:Z,isValueAssigned:k,getTenantId:j,isBeaconsSupported:R.MF,isUint8ArrayAvailable:x,isLatency:le,sanitizeProperty:K,getISOString:v.Y6,useXDomainRequest:R.cp,getCommonSchemaMetaData:ve,cookieAvailable:I.p7,disallowsSameSiteNone:I.UY,setCookie:Pe,deleteCookie:ne,getCookie:Se,createGuid:He,extend:fe,getTime:ue,isValueKind:G,isArrayValid:Je,objDefineAccessors:v.l_,addPageUnloadEventListener:N.c9,setProcessTelemetryTimings:oe,addEventHandler:N.Ib,getFieldValueType:nt,strEndsWith:v.Id,objForEachKey:v.rW},ht={_canUseCookies:void 0,isTypeof:v.Ym,isUndefined:v.o8,isNullOrUndefined:v.le,hasOwnProperty:v.nr,isFunction:v.mf,isObject:v.Kn,isDate:v.J_,isArray:v.kJ,isError:v.VZ,isString:v.HD,isNumber:v.hj,isBoolean:v.jn,toISOString:v.Y6,arrForEach:v.tO,arrIndexOf:v.UA,arrMap:v.Mr,arrReduce:v.Xz,strTrim:v.nd,objCreate:y.pu,objKeys:v.FY,objDefineAccessors:v.l_,addEventHandler:N.Ib,dateNow:v.m6,isIE:R.w1,disableCookies:_e,newGuid:w.GW,perfNow:w.Jj,newId:m.pZ,randomValue:m.az,random32:m._l,mwcRandomSeed:m.CN,mwcRandom32:m.F6,generateW3CId:w.DO};function L(){return!!(0,R.a8)("chrome")}o(L,"isChromium");function H(te,ge,$e,ke,de,Ce){ke===void 0&&(ke=!1),de===void 0&&(de=!1);function Me(be,xe,q){try{be[xe]=q}catch(Re){}}o(Me,"_wrapSetXhrProp");var Xe=new XMLHttpRequest;return ke&&Me(Xe,F,ke),$e&&Me(Xe,V,$e),Xe.open(te,ge,!de),$e&&Me(Xe,V,$e),!de&&Ce&&Me(Xe,se,Ce),Xe}o(H,"openXhr")},5229:(at,l,b)=>{"use strict";b.r(l),b.d(l,{BE_PROFILE:()=>q,NRT_PROFILE:()=>xe,PostChannel:()=>zi,RT_PROFILE:()=>be});var R=b(1088);/*!
 * Microsoft Dynamic Proto Utility, 1.1.7
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var v,I="undefined",w="constructor",B="prototype",N="function",m="_dynInstFuncs",y="_isDynProxy",U="_dynClass",W="_dynCls$",_="_dynInstChk",O=_,F="_dfOpts",V="_unknown_",se="__proto__",Ae="_dyn"+se,$="__dynProto$Gbl",X="_dynInstProto",Z="useBaseInst",k="setInstFuncs",j=Object,x=j.getPrototypeOf,le=j.getOwnPropertyNames;function K(){var Fe;return typeof globalThis!==I&&(Fe=globalThis),!Fe&&typeof self!==I&&(Fe=self),!Fe&&typeof window!==I&&(Fe=window),!Fe&&typeof b.g!==I&&(Fe=b.g),Fe||{}}o(K,"_getGlobal");var ve=K(),_e=ve[$]||(ve[$]={o:(v={},v[k]=!0,v[Z]=!0,v),n:1e3});function Pe(Fe,tt){return Fe&&j[B].hasOwnProperty.call(Fe,tt)}o(Pe,"_hasOwnProperty");function ne(Fe){return Fe&&(Fe===j[B]||Fe===Array[B])}o(ne,"_isObjectOrArrayPrototype");function Se(Fe){return ne(Fe)||Fe===Function[B]}o(Se,"_isObjectArrayOrFunctionPrototype");function D(Fe){var tt;if(Fe){if(x)return x(Fe);var vt=Fe[se]||Fe[B]||(Fe[w]?Fe[w][B]:null);tt=Fe[Ae]||vt,Pe(Fe,Ae)||(delete Fe[X],tt=Fe[Ae]=Fe[X]||Fe[Ae],Fe[X]=vt)}return tt}o(D,"_getObjProto");function He(Fe,tt){var vt=[];if(le)vt=le(Fe);else for(var rt in Fe)typeof rt=="string"&&Pe(Fe,rt)&&vt.push(rt);if(vt&&vt.length>0)for(var Ut=0;Ut<vt.length;Ut++)tt(vt[Ut])}o(He,"_forEachProp");function fe(Fe,tt,vt){return tt!==w&&typeof Fe[tt]===N&&(vt||Pe(Fe,tt))}o(fe,"_isDynamicCandidate");function ue(Fe){throw new TypeError("DynamicProto: "+Fe)}o(ue,"_throwTypeError");function G(Fe){var tt={};return He(Fe,function(vt){!tt[vt]&&fe(Fe,vt,!1)&&(tt[vt]=Fe[vt])}),tt}o(G,"_getInstanceFuncs");function he(Fe,tt){for(var vt=Fe.length-1;vt>=0;vt--)if(Fe[vt]===tt)return!0;return!1}o(he,"_hasVisited");function Le(Fe,tt,vt,rt){function Ut(Bt,mn,_n){var tr=mn[_n];if(tr[y]&&rt){var Jn=Bt[m]||{};Jn[O]!==!1&&(tr=(Jn[mn[U]]||{})[_n]||tr)}return function(){return tr.apply(Bt,arguments)}}o(Ut,"_instFuncProxy");var jt={};He(vt,function(Bt){jt[Bt]=Ut(tt,vt,Bt)});for(var pt=D(Fe),rn=[];pt&&!Se(pt)&&!he(rn,pt);)He(pt,function(Bt){!jt[Bt]&&fe(pt,Bt,!x)&&(jt[Bt]=Ut(tt,pt,Bt))}),rn.push(pt),pt=D(pt);return jt}o(Le,"_getBaseFuncs");function Je(Fe,tt,vt,rt){var Ut=null;if(Fe&&Pe(vt,U)){var jt=Fe[m]||{};if(Ut=(jt[vt[U]]||{})[tt],Ut||ue("Missing ["+tt+"] "+N),!Ut[_]&&jt[O]!==!1){for(var pt=!Pe(Fe,tt),rn=D(Fe),Bt=[];pt&&rn&&!Se(rn)&&!he(Bt,rn);){var mn=rn[tt];if(mn){pt=mn===rt;break}Bt.push(rn),rn=D(rn)}try{pt&&(Fe[tt]=Ut),Ut[_]=1}catch(_n){jt[O]=!1}}}return Ut}o(Je,"_getInstFunc");function oe(Fe,tt,vt){var rt=tt[Fe];return rt===vt&&(rt=D(tt)[Fe]),typeof rt!==N&&ue("["+Fe+"] is not a "+N),rt}o(oe,"_getProtoFunc");function nt(Fe,tt,vt,rt,Ut){function jt(Bt,mn){var _n=o(function(){var tr=Je(this,mn,Bt,_n)||oe(mn,Bt,_n);return tr.apply(this,arguments)},"dynProtoProxy");return _n[y]=1,_n}if(o(jt,"_createDynamicPrototype"),!ne(Fe)){var pt=vt[m]=vt[m]||{},rn=pt[tt]=pt[tt]||{};pt[O]!==!1&&(pt[O]=!!Ut),He(vt,function(Bt){fe(vt,Bt,!1)&&vt[Bt]!==rt[Bt]&&(rn[Bt]=vt[Bt],delete vt[Bt],(!Pe(Fe,Bt)||Fe[Bt]&&!Fe[Bt][y])&&(Fe[Bt]=jt(Fe,Bt)))})}}o(nt,"_populatePrototype");function ft(Fe,tt){if(x){for(var vt=[],rt=D(tt);rt&&!Se(rt)&&!he(vt,rt);){if(rt===Fe)return!0;vt.push(rt),rt=D(rt)}return!1}return!0}o(ft,"_checkPrototype");function ht(Fe,tt){return Pe(Fe,B)?Fe.name||tt||V:((Fe||{})[w]||{}).name||tt||V}o(ht,"_getObjName");function L(Fe,tt,vt,rt){Pe(Fe,B)||ue("theClass is an invalid class definition.");var Ut=Fe[B];ft(Ut,tt)||ue("["+ht(Fe)+"] not in hierarchy of ["+ht(tt)+"]");var jt=null;Pe(Ut,U)?jt=Ut[U]:(jt=W+ht(Fe,"_")+"$"+_e.n,_e.n++,Ut[U]=jt);var pt=L[F],rn=!!pt[Z];rn&&rt&&rt[Z]!==void 0&&(rn=!!rt[Z]);var Bt=G(tt),mn=Le(Ut,tt,Bt,rn);vt(tt,mn);var _n=!!x&&!!pt[k];_n&&rt&&(_n=!!rt[k]),nt(Ut,jt,tt,Bt,_n!==!1)}o(L,"dynamicProto"),L[F]=_e.o;var H=b(9288),te=b(4869),ge=b(5883),$e=b(3599),ke=b(6708),de=b(7630),Ce=b(5928),Me=b(5018),Xe=b(4063),be="REAL_TIME",xe="NEAR_REAL_TIME",q="BEST_EFFORT",Re="",re="POST",J="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",qe="drop",Lt="send",Gt="requeue",Ln="rspFail",wn="oth",jn="no-cache, no-store",Qn="application/x-json-stream",$n="cache-control",vr="content-type",Ir="kill-tokens",Lr="kill-duration",ct="kill-duration-seconds",$t="time-delta-millis",nn="client-version",en="client-id",an="time-delta-to-apply-millis",Rn="upload-time",ar="apikey",pr="AuthMsaDeviceTicket",Kn="AuthXToken",mr="sdk-version",Br="NoResponseBody",xn="msfpc",Xn="trace",Ar="user";function Sn(Fe){var tt=(Fe.ext||{}).intweb;return tt&&(0,$e.Sn)(tt[xn])?tt[xn]:null}o(Sn,"_getEventMsfpc");function Yr(Fe){for(var tt=null,vt=0;tt===null&&vt<Fe.length;vt++)tt=Sn(Fe[vt]);return tt}o(Yr,"_getMsfpc");var Tr=function(){function Fe(tt,vt){var rt=vt?[].concat(vt):[],Ut=this,jt=Yr(rt);Ut.iKey=function(){return tt},Ut.Msfpc=function(){return jt||Re},Ut.count=function(){return rt.length},Ut.events=function(){return rt},Ut.addEvent=function(pt){return pt?(rt.push(pt),jt||(jt=Sn(pt)),!0):!1},Ut.split=function(pt,rn){var Bt;if(pt<rt.length){var mn=rt.length-pt;(0,ke.le)(rn)||(mn=rn<mn?rn:mn),Bt=rt.splice(pt,mn),jt=Yr(rt)}return new Fe(tt,Bt)}}return o(Fe,"EventBatch"),Fe.create=function(tt,vt){return new Fe(tt,vt)},Fe}(),Hr=function(){function Fe(){var tt=!0,vt=!0,rt=!0,Ut="use-collector-delta",jt=!1;L(Fe,this,function(pt){pt.allowRequestSending=function(){return tt},pt.firstRequestSent=function(){rt&&(rt=!1,jt||(tt=!1))},pt.shouldAddClockSkewHeaders=function(){return vt},pt.getClockSkewHeaderValue=function(){return Ut},pt.setClockSkew=function(rn){jt||(rn?(Ut=rn,vt=!0,jt=!0):vt=!1,tt=!0)}})}return o(Fe,"ClockSkewManager"),Fe.__ieDyn=1,Fe}();const Ci=Hr;var di=1e3,ur=function(){function Fe(){var tt={};function vt(rt){var Ut=[];return rt&&(0,ke.tO)(rt,function(jt){Ut.push((0,ke.nd)(jt))}),Ut}o(vt,"_normalizeTenants"),L(Fe,this,function(rt){rt.setKillSwitchTenants=function(Ut,jt){if(Ut&&jt)try{var pt=vt(Ut.split(","));if(jt==="this-request-only")return pt;for(var rn=parseInt(jt,10)*di,Bt=0;Bt<pt.length;++Bt)tt[pt[Bt]]=(0,ke.m6)()+rn}catch(mn){return[]}return[]},rt.isTenantKilled=function(Ut){var jt=tt,pt=(0,ke.nd)(Ut);return jt[pt]!==void 0&&jt[pt]>(0,ke.m6)()?!0:(delete jt[pt],!1)}})}return o(Fe,"KillSwitch"),Fe.__ieDyn=1,Fe}();const T=ur;var ce=b(4392),Ee=.8,Oe=1.2,et=3e3,Ue=6e5;function lt(Fe){return!(Fe>=300&&Fe<500&&Fe!=408&&Fe!=429||Fe==501||Fe==505)}o(lt,"retryPolicyShouldRetryForStatus");function _t(Fe){var tt=0,vt=et*Ee,rt=et*Oe,Ut=Math.floor(Math.random()*(rt-vt))+vt;return tt=Math.pow(2,Fe)*Ut,Math.min(tt,Ue)}o(_t,"retryPolicyGetMillisToBackoffForRetry");var Rt=20,cn=3984588,St=65e3,Jt=2e6,Nt=Math.min(Jt,St),Ot="metadata",Tt="f",Gn=/\./,Cn=function(){function Fe(tt,vt,rt,Ut){var jt="data",pt="baseData",rn="ext",Bt=!!Ut,mn=!0,_n=vt,tr={};L(Fe,this,function(Jn){Jn.createPayload=function(Yt,Vt,kt,hn,M,ee){return{apiKeys:[],payloadBlob:Re,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:Yt,isTeardown:Vt,isSync:kt,isBeacon:hn,sendType:ee,sendReason:M}},Jn.appendPayload=function(Yt,Vt,kt){var hn=Yt&&Vt&&!Yt.overflow;return hn&&(0,H.Lm)(tt,function(){return"Serializer:appendPayload"},function(){for(var M=Vt.events(),ee=Yt.payloadBlob,ze=Yt.numEvents,ot=!1,Ht=[],At=[],gn=Yt.isBeacon,vn=gn?St:cn,qt=gn?Nt:Jt,un=0,pn=0;un<M.length;){var Kt=M[un];if(Kt){if(ze>=kt){Yt.overflow=Vt.split(un);break}var ut=Jn.getEventBlob(Kt);if(ut&&ut.length<=qt){var kn=ut.length,Pn=ee.length;if(Pn+kn>vn){Yt.overflow=Vt.split(un);break}ee&&(ee+=`
`),ee+=ut,pn++,pn>Rt&&(ee.substr(0,1),pn=0),ot=!0,ze++}else ut?Ht.push(Kt):At.push(Kt),M.splice(un,1),un--}un++}if(Ht&&Ht.length>0&&Yt.sizeExceed.push(Tr.create(Vt.iKey(),Ht)),At&&At.length>0&&Yt.failedEvts.push(Tr.create(Vt.iKey(),At)),ot){Yt.batches.push(Vt),Yt.payloadBlob=ee,Yt.numEvents=ze;var Fn=Vt.iKey();(0,ke.UA)(Yt.apiKeys,Fn)===-1&&Yt.apiKeys.push(Fn)}},function(){return{payload:Yt,theBatch:{iKey:Vt.iKey(),evts:Vt.events()},max:kt}}),hn},Jn.getEventBlob=function(Yt){try{return(0,H.Lm)(tt,function(){return"Serializer.getEventBlob"},function(){var Vt={};Vt.name=Yt.name,Vt.time=Yt.time,Vt.ver=Yt.ver,Vt.iKey="o:"+(0,$e.jM)(Yt.iKey);var kt={},hn=Yt[rn];hn&&(Vt[rn]=kt,(0,ke.rW)(hn,function(ze,ot){var Ht=kt[ze]={};fn(ot,Ht,"ext."+ze,!0,null,null,!0)}));var M=Vt[jt]={};M.baseType=Yt.baseType;var ee=M[pt]={};return fn(Yt.baseData,ee,pt,!1,[pt],function(ze,ot,Ht){dr(kt,ze,ot,Ht)},mn),fn(Yt.data,M,jt,!1,[],function(ze,ot,Ht){dr(kt,ze,ot,Ht)},mn),JSON.stringify(Vt)},function(){return{item:Yt}})}catch(Vt){return null}};function hr(Yt,Vt){var kt=tr[Yt];return kt===void 0&&(Yt.length>=7&&(kt=(0,ke.xe)(Yt,"ext.metadata")||(0,ke.xe)(Yt,"ext.web")),tr[Yt]=kt),kt}o(hr,"_isReservedField");function fn(Yt,Vt,kt,hn,M,ee,ze){(0,ke.rW)(Yt,function(ot,Ht){var At=null;if(Ht||(0,$e.Sn)(Ht)){var gn=kt,vn=ot,qt=M,un=Vt;if(Bt&&!hn&&Gn.test(ot)){var pn=ot.split("."),Kt=pn.length;if(Kt>1){qt&&(qt=qt.slice());for(var ut=0;ut<Kt-1;ut++){var kn=pn[ut];un=un[kn]=un[kn]||{},gn+="."+kn,qt&&qt.push(kn)}vn=pn[Kt-1]}}var Pn=hn&&hr(gn,vn);if(!Pn&&_n&&_n.handleField(gn,vn)?At=_n.value(gn,vn,Ht,rt):At=(0,$e.yj)(vn,Ht,rt),At){var Fn=At.value;if(un[vn]=Fn,ee&&ee(qt,vn,At),ze&&typeof Fn=="object"&&!(0,ke.kJ)(Fn)){var nr=qt;nr&&(nr=nr.slice(),nr.push(vn)),fn(Ht,Fn,gn+"."+vn,hn,nr,ee,ze)}}}})}o(fn,"_processPathKeys")})}return o(Fe,"Serializer"),Fe.__ieDyn=1,Fe}();function dr(Fe,tt,vt,rt){if(rt&&Fe){var Ut=(0,$e.Vv)(rt.value,rt.kind,rt.propertyType);if(Ut>-1){var jt=Fe[Ot];jt||(jt=Fe[Ot]={f:{}});var pt=jt[Tt];if(pt||(pt=jt[Tt]={}),tt)for(var rn=0;rn<tt.length;rn++){var Bt=tt[rn];pt[Bt]||(pt[Bt]={f:{}});var mn=pt[Bt][Tt];mn||(mn=pt[Bt][Tt]={}),pt=mn}pt=pt[vt]={},(0,ke.kJ)(rt.value)?pt.a={t:Ut}:pt.t=Ut}}}o(dr,"_addJSONPropertyMetaData");var On,fr="sendAttempt",qr="&"+Br+"=true",Wr=(On={},On[1]=Gt,On[100]=Gt,On[200]="sent",On[8004]=qe,On[8003]=qe,On),Zn={},kr={};function Dt(Fe,tt,vt){Zn[Fe]=tt,vt!==!1&&(kr[tt]=Fe)}o(Dt,"_addCollectorHeaderQsMapping"),Dt(pr,pr,!1),Dt(nn,nn),Dt(en,"Client-Id"),Dt(ar,ar),Dt(an,an),Dt(Rn,Rn),Dt(Kn,Kn);function zn(Fe){try{return Fe.responseText}catch(tt){}return Re}o(zn,"_getResponseText");function bn(Fe,tt){var vt=!1;if(Fe&&tt){var rt=(0,ke.FY)(Fe);if(rt&&rt.length>0)for(var Ut=tt.toLowerCase(),jt=0;jt<rt.length;jt++){var pt=rt[jt];if(pt&&(0,ke.nr)(tt,pt)&&pt.toLowerCase()===Ut){vt=!0;break}}}return vt}o(bn,"_hasHeader");function Tn(Fe,tt,vt,rt){tt&&vt&&vt.length>0&&(rt&&Zn[tt]?(Fe.hdrs[Zn[tt]]=vt,Fe.useHdrs=!0):Fe.url+="&"+tt+"="+vt)}o(Tn,"_addRequestDetails");function Un(Fe,tt){return tt&&((0,ke.hj)(tt)?Fe=[tt].concat(Fe):(0,ke.kJ)(tt)&&(Fe=tt.concat(Fe))),Fe}o(Un,"_prependTransports");var sr=function(){function Fe(tt,vt,rt,Ut,jt){this._responseHandlers=[];var pt="?cors=true&"+vr.toLowerCase()+"="+Qn,rn=new T,Bt=!1,mn=new Ci,_n=!1,tr=0,Jn,hr,fn,Yt,Vt=!0,kt=[],hn={},M=[],ee=null,ze=!1,ot,Ht=!1,At=!1,gn,vn,qt,un,pn;L(Fe,this,function(Kt){var ut=!0;Kt.initialize=function(ye,Ze,st,wt,Et){var Wt;Et||(Et={}),pt=ye+pt,At=(0,ke.o8)(Et.avoidOptions)?!0:!Et.avoidOptions,Yt=Ze,ot=Ze.getCookieMgr(),ze=!Yt.config.disableEventTimings;var ln=!!Yt.config.enableCompoundKey;Jn=st,hr=Jn.diagLog();var pe=Et.valueSanitizer,Ne=Et.stringifyObjects;(0,ke.o8)(Et.enableCompoundKey)||(ln=!!Et.enableCompoundKey),gn=Et.xhrTimeout,vn=!!Et.disableXhrSync,qt=!!Et.disableFetchKeepAlive,pn=Et.addNoResponse!==!1,_n=!(0,de.b$)(),ee=new Cn(Yt,pe,Ne,ln),(0,ke.le)(Et.useSendBeacon)||(_n=!!Et.useSendBeacon);var Ge=wt,dt=Et.alwaysUseXhrOverride?wt:null,xt=Et.alwaysUseXhrOverride?wt:null,Qt=[3,2];if(!wt){Vt=!1;var Dn=(0,de.k$)();Dn&&Dn.protocol&&Dn.protocol.toLowerCase()==="file:"&&(ut=!1);var An=[];(0,de.b$)()?(An=[2,1],Qt=[2,1,3]):An=[1,2,3],An=Un(An,Et.transports),wt=kn(An,!1),wt||(0,Me.jV)(hr,"No available transport to send events"),Ge=kn(An,!0)}dt||(Qt=Un(Qt,Et.unloadTransports),dt=kn(Qt,!0)),un=!Vt&&(_n&&(0,de.MF)()||!qt&&(0,de.JO)(!0)),fn=(Wt={},Wt[0]=wt,Wt[1]=Ge||kn([1,2,3],!0),Wt[2]=dt||Ge||kn([1],!0),Wt[3]=xt||kn([2,3],!0)||Ge||kn([1],!0),Wt)};function kn(ye,Ze){for(var st=0,wt=null,Et=0;wt==null&&Et<ye.length;)st=ye[Et],st===1?(0,de.cp)()?wt=Pn:(0,de.Z3)()&&(wt=nr):st===2&&(0,de.JO)(Ze)&&(!Ze||Ze&&!qt)?wt=Fn:_n&&st===3&&(0,de.MF)()&&(wt=Bn),Et++;return wt?{_transport:st,_isSync:Ze,sendPOST:wt}:null}o(kn,"_getSenderInterface"),Kt._getDbgPlgTargets=function(){return[fn[0],rn,ee,fn]};function Pn(ye,Ze,st){var wt=new XDomainRequest;wt.open(re,ye.urlString),ye.timeout&&(wt.timeout=ye.timeout),wt.onload=function(){var Et=zn(wt);It(Ze,200,{},Et),ti(Et)},wt.onerror=function(){It(Ze,400,{})},wt.ontimeout=function(){It(Ze,500,{})},wt.onprogress=function(){},st?wt.send(ye.data):jt.set(function(){wt.send(ye.data)},0)}o(Pn,"_xdrSendPost");function Fn(ye,Ze,st){var wt,Et=ye.urlString,Wt=!1,ln=!1,pe=(wt={body:ye.data,method:re},wt[J]=!0,wt);st&&(pe.keepalive=!0,ye._sendReason===2&&(Wt=!0,pn&&(Et+=qr))),ut&&(pe.credentials="include"),ye.headers&&(0,ke.FY)(ye.headers).length>0&&(pe.headers=ye.headers),fetch(Et,pe).then(function(Ne){var Ge={},dt=Re,xt=Ne.headers;xt&&xt.forEach(function(Qt,Dn){Ge[Dn]=Qt}),Ne.body&&Ne.text().then(function(Qt){dt=Qt}),ln||(ln=!0,It(Ze,Ne.status,Ge,dt),ti(dt))}).catch(function(Ne){ln||(ln=!0,It(Ze,0,{}))}),Wt&&!ln&&(ln=!0,It(Ze,200,{})),!ln&&ye.timeout>0&&jt.set(function(){ln||(ln=!0,It(Ze,500,{}))},ye.timeout)}o(Fn,"_fetchSendPost");function nr(ye,Ze,st){var wt=ye.urlString;function Et(Ne,Ge,dt){if(!Ne[dt]&&Ge&&Ge.getResponseHeader){var xt=Ge.getResponseHeader(dt);xt&&(Ne[dt]=(0,ke.nd)(xt))}return Ne}o(Et,"_appendHeader");function Wt(Ne){var Ge={};return Ne.getAllResponseHeaders?Ge=Kr(Ne.getAllResponseHeaders()):(Ge=Et(Ge,Ne,$t),Ge=Et(Ge,Ne,Lr),Ge=Et(Ge,Ne,ct)),Ge}o(Wt,"_getAllResponseHeaders");function ln(Ne,Ge){It(Ze,Ne.status,Wt(Ne),Ge)}o(ln,"xhrComplete"),st&&ye.disableXhrSync&&(st=!1);var pe=(0,$e.ot)(re,wt,ut,!0,st,ye.timeout);(0,ke.rW)(ye.headers,function(Ne,Ge){pe.setRequestHeader(Ne,Ge)}),pe.onload=function(){var Ne=zn(pe);ln(pe,Ne),ti(Ne)},pe.onerror=function(){ln(pe)},pe.ontimeout=function(){ln(pe)},pe.send(ye.data)}o(nr,"_xhrSendPost");function It(ye,Ze,st,wt){try{ye(Ze,st,wt)}catch(Et){(0,Me.kP)(hr,2,518,(0,de.eU)(Et))}}o(It,"_doOnComplete");function Bn(ye,Ze,st){var wt=ye,Et=200,Wt=wt._thePayload,ln=ye.urlString+(pn?qr:Re);try{var pe=(0,de.jW)();if(!pe.sendBeacon(ln,ye.data))if(Wt){var Ne=[];(0,ke.tO)(Wt.batches,function(Ge){if(Ne&&Ge&&Ge.count()>0){for(var dt=Ge.events(),xt=0;xt<dt.length;xt++)if(!pe.sendBeacon(ln,ee.getEventBlob(dt[xt]))){Ne.push(Ge.split(xt));break}}else Ne.push(Ge.split(0))}),Yn(Ne,8003,Wt.sendType,!0)}else Et=0}catch(Ge){(0,Me.jV)(hr,"Failed to send telemetry using sendBeacon API. Ex:"+(0,de.eU)(Ge)),Et=0}finally{It(Ze,Et,{},Re)}}o(Bn,"_beaconSendPost");function yr(ye){return ye===2||ye===3}o(yr,"_isBeaconPayload");function In(ye){return Ht&&yr(ye)&&(ye=2),ye}o(In,"_adjustSendType"),Kt.addQueryStringParameter=function(ye,Ze){for(var st=0;st<kt.length;st++)if(kt[st].name===ye){kt[st].value=Ze;return}kt.push({name:ye,value:Ze})},Kt.addHeader=function(ye,Ze){hn[ye]=Ze},Kt.canSendRequest=function(){return Zr()&&mn.allowRequestSending()},Kt.sendQueuedRequests=function(ye,Ze){(0,ke.o8)(ye)&&(ye=0),Ht&&(ye=In(ye),Ze=2),Cr(M,ye,0)&&gr(Fr(),0,!1,ye,Ze||0)},Kt.isCompletelyIdle=function(){return!Bt&&tr===0&&M.length===0},Kt.setUnloading=function(ye){Ht=ye},Kt.addBatch=function(ye){if(ye&&ye.count()>0){if(rn.isTenantKilled(ye.iKey()))return!1;M.push(ye)}return!0},Kt.teardown=function(){M.length>0&&gr(Fr(),0,!0,2,2)},Kt.pause=function(){Bt=!0},Kt.resume=function(){Bt=!1,Kt.sendQueuedRequests(0,4)},Kt.sendSynchronousBatch=function(ye,Ze,st){ye&&ye.count()>0&&((0,ke.le)(Ze)&&(Ze=1),Ht&&(Ze=In(Ze),st=2),gr([ye],0,!1,Ze,st||0))};function Zr(){return!Bt&&tr<vt}o(Zr,"_hasIdleConnection");function Fr(){var ye=M;return M=[],ye}o(Fr,"_clearQueue");function Cr(ye,Ze,st){var wt=!1;return ye&&ye.length>0&&!Bt&&fn[Ze]&&ee&&(wt=Ze!==0||Zr()&&(st>0||mn.allowRequestSending())),wt}o(Cr,"_canSendPayload");function gi(ye){var Ze={};return ye&&(0,ke.tO)(ye,function(st,wt){Ze[wt]={iKey:st.iKey(),evts:st.events()}}),Ze}o(gi,"_createDebugBatches");function gr(ye,Ze,st,wt,Et){if(!(!ye||ye.length===0)){if(Bt){Yn(ye,1,wt);return}wt=In(wt);try{var Wt=ye,ln=wt!==0;(0,H.Lm)(Yt,function(){return"HttpManager:_sendBatches"},function(pe){pe&&(ye=ye.slice(0));for(var Ne=[],Ge=null,dt=(0,$e.hK)(),xt=fn[wt]||(ln?fn[1]:fn[0]),Qt=xt&&xt._transport,Dn=un&&(Ht||yr(wt)||Qt===3||xt._isSync&&Qt===2);Cr(ye,wt,Ze);){var An=ye.shift();An&&An.count()>0&&(rn.isTenantKilled(An.iKey())?Ne.push(An):(Ge=Ge||ee.createPayload(Ze,st,ln,Dn,Et,wt),ee.appendPayload(Ge,An,tt)?Ge.overflow!==null&&(ye=[Ge.overflow].concat(ye),Ge.overflow=null,Mr(Ge,dt,(0,$e.hK)(),Et),dt=(0,$e.hK)(),Ge=null):(Mr(Ge,dt,(0,$e.hK)(),Et),dt=(0,$e.hK)(),ye=[An].concat(ye),Ge=null)))}Ge&&Mr(Ge,dt,(0,$e.hK)(),Et),ye.length>0&&(M=ye.concat(M)),Yn(Ne,8004,wt)},function(){return{batches:gi(Wt),retryCount:Ze,isTeardown:st,isSynchronous:ln,sendReason:Et,useSendBeacon:yr(wt),sendType:wt}},!ln)}catch(pe){(0,Me.kP)(hr,2,48,"Unexpected Exception sending batch: "+(0,de.eU)(pe))}}}o(gr,"_sendBatches");function ii(ye,Ze){var st={url:pt,hdrs:{},useHdrs:!1};Ze?(st.hdrs=(0,$e.l7)(st.hdrs,hn),st.useHdrs=(0,ke.FY)(st.hdrs).length>0):(0,ke.rW)(hn,function(pe,Ne){kr[pe]?Tn(st,kr[pe],Ne,!1):(st.hdrs[pe]=Ne,st.useHdrs=!0)}),Tn(st,en,"NO_AUTH",Ze),Tn(st,nn,$e.vs,Ze);var wt=Re;(0,ke.tO)(ye.apiKeys,function(pe){wt.length>0&&(wt+=","),wt+=pe}),Tn(st,ar,wt,Ze),Tn(st,Rn,(0,ke.m6)().toString(),Ze);var Et=ei(ye);if((0,$e.Sn)(Et)&&(st.url+="&ext.intweb.msfpc="+Et),mn.shouldAddClockSkewHeaders()&&Tn(st,an,mn.getClockSkewHeaderValue(),Ze),Yt.getWParam){var Wt=Yt.getWParam();Wt>=0&&(st.url+="&w="+Wt)}for(var ln=0;ln<kt.length;ln++)st.url+="&"+kt[ln].name+"="+kt[ln].value;return st}o(ii,"_buildRequestDetails");function Xr(ye,Ze,st){ye[Ze]=ye[Ze]||{},ye[Ze][Jn.identifier]=st}o(Xr,"_setTimingValue");function Mr(ye,Ze,st,wt){if(ye&&ye.payloadBlob&&ye.payloadBlob.length>0){var Et=!!Kt.sendHook,Wt=fn[ye.sendType];!yr(ye.sendType)&&ye.isBeacon&&ye.sendReason===2&&(Wt=fn[2]||fn[3]||Wt);var ln=At;(ye.isBeacon||Wt._transport===3)&&(ln=!1);var pe=ii(ye,ln);ln=ln||pe.useHdrs;var Ne=(0,$e.hK)();(0,H.Lm)(Yt,function(){return"HttpManager:_doPayloadSend"},function(){for(var Ge=0;Ge<ye.batches.length;Ge++)for(var dt=ye.batches[Ge],xt=dt.events(),Qt=0;Qt<xt.length;Qt++){var Dn=xt[Qt];if(ze){var An=Dn.timings=Dn.timings||{};Xr(An,"sendEventStart",Ne),Xr(An,"serializationStart",Ze),Xr(An,"serializationCompleted",st)}Dn[fr]>0?Dn[fr]++:Dn[fr]=1}Yn(ye.batches,1e3+(wt||0),ye.sendType,!0);var Vn={data:ye.payloadBlob,urlString:pe.url,headers:pe.hdrs,_thePayload:ye,_sendReason:wt,timeout:gn,disableXhrSync:vn,disableFetchKeepAlive:qt};ln&&(bn(Vn.headers,$n)||(Vn.headers[$n]=jn),bn(Vn.headers,vr)||(Vn.headers[vr]=Qn));var si=null;Wt&&(si=o(function(li){mn.firstRequestSent();var bi=o(function(_i,Ei){pi(_i,Ei,ye,wt)},"onComplete"),or=ye.isTeardown||ye.isSync;try{Wt.sendPOST(li,bi,or),Kt.sendListener&&Kt.sendListener(Vn,li,or,ye.isBeacon)}catch(_i){(0,Me.jV)(hr,"Unexpected exception sending payload. Ex:"+(0,de.eU)(_i)),It(bi,0,{})}},"sender")),(0,H.Lm)(Yt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(si)if(ye.sendType===0&&tr++,Et&&!ye.isBeacon&&Wt._transport!==3){var li={data:Vn.data,urlString:Vn.urlString,headers:(0,$e.l7)({},Vn.headers),timeout:Vn.timeout,disableXhrSync:Vn.disableXhrSync,disableFetchKeepAlive:Vn.disableFetchKeepAlive},bi=!1;(0,H.Lm)(Yt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Kt.sendHook(li,function(or){bi=!0,!Vt&&!or._thePayload&&(or._thePayload=or._thePayload||Vn._thePayload,or._sendReason=or._sendReason||Vn._sendReason),si(or)},ye.isSync||ye.isTeardown)}catch(or){bi||si(Vn)}})}else si(Vn)})},function(){return{thePayload:ye,serializationStart:Ze,serializationCompleted:st,sendReason:wt}},ye.isSync)}ye.sizeExceed&&ye.sizeExceed.length>0&&Yn(ye.sizeExceed,8003,ye.sendType),ye.failedEvts&&ye.failedEvts.length>0&&Yn(ye.failedEvts,8002,ye.sendType)}o(Mr,"_doPayloadSend");function vi(ye,Ze){ze&&(0,ke.tO)(ye,function(st){var wt=st.timings=st.timings||{};Xr(wt,"sendEventCompleted",Ze)})}o(vi,"_addEventCompletedTimings");function pi(ye,Ze,st,wt){var Et=9e3,Wt=null,ln=!1,pe=!1;try{var Ne=!0;if(typeof ye!==ce.jA){if(Ze){mn.setClockSkew(Ze[$t]);var Ge=Ze[Lr]||Ze["kill-duration-seconds"];(0,ke.tO)(rn.setKillSwitchTenants(Ze[Ir],Ge),function(xt){(0,ke.tO)(st.batches,function(Qt){if(Qt.iKey()===xt){Wt=Wt||[];var Dn=Qt.split(0);st.numEvents-=Dn.count(),Wt.push(Dn)}})})}if(ye==200||ye==204){Et=200;return}(!lt(ye)||st.numEvents<=0)&&(Ne=!1),Et=9e3+ye%1e3}if(Ne){Et=100;var dt=st.retryCnt;st.sendType===0&&(dt<rt?(ln=!0,$r(function(){st.sendType===0&&tr--,gr(st.batches,dt+1,st.isTeardown,Ht?2:st.sendType,5)},Ht,_t(dt))):(pe=!0,Ht&&(Et=8001)))}}finally{ln||(mn.setClockSkew(),ai(st,Et,wt,pe)),Yn(Wt,8004,st.sendType)}}o(pi,"_retryRequestIfNeeded");function ai(ye,Ze,st,wt){try{wt&&Jn._backOffTransmission(),Ze===200&&(!wt&&!ye.isSync&&Jn._clearBackOff(),oi(ye.batches)),Yn(ye.batches,Ze,ye.sendType,!0)}finally{ye.sendType===0&&(tr--,st!==5&&Kt.sendQueuedRequests(ye.sendType,st))}}o(ai,"_handleRequestFinished");function oi(ye){if(ze){var Ze=(0,$e.hK)();(0,ke.tO)(ye,function(st){st&&st.count()>0&&vi(st.events(),Ze)})}}o(oi,"_addCompleteTimings");function $r(ye,Ze,st){Ze?ye():jt.set(ye,st)}o($r,"_doAction");function Kr(ye){var Ze={};if((0,ke.HD)(ye)){var st=(0,ke.nd)(ye).split(/[\r\n]+/);(0,ke.tO)(st,function(wt){if(wt){var Et=wt.indexOf(": ");if(Et!==-1){var Wt=(0,ke.nd)(wt.substring(0,Et)).toLowerCase(),ln=(0,ke.nd)(wt.substring(Et+1));Ze[Wt]=ln}else Ze[(0,ke.nd)(wt)]=1}})}return Ze}o(Kr,"_convertAllHeadersToMap");function ei(ye){for(var Ze=0;Ze<ye.batches.length;Ze++){var st=ye.batches[Ze].Msfpc();if(st)return encodeURIComponent(st)}return Re}o(ei,"_getMsfpc");function ti(ye){var Ze=Kt._responseHandlers;try{for(var st=0;st<Ze.length;st++)try{Ze[st](ye)}catch(Et){(0,Me.kP)(hr,1,519,"Response handler failed: "+Et)}if(ye){var wt=JSON.parse(ye);(0,$e.Sn)(wt.webResult)&&(0,$e.Sn)(wt.webResult[xn])&&ot.set("MSFPC",wt.webResult[xn],365*86400)}}catch(Et){}}o(ti,"_handleCollectorResponse");function Yn(ye,Ze,st,wt){if(ye&&ye.length>0&&Ut){var Et=Ut[mi(Ze)];if(Et){var Wt=st!==0;(0,H.Lm)(Yt,function(){return"HttpManager:_sendBatchesNotification"},function(){$r(function(){try{Et.call(Ut,ye,Ze,Wt,st)}catch(ln){(0,Me.kP)(hr,1,74,"send request notification failed: "+ln)}},wt||Wt,0)},function(){return{batches:gi(ye),reason:Ze,isSync:Wt,sendSync:wt,sendType:st}},!Wt)}}}o(Yn,"_sendBatchesNotification");function mi(ye){var Ze=Wr[ye];return(0,$e.Sn)(Ze)||(Ze=wn,ye>=9e3&&ye<=9999?Ze=Ln:ye>=8e3&&ye<=8999?Ze=qe:ye>=1e3&&ye<=1999&&(Ze=Lt)),Ze}o(mi,"_getNotificationAction")})}return o(Fe,"HttpManager"),Fe.__ieDyn=1,Fe}();function Sr(Fe,tt){for(var vt=[],rt=2;rt<arguments.length;rt++)vt[rt-2]=arguments[rt];return setTimeout(Fe,tt,vt)}o(Sr,"defaultSetTimeout");function xr(Fe){clearTimeout(Fe)}o(xr,"defaultClearTimeout");function Dr(Fe,tt){return{set:Fe||Sr,clear:tt||xr}}o(Dr,"createTimeoutWrapper");var Zi=.25,Ii=500,sa=20,Li=6,Ki=2,ea=4,Gi=2,ta=1,fi="eventsDiscarded",Qr="overrideInstrumentationKey",hi="maxEventRetryAttempts",Ni="maxUnloadEventRetryAttempts",ga="addUnloadCb",ri=function(Fe){(0,R.ne)(tt,Fe);function tt(){var vt=Fe.call(this)||this;vt.identifier="PostChannel",vt.priority=1011,vt.version="3.2.10";var rt,Ut=!1,jt=[],pt=null,rn=!1,Bt=0,mn=500,_n=0,tr=1e4,Jn={},hr=be,fn=null,Yt=null,Vt=0,kt=0,hn,M,ee={},ze,ot,Ht=-1,At,gn=!0,vn=!1,qt=Li,un=Ki,pn,Kt;return L(tt,vt,function(ut,kn){Zr(),ut._getDbgPlgTargets=function(){return[M]},ut.initialize=function(pe,Ne,Ge){(0,H.Lm)(Ne,function(){return"PostChannel:initialize"},function(){var dt=Ne;kn.initialize(pe,Ne,Ge);try{var xt=!!Ne[ga];pn=(0,te.jU)((0,ge.J)(ut.identifier),Ne.evtNamespace&&Ne.evtNamespace());var Qt=ut._getTelCtx();pe.extensionConfig[ut.identifier]=pe.extensionConfig[ut.identifier]||{},rt=Qt.getExtCfg(ut.identifier),Kt=Dr(rt.setTimeoutOverride,rt.clearTimeoutOverride),gn=!rt.disableOptimizeObj&&(0,$e.mJ)(),Pn(dt),rt.eventsLimitInMem>0&&(tr=rt.eventsLimitInMem),rt.immediateEventLimit>0&&(mn=rt.immediateEventLimit),rt.autoFlushEventsLimit>0&&(ze=rt.autoFlushEventsLimit),(0,ke.hj)(rt[hi])&&(qt=rt[hi]),(0,ke.hj)(rt[Ni])&&(un=rt[Ni]),ln(),rt.httpXHROverride&&rt.httpXHROverride.sendPOST&&(hn=rt.httpXHROverride),(0,$e.Sn)(pe.anonCookieName)&&M.addQueryStringParameter("anoncknm",pe.anonCookieName),M.sendHook=rt.payloadPreprocessor,M.sendListener=rt.payloadListener;var Dn=rt.overrideEndpointUrl?rt.overrideEndpointUrl:pe.endpointUrl;ut._notificationManager=Ne.getNotifyMgr(),M.initialize(Dn,ut.core,ut,hn,rt);var An=pe.disablePageUnloadEvents||[];(0,te.c9)(Fn,An,pn),(0,te.TJ)(Fn,An,pn),(0,te.nD)(nr,pe.disablePageShowEvents,pn)}catch(Vn){throw ut.setInitialized(!1),Vn}},function(){return{coreConfig:pe,core:Ne,extensions:Ge}})},ut.processTelemetry=function(pe,Ne){(0,$e.if)(pe,ut.identifier),Ne=ut._getTelCtx(Ne);var Ge=Ne.getExtCfg(ut.identifier),dt=!!rt.disableTelemetry;Ge&&(dt=dt||!!Ge.disableTelemetry);var xt=pe;!dt&&!Ut&&(rt[Qr]&&(xt.iKey=rt[Qr]),Ge&&Ge[Qr]&&(xt.iKey=Ge[Qr]),It(xt,!0),vn?gi(2,2):In()),ut.processNext(xt,Ne)},ut._doTeardown=function(pe,Ne){gi(2,2),Ut=!0,M.teardown(),(0,te.JA)(null,pn),(0,te.C9)(null,pn),(0,te.Yl)(null,pn),Zr()};function Pn(pe){var Ne=pe.getWParam;pe.getWParam=function(){var Ge=0;return rt.ignoreMc1Ms0CookieProcessing&&(Ge=Ge|2),Ge|Ne()}}o(Pn,"_hookWParam");function Fn(pe){var Ne=pe||(0,de.Jj)().event;Ne.type!=="beforeunload"&&(vn=!0,M.setUnloading(vn)),gi(2,2)}o(Fn,"_handleUnloadEvents");function nr(pe){vn=!1,M.setUnloading(vn)}o(nr,"_handleShowEvents");function It(pe,Ne){if(pe.sendAttempt||(pe.sendAttempt=0),pe.latency||(pe.latency=1),pe.ext&&pe.ext[Xn]&&delete pe.ext[Xn],pe.ext&&pe.ext[Ar]&&pe.ext[Ar].id&&delete pe.ext[Ar].id,gn&&($e.if,pe.ext=(0,ke.Ax)(pe.ext),pe.baseData&&(pe.baseData=(0,ke.Ax)(pe.baseData)),pe.data&&(pe.data=(0,ke.Ax)(pe.data))),pe.sync){if(Vt||rn)pe.latency=3,pe.sync=!1;else if(M){gn&&(pe=(0,ke.Ax)(pe)),M.sendSynchronousBatch(Tr.create(pe.iKey,[pe]),pe.sync===!0?1:pe.sync,3);return}}var Ge=pe.latency,dt=_n,xt=tr;Ge===4&&(dt=Bt,xt=mn);var Qt=!1;if(dt<xt)Qt=!Mr(pe,Ne);else{var Dn=1,An=sa;Ge===4&&(Dn=4,An=1),Qt=!0,vi(pe.iKey,pe.latency,Dn,An)&&(Qt=!Mr(pe,Ne))}Qt&&mi(fi,[pe],Ce.h.QueueFull)}o(It,"_addEventToQueues"),ut.setEventQueueLimits=function(pe,Ne){tr=pe>0?pe:1e4,ze=Ne>0?Ne:0,ln();var Ge=_n>pe;if(!Ge&&ot>0)for(var dt=1;!Ge&&dt<=3;dt++){var xt=ee[dt];xt&&xt.batches&&(0,ke.tO)(xt.batches,function(Qt){Qt&&Qt.count()>=ot&&(Ge=!0)})}Xr(!0,Ge)},ut.pause=function(){Cr(),rn=!0,M.pause()},ut.resume=function(){rn=!1,M.resume(),In()},ut.addResponseHandler=function(pe){M._responseHandlers.push(pe)},ut._loadTransmitProfiles=function(pe){Kr(),(0,ke.rW)(pe,function(Ne,Ge){var dt=Ge.length;if(dt>=2){var xt=dt>2?Ge[2]:0;if(Ge.splice(0,dt-2),Ge[1]<0&&(Ge[0]=-1),Ge[1]>0&&Ge[0]>0){var Qt=Ge[0]/Ge[1];Ge[0]=Math.ceil(Qt)*Ge[1]}xt>=0&&Ge[1]>=0&&xt>Ge[1]&&(xt=Ge[1]),Ge.push(xt),Jn[Ne]=Ge}})},ut.flush=function(pe,Ne,Ge){if(pe===void 0&&(pe=!0),!rn)if(Ge=Ge||1,pe)pt==null?(Cr(),ai(1,0,Ge),pt=Fr(function(){pt=null,oi(Ne,Ge)},0)):jt.push(Ne);else{var dt=Cr();Bn(1,1,Ge),Ne!=null&&Ne(),dt&&In()}},ut.setMsaAuthTicket=function(pe){M.addHeader(pr,pe)},ut.hasEvents=yr,ut._setTransmitProfile=function(pe){hr!==pe&&Jn[pe]!==void 0&&(Cr(),hr=pe,In())};function Bn(pe,Ne,Ge){var dt=ai(pe,Ne,Ge);return M.sendQueuedRequests(Ne,Ge),dt}o(Bn,"_sendEventsForLatencyAndAbove");function yr(){return _n>0}o(yr,"_hasEvents");function In(){if(Ht>=0&&ai(Ht,0,At)&&M.sendQueuedRequests(0,At),Bt>0&&!Yt&&!rn){var pe=Jn[hr][2];pe>=0&&(Yt=Fr(function(){Yt=null,Bn(4,0,1),In()},pe))}var Ne=Jn[hr][1];!fn&&!pt&&Ne>=0&&!rn&&(yr()?fn=Fr(function(){fn=null,Bn(kt===0?3:1,0,1),kt++,kt%=2,In()},Ne):kt=0)}o(In,"_scheduleTimer"),ut._backOffTransmission=function(){Vt<ea&&(Vt++,Cr(),In())},ut._clearBackOff=function(){Vt&&(Vt=0,Cr(),In())};function Zr(){rt=null,Ut=!1,jt=[],pt=null,rn=!1,Bt=0,mn=500,_n=0,tr=1e4,Jn={},hr=be,fn=null,Yt=null,Vt=0,kt=0,hn=null,ee={},ze=void 0,ot=0,Ht=-1,At=null,gn=!0,vn=!1,qt=Li,un=Ki,pn=null,Kt=Dr(),M=new sr(Ii,Gi,ta,{requeue:ti,send:Ze,sent:st,drop:wt,rspFail:Et,oth:Wt},Kt),ei(),gr(),ln()}o(Zr,"_initDefaults");function Fr(pe,Ne){Ne===0&&Vt&&(Ne=1);var Ge=1e3;return Vt&&(Ge=_t(Vt-1)),Kt.set(pe,Ne*Ge)}o(Fr,"_createTimer");function Cr(){return fn!==null?(Kt.clear(fn),fn=null,kt=0,!0):!1}o(Cr,"_clearScheduledTimer");function gi(pe,Ne){Cr(),pt&&(Kt.clear(pt),pt=null),rn||Bn(1,pe,Ne)}o(gi,"_releaseAllQueues");function gr(){ee[4]={batches:[],iKeyMap:{}},ee[3]={batches:[],iKeyMap:{}},ee[2]={batches:[],iKeyMap:{}},ee[1]={batches:[],iKeyMap:{}}}o(gr,"_clearQueues");function ii(pe,Ne,Ge){var dt=ee[Ne];dt||(Ne=1,dt=ee[Ne]);var xt=dt.iKeyMap[pe];return!xt&&Ge&&(xt=Tr.create(pe),dt.batches.push(xt),dt.iKeyMap[pe]=xt),xt}o(ii,"_getEventBatch");function Xr(pe,Ne){M.canSendRequest()&&!Vt&&(ze>0&&_n>ze&&(Ne=!0),Ne&&pt==null&&ut.flush(pe,null,20))}o(Xr,"_performAutoFlush");function Mr(pe,Ne){gn&&(pe=(0,ke.Ax)(pe));var Ge=pe.latency,dt=ii(pe.iKey,Ge,!0);return dt.addEvent(pe)?(Ge!==4?(_n++,Ne&&pe.sendAttempt===0&&Xr(!pe.sync,ot>0&&dt.count()>=ot)):Bt++,!0):!1}o(Mr,"_addEventToProperQueue");function vi(pe,Ne,Ge,dt){for(;Ge<=Ne;){var xt=ii(pe,Ne,!0);if(xt&&xt.count()>0){var Qt=xt.split(0,dt),Dn=Qt.count();if(Dn>0)return Ge===4?Bt-=Dn:_n-=Dn,ye(fi,[Qt],Ce.h.QueueFull),!0}Ge++}return pi(),!1}o(vi,"_dropEventWithLatencyOrLess");function pi(){for(var pe=0,Ne=0,Ge=o(function(xt){var Qt=ee[xt];Qt&&Qt.batches&&(0,ke.tO)(Qt.batches,function(Dn){xt===4?pe+=Dn.count():Ne+=Dn.count()})},"_loop_1"),dt=1;dt<=4;dt++)Ge(dt);_n=Ne,Bt=pe}o(pi,"_resetQueueCounts");function ai(pe,Ne,Ge){var dt=!1,xt=Ne===0;return!xt||M.canSendRequest()?(0,H.Lm)(ut.core,function(){return"PostChannel._queueBatches"},function(){for(var Qt=[],Dn=4;Dn>=pe;){var An=ee[Dn];An&&An.batches&&An.batches.length>0&&((0,ke.tO)(An.batches,function(Vn){M.addBatch(Vn)?dt=dt||Vn&&Vn.count()>0:Qt=Qt.concat(Vn.events()),Dn===4?Bt-=Vn.count():_n-=Vn.count()}),An.batches=[],An.iKeyMap={}),Dn--}Qt.length>0&&mi(fi,Qt,Ce.h.KillSwitch),dt&&Ht>=pe&&(Ht=-1,At=0)},function(){return{latency:pe,sendType:Ne,sendReason:Ge}},!xt):(Ht=Ht>=0?Math.min(Ht,pe):pe,At=Math.max(At,Ge)),dt}o(ai,"_queueBatches");function oi(pe,Ne){Bn(1,0,Ne),pi(),$r(function(){pe&&pe(),jt.length>0?pt=Fr(function(){pt=null,oi(jt.shift(),Ne)},0):(pt=null,In())})}o(oi,"_flushImpl");function $r(pe){M.isCompletelyIdle()?pe():pt=Fr(function(){pt=null,$r(pe)},Zi)}o($r,"_waitForIdleManager");function Kr(){Cr(),ei(),hr=be,In()}o(Kr,"_resetTransmitProfiles");function ei(){Jn={},Jn[be]=[2,1,0],Jn[xe]=[6,3,0],Jn[q]=[18,9,0]}o(ei,"_initializeProfiles");function ti(pe,Ne){var Ge=[],dt=qt;vn&&(dt=un),(0,ke.tO)(pe,function(xt){xt&&xt.count()>0&&(0,ke.tO)(xt.events(),function(Qt){Qt&&(Qt.sync&&(Qt.latency=4,Qt.sync=!1),Qt.sendAttempt<dt?((0,$e.if)(Qt,ut.identifier),It(Qt,!1)):Ge.push(Qt))})}),Ge.length>0&&mi(fi,Ge,Ce.h.NonRetryableStatus),vn&&gi(2,2)}o(ti,"_requeueEvents");function Yn(pe,Ne){var Ge=ut._notificationManager||{},dt=Ge[pe];if(dt)try{dt.apply(Ge,Ne)}catch(xt){(0,Me.kP)(ut.diagLog(),1,74,pe+" notification failed: "+xt)}}o(Yn,"_callNotification");function mi(pe,Ne){for(var Ge=[],dt=2;dt<arguments.length;dt++)Ge[dt-2]=arguments[dt];Ne&&Ne.length>0&&Yn(pe,[Ne].concat(Ge))}o(mi,"_notifyEvents");function ye(pe,Ne){for(var Ge=[],dt=2;dt<arguments.length;dt++)Ge[dt-2]=arguments[dt];Ne&&Ne.length>0&&(0,ke.tO)(Ne,function(xt){xt&&xt.count()>0&&Yn(pe,[xt.events()].concat(Ge))})}o(ye,"_notifyBatchEvents");function Ze(pe,Ne,Ge){pe&&pe.length>0&&Yn("eventsSendRequest",[Ne>=1e3&&Ne<=1999?Ne-1e3:0,Ge!==!0])}o(Ze,"_sendingEvent");function st(pe,Ne){ye("eventsSent",pe,Ne),In()}o(st,"_eventsSentEvent");function wt(pe,Ne){ye(fi,pe,Ne>=8e3&&Ne<=8999?Ne-8e3:Ce.h.Unknown)}o(wt,"_eventsDropped");function Et(pe){ye(fi,pe,Ce.h.NonRetryableStatus),In()}o(Et,"_eventsResponseFail");function Wt(pe,Ne){ye(fi,pe,Ce.h.Unknown),In()}o(Wt,"_otherEvent");function ln(){!rt||!rt.disableAutoBatchFlushLimit?ot=Math.max(Ii*(Gi+1),tr/6):ot=0}o(ln,"_setAutoLimits"),(0,ke.l_)(ut,"_setTimeoutOverride",function(){return Kt.set},function(pe){Kt=Dr(pe,Kt.clear)}),(0,ke.l_)(ut,"_clearTimeoutOverride",function(){return Kt.clear},function(pe){Kt=Dr(Kt.set,pe)})}),vt}return o(tt,"PostChannel"),tt.__ieDyn=1,tt}(Xe.i);const zi=ri},4873:(at,l,b)=>{"use strict";b.d(l,{By:()=>v,cc:()=>w});var R=b(6708);function v(B){var N={};return(0,R.rW)(B,function(m,y){N[m]=y,N[y]=m}),(0,R._A)(N)}o(v,"createEnumStyle");function I(B){var N={};return objForEachKey(B,function(m,y){N[m]=m,N[y]=m}),deepFreeze(N)}o(I,"createEnumMap");function w(B){var N={};return(0,R.rW)(B,function(m,y){N[m]=y[1],N[y[0]]=y[1]}),(0,R._A)(N)}o(w,"createValueMap")},5928:(at,l,b)=>{"use strict";b.d(l,{h:()=>v});var R=b(4873),v=(0,R.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},7310:(at,l,b)=>{"use strict";b.d(l,{X:()=>X,v:()=>Z});var R=b(4873),v,I="Failed",w=I+"MonitorAjax",B="Track",N="Start",m="Stop",y="Event",U="AuthContext",W="Exception",_="Local",O="Session",F="Storage",V="Browser",se="Cannot",Ae="Buffer",$="InstrumentationKey",X=(0,R.By)({CRITICAL:1,WARNING:2}),Z=(0,R.By)((v={},v[V+"DoesNotSupport"+_+F]=0,v[V+se+"Read"+_+F]=1,v[V+se+"Read"+O+F]=2,v[V+se+"Write"+_+F]=3,v[V+se+"Write"+O+F]=4,v[V+I+"RemovalFrom"+_+F]=5,v[V+I+"RemovalFrom"+O+F]=6,v[se+"SendEmptyTelemetry"]=7,v.ClientPerformanceMathError=8,v["ErrorParsingAI"+O+"Cookie"]=9,v.ErrorPVCalc=10,v[W+"WhileLoggingError"]=11,v[I+"AddingTelemetryTo"+Ae]=12,v[w+"Abort"]=13,v[w+"Dur"]=14,v[w+"Open"]=15,v[w+"RSC"]=16,v[w+"Send"]=17,v[w+"GetCorrelationHeader"]=18,v[I+"ToAddHandlerForOnBeforeUnload"]=19,v[I+"ToSendQueuedTelemetry"]=20,v[I+"ToReportDataLoss"]=21,v["Flush"+I]=22,v.MessageLimitPerPVExceeded=23,v.MissingRequiredFieldSpecification=24,v.NavigationTimingNotSupported=25,v.OnError=26,v[O+"RenewalDateIsZero"]=27,v.SenderNotInitialized=28,v[N+B+y+I]=29,v[m+B+y+I]=30,v[N+B+I]=31,v[m+B+I]=32,v.TelemetrySampledAndNotSent=33,v[B+y+I]=34,v[B+W+I]=35,v[B+"Metric"+I]=36,v[B+"PV"+I]=37,v[B+"PV"+I+"Calc"]=38,v[B+"Trace"+I]=39,v["Transmission"+I]=40,v[I+"ToSet"+F+Ae]=41,v[I+"ToRestore"+F+Ae]=42,v.InvalidBackendResponse=43,v[I+"ToFixDepricatedValues"]=44,v.InvalidDurationValue=45,v.TelemetryEnvelopeInvalid=46,v.CreateEnvelopeError=47,v[se+"SerializeObject"]=48,v[se+"SerializeObjectNonSerializable"]=49,v.CircularReferenceDetected=50,v["Clear"+U+I]=51,v[W+"Truncated"]=52,v.IllegalCharsInName=53,v.ItemNotInArray=54,v.MaxAjaxPerPVExceeded=55,v.MessageTruncated=56,v.NameTooLong=57,v.SampleRateOutOfRange=58,v["Set"+U+I]=59,v["Set"+U+I+"AccountName"]=60,v.StringValueTooLong=61,v.StartCalledMoreThanOnce=62,v.StopCalledWithoutStart=63,v["TelemetryInitializer"+I]=64,v.TrackArgumentsNotSpecified=65,v.UrlTooLong=66,v[O+F+Ae+"Full"]=67,v[se+"AccessCookie"]=68,v.IdTooLong=69,v.InvalidEvent=70,v[w+"SetRequestHeader"]=71,v["Send"+V+"InfoOnUserInit"]=72,v["Plugin"+W]=73,v["Notification"+W]=74,v.SnippetScriptLoadFailure=99,v["Invalid"+$]=100,v[se+"ParseAiBlobValue"]=101,v.InvalidContentBlob=102,v[B+"PageAction"+y+I]=103,v[I+"AddingCustomDefinedRequestContext"]=104,v["InMemory"+F+Ae+"Full"]=105,v[$+"Deprecation"]=106,v))},5121:(at,l,b)=>{"use strict";b.d(l,{F:()=>W});var R=b(1088),v=b(1679),I=b(8096),w=b(6900),B=b(5018),N=b(6708),m=b(6041),y=b(1880),U=b(9288),W=function(_){(0,R.ne)(O,_);function O(){var F=_.call(this)||this;return(0,v.Z)(O,F,function(V,se){V[I.VL]=function(X,Z,k,j){se[I.VL](X,Z,k||new B.AQ(X),j||new y.f(X))},V.track=function(X){(0,U.Lm)(V[m.kl](),function(){return"AppInsightsCore:track"},function(){X===null&&($(X),(0,N._y)("Invalid telemetry item")),Ae(X),se.track(X)},function(){return{item:X}},!X.sync)};function Ae(X){(0,N.le)(X[I.I])&&($(X),(0,N._y)("telemetry name required"))}o(Ae,"_validateTelemetryItem");function $(X){var Z=V[I.tb]();Z&&Z[m.$F]([X],2)}o($,"_notifyInvalidEvent")}),F}return o(O,"AppInsightsCore"),O.__ieDyn=1,O}(w.A)},6900:(at,l,b)=>{"use strict";b.d(l,{A:()=>fe});var R=b(1088),v=b(1679),I=b(2091),w=b(8096),B=b(6708),N=b(6041),m=b(1589),y=b(3833),U=500,W="Channel has invalid priority - ";function _(ue,G,he){G&&(0,B.kJ)(G)&&G[w.R5]>0&&(G=G.sort(function(Le,Je){return Le[N.yi]-Je[N.yi]}),(0,B.tO)(G,function(Le){Le[N.yi]<U&&(0,B._y)(W+Le[w.pZ])}),ue[w.MW]({queue:(0,B.FL)(G),chain:(0,m.jV)(G,he[w.TC],he)}))}o(_,"_addChannelQueue");function O(ue,G){function he(){return(0,m.CD)(null,G[w.TC],G,null)}o(he,"_getTelCtx");function Le(L,H,te,ge){var $e=L?L[w.R5]+1:1;function ke(){$e--,$e===0&&(ge&&ge(),ge=null)}o(ke,"_runChainOnComplete"),$e>0&&(0,B.tO)(L,function(de){if(de&&de.queue[w.R5]>0){var Ce=de.chain,Me=H[w.zV](Ce);Me[w.Fc](ke),te(Me)}else $e--}),ke()}o(Le,"_processChannelQueue");function Je(L,H){var te=H||{reason:0};return Le(ue,L,function(ge){ge[w.uL](te)},function(){L[w.uL](te)}),!0}o(Je,"_doUpdate");function oe(L,H){var te=H||{reason:0,isAsync:!1};return Le(ue,L,function(ge){ge[w.uL](te)},function(){L[w.uL](te),ft=!1}),!0}o(oe,"_doTeardown");function nt(L){var H=null;return ue&&ue[w.R5]>0&&(0,B.tO)(ue,function(te){if(te&&te.queue[w.R5]>0&&((0,B.tO)(te.queue,function(ge){if(ge[w.pZ]===L)return H=ge,-1}),H))return-1}),H}o(nt,"_getChannel");var ft=!1,ht={identifier:"ChannelControllerPlugin",priority:U,initialize:function(L,H,te,ge){ft=!0,(0,B.tO)(ue,function($e){$e&&$e.queue[w.R5]>0&&(0,y.bP)((0,m.CD)($e.chain,L,H),te)})},isInitialized:function(){return ft},processTelemetry:function(L,H){Le(ue,H||he(),function(te){te[w.uL](L)},function(){H[w.uL](L)})},update:Je,pause:function(){Le(ue,he(),function(L){L.iterate(function(H){H.pause&&H.pause()})},null)},resume:function(){Le(ue,he(),function(L){L.iterate(function(H){H.resume&&H.resume()})},null)},teardown:oe,getChannel:nt,flush:function(L,H,te,ge){var $e=1,ke=!1,de=null;ge=ge||5e3;function Ce(){$e--,ke&&$e===0&&(de&&(clearTimeout(de),de=null),H&&H(ke),H=null)}return o(Ce,"doCallback"),Le(ue,he(),function(Me){Me.iterate(function(Xe){if(Xe[w.kL]){$e++;var be=!1;Xe[w.kL](L,function(){be=!0,Ce()},te)||be||(L&&de==null?de=setTimeout(function(){de=null,Ce()},ge):Ce())}})},function(){ke=!0,Ce()}),!0},_setQueue:function(L){ue=L}};return ht}o(O,"createChannelControllerPlugin");function F(ue,G,he){var Le=[];if(ue&&(0,B.tO)(ue,function(oe){return _(Le,oe,he)}),G){var Je=[];(0,B.tO)(G,function(oe){oe[N.yi]>U&&Je[w.MW](oe)}),_(Le,Je,he)}return Le}o(F,"createChannelQueues");var V=b(3242),se=b(5883),Ae=b(7158),$=b(5018),X=b(9288),Z=b(4063),k=b(7630),j=function(ue){(0,R.ne)(G,ue);function G(){var he=ue.call(this)||this;he.identifier="TelemetryInitializerPlugin",he.priority=199;var Le,Je;oe(),(0,v.Z)(G,he,function(nt,ft){nt.addTelemetryInitializer=function(ht){var L={id:Le++,fn:ht};Je[w.MW](L);var H={remove:function(){(0,B.tO)(Je,function(te,ge){if(te.id===L.id)return Je[w.cb](ge,1),-1})}};return H},nt[N.hL]=function(ht,L){for(var H=!1,te=Je[w.R5],ge=0;ge<te;++ge){var $e=Je[ge];if($e)try{if($e.fn[w.ZV](null,[ht])===!1){H=!0;break}}catch(ke){(0,$.kP)(L[w.mc](),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,B.jj)(ke),{exception:(0,k.eU)(ke)},!0)}}H||nt[w.uL](ht,L)},nt[w.F3]=function(){oe()}});function oe(){Le=0,Je=[]}return o(oe,"_initDefaults"),he}return o(G,"TelemetryInitializerPlugin"),G.__ieDyn=1,G}(Z.i),x=b(310),le="Plugins must provide initialize method",K="_notificationManager",ve="SDK is still unloading...",_e="SDK is not initialized",Pe={loggingLevelConsole:1};function ne(ue,G){return new X.Jk(G)}o(ne,"_createPerfManager");function Se(ue,G,he){var Le,Je=[],oe={};return(0,B.tO)(he,function(nt){((0,B.le)(nt)||(0,B.le)(nt[w.VL]))&&(0,B._y)(le);var ft=nt[N.yi],ht=nt[w.pZ];nt&&ft&&((0,B.le)(oe[ft])?oe[ft]=ht:(0,$.jV)(ue,"Two extensions have same priority #"+ft+" - "+oe[ft]+", "+ht)),(!ft||ft<G)&&Je[w.MW](nt)}),Le={all:he},Le[N.oV]=Je,Le}o(Se,"_validateExtensions");function D(ue,G){var he=!1;return(0,B.tO)(G,function(Le){if(Le===ue)return he=!0,-1}),he}o(D,"_isPluginPresent");function He(){var ue;return(0,I.pu)((ue={},ue[w.g]=function(G){},ue[w.n7]=function(G){},ue[N.uC]=function(G){},ue[N.$F]=function(G,he){},ue[N.f_]=function(G,he){},ue))}o(He,"_createDummyNotificationManager");var fe=function(){function ue(){var G,he,Le,Je,oe,nt,ft,ht,L,H,te,ge,$e,ke,de,Ce,Me,Xe,be,xe,q=0;(0,v.Z)(ue,this,function(Re){re(),Re[w.yl]=function(){return he},Re[w.VL]=function(ct,$t,nn,en){ke&&(0,B._y)(ve),Re[w.yl]()&&(0,B._y)("Core should not be initialized more than once"),G=ct||{},Re[w.TC]=G,(0,B.le)(ct[w.p$])&&(0,B._y)("Please provide instrumentation key"),Je=en,Re[K]=en,Qn(),$n(),vr(),nn&&(Re[w.eZ]=nn);var an=(0,B.qK)(G,N.js,[]);L=[],L[w.MW].apply(L,(0,R.$h)((0,R.$h)([],$t,!1),an,!1)),ge=(0,B.qK)(G,N.Z,[]),qe(null),(!$e||$e[w.R5]===0)&&(0,B._y)("No "+N.Z+" available"),he=!0,Re.releaseQueue()},Re.getTransmissionControls=function(){var ct=[];return $e&&(0,B.tO)($e,function($t){ct[w.MW]($t.queue)}),(0,B.FL)(ct)},Re.track=function(ct){ct.iKey=ct.iKey||G[w.p$],ct[w.Z_]=ct[w.Z_]||(0,B.Y6)(new Date),ct.ver=ct.ver||"4.0",!ke&&Re[w.yl]()?J()[w.uL](ct):Le[w.MW](ct)},Re[w.SD]=J,Re[w.tb]=function(){return Je||(Je=He(),Re[K]=Je),Je},Re[w.g]=function(ct){Je&&Je[w.g](ct)},Re[w.n7]=function(ct){Je&&Je[w.n7](ct)},Re.getCookieMgr=function(){return ft||(ft=(0,V.Nz)(G,Re[w.eZ])),ft},Re.setCookieMgr=function(ct){ft=ct},Re[N.kl]=function(){if(!oe&&!nt&&(0,B.v4)(G.enablePerfMgr)){var ct=(0,B.v4)(G[N.DN]);(0,B.mf)(ct)&&(nt=ct(Re,Re[w.tb]()))}return oe||nt||(0,X.j5)()},Re.setPerfMgr=function(ct){oe=ct},Re.eventCnt=function(){return Le[w.R5]},Re.releaseQueue=function(){if(he&&Le[w.R5]>0){var ct=Le;Le=[],(0,B.tO)(ct,function($t){J()[w.uL]($t)})}},Re.pollInternalLogs=function(ct){Ce=ct||null;var $t=(0,B.v4)(G.diagnosticLogInterval);return(!$t||!($t>0))&&($t=1e4),q&&clearInterval(q),q=setInterval(function(){wn()},$t),q},Re[w.LS]=function(){q&&(clearInterval(q),q=0,wn())},(0,B.Vb)(Re,function(){return de},["addTelemetryInitializer"]),Re.unload=function(ct,$t,nn){var en;ct===void 0&&(ct=!0),he||(0,B._y)(_e),ke&&(0,B._y)(ve);var an=(en={reason:50},en[w.d]=ct,en.flushComplete=!1,en),Rn=(0,m.Bt)(Gt(),Re);Rn[w.Fc](function(){re(),$t&&$t(an)},Re);function ar(pr){an.flushComplete=pr,ke=!0,Xe.run(Rn,an),Re[w.LS](),Rn[w.uL](an)}o(ar,"_doUnload"),jn(ct,ar,6,nn)||ar(!1)},Re[w.TO]=Lt,Re.addPlugin=function(ct,$t,nn,en){if(!ct){en&&en(!1),Lr(le);return}var an=Lt(ct[w.pZ]);if(an&&!$t){en&&en(!1),Lr("Plugin ["+ct[w.pZ]+"] is already loaded!");return}var Rn={reason:16};function ar(mr){L[w.MW](ct),Rn.added=[ct],qe(Rn),en&&en(!0)}if(o(ar,"_addPlugin"),an){var pr=[an.plugin],Kn={reason:2,isAsync:!!nn};Ln(pr,Kn,function(mr){mr?(Rn.removed=pr,Rn.reason|=32,ar(!0)):en&&en(!1)})}else ar(!1)},Re.evtNamespace=function(){return Me},Re[w.kL]=jn,Re.getTraceCtx=function(ct){return xe||(xe=(0,y.Yn)()),xe},Re.setTraceCtx=function(ct){xe=ct||null},(0,B.Oi)(Re,"addUnloadCb",function(){return Xe},"add");function re(){he=!1,G=(0,B.mm)(!0,{},Pe),Re[w.TC]=G,Re[w.eZ]=new $.AQ(G),Re[w.iC]=[],de=new j,Le=[],Je=null,oe=null,nt=null,ft=null,ht=null,H=null,L=[],te=null,ge=null,$e=null,ke=!1,Ce=null,Me=(0,se.J)("AIBaseCore",!0),Xe=(0,x.Y)(),xe=null}o(re,"_initDefaults");function J(){return(0,m.CD)(Gt(),G,Re)}o(J,"_createTelCtx");function qe(ct){var $t=Se(Re[w.eZ],U,L);H=$t[N.oV],ht=null;var nn=$t.all;if($e=(0,B.FL)(F(ge,nn,Re)),te){var en=(0,B.UA)(nn,te);en!==-1&&nn[w.cb](en,1),en=(0,B.UA)(H,te),en!==-1&&H[w.cb](en,1),te._setQueue($e)}else te=O($e,Re);nn[w.MW](te),H[w.MW](te),Re[w.iC]=(0,y.AA)(nn),te[w.VL](G,Re,nn),(0,y.bP)(J(),nn),Re[w.iC]=(0,B.FL)((0,y.AA)(H||[])).slice(),ct&&Ir(ct)}o(qe,"_initPluginChain");function Lt(ct){var $t,nn=null,en=null;return(0,B.tO)(Re[w.iC],function(an){if(an[w.pZ]===ct&&an!==te&&an!==de)return en=an,-1}),!en&&te&&(en=te.getChannel(ct)),en&&(nn=($t={plugin:en},$t[w.$h]=function(an){(0,y.OY)(en)[N.mE]=!an},$t.isEnabled=function(){var an=(0,y.OY)(en);return!an[w.fi]&&!an[N.mE]},$t.remove=function(an,Rn){var ar;an===void 0&&(an=!0);var pr=[en],Kn=(ar={reason:1},ar[w.d]=an,ar);Ln(pr,Kn,function(mr){mr&&qe({reason:32,removed:pr}),Rn&&Rn(mr)})},$t)),nn}o(Lt,"_getPlugin");function Gt(){if(!ht){var ct=(H||[]).slice();(0,B.UA)(ct,de)===-1&&ct[w.MW](de),ht=(0,m.jV)((0,y.AA)(ct),G,Re)}return ht}o(Gt,"_getPluginChain");function Ln(ct,$t,nn){if(ct&&ct[w.R5]>0){var en=(0,m.jV)(ct,G,Re),an=(0,m.Bt)(en,Re);an[w.Fc](function(){var Rn=!1,ar=[];(0,B.tO)(L,function(Kn,mr){D(Kn,ct)?Rn=!0:ar[w.MW](Kn)}),L=ar;var pr=[];ge&&((0,B.tO)(ge,function(Kn,mr){var Br=[];(0,B.tO)(Kn,function(xn){D(xn,ct)?Rn=!0:Br[w.MW](xn)}),pr[w.MW](Br)}),ge=pr),nn&&nn(Rn)}),an[w.uL]($t)}else nn(!1)}o(Ln,"_removePlugins");function wn(){var ct=Re[w.eZ]?Re[w.eZ].queue:[];ct&&((0,B.tO)(ct,function($t){var nn,en=(nn={},nn[w.I]=Ce||"InternalMessageId: "+$t[w.Gc],nn.iKey=(0,B.v4)(G[w.p$]),nn.time=(0,B.Y6)(new Date),nn.baseType=$.lQ.dataType,nn.baseData={message:$t[w.gU]},nn);Re.track(en)}),ct[w.R5]=0)}o(wn,"_flushInternalLogs");function jn(ct,$t,nn,en){return te?te[w.kL](ct,$t,nn||6,en):($t&&$t(!1),!0)}o(jn,"_flushChannels");function Qn(){var ct=(0,B.v4)(G.disableDbgExt);ct===!0&&be&&(Je[w.n7](be),be=null),Je&&!be&&ct!==!0&&(be=(0,Ae.p)(G),Je[w.g](be))}o(Qn,"_initDebugListener");function $n(){var ct=(0,B.v4)(G.enablePerfMgr);!ct&&nt&&(nt=null),ct&&(0,B.qK)(G,N.DN,ne)}o($n,"_initPerfManager");function vr(){var ct=(0,B.qK)(G,N.Zh,{});ct.NotificationManager=Je}o(vr,"_initExtConfig");function Ir(ct){var $t=(0,m.xy)(Gt(),Re);(!Re._updateHook||Re._updateHook($t,ct)!==!0)&&$t[w.uL](ct)}o(Ir,"_doUpdate");function Lr(ct){var $t=Re[w.eZ];$t?(0,$.kP)($t,2,73,ct):(0,B._y)(ct)}o(Lr,"_logOrThrowError")})}return o(ue,"BaseCore"),ue.__ieDyn=1,ue}()},4063:(at,l,b)=>{"use strict";b.d(l,{i:()=>y});var R=b(1679),v=b(8096),I=b(6708),w=b(6041),B=b(1589),N=b(310),m="getPlugin",y=function(){function U(){var W=this,_,O,F,V,se;X(),(0,R.Z)(U,W,function(Z){Z[v.VL]=function(k,j,x,le){$(k,j,le),_=!0},Z[v.fi]=function(k,j){var x,le=Z[w.oV];if(!le||k&&le!==k[w.oV]())return;var K,ve=!1,_e=k||(0,B.Bt)(null,le,F&&F[m]?F[m]():F),Pe=j||(x={reason:0},x[v.d]=!1,x);function ne(){if(!ve){ve=!0,V.run(_e,j);var Se=se;se=[],(0,I.tO)(Se,function(D){D.rm()}),K===!0&&_e[v.uL](Pe),X()}}return o(ne,"_unloadCallback"),!Z[v.F3]||Z[v.F3](_e,Pe,ne)!==!0?ne():K=!0,K},Z[v.Tu]=function(k,j){var x=Z[w.oV];if(!x||k&&x!==k[w.oV]())return;var le,K=!1,ve=k||(0,B.xy)(null,x,F&&F[m]?F[m]():F),_e=j||{reason:0};function Pe(){K||(K=!0,$(ve.getCfg(),ve.core(),ve[v.W2]()))}return o(Pe,"_updateCallback"),!Z._doUpdate||Z._doUpdate(ve,_e,Pe)!==!0?Pe():le=!0,le},Z._addHook=function(k){k&&((0,I.kJ)(k)?se=se.concat(k):se[v.MW](k))},(0,I.Oi)(Z,"_addUnloadCb",function(){return V},"add")}),W[v.mc]=function(Z){return Ae(Z)[v.mc]()},W[v.yl]=function(){return _},W.setInitialized=function(Z){_=Z},W[v.Jd]=function(Z){F=Z},W[v.uL]=function(Z,k){k?k[v.uL](Z):F&&(0,I.mf)(F[w.hL])&&F[w.hL](Z,null)},W._getTelCtx=Ae;function Ae(Z){Z===void 0&&(Z=null);var k=Z;if(!k){var j=O||(0,B.CD)(null,{},W[w.oV]);F&&F[m]?k=j[v.zV](null,F[m]):k=j[v.zV](null,F)}return k}o(Ae,"_getTelCtx");function $(Z,k,j){Z&&(0,I.sO)(Z,w.Zh,[],null,I.le),!j&&k&&(j=k[v.SD]()[v.W2]());var x=F;F&&F[m]&&(x=F[m]()),W[w.oV]=k,O=(0,B.CD)(j,Z,k,x)}o($,"_setDefaults");function X(){_=!1,W[w.oV]=null,O=null,F=null,se=[],V=(0,N.Y)()}o(X,"_initDefaults")}return o(U,"BaseTelemetryPlugin"),U.__ieDyn=1,U}()},3242:(at,l,b)=>{"use strict";b.d(l,{JP:()=>ve,Nz:()=>_e,UY:()=>ue,kj:()=>k,p7:()=>Pe});var R=b(8096),v=b(5018),I=b(7630),w=b(6708),B=b(6041),N="toGMTString",m="toUTCString",y="cookie",U="expires",W="enabled",_="isCookieUseDisabled",O="disableCookiesUsage",F="_ckMgr",V=null,se=null,Ae=null,$=(0,I.Me)(),X={},Z={};function k(G,he){var Le=_e[F]||Z[F];return Le||(Le=_e[F]=_e(G,he),Z[F]=Le),Le}o(k,"_gblCookieMgr");function j(G){return G?G.isEnabled():!0}o(j,"_isMgrEnabled");function x(G){var he=G[R.Lk]=G[R.Lk]||{};if((0,w.sO)(he,"domain",G.cookieDomain,w.BX,w.le),(0,w.sO)(he,"path",G.cookiePath||"/",null,w.le),(0,w.le)(he[W])){var Le=void 0;(0,w.o8)(G[_])||(Le=!G[_]),(0,w.o8)(G[O])||(Le=!G[O]),he[W]=Le}return he}o(x,"_createCookieMgrConfig");function le(G,he){return he&&G&&(0,w.kJ)(G.ignoreCookies)?G.ignoreCookies[R.ou](he)!==-1:!1}o(le,"_isIgnoredCookie");function K(G,he){return he&&G&&(0,w.kJ)(G.blockedCookies)&&G.blockedCookies[R.ou](he)!==-1?!0:le(G,he)}o(K,"_isBlockedCookie");function ve(G,he){var Le;if(G)Le=G.getCookieMgr();else if(he){var Je=he[R.Lk];Je[F]?Le=Je[F]:Le=_e(he)}return Le||(Le=k(he,(G||{})[R.eZ])),Le}o(ve,"safeGetCookieMgr");function _e(G,he){var Le,Je=x(G||Z),oe=Je.path||"/",nt=Je.domain,ft=Je[W]!==!1,ht=(Le={isEnabled:function(){var L=ft&&Pe(he),H=Z[F];return L&&H&&ht!==H&&(L=j(H)),L}},Le[R.$h]=function(L){ft=L!==!1},Le.set=function(L,H,te,ge,$e){var ke=!1;if(j(ht)&&!K(Je,L)){var de={},Ce=(0,w.nd)(H||B.qS),Me=Ce[R.ou](";");if(Me!==-1&&(Ce=(0,w.nd)(H[R.zc](0,Me)),de=ne(H[R.zc](Me+1))),(0,w.sO)(de,"domain",ge||nt,w.fQ,w.o8),!(0,w.le)(te)){var Xe=(0,I.w1)();if((0,w.o8)(de[U])){var be=(0,w.m6)(),xe=be+te*1e3;if(xe>0){var q=new Date;q.setTime(xe),(0,w.sO)(de,U,Se(q,Xe?N:m)||Se(q,Xe?N:m)||B.qS,w.fQ)}}Xe||(0,w.sO)(de,"max-age",B.qS+te,null,w.o8)}var Re=(0,I.k$)();Re&&Re.protocol==="https:"&&((0,w.sO)(de,"secure",null,null,w.o8),se===null&&(se=!ue(((0,I.jW)()||{})[R.qV])),se&&(0,w.sO)(de,"SameSite","None",null,w.o8)),(0,w.sO)(de,"path",$e||oe,null,w.o8);var re=Je.setCookie||fe;re(L,D(Ce,de)),ke=!0}return ke},Le.get=function(L){var H=B.qS;return j(ht)&&!le(Je,L)&&(H=(Je.getCookie||He)(L)),H},Le.del=function(L,H){var te=!1;return j(ht)&&(te=ht.purge(L,H)),te},Le.purge=function(L,H){var te,ge=!1;if(Pe(he)){var $e=(te={},te.path=H||"/",te[U]="Thu, 01 Jan 1970 00:00:01 GMT",te);(0,I.w1)()||($e["max-age"]="0");var ke=Je.delCookie||fe;ke(L,D(B.qS,$e)),ge=!0}return ge},Le);return ht[F]=ht,ht}o(_e,"createCookieMgr");function Pe(G){if(V===null){V=!1;try{var he=$||{};V=he[y]!==void 0}catch(Le){(0,v.kP)(G,2,68,"Cannot access document.cookie - "+(0,w.jj)(Le),{exception:(0,I.eU)(Le)})}}return V}o(Pe,"areCookiesSupported");function ne(G){var he={};if(G&&G[R.R5]){var Le=(0,w.nd)(G)[R.w6](";");(0,w.tO)(Le,function(Je){if(Je=(0,w.nd)(Je||B.qS),Je){var oe=Je[R.ou]("=");oe===-1?he[Je]=null:he[(0,w.nd)(Je[R.zc](0,oe))]=(0,w.nd)(Je[R.zc](oe+1))}})}return he}o(ne,"_extractParts");function Se(G,he){return(0,w.mf)(G[he])?G[he]():null}o(Se,"_formatDate");function D(G,he){var Le=G||B.qS;return(0,w.rW)(he,function(Je,oe){Le+="; "+Je+((0,w.le)(oe)?B.qS:"="+oe)}),Le}o(D,"_formatCookieValue");function He(G){var he=B.qS;if($){var Le=$[y]||B.qS;Ae!==Le&&(X=ne(Le),Ae=Le),he=(0,w.nd)(X[G]||B.qS)}return he}o(He,"_getCookieValue");function fe(G,he){$&&($[y]=G+"="+he)}o(fe,"_setCookieValue");function ue(G){return(0,w.HD)(G)?!!((0,w._Q)(G,"CPU iPhone OS 12")||(0,w._Q)(G,"iPad; CPU OS 12")||(0,w._Q)(G,"Macintosh; Intel Mac OS X 10_14")&&(0,w._Q)(G,"Version/")&&(0,w._Q)(G,"Safari")||(0,w._Q)(G,"Macintosh; Intel Mac OS X 10_14")&&(0,w.Id)(G,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,w._Q)(G,"Chrome/5")||(0,w._Q)(G,"Chrome/6")||(0,w._Q)(G,"UnrealEngine")&&!(0,w._Q)(G,"Chrome")||(0,w._Q)(G,"UCBrowser/12")||(0,w._Q)(G,"UCBrowser/11")):!1}o(ue,"uaDisallowsSameSiteNone")},5843:(at,l,b)=>{"use strict";b.d(l,{DO:()=>se,GW:()=>O,Jj:()=>F,Tr:()=>Ae,d8:()=>le,ej:()=>x,kT:()=>K,oF:()=>k,vn:()=>j,zB:()=>X});var R=b(2091),v=b(8096),I=b(3242),w=b(7630),B=b(4869),N=b(6708),m=b(6041),y=b(4878),U=null,W,_=null;function O(){var ve=se();return ve[v.zc](0,8)+"-"+ve[v.zc](8,12)+"-"+ve[v.zc](12,16)+"-"+ve[v.zc](16,20)+"-"+ve[v.zc](20)}o(O,"newGuid");function F(){var ve=(0,w.r)();return ve&&ve.now?ve.now():(0,N.m6)()}o(F,"perfNow");function V(ve,_e){if(ve&&_e){var Pe=ve[_DYN_LENGTH],ne=Pe-_e[_DYN_LENGTH];return ve[_DYN_SUBSTRING](ne>=0?ne:0,Pe)===_e}return!1}o(V,"strEndsWith");function se(){for(var ve=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],_e=m.qS,Pe,ne=0;ne<4;ne++)Pe=(0,y._l)(),_e+=ve[Pe&15]+ve[Pe>>4&15]+ve[Pe>>8&15]+ve[Pe>>12&15]+ve[Pe>>16&15]+ve[Pe>>20&15]+ve[Pe>>24&15]+ve[Pe>>28&15];var Se=ve[8+((0,y._l)()&3)|0];return _e[v.Jn](0,8)+_e[v.Jn](9,4)+"4"+_e[v.Jn](13,3)+Se+_e[v.Jn](16,3)+_e[v.Jn](19,12)}o(se,"generateW3CId");var Ae={_canUseCookies:void 0,isTypeof:N.Ym,isUndefined:N.o8,isNullOrUndefined:N.le,hasOwnProperty:N.nr,isFunction:N.mf,isObject:N.Kn,isDate:N.J_,isArray:N.kJ,isError:N.VZ,isString:N.HD,isNumber:N.hj,isBoolean:N.jn,toISOString:N.Y6,arrForEach:N.tO,arrIndexOf:N.UA,arrMap:N.Mr,arrReduce:N.Xz,strTrim:N.nd,objCreate:R.pu,objKeys:N.FY,objDefineAccessors:N.l_,addEventHandler:B.Ib,dateNow:N.m6,isIE:w.w1,disableCookies:k,newGuid:O,perfNow:F,newId:y.pZ,randomValue:y.az,random32:y._l,mwcRandomSeed:y.CN,mwcRandom32:y.F6,generateW3CId:se},$=/[xy]/g,X={Attach:B.pZ,AttachEvent:B.pZ,Detach:B.pD,DetachEvent:B.pD};function Z(ve,_e){var Pe=(0,I.kj)(ve,_e),ne=Ae._canUseCookies;return U===null&&(U=[],W=ne,(0,N.l_)(Ae,"_canUseCookies",function(){return W},function(Se){W=Se,(0,N.tO)(U,function(D){D[v.$h](Se)})})),(0,N.UA)(U,Pe)===-1&&U[v.MW](Pe),(0,N.jn)(ne)&&Pe[v.$h](ne),(0,N.jn)(W)&&Pe[v.$h](W),Pe}o(Z,"_legacyCookieMgr");function k(){Z()[v.$h](!1)}o(k,"disableCookies");function j(ve){return Z(null,ve).isEnabled()}o(j,"canUseCookies");function x(ve,_e){return Z(null,ve).get(_e)}o(x,"getCookie");function le(ve,_e,Pe,ne){Z(null,ve).set(_e,Pe,null,ne)}o(le,"setCookie");function K(ve,_e){return Z(null,ve).del(_e)}o(K,"deleteCookie")},5883:(at,l,b)=>{"use strict";b.d(l,{J:()=>F,K:()=>V});var R=b(4392),v=b(8096),I=b(6708),w=b(6041),B=b(4878),N=R.RJ,m="2.8.12",y="."+(0,B.pZ)(6),U=0;function W(se,Ae,$){if(N)try{return N(se,Ae,{value:$,enumerable:!1,configurable:!0}),!0}catch(X){}return!1}o(W,"_createAccessor");function _(se){return se[v.xv]===1||se[v.xv]===9||!+se[v.xv]}o(_,"_canAcceptData");function O(se,Ae){var $=Ae[se.id];if(!$){$={};try{_(Ae)&&(W(Ae,se.id,$)||(Ae[se.id]=$))}catch(X){}}return $}o(O,"_getCache");function F(se,Ae){return Ae===void 0&&(Ae=!1),(0,I.Gf)(se+U+++(Ae?"."+m:w.qS)+y)}o(F,"createUniqueNamespace");function V(se){var Ae={id:F("_aiData-"+(se||w.qS)+"."+m),accept:function($){return _($)},get:function($,X,Z,k){var j=$[Ae.id];return j?j[(0,I.Gf)(X)]:(k&&(j=O(Ae,$),j[(0,I.Gf)(X)]=Z),Z)},kill:function($,X){if($&&$[X])try{delete $[X]}catch(Z){}}};return Ae}o(V,"createElmNodeData")},7158:(at,l,b)=>{"use strict";b.d(l,{j:()=>y,p:()=>U});var R=b(8096),v=b(7630),I=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],w=null,B;function N(W,_){return function(){var O=arguments,F=y(_);if(F){var V=F.listener;V&&V[W]&&V[W][R.ZV](V,O)}}}o(N,"_listenerProxyFunc");function m(){var W=(0,v.a8)("Microsoft");return W&&(w=W.ApplicationInsights),w}o(m,"_getExtensionNamespace");function y(W){var _=w;return!_&&W.disableDbgExt!==!0&&(_=w||m()),_?_.ChromeDbgExt:null}o(y,"getDebugExt");function U(W){if(!B){B={};for(var _=0;_<I[R.R5];_++)B[I[_]]=N(I[_],W)}return B}o(U,"getDebugListener")},5018:(at,l,b)=>{"use strict";b.d(l,{AQ:()=>V,L4:()=>X,jV:()=>$,kP:()=>Ae,lQ:()=>O,vH:()=>F});var R=b(1679),v=b(8096),I=b(7158),w=b(7630),B=b(6708),N=b(6041),m="AI (Internal): ",y="AI: ",U="AITR_";function W(Z){return Z?'"'+Z[v.i7](/\"/g,N.qS)+'"':N.qS}o(W,"_sanitizeDiagnosticText");function _(Z,k){var j=(0,w.dr)();if(j){var x="log";j[Z]&&(x=Z),(0,B.mf)(j[x])&&j[x](k)}}o(_,"_logToConsole");var O=function(){function Z(k,j,x,le){x===void 0&&(x=!1);var K=this;K[v.Gc]=k,K[v.gU]=(x?y:m)+k;var ve=N.qS;(0,w.nS)()&&(ve=(0,w.xA)().stringify(le));var _e=(j?" message:"+W(j):N.qS)+(le?" props:"+W(ve):N.qS);K[v.gU]+=_e}return o(Z,"_InternalLogMessage"),Z.dataType="MessageData",Z}();function F(Z,k){return(Z||{})[v.eZ]||new V(k)}o(F,"safeGetLogger");var V=function(){function Z(k){this.identifier="DiagnosticLogger",this.queue=[];var j=0,x={},le,K,ve,_e;(0,R.Z)(Z,this,function(Pe){Se(k||{}),Pe.consoleLoggingLevel=function(){return le},Pe.telemetryLoggingLevel=function(){return K},Pe.maxInternalMessageLimit=function(){return ve},Pe[v.Fr]=function(){return _e},Pe.throwInternal=function(fe,ue,G,he,Le){Le===void 0&&(Le=!1);var Je=new O(ue,G,Le,he);if(_e)throw(0,w.eU)(Je);var oe=fe===1?N.ys:N.cL;if((0,B.o8)(Je[v.gU]))He("throw"+(fe===1?"Critical":"Warning"),Je);else{if(Le){var nt=+Je[v.Gc];!x[nt]&&le>=fe&&(Pe[oe](Je[v.gU]),x[nt]=!0)}else le>=fe&&Pe[oe](Je[v.gU]);ne(fe,Je)}},Pe[N.cL]=function(fe){_("warn",fe),He("warning",fe)},Pe[N.ys]=function(fe){_("error",fe),He("error",fe)},Pe.resetInternalMessageCount=function(){j=0,x={}},Pe[v.jk]=ne;function ne(fe,ue){if(!D()){var G=!0,he=U+ue[v.Gc];if(x[he]?G=!1:x[he]=!0,G&&(fe<=K&&(Pe.queue[v.MW](ue),j++,He(fe===1?"error":"warn",ue)),j===ve)){var Le="Internal events throttle limit per PageView reached for this app.",Je=new O(23,Le,!1);Pe.queue[v.MW](Je),fe===1?Pe[N.ys](Le):Pe[N.cL](Le)}}}o(ne,"_logInternalMessage");function Se(fe){le=(0,B.v4)(fe.loggingLevelConsole,0),K=(0,B.v4)(fe.loggingLevelTelemetry,1),ve=(0,B.v4)(fe.maxMessageLimit,25),_e=(0,B.v4)(fe.enableDebug,(0,B.v4)(fe[v.Fr],!1))}o(Se,"_setDefaultsFromConfig");function D(){return j>=ve}o(D,"_areInternalMessagesThrottled");function He(fe,ue){var G=(0,I.j)(k||{});G&&G[v.mc]&&G[v.mc](fe,ue)}o(He,"_debugExtMsg")})}return o(Z,"DiagnosticLogger"),Z.__ieDyn=1,Z}();function se(Z){return Z||new V}o(se,"_getLogger");function Ae(Z,k,j,x,le,K){K===void 0&&(K=!1),se(Z).throwInternal(k,j,x,le,K)}o(Ae,"_throwInternal");function $(Z,k){se(Z)[N.cL](k)}o($,"_warnToConsole");function X(Z,k,j){se(Z)[v.jk](k,j)}o(X,"_logInternalMessage")},7630:(at,l,b)=>{"use strict";b.d(l,{JO:()=>Me,Jj:()=>D,MF:()=>Ce,MX:()=>L,Me:()=>fe,Nv:()=>He,Ym:()=>Se,Z3:()=>be,a8:()=>ne,b$:()=>te,cp:()=>Xe,d6:()=>ue,dI:()=>Pe,dr:()=>oe,eU:()=>ke,ed:()=>q,fE:()=>he,gz:()=>H,jW:()=>G,k$:()=>Je,nS:()=>ft,pI:()=>Re,r:()=>nt,s1:()=>Le,sA:()=>$e,w1:()=>ge,xA:()=>ht});var R=b(4392),v=b(2091),I=b(8096),w=b(6708),B=b(6041),N="window",m="document",y="documentMode",U="navigator",W="history",_="location",O="console",F="performance",V="JSON",se="crypto",Ae="msCrypto",$="ReactNative",X="msie",Z="trident/",k="XMLHttpRequest",j=null,x=null,le=!1,K=null,ve=null;function _e(re,J){var qe=!1;if(re){try{if(qe=J in re,!qe){var Lt=re[R.hB];Lt&&(qe=J in Lt)}}catch(Ln){}if(!qe)try{var Gt=new re;qe=!(0,w.o8)(Gt[J])}catch(Ln){}}return qe}o(_e,"_hasProperty");function Pe(re){le=re}o(Pe,"setEnableEnvMocks");function ne(re){var J=(0,v.Rd)();return J&&J[re]?J[re]:re===N&&Se()?window:null}o(ne,"getGlobalInst");function Se(){return Boolean(typeof window===R.fK&&window)}o(Se,"hasWindow");function D(){return Se()?window:ne(N)}o(D,"getWindow");function He(){return Boolean(typeof document===R.fK&&document)}o(He,"hasDocument");function fe(){return He()?document:ne(m)}o(fe,"getDocument");function ue(){return Boolean(typeof navigator===R.fK&&navigator)}o(ue,"hasNavigator");function G(){return ue()?navigator:ne(U)}o(G,"getNavigator");function he(){return Boolean(typeof history===R.fK&&history)}o(he,"hasHistory");function Le(){return he()?history:ne(W)}o(Le,"getHistory");function Je(re){if(re&&le){var J=ne("__mockLocation");if(J)return J}return typeof location===R.fK&&location?location:ne(_)}o(Je,"getLocation");function oe(){return typeof console!==R.jA?console:ne(O)}o(oe,"getConsole");function nt(){return ne(F)}o(nt,"getPerformance");function ft(){return Boolean(typeof JSON===R.fK&&JSON||ne(V)!==null)}o(ft,"hasJSON");function ht(){return ft()?JSON||ne(V):null}o(ht,"getJSON");function L(){return ne(se)}o(L,"getCrypto");function H(){return ne(Ae)}o(H,"getMsCrypto");function te(){var re=G();return re&&re.product?re.product===$:!1}o(te,"isReactNative");function ge(){var re=G();if(re&&(re[I.qV]!==x||j===null)){x=re[I.qV];var J=(x||B.qS)[I.T1]();j=(0,w._Q)(J,X)||(0,w._Q)(J,Z)}return j}o(ge,"isIE");function $e(re){if(re===void 0&&(re=null),!re){var J=G()||{};re=J?(J[I.qV]||B.qS)[I.T1]():B.qS}var qe=(re||B.qS)[I.T1]();if((0,w._Q)(qe,X)){var Lt=fe()||{};return Math.max(parseInt(qe[I.w6](X)[1]),Lt[y]||0)}else if((0,w._Q)(qe,Z)){var Gt=parseInt(qe[I.w6](Z)[1]);if(Gt)return Gt+4}return null}o($e,"getIEVersion");function ke(re){var J=Object[R.hB].toString[I._S](re),qe=B.qS;return J==="[object Error]"?qe="{ stack: '"+re.stack+"', message: '"+re.message+"', name: '"+re[I.I]+"'":ft()&&(qe=ht().stringify(re)),J+qe}o(ke,"dumpObj");function de(re){if(!re||!isString(re)){var J=G()||{};re=J?(J[_DYN_USER_AGENT]||STR_EMPTY)[_DYN_TO_LOWER_CASE]():STR_EMPTY}var qe=(re||STR_EMPTY)[_DYN_TO_LOWER_CASE]();return qe[_DYN_INDEX_OF]("safari")>=0}o(de,"isSafari");function Ce(){return ve===null&&(ve=ue()&&Boolean(G().sendBeacon)),ve}o(Ce,"isBeaconsSupported");function Me(re){var J=!1;try{J=!!ne("fetch");var qe=ne("Request");J&&re&&qe&&(J=_e(qe,"keepalive"))}catch(Lt){}return J}o(Me,"isFetchSupported");function Xe(){return K===null&&(K=typeof XDomainRequest!==R.jA,K&&be()&&(K=K&&!_e(ne(k),"withCredentials"))),K}o(Xe,"useXDomainRequest");function be(){var re=!1;try{var J=ne(k);re=!!J}catch(qe){}return re}o(be,"isXhrSupported");function xe(re,J){if(re)for(var qe=0;qe<re[I.R5];qe++){var Lt=re[qe];if(Lt[I.I]&&Lt[I.I]===J)return Lt}return{}}o(xe,"_getNamedValue");function q(re){var J=fe();return J&&re?xe(J.querySelectorAll("meta"),re).content:null}o(q,"findMetaTag");function Re(re){var J,qe=nt();if(qe){var Lt=qe.getEntriesByType("navigation")||[];J=xe((Lt[I.R5]>0?Lt[0]:{}).serverTiming,re).description}return J}o(Re,"findNamedServerTiming")},4869:(at,l,b)=>{"use strict";b.d(l,{C1:()=>oe,C9:()=>ge,Ib:()=>Je,JA:()=>H,QY:()=>G,TJ:()=>te,XO:()=>ue,Yl:()=>ke,c9:()=>L,jU:()=>fe,nD:()=>$e,nJ:()=>ht,pD:()=>Le,pZ:()=>he,um:()=>_e,yw:()=>ft});var R=b(8096),v=b(5883),I=b(7630),w=b(6708),B=b(6041),N="on",m="attachEvent",y="addEventListener",U="detachEvent",W="removeEventListener",_="events",O="visibilitychange",F="pagehide",V="pageshow",se="unload",Ae="beforeunload",$=(0,v.J)("aiEvtPageHide"),X=(0,v.J)("aiEvtPageShow"),Z=/\.[\.]+/g,k=/[\.]+$/,j=1,x=(0,v.K)("events"),le=/^([^.]*)(?:\.(.+)|)/;function K(de){return de&&de[R.i7]?de[R.i7](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,B.qS):de}o(K,"_normalizeNamespace");function ve(de,Ce){var Me;if(Ce){var Xe=B.qS;(0,w.kJ)(Ce)?(Xe=B.qS,(0,w.tO)(Ce,function(xe){xe=K(xe),xe&&(xe[0]!=="."&&(xe="."+xe),Xe+=xe)})):Xe=K(Ce),Xe&&(Xe[0]!=="."&&(Xe="."+Xe),de=(de||B.qS)+Xe)}var be=le.exec(de||B.qS)||[];return Me={},Me[R.P6]=be[1],Me.ns=(be[2]||B.qS).replace(Z,".").replace(k,B.qS)[R.w6](".").sort().join("."),Me}o(ve,"_getEvtNamespace");function _e(de,Ce,Me){var Xe=[],be=x.get(de,_,{},!1),xe=ve(Ce,Me);return(0,w.rW)(be,function(q,Re){(0,w.tO)(Re,function(re){var J;(!xe[R.P6]||xe[R.P6]===re.evtName[R.P6])&&(!xe.ns||xe.ns===xe.ns)&&Xe[R.MW]((J={},J[R.I]=re.evtName[R.P6]+(re.evtName.ns?"."+re.evtName.ns:B.qS),J.handler=re[R.Kn],J))})}),Xe}o(_e,"__getRegisteredEvents");function Pe(de,Ce,Me){Me===void 0&&(Me=!0);var Xe=x.get(de,_,{},Me),be=Xe[Ce];return be||(be=Xe[Ce]=[]),be}o(Pe,"_getRegisteredEvents");function ne(de,Ce,Me,Xe){de&&Ce&&Ce[R.P6]&&(de[W]?de[W](Ce[R.P6],Me,Xe):de[U]&&de[U](N+Ce[R.P6],Me))}o(ne,"_doDetach");function Se(de,Ce,Me,Xe){var be=!1;return de&&Ce&&Ce[R.P6]&&Me&&(de[y]?(de[y](Ce[R.P6],Me,Xe),be=!0):de[m]&&(de[m](N+Ce[R.P6],Me),be=!0)),be}o(Se,"_doAttach");function D(de,Ce,Me,Xe){for(var be=Ce[R.R5];be--;){var xe=Ce[be];xe&&(!Me.ns||Me.ns===xe.evtName.ns)&&(!Xe||Xe(xe))&&(ne(de,xe.evtName,xe[R.Kn],xe.capture),Ce[R.cb](be,1))}}o(D,"_doUnregister");function He(de,Ce,Me){if(Ce[R.P6])D(de,Pe(de,Ce[R.P6]),Ce,Me);else{var Xe=x.get(de,_,{});(0,w.rW)(Xe,function(be,xe){D(de,xe,Ce,Me)}),(0,w.FY)(Xe)[R.R5]===0&&x.kill(de,_)}}o(He,"_unregisterEvents");function fe(de,Ce){var Me;return Ce?((0,w.kJ)(Ce)?Me=[de].concat(Ce):Me=[de,Ce],Me=ve("xx",Me).ns[R.w6](".")):Me=de,Me}o(fe,"mergeEvtNamespace");function ue(de,Ce,Me,Xe,be){var xe;be===void 0&&(be=!1);var q=!1;if(de)try{var Re=ve(Ce,Xe);if(q=Se(de,Re,Me,be),q&&x.accept(de)){var re=(xe={guid:j++,evtName:Re},xe[R.Kn]=Me,xe.capture=be,xe);Pe(de,Re.type)[R.MW](re)}}catch(J){}return q}o(ue,"eventOn");function G(de,Ce,Me,Xe,be){if(be===void 0&&(be=!1),de)try{var xe=ve(Ce,Xe),q=!1;He(de,xe,function(Re){return xe.ns&&!Me||Re[R.Kn]===Me?(q=!0,!0):!1}),q||ne(de,xe,Me,be)}catch(Re){}}o(G,"eventOff");function he(de,Ce,Me,Xe){return Xe===void 0&&(Xe=!1),ue(de,Ce,Me,null,Xe)}o(he,"attachEvent");function Le(de,Ce,Me,Xe){Xe===void 0&&(Xe=!1),G(de,Ce,Me,null,Xe)}o(Le,"detachEvent");function Je(de,Ce,Me){var Xe=!1,be=(0,I.Jj)();be&&(Xe=ue(be,de,Ce,Me),Xe=ue(be.body,de,Ce,Me)||Xe);var xe=(0,I.Me)();return xe&&(Xe=ue(xe,de,Ce,Me)||Xe),Xe}o(Je,"addEventHandler");function oe(de,Ce,Me){var Xe=(0,I.Jj)();Xe&&(G(Xe,de,Ce,Me),G(Xe.body,de,Ce,Me));var be=(0,I.Me)();be&&G(be,de,Ce,Me)}o(oe,"removeEventHandler");function nt(de,Ce,Me,Xe){var be=!1;return Ce&&de&&de[R.R5]>0&&(0,w.tO)(de,function(xe){xe&&(!Me||(0,w.UA)(Me,xe)===-1)&&(be=Je(xe,Ce,Xe)||be)}),be}o(nt,"_addEventListeners");function ft(de,Ce,Me,Xe){var be=!1;return Ce&&de&&(0,w.kJ)(de)&&(be=nt(de,Ce,Me,Xe),!be&&Me&&Me[R.R5]>0&&(be=nt(de,Ce,null,Xe))),be}o(ft,"addEventListeners");function ht(de,Ce,Me){de&&(0,w.kJ)(de)&&(0,w.tO)(de,function(Xe){Xe&&oe(Xe,Ce,Me)})}o(ht,"removeEventListeners");function L(de,Ce,Me){return ft([Ae,se,F],de,Ce,Me)}o(L,"addPageUnloadEventListener");function H(de,Ce){ht([Ae,se,F],de,Ce)}o(H,"removePageUnloadEventListener");function te(de,Ce,Me){function Xe(q){var Re=(0,I.Me)();de&&Re&&Re.visibilityState==="hidden"&&de(q)}o(Xe,"_handlePageVisibility");var be=fe($,Me),xe=nt([F],de,Ce,be);return(!Ce||(0,w.UA)(Ce,O)===-1)&&(xe=nt([O],Xe,Ce,be)||xe),!xe&&Ce&&(xe=te(de,null,Me)),xe}o(te,"addPageHideEventListener");function ge(de,Ce){var Me=fe($,Ce);ht([F],de,Me),ht([O],null,Me)}o(ge,"removePageHideEventListener");function $e(de,Ce,Me){function Xe(q){var Re=(0,I.Me)();de&&Re&&Re.visibilityState==="visible"&&de(q)}o(Xe,"_handlePageVisibility");var be=fe(X,Me),xe=nt([V],de,Ce,be);return xe=nt([O],Xe,Ce,be)||xe,!xe&&Ce&&(xe=$e(de,null,Me)),xe}o($e,"addPageShowEventListener");function ke(de,Ce){var Me=fe(X,Ce);ht([V],de,Me),ht([O],null,Me)}o(ke,"removePageShowEventListener")},6708:(at,l,b)=>{"use strict";b.d(l,{Ax:()=>di,BX:()=>nt,F:()=>xn,FL:()=>an,FY:()=>ct,Gf:()=>te,HD:()=>Re,Id:()=>$e,J_:()=>Xe,Kn:()=>ht,Mr:()=>Qn,Oi:()=>Tr,UA:()=>jn,VZ:()=>q,Vb:()=>Hr,Xi:()=>Rn,Xz:()=>$n,Y6:()=>Gt,Ym:()=>he,_A:()=>en,_Q:()=>Me,_y:()=>Ar,cf:()=>Yr,fQ:()=>Xn,hj:()=>re,hl:()=>Ci,jj:()=>pr,jn:()=>J,kJ:()=>be,l_:()=>$t,le:()=>oe,m6:()=>ar,mf:()=>L,mm:()=>ur,nd:()=>vr,nr:()=>ft,o8:()=>Le,qK:()=>mr,rW:()=>ge,sO:()=>Kn,tO:()=>wn,v4:()=>Br,xe:()=>de});var R=b(4392),v=b(2091),I=b(8096),w=b(6041),B="toISOString",N="endsWith",m="startsWith",y="indexOf",U="map",W="reduce",_="trim",O="toString",F="__proto__",V="constructor",se=R.RJ,Ae=R.Pw.freeze,$=R.Pw.seal,X=R.Pw.keys,Z=String[R.hB],k=Z[_],j=Z[N],x=Z[m],le=Date[R.hB],K=le[B],ve=Array.isArray,_e=R.V4[O],Pe=R.CY[O],ne=Pe[I._S](R.Pw),Se=/-([a-z])/g,D=/([^\w\d_$])/g,He=/^(\d+[\w\d_$])/,fe=Object.getPrototypeOf;function ue(T){if(T){if(fe)return fe(T);var ce=T[F]||T[R.hB]||T[V];if(ce)return ce}return null}o(ue,"_getObjProto");function G(T){return _e[_DYN_CALL](T)}o(G,"objToString");function he(T,ce){return typeof T===ce}o(he,"isTypeof");function Le(T){return T===void 0||typeof T===R.jA}o(Le,"isUndefined");function Je(T){return!Le(T)}o(Je,"isNotUndefined");function oe(T){return T===null||Le(T)}o(oe,"isNullOrUndefined");function nt(T){return!oe(T)}o(nt,"isNotNullOrUndefined");function ft(T,ce){return!!(T&&R.CY[I._S](T,ce))}o(ft,"hasOwnProperty");function ht(T){return!!(T&&typeof T===R.fK)}o(ht,"isObject");function L(T){return!!(T&&typeof T===R.cb)}o(L,"isFunction");function H(T){return T&&L(T.then)}o(H,"isPromiseLike");function te(T){var ce=T;return ce&&Re(ce)&&(ce=ce[I.i7](Se,function(Ee,Oe){return Oe.toUpperCase()}),ce=ce[I.i7](D,"_"),ce=ce[I.i7](He,function(Ee,Oe){return"_"+Oe})),ce}o(te,"normalizeJsName");function ge(T,ce){if(T)for(var Ee in T)R.CY[I._S](T,Ee)&&ce[I._S](T,Ee,T[Ee])}o(ge,"objForEachKey");function $e(T,ce){var Ee=!1;return T&&ce&&!(Ee=T===ce)&&(Ee=j?T[N](ce):ke(T,ce)),Ee}o($e,"strEndsWith");function ke(T,ce){var Ee=!1,Oe=ce?ce[I.R5]:0,et=T?T[I.R5]:0;if(Oe&&et&&et>=Oe&&!(Ee=T===ce)){for(var Ue=et-1,lt=Oe-1;lt>=0;lt--){if(T[Ue]!=ce[lt])return!1;Ue--}Ee=!0}return Ee}o(ke,"_strEndsWithPoly");function de(T,ce){var Ee=!1;return T&&ce&&!(Ee=T===ce)&&(Ee=x?T[m](ce):Ce(T,ce)),Ee}o(de,"strStartsWith");function Ce(T,ce){var Ee=!1,Oe=ce?ce[I.R5]:0;if(T&&Oe&&T[I.R5]>=Oe&&!(Ee=T===ce)){for(var et=0;et<Oe;et++)if(T[et]!==ce[et])return!1;Ee=!0}return Ee}o(Ce,"_strStartsWithPoly");function Me(T,ce){return T&&ce?T[I.ou](ce)!==-1:!1}o(Me,"strContains");function Xe(T){return!!(T&&_e[I._S](T)==="[object Date]")}o(Xe,"isDate");var be=ve||xe;function xe(T){return!!(T&&_e[I._S](T)==="[object Array]")}o(xe,"_isArrayPoly");function q(T){return!!(T&&_e[I._S](T)==="[object Error]")}o(q,"isError");function Re(T){return typeof T=="string"}o(Re,"isString");function re(T){return typeof T=="number"}o(re,"isNumber");function J(T){return typeof T=="boolean"}o(J,"isBoolean");function qe(T){return typeof T=="symbol"}o(qe,"isSymbol");function Lt(T){var ce=!1;if(T&&typeof T=="object"){var Ee=fe?fe(T):ue(T);Ee?(Ee[V]&&R.CY[I._S](Ee,V)&&(Ee=Ee[V]),ce=typeof Ee===R.cb&&Pe[I._S](Ee)===ne):ce=!0}return ce}o(Lt,"isPlainObject");function Gt(T){if(T)return K?T[B]():Ln(T)}o(Gt,"toISOString");function Ln(T){if(T&&T.getUTCFullYear){var ce=o(function(Ee){var Oe=String(Ee);return Oe[I.R5]===1&&(Oe="0"+Oe),Oe},"pad");return T.getUTCFullYear()+"-"+ce(T.getUTCMonth()+1)+"-"+ce(T.getUTCDate())+"T"+ce(T.getUTCHours())+":"+ce(T.getUTCMinutes())+":"+ce(T.getUTCSeconds())+"."+String((T.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}o(Ln,"_toISOStringPoly");function wn(T,ce,Ee){var Oe=T[I.R5];try{for(var et=0;et<Oe&&!(et in T&&ce[I._S](Ee||T,T[et],et,T)===-1);et++);}catch(Ue){}}o(wn,"arrForEach");function jn(T,ce,Ee){if(T){if(T[y])return T[y](ce,Ee);var Oe=T[I.R5],et=Ee||0;try{for(var Ue=Math.max(et>=0?et:Oe-Math.abs(et),0);Ue<Oe;Ue++)if(Ue in T&&T[Ue]===ce)return Ue}catch(lt){}}return-1}o(jn,"arrIndexOf");function Qn(T,ce,Ee){var Oe;if(T){if(T[U])return T[U](ce,Ee);var et=T[I.R5],Ue=Ee||T;Oe=new Array(et);try{for(var lt=0;lt<et;lt++)lt in T&&(Oe[lt]=ce[I._S](Ue,T[lt],T))}catch(_t){}}return Oe}o(Qn,"arrMap");function $n(T,ce,Ee){var Oe;if(T){if(T[W])return T[W](ce,Ee);var et=T[I.R5],Ue=0;if(arguments[I.R5]>=3)Oe=arguments[2];else{for(;Ue<et&&!(Ue in T);)Ue++;Oe=T[Ue++]}for(;Ue<et;)Ue in T&&(Oe=ce(Oe,T[Ue],Ue,T)),Ue++}return Oe}o($n,"arrReduce");function vr(T){return T&&(T=k&&T[_]?T[_]():T[I.i7]?T[I.i7](/^\s+|(?=\s)\s+$/g,w.qS):T),T}o(vr,"strTrim");var Ir=!{toString:null}.propertyIsEnumerable("toString"),Lr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ct(T){var ce=typeof T;if(ce!==R.cb&&(ce!==R.fK||T===null)&&(0,v.ZU)("objKeys called on non-object"),!Ir&&X)return X(T);var Ee=[];for(var Oe in T)T&&R.CY[I._S](T,Oe)&&Ee[I.MW](Oe);if(Ir)for(var et=Lr[I.R5],Ue=0;Ue<et;Ue++)T&&R.CY[I._S](T,Lr[Ue])&&Ee[I.MW](Lr[Ue]);return Ee}o(ct,"objKeys");function $t(T,ce,Ee,Oe){if(se)try{var et={enumerable:!0,configurable:!0};return Ee&&(et.get=Ee),Oe&&(et.set=Oe),se(T,ce,et),!0}catch(Ue){}return!1}o($t,"objDefineAccessors");function nn(T){return T}o(nn,"_doNothing");function en(T){return Ae&&ge(T,function(ce,Ee){(be(Ee)||ht(Ee))&&Ae(Ee)}),an(T)}o(en,"deepFreeze");var an=Ae||nn,Rn=$||nn;function ar(){var T=Date;return T.now?T.now():new T().getTime()}o(ar,"dateNow");function pr(T){return q(T)?T[I.I]:w.qS}o(pr,"getExceptionName");function Kn(T,ce,Ee,Oe,et){var Ue=Ee;return T&&(Ue=T[ce],Ue!==Ee&&(!et||et(Ue))&&(!Oe||Oe(Ee))&&(Ue=Ee,T[ce]=Ue)),Ue}o(Kn,"setValue");function mr(T,ce,Ee){var Oe;return T?(Oe=T[ce],!Oe&&oe(Oe)&&(Oe=Le(Ee)?{}:Ee,T[ce]=Oe)):Oe=Le(Ee)?{}:Ee,Oe}o(mr,"getSetValue");function Br(T,ce){return oe(T)?ce:T}o(Br,"getCfgValue");function xn(T){return!T}o(xn,"isNotTruthy");function Xn(T){return!!T}o(Xn,"isTruthy");function Ar(T){throw new Error(T)}o(Ar,"throwError");function Sn(T,ce){var Ee=null,Oe=null;return L(T)?Ee=T:Oe=T,function(){var et=arguments;if(Ee&&(Oe=Ee()),Oe)return Oe[ce][I.ZV](Oe,et)}}o(Sn,"_createProxyFunction");function Yr(T,ce,Ee){if(T&&ce&&ht(T)&&ht(ce)){var Oe=o(function(Ue){if(Re(Ue)){var lt=ce[Ue];L(lt)?(!Ee||Ee(Ue,!0,ce,T))&&(T[Ue]=Sn(ce,Ue)):(!Ee||Ee(Ue,!1,ce,T))&&(ft(T,Ue)&&delete T[Ue],$t(T,Ue,function(){return ce[Ue]},function(_t){ce[Ue]=_t})||(T[Ue]=lt))}},"_loop_1");for(var et in ce)Oe(et)}return T}o(Yr,"proxyAssign");function Tr(T,ce,Ee,Oe,et){T&&ce&&Ee&&(et!==!1||Le(T[ce]))&&(T[ce]=Sn(Ee,Oe))}o(Tr,"proxyFunctionAs");function Hr(T,ce,Ee,Oe){return T&&ce&&ht(T)&&be(Ee)&&wn(Ee,function(et){Re(et)&&Tr(T,et,ce,et,Oe)}),T}o(Hr,"proxyFunctions");function Ci(T){return function(){function ce(){var Ee=this;T&&ge(T,function(Oe,et){Ee[Oe]=et})}return o(ce,"class_1"),ce}()}o(Ci,"createClassFromInterface");function di(T){return T&&R.rl&&(T=(0,R.Pw)((0,R.rl)({},T))),T}o(di,"optimizeObject");function ur(T,ce,Ee,Oe,et,Ue){var lt=arguments,_t=lt[0]||{},Rt=lt[I.R5],cn=!1,St=1;for(Rt>0&&J(_t)&&(cn=_t,_t=lt[St]||{},St++),ht(_t)||(_t={});St<Rt;St++){var Jt=lt[St],Nt=be(Jt),Ot=ht(Jt);for(var Tt in Jt){var Gn=Nt&&Tt in Jt||Ot&&R.CY[I._S](Jt,Tt);if(!!Gn){var Cn=Jt[Tt],dr=void 0;if(cn&&Cn&&((dr=be(Cn))||Lt(Cn))){var On=_t[Tt];dr?be(On)||(On=[]):Lt(On)||(On={}),Cn=ur(cn,On,Cn)}Cn!==void 0&&(_t[Tt]=Cn)}}}return _t}o(ur,"objExtend")},6041:(at,l,b)=>{"use strict";b.d(l,{$F:()=>_,C$:()=>F,DN:()=>w,Z:()=>v,Zh:()=>N,cL:()=>se,f_:()=>O,hL:()=>y,js:()=>m,kl:()=>Ae,mE:()=>B,oV:()=>I,qS:()=>R,uC:()=>W,yi:()=>U,ys:()=>V});var R="",v="channels",I="core",w="createPerfMgr",B="disabled",N="extensionConfig",m="extensions",y="processTelemetry",U="priority",W="eventsSent",_="eventsDiscarded",O="eventsSendRequest",F="perfEvent",V="errorToConsole",se="warnToConsole",Ae="getPerfMgr"},1880:(at,l,b)=>{"use strict";b.d(l,{f:()=>N});var R=b(1679),v=b(8096),I=b(6708),w=b(6041);function B(m,y,U,W){(0,I.tO)(m,function(_){if(_&&_[y])if(U)setTimeout(function(){return W(_)},0);else try{W(_)}catch(O){}})}o(B,"_runListeners");var N=function(){function m(y){this.listeners=[];var U=!!(y||{}).perfEvtsSendAll;(0,R.Z)(m,this,function(W){W[v.g]=function(_){W.listeners[v.MW](_)},W[v.n7]=function(_){for(var O=(0,I.UA)(W[v.dE],_);O>-1;)W.listeners[v.cb](O,1),O=(0,I.UA)(W[v.dE],_)},W[w.uC]=function(_){B(W[v.dE],w.uC,!0,function(O){O[w.uC](_)})},W[w.$F]=function(_,O){B(W[v.dE],w.$F,!0,function(F){F[w.$F](_,O)})},W[w.f_]=function(_,O){B(W[v.dE],w.f_,O,function(F){F[w.f_](_,O)})},W[w.C$]=function(_){_&&(U||!_[v.PL]())&&B(W[v.dE],w.C$,!1,function(O){_[v.d]?setTimeout(function(){return O[w.C$](_)},0):O[w.C$](_)})}})}return o(m,"NotificationManager"),m.__ieDyn=1,m}()},9288:(at,l,b)=>{"use strict";b.d(l,{Jk:()=>W,Lm:()=>O,j5:()=>V,zn:()=>U});var R=b(1679),v=b(8096),I=b(6708),w=b(6041),B="ctx",N="ParentContextKey",m="ChildrenContextKey",y=null,U=function(){function se(Ae,$,X){var Z=this,k=!1;if(Z.start=(0,I.m6)(),Z[v.I]=Ae,Z[v.d]=X,Z[v.PL]=function(){return!1},(0,I.mf)($)){var j;k=(0,I.l_)(Z,"payload",function(){return!j&&(0,I.mf)($)&&(j=$(),$=null),j})}Z[v.T]=function(x){return x?x===se[N]||x===se[m]?Z[x]:(Z[B]||{})[x]:null},Z[v.wu]=function(x,le){if(x)if(x===se[N])Z[x]||(Z[v.PL]=function(){return!0}),Z[x]=le;else if(x===se[m])Z[x]=le;else{var K=Z[B]=Z[B]||{};K[x]=le}},Z[v.Km]=function(){var x=0,le=Z[v.T](se[m]);if((0,I.kJ)(le))for(var K=0;K<le[v.R5];K++){var ve=le[K];ve&&(x+=ve[v.Z_])}Z[v.Z_]=(0,I.m6)()-Z.start,Z.exTime=Z[v.Z_]-x,Z[v.Km]=function(){},!k&&(0,I.mf)($)&&(Z.payload=$())}}return o(se,"PerfEvent"),se.ParentContextKey="parent",se.ChildrenContextKey="childEvts",se}(),W=function(){function se(Ae){this.ctx={},(0,R.Z)(se,this,function($){$.create=function(X,Z,k){return new U(X,Z,k)},$.fire=function(X){X&&(X[v.Km](),Ae&&(0,I.mf)(Ae[w.C$])&&Ae[w.C$](X))},$[v.wu]=function(X,Z){if(X){var k=$[B]=$[B]||{};k[X]=Z}},$[v.T]=function(X){return($[B]||{})[X]}})}return o(se,"PerfManager"),se.__ieDyn=1,se}(),_="CoreUtils.doPerf";function O(se,Ae,$,X,Z){if(se){var k=se;if(k[w.kl]&&(k=k[w.kl]()),k){var j=void 0,x=k[v.T](_);try{if(j=k.create(Ae(),X,Z),j){if(x&&j[v.wu]&&(j[v.wu](U[N],x),x[v.T]&&x[v.wu])){var le=x[v.T](U[m]);le||(le=[],x[v.wu](U[m],le)),le[v.MW](j)}return k[v.wu](_,j),$(j)}}catch(K){j&&j[v.wu]&&j[v.wu]("exception",K)}finally{j&&k.fire(j),k[v.wu](_,x)}}}return $()}o(O,"doPerf");function F(se){y=se}o(F,"setGblPerfMgr");function V(){return y}o(V,"getGblPerfMgr")},1589:(at,l,b)=>{"use strict";b.d(l,{Bt:()=>se,CD:()=>V,Vi:()=>Z,jV:()=>$,xy:()=>Ae});var R=b(8096),v=b(5018),I=b(7630),w=b(6708),B=b(6041),N=b(9288),m=b(3833),y="TelemetryPluginChain",U="_hasRun",W="_getTelCtx",_=0;function O(k,j,x){for(;k;){if(k[R.TO]()===x)return k;k=k[R.W2]()}return $([x],j[R.TC]||{},j)}o(O,"_getNextProxyStart");function F(k,j,x,le){var K=null,ve=[];le!==null&&(K=le?O(k,x,le):k);var _e={_next:ne,ctx:{core:function(){return x},diagLog:function(){return(0,v.vH)(x,j)},getCfg:function(){return j},getExtCfg:Se,getConfig:D,hasNext:function(){return!!K},getNext:function(){return K},setNext:function(fe){K=fe},iterate:He,onComplete:Pe}};function Pe(fe,ue){for(var G=[],he=2;he<arguments.length;he++)G[he-2]=arguments[he];fe&&ve[R.MW]({func:fe,self:(0,w.o8)(ue)?_e.ctx:ue,args:G})}o(Pe,"_addOnComplete");function ne(){var fe=K;if(K=fe?fe[R.W2]():null,!fe){var ue=ve;ue&&ue[R.R5]>0&&((0,w.tO)(ue,function(G){try{G.func[R._S](G.self,G.args)}catch(he){(0,v.kP)(x[R.eZ],2,73,"Unexpected Exception during onComplete - "+(0,I.eU)(he))}}),ve=[])}return fe}o(ne,"_moveNext");function Se(fe,ue,G){ue===void 0&&(ue={}),G===void 0&&(G=0);var he;if(j){var Le=j[B.Zh];Le&&fe&&(he=Le[fe])}if(!he)he=ue;else if((0,w.Kn)(ue)&&G!==0){var Je=(0,w.mm)(!0,ue,he);j&&G===2&&(0,w.rW)(ue,function(oe){if((0,w.le)(Je[oe])){var nt=j[oe];(0,w.le)(nt)||(Je[oe]=nt)}}),he=Je}return he}o(Se,"_getExtCfg");function D(fe,ue,G){G===void 0&&(G=!1);var he,Le=Se(fe,null);return Le&&!(0,w.le)(Le[ue])?he=Le[ue]:j&&!(0,w.le)(j[ue])&&(he=j[ue]),(0,w.le)(he)?G:he}o(D,"_getConfig");function He(fe){for(var ue;ue=_e._next();){var G=ue[R.TO]();G&&fe(G)}}return o(He,"_iterateChain"),_e}o(F,"_createInternalContext");function V(k,j,x,le){var K=F(k,j,x,le),ve=K.ctx;function _e(ne){var Se=K._next();return Se&&Se[B.hL](ne,ve),!Se}o(_e,"_processNext");function Pe(ne,Se){return ne===void 0&&(ne=null),(0,w.kJ)(ne)&&(ne=$(ne,j,x,Se)),V(ne||ve[R.W2](),j,x,Se)}return o(Pe,"_createNew"),ve[R.uL]=_e,ve[R.zV]=Pe,ve}o(V,"createProcessTelemetryContext");function se(k,j,x){var le=j[R.TC]||{},K=F(k,le,j,x),ve=K.ctx;function _e(ne){var Se=K._next();return Se&&Se.unload(ve,ne),!Se}o(_e,"_processNext");function Pe(ne,Se){return ne===void 0&&(ne=null),(0,w.kJ)(ne)&&(ne=$(ne,le,j,Se)),se(ne||ve[R.W2](),j,Se)}return o(Pe,"_createNew"),ve[R.uL]=_e,ve[R.zV]=Pe,ve}o(se,"createProcessTelemetryUnloadContext");function Ae(k,j,x){var le=j[R.TC]||{},K=F(k,le,j,x),ve=K.ctx;function _e(ne){return ve.iterate(function(Se){(0,w.mf)(Se[R.Tu])&&Se[R.Tu](ve,ne)})}o(_e,"_processNext");function Pe(ne,Se){return ne===void 0&&(ne=null),(0,w.kJ)(ne)&&(ne=$(ne,le,j,Se)),Ae(ne||ve[R.W2](),j,Se)}return o(Pe,"_createNew"),ve[R.uL]=_e,ve[R.zV]=Pe,ve}o(Ae,"createProcessTelemetryUpdateContext");function $(k,j,x,le){var K=null,ve=!le;if((0,w.kJ)(k)&&k[R.R5]>0){var _e=null;(0,w.tO)(k,function(Pe){if(!ve&&le===Pe&&(ve=!0),ve&&Pe&&(0,w.mf)(Pe[B.hL])){var ne=X(Pe,j,x);K||(K=ne),_e&&_e._setNext(ne),_e=ne}})}return le&&!K?$([le],j,x):K}o($,"createTelemetryProxyChain");function X(k,j,x){var le=null,K=(0,w.mf)(k[B.hL]),ve=(0,w.mf)(k[R.Jd]),_e;k?_e=k[R.pZ]+"-"+k[B.yi]+"-"+_++:_e="Unknown-0-"+_++;var Pe={getPlugin:function(){return k},getNext:function(){return le},processTelemetry:D,unload:He,update:fe,_id:_e,_setNext:function(ue){le=ue}};function ne(){var ue;return k&&(0,w.mf)(k[W])&&(ue=k[W]()),ue||(ue=V(Pe,j,x)),ue}o(ne,"_getTelCtx");function Se(ue,G,he,Le,Je){var oe=!1,nt=k?k[R.pZ]:y,ft=ue[U];return ft||(ft=ue[U]={}),ue.setNext(le),k&&(0,N.Lm)(ue[B.oV](),function(){return nt+":"+he},function(){ft[_e]=!0;try{var ht=le?le._id:B.qS;ht&&(ft[ht]=!1),oe=G(ue)}catch(H){var L=le?ft[le._id]:!0;L&&(oe=!0),(!le||!L)&&(0,v.kP)(ue[R.mc](),1,73,"Plugin ["+nt+"] failed during "+he+" - "+(0,I.eU)(H)+", run flags: "+(0,I.eU)(ft))}},Le,Je),oe}o(Se,"_processChain");function D(ue,G){G=G||ne();function he(Le){if(!k||!K)return!1;var Je=(0,m.OY)(k);return Je[R.fi]||Je[B.mE]?!1:(ve&&k[R.Jd](le),k[B.hL](ue,Le),!0)}o(he,"_callProcessTelemetry"),Se(G,he,"processTelemetry",function(){return{item:ue}},!ue.sync)||G[R.uL](ue)}o(D,"_processTelemetry");function He(ue,G){function he(){var Le=!1;if(k){var Je=(0,m.OY)(k),oe=k[B.oV]||Je[B.oV];k&&(!oe||oe===ue.core())&&!Je[R.fi]&&(Je[B.oV]=null,Je[R.fi]=!0,Je[R.yl]=!1,k[R.fi]&&k[R.fi](ue,G)===!0&&(Le=!0))}return Le}o(he,"_callTeardown"),Se(ue,he,"unload",function(){},G[R.d])||ue[R.uL](G)}o(He,"_unloadPlugin");function fe(ue,G){function he(){var Le=!1;if(k){var Je=(0,m.OY)(k),oe=k[B.oV]||Je[B.oV];k&&(!oe||oe===ue.core())&&!Je[R.fi]&&k[R.Tu]&&k[R.Tu](ue,G)===!0&&(Le=!0)}return Le}o(he,"_callUpdate"),Se(ue,he,"update",function(){},!1)||ue[R.uL](G)}return o(fe,"_updatePlugin"),(0,w.FL)(Pe)}o(X,"createTelemetryPluginProxy");var Z=function(){function k(j,x,le,K){var ve=this,_e=V(j,x,le,K);(0,w.Vb)(ve,_e,(0,w.FY)(_e))}return o(k,"ProcessTelemetryContext"),k}()},4878:(at,l,b)=>{"use strict";b.d(l,{CN:()=>V,F6:()=>se,_l:()=>F,az:()=>O,pZ:()=>Ae});var R=b(8096),v=b(7630),I=b(6708),w=b(6041),B=4294967296,N=4294967295,m=!1,y=123456789,U=987654321;function W($){$<0&&($>>>=0),y=123456789+$&N,U=987654321-$&N,m=!0}o(W,"_mwcSeed");function _(){try{var $=(0,I.m6)()&2147483647;W((Math.random()*B^$)+$)}catch(X){}}o(_,"_autoSeedMwc");function O($){return $>0?Math.floor(F()/N*($+1))>>>0:0}o(O,"randomValue");function F($){var X=0,Z=(0,v.MX)()||(0,v.gz)();return Z&&Z.getRandomValues&&(X=Z.getRandomValues(new Uint32Array(1))[0]&N),X===0&&(0,v.w1)()&&(m||_(),X=se()&N),X===0&&(X=Math.floor(B*Math.random()|0)),$||(X>>>=0),X}o(F,"random32");function V($){$?W($):_()}o(V,"mwcRandomSeed");function se($){U=36969*(U&65535)+(U>>16)&N,y=18e3*(y&65535)+(y>>16)&N;var X=(U<<16)+(y&65535)>>>0&N|0;return $||(X>>>=0),X}o(se,"mwcRandom32");function Ae($){$===void 0&&($=22);for(var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z=F()>>>0,k=0,j=w.qS;j[R.R5]<$;)k++,j+=X.charAt(Z&63),Z>>>=6,k===5&&(Z=(F()<<2&4294967295|Z&3)>>>0,k=0);return j}o(Ae,"newId")},3833:(at,l,b)=>{"use strict";b.d(l,{AA:()=>U,OY:()=>m,Yn:()=>_,bP:()=>y});var R=b(8096),v=b(5883),I=b(6708),w=b(6041),B=b(4206),N=(0,v.K)("plugin");function m(O){return N.get(O,"state",{},!0)}o(m,"_getPluginState");function y(O,F){for(var V=[],se=null,Ae=O[R.W2](),$;Ae;){var X=Ae[R.TO]();if(X){se&&(0,I.mf)(se[R.Jd])&&(0,I.mf)(X[w.hL])&&se[R.Jd](X);var Z=!1;(0,I.mf)(X[R.yl])?Z=X[R.yl]():($=m(X),Z=$[R.yl]),Z||V[R.MW](X),se=X,Ae=Ae[R.W2]()}}(0,I.tO)(V,function(k){var j=O[w.oV]();k[R.VL](O.getCfg(),j,F,O[R.W2]()),$=m(k),!k[w.oV]&&!$[w.oV]&&($[w.oV]=j),$[R.yl]=!0,delete $[R.fi]})}o(y,"initializePlugins");function U(O){return O.sort(function(F,V){var se=0;if(V){var Ae=(0,I.mf)(V[w.hL]);(0,I.mf)(F[w.hL])?se=Ae?F[w.yi]-V[w.yi]:1:Ae&&(se=-1)}else se=F?1:-1;return se})}o(U,"sortPlugins");function W(O,F,V,se){var Ae=0;function $(){for(;Ae<O[_DYN_LENGTH];){var X=O[Ae++];if(X){var Z=X._doUnload||X[_DYN__DO_TEARDOWN];if(isFunction(Z)&&Z[_DYN_CALL](X,F,V,$)===!0)return!0}}}return o($,"_doUnload"),$()}o(W,"unloadComponents");function _(O){var F={};return{getName:function(){return F[R.I]},setName:function(V){O&&O.setName(V),F[R.I]=V},getTraceId:function(){return F[R.nY]},setTraceId:function(V){O&&O.setTraceId(V),(0,B.jN)(V)&&(F[R.nY]=V)},getSpanId:function(){return F[R._d]},setSpanId:function(V){O&&O.setSpanId(V),(0,B.Lc)(V)&&(F[R._d]=V)},getTraceFlags:function(){return F[R.T0]},setTraceFlags:function(V){O&&O.setTraceFlags(V),F[R.T0]=V}}}o(_,"createDistributedTraceContext")},310:(at,l,b)=>{"use strict";b.d(l,{Y:()=>B});var R=b(8096),v=b(5018),I=b(7630),w=b(6708);function B(){var N=[];function m(U){U&&N[R.MW](U)}o(m,"_addHandler");function y(U,W){(0,w.tO)(N,function(_){try{_(U,W)}catch(O){(0,v.kP)(U[R.mc](),2,73,"Unexpected error calling unload handler - "+(0,I.eU)(O))}}),N=[]}return o(y,"_runHandlers"),{add:m,run:y}}o(B,"createUnloadHandlerContainer")},4206:(at,l,b)=>{"use strict";b.d(l,{J6:()=>X,Lc:()=>$,Pn:()=>Z,SU:()=>V,aR:()=>k,jN:()=>Ae,j_:()=>se,lq:()=>j});var R=b(8096),v=b(5843),I=b(7630),w=b(6708),B=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,N="00",m="ff",y="00000000000000000000000000000000",U="0000000000000000",W=1;function _(x,le,K){return x&&x[R.R5]===le&&x!==K?!!x.match(/^[\da-f]*$/):!1}o(_,"_isValid");function O(x,le,K){return _(x,le)?x:K}o(O,"_formatValue");function F(x){(isNaN(x)||x<0||x>255)&&(x=1);for(var le=x.toString(16);le[R.R5]<2;)le="0"+le;return le}o(F,"_formatFlags");function V(x,le,K,ve){var _e;return _e={},_e[R.PA]=_(ve,2,m)?ve:N,_e[R.nY]=Ae(x)?x:(0,v.DO)(),_e.spanId=$(le)?le:(0,v.DO)()[R.Jn](0,16),_e.traceFlags=K>=0&&K<=255?K:1,_e}o(V,"createTraceParent");function se(x){var le;if(!x||((0,w.kJ)(x)&&(x=x[0]||""),!x||!(0,w.HD)(x)||x[R.R5]>8192))return null;var K=B.exec((0,w.nd)(x));return!K||K[1]===m||K[2]===y||K[3]===U?null:(le={},le[R.PA]=K[1],le[R.nY]=K[2],le[R._d]=K[3],le[R.T0]=parseInt(K[4],16),le)}o(se,"parseTraceParent");function Ae(x){return _(x,32,y)}o(Ae,"isValidTraceId");function $(x){return _(x,16,U)}o($,"isValidSpanId");function X(x){return!(!x||!_(x[R.PA],2,m)||!_(x[R.nY],32,y)||!_(x[R._d],16,U)||!_(F(x[R.T0]),2))}o(X,"isValidTraceParent");function Z(x){return X(x)?(x[R.T0]&W)===W:!1}o(Z,"isSampledFlag");function k(x){if(x){var le=F(x[R.T0]);_(le,2)||(le="01");var K=x[R.PA]||N;return K!=="00"&&K!=="ff"&&(K=N),"".concat(K,"-").concat(O(x.traceId,32,y),"-").concat(O(x.spanId,16,U),"-").concat(le)}return""}o(k,"formatTraceParent");function j(){var x="traceparent",le=se((0,I.ed)(x));return le||(le=se((0,I.pI)(x))),le}o(j,"findW3cTraceParent")},8096:(at,l,b)=>{"use strict";b.d(l,{$h:()=>Je,F3:()=>_e,Fc:()=>$,Fr:()=>L,Gc:()=>le,I:()=>v,Jd:()=>D,Jn:()=>oe,Km:()=>be,Kn:()=>ke,LS:()=>Ae,Lk:()=>fe,MW:()=>B,P6:()=>$e,PA:()=>re,PL:()=>Ce,R5:()=>W,SD:()=>F,T:()=>Me,T0:()=>Re,T1:()=>te,TC:()=>m,TO:()=>X,Tu:()=>Pe,VL:()=>R,W2:()=>ne,ZV:()=>ft,Z_:()=>_,_S:()=>ge,_d:()=>q,cb:()=>j,d:()=>ve,dE:()=>de,eZ:()=>U,fi:()=>x,g:()=>V,gU:()=>K,i7:()=>ht,iC:()=>k,jk:()=>H,kL:()=>Z,mc:()=>Se,n7:()=>se,nY:()=>xe,ou:()=>ue,p$:()=>y,pZ:()=>w,qV:()=>he,tb:()=>I,uL:()=>O,w6:()=>Le,wu:()=>Xe,xv:()=>nt,yl:()=>N,zV:()=>He,zc:()=>G});var R="initialize",v="name",I="getNotifyMgr",w="identifier",B="push",N="isInitialized",m="config",y="instrumentationKey",U="logger",W="length",_="time",O="processNext",F="getProcessTelContext",V="addNotificationListener",se="removeNotificationListener",Ae="stopPollingInternalLogs",$="onComplete",X="getPlugin",Z="flush",k="_extensions",j="splice",x="teardown",le="messageId",K="message",ve="isAsync",_e="_doTeardown",Pe="update",ne="getNext",Se="diagLog",D="setNextPlugin",He="createNew",fe="cookieCfg",ue="indexOf",G="substring",he="userAgent",Le="split",Je="setEnabled",oe="substr",nt="nodeType",ft="apply",ht="replace",L="enableDebugExceptions",H="logInternalMessage",te="toLowerCase",ge="call",$e="type",ke="handler",de="listeners",Ce="isChildEvt",Me="getCtx",Xe="setCtx",be="complete",xe="traceId",q="spanId",Re="traceFlags",re="version"},4392:(at,l,b)=>{"use strict";b.d(l,{CY:()=>O,Pw:()=>m,RJ:()=>_,V4:()=>y,bO:()=>B,cb:()=>R,fK:()=>v,hB:()=>w,jA:()=>I,rl:()=>U,yu:()=>W});var R="function",v="object",I="undefined",w="prototype",B="hasOwnProperty",N="default",m=Object,y=m[w],U=m.assign,W=m.create,_=m.defineProperty,O=y[B]},2091:(at,l,b)=>{"use strict";b.d(l,{Rd:()=>I,ZU:()=>w,pu:()=>B});var R=b(4392),v=null;function I(N){N===void 0&&(N=!0);var m=N===!1?null:v;return m||(typeof globalThis!==R.jA&&(m=globalThis),!m&&typeof self!==R.jA&&(m=self),!m&&typeof window!==R.jA&&(m=window),!m&&typeof b.g!==R.jA&&(m=b.g),v=m),m}o(I,"getGlobal");function w(N){throw new TypeError(N)}o(w,"throwTypeError");function B(N){var m=R.yu;if(m)return m(N);if(N==null)return{};var y=typeof N;y!==R.fK&&y!==R.cb&&w("Object prototype may only be an Object:"+N);function U(){}return o(U,"tmpFunc"),U[R.hB]=N,new U}o(B,"objCreateFn")},1088:(at,l,b)=>{"use strict";b.d(l,{$h:()=>K,ne:()=>V,uc:()=>O});var R=b(4392),v=b(2091),I=((0,v.Rd)()||{}).Symbol,w=((0,v.Rd)()||{}).Reflect,B=!!I,N=!!w,m="decorate",y="metadata",U="getOwnPropertySymbols",W="iterator",_=o(function(ne){for(var Se,D=1,He=arguments.length;D<He;D++){Se=arguments[D];for(var fe in Se)R.V4[R.bO].call(Se,fe)&&(ne[fe]=Se[fe])}return ne},"__objAssignFnImpl"),O=R.rl||_,F=o(function(ne,Se){return F=R.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,He){D.__proto__=He}||function(D,He){for(var fe in He)He[R.bO](fe)&&(D[fe]=He[fe])},F(ne,Se)},"extendStaticsFn");function V(ne,Se){typeof Se!==R.cb&&Se!==null&&(0,v.ZU)("Class extends value "+String(Se)+" is not a constructor or null"),F(ne,Se);function D(){this.constructor=ne}o(D,"__"),ne[R.hB]=Se===null?(0,v.pu)(Se):(D[R.hB]=Se[R.hB],new D)}o(V,"__extendsFn");function se(ne,Se){var D={};for(var He in ne)ObjHasOwnProperty.call(ne,He)&&Se.indexOf(He)<0&&(D[He]=ne[He]);if(ne!=null&&typeof ObjClass[U]===strShimFunction)for(var fe=0,ue=ObjClass[U](ne);fe<ue.length;fe++)Se.indexOf(ue[fe])<0&&ObjProto.propertyIsEnumerable.call(ne,ue[fe])&&(D[ue[fe]]=ne[ue[fe]]);return D}o(se,"__restFn");function Ae(ne,Se,D,He){var fe=arguments.length,ue=fe<3?Se:He===null?He=ObjClass.getOwnPropertyDescriptor(Se,D):He,G;if(N&&typeof w[m]===strShimFunction)ue=w[m](ne,Se,D,He);else for(var he=ne.length-1;he>=0;he--)(G=ne[he])&&(ue=(fe<3?G(ue):fe>3?G(Se,D,ue):G(Se,D))||ue);return fe>3&&ue&&ObjDefineProperty(Se,D,ue),ue}o(Ae,"__decorateFn");function $(ne,Se){return function(D,He){Se(D,He,ne)}}o($,"__paramFn");function X(ne,Se){if(N&&w[y]===strShimFunction)return w[y](ne,Se)}o(X,"__metadataFn");function Z(ne,Se){for(var D in ne)D!==strDefault&&!ObjHasOwnProperty.call(Se,D)&&k(Se,ne,D)}o(Z,"__exportStarFn");function k(ne,Se,D,He){He===void 0&&(He=D),ObjCreate?ObjDefineProperty(ne,He,{enumerable:!0,get:function(){return Se[D]}}):ne[He]=Se[D]}o(k,"__createBindingFn");function j(ne){var Se=typeof I===strShimFunction&&I[W],D=Se&&ne[Se],He=0;if(D)return D.call(ne);if(ne&&typeof ne.length=="number")return{next:function(){return ne&&He>=ne.length&&(ne=void 0),{value:ne&&ne[He++],done:!ne}}};throwTypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}o(j,"__valuesFn");function x(ne,Se){var D=typeof I===strShimFunction&&ne[I[W]];if(!D)return ne;var He=D.call(ne),fe,ue=[],G;try{for(;(Se===void 0||Se-- >0)&&!(fe=He.next()).done;)ue.push(fe.value)}catch(he){G={error:he}}finally{try{fe&&!fe.done&&(D=He.return)&&D.call(He)}finally{if(G)throw G.error}}return ue}o(x,"__readFn");function le(){for(var ne=arguments,Se=0,D=0,He=ne.length;D<He;D++)Se+=ne[D].length;for(var fe=Array(Se),ue=0,D=0;D<He;D++)for(var G=ne[D],he=0,Le=G.length;he<Le;he++,ue++)fe[ue]=G[he];return fe}o(le,"__spreadArraysFn");function K(ne,Se){for(var D=0,He=Se.length,fe=ne.length;D<He;D++,fe++)ne[fe]=Se[D];return ne}o(K,"__spreadArrayFn");function ve(ne,Se){return ObjDefineProperty?ObjDefineProperty(ne,"raw",{value:Se}):ne.raw=Se,ne}o(ve,"__makeTemplateObjectFn");function _e(ne){if(ne&&ne.__esModule)return ne;var Se={};if(ne!=null)for(var D in ne)D!==strDefault&&Object.prototype.hasOwnProperty.call(ne,D)&&k(Se,ne,D);return ObjCreate?ObjDefineProperty(Se,strDefault,{enumerable:!0,value:ne}):Se[strDefault]=ne,Se}o(_e,"__importStarFn");function Pe(ne){return ne&&ne.__esModule?ne:{strDefault:ne}}o(Pe,"__importDefaultFn")},3268:(at,l,b)=>{"use strict";b.r(l),b.d(l,{AppInsightsCore:()=>ya.F,ApplicationInsights:()=>Ui,CoreUtils:()=>Ot.Tr,Sender:()=>Ro,SeverityLevel:()=>Ti,_InternalMessageId:()=>Mo.v,arrForEach:()=>q.tO,isNullOrUndefined:()=>q.le,proxyFunctions:()=>q.Vb,throwError:()=>q._y});var R=b(1679),v=b(1088),I="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",w="sampleRate",B="ProcessLegacy",N="http.method",m="https://dc.services.visualstudio.com",y="/v2/track",U="not_specified",W="iKey",_="split",O="length",F="toLowerCase",V="ingestionendpoint",se="toString",Ae="removeItem",$="name",X="message",Z="count",k="preTriggerDate",j="disabled",x="interval",le="daysOfMonth",K="date",ve="getUTCDate",_e="stringify",Pe="pathname",ne="correlationHeaderExcludePatterns",Se="indexOf",D="extensionConfig",He="exceptions",fe="parsedStack",ue="properties",G="measurements",he="sizeInBytes",Le="typeName",Je="severityLevel",oe="problemGroup",nt="isManual",ft="CreateFromInterface",ht="assembly",L="hasFullStack",H="level",te="method",ge="fileName",$e="line",ke="duration",de="receivedResponse",Ce="substring",Me="sanitizeKeyAndAddUniqueness",Xe="sanitizeException",be="sanitizeProperties",xe="sanitizeMeasurements",q=b(6708),Re=b(5018),re=b(7630),J;function qe(S,g,E){var P=g[O],ae=Lt(S,g);if(ae[O]!==P){for(var me=0,We=ae;E[We]!==void 0;)me++,We=ae[Ce](0,150-3)+Lr(me);ae=We}return ae}o(qe,"dataSanitizeKeyAndAddUniqueness");function Lt(S,g){var E;return g&&(g=(0,q.nd)(g[se]()),g[O]>150&&(E=g[Ce](0,150),(0,Re.kP)(S,2,57,"name is too long.  It has been truncated to "+150+" characters.",{name:g},!0))),E||g}o(Lt,"dataSanitizeKey");function Gt(S,g,E){E===void 0&&(E=1024);var P;return g&&(E=E||1024,g=(0,q.nd)(g),g.toString()[O]>E&&(P=g[se]()[Ce](0,E),(0,Re.kP)(S,2,61,"string value is too long. It has been truncated to "+E+" characters.",{value:g},!0))),P||g}o(Gt,"dataSanitizeString");function Ln(S,g){return Ir(S,g,2048,66)}o(Ln,"dataSanitizeUrl");function wn(S,g){var E;return g&&g[O]>32768&&(E=g[Ce](0,32768),(0,Re.kP)(S,2,56,"message is too long, it has been truncated to "+32768+" characters.",{message:g},!0)),E||g}o(wn,"dataSanitizeMessage");function jn(S,g){var E;if(g){var P=""+g;P[O]>32768&&(E=P[Ce](0,32768),(0,Re.kP)(S,2,52,"exception is too long, it has been truncated to "+32768+" characters.",{exception:g},!0))}return E||g}o(jn,"dataSanitizeException");function Qn(S,g){if(g){var E={};(0,q.rW)(g,function(P,ae){if((0,q.Kn)(ae)&&(0,re.nS)())try{ae=(0,re.xA)()[_e](ae)}catch(me){(0,Re.kP)(S,2,49,"custom property is not valid",{exception:me},!0)}ae=Gt(S,ae,8192),P=qe(S,P,E),E[P]=ae}),g=E}return g}o(Qn,"dataSanitizeProperties");function $n(S,g){if(g){var E={};(0,q.rW)(g,function(P,ae){P=qe(S,P,E),E[P]=ae}),g=E}return g}o($n,"dataSanitizeMeasurements");function vr(S,g){return g&&Ir(S,g,128,69)[se]()}o(vr,"dataSanitizeId");function Ir(S,g,E,P){var ae;return g&&(g=(0,q.nd)(g),g[O]>E&&(ae=g[Ce](0,E),(0,Re.kP)(S,2,P,"input is too long, it has been truncated to "+E+" characters.",{data:g},!0))),ae||g}o(Ir,"dataSanitizeInput");function Lr(S){var g="00"+S;return g.substr(g[O]-3)}o(Lr,"dsPadNumber");var ct=(J={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768},J[Me]=qe,J.sanitizeKey=Lt,J.sanitizeString=Gt,J.sanitizeUrl=Ln,J.sanitizeMessage=wn,J[Xe]=jn,J[be]=Qn,J[xe]=$n,J.sanitizeId=vr,J.sanitizeInput=Ir,J.padNumber=Lr,J.trim=q.nd,J),$t=function(){function S(g,E,P,ae){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var me=this;me.ver=2,me[$]=Gt(g,E)||U,me[ue]=Qn(g,P),me[G]=$n(g,ae)}return o(S,"Event"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Event",S.dataType="EventData",S}(),nn=function(){function S(g,E,P,ae,me){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var We=this;We.ver=2,E=E||U,We[X]=wn(g,E),We[ue]=Qn(g,ae),We[G]=$n(g,me),P&&(We[Je]=P)}return o(S,"Trace"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Message",S.dataType="MessageData",S}(),en="";function an(S,g){return g===void 0&&(g=!1),S==null?g:S.toString()[F]()==="true"}o(an,"stringToBoolOrDefault");function Rn(S){(isNaN(S)||S<0)&&(S=0),S=Math.round(S);var g=en+S%1e3,E=en+Math.floor(S/1e3)%60,P=en+Math.floor(S/(1e3*60))%60,ae=en+Math.floor(S/(1e3*60*60))%24,me=Math.floor(S/(1e3*60*60*24));return g=g[O]===1?"00"+g:g[O]===2?"0"+g:g,E=E[O]<2?"0"+E:E,P=P[O]<2?"0"+P:P,ae=ae[O]<2?"0"+ae:ae,(me>0?me+".":en)+ae+":"+P+":"+E+"."+g}o(Rn,"msToTimeSpan");function ar(S,g){var E=null;return(0,q.tO)(S,function(P){if(P.identifier===g)return E=P,-1}),E}o(ar,"getExtensionByName");function pr(S,g,E,P,ae){return!ae&&(0,q.HD)(S)&&(S==="Script error."||S==="Script error")}o(pr,"isCrossOriginError");var Kn=function(){function S(g,E,P,ae,me,We,je){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var bt=this;bt.ver=2,bt.id=vr(g,je),bt.url=Ln(g,P),bt[$]=Gt(g,E)||U,isNaN(ae)||(bt[ke]=Rn(ae)),bt[ue]=Qn(g,me),bt[G]=$n(g,We)}return o(S,"PageView"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",S.dataType="PageviewData",S}(),mr=function(){function S(g,E,P,ae,me,We,je){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var bt=this;bt.ver=2,bt.url=Ln(g,P),bt[$]=Gt(g,E)||U,bt[ue]=Qn(g,me),bt[G]=$n(g,We),je&&(bt.domProcessing=je.domProcessing,bt[ke]=je[ke],bt.networkConnect=je.networkConnect,bt.perfTotal=je.perfTotal,bt[de]=je[de],bt.sentRequest=je.sentRequest)}return o(S,"PageViewPerformance"),S.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",S.dataType="PageviewPerformanceData",S}(),Br="<no_method>",xn="error",Xn="stack",Ar="stackDetails",Sn="errorSrc",Yr="message",Tr="description";function Hr(S,g){var E=S;return E&&!(0,q.HD)(E)&&(JSON&&JSON[_e]?(E=JSON[_e](S),g&&(!E||E==="{}")&&((0,q.mf)(S[se])?E=S[se]():E=""+S)):E=""+S+" - (Missing JSON.stringify)"),E||""}o(Hr,"_stringify");function Ci(S,g){var E=S;return S&&(E&&!(0,q.HD)(E)&&(E=S[Yr]||S[Tr]||E),E&&!(0,q.HD)(E)&&(E=Hr(E,!0)),S.filename&&(E=E+" @"+(S.filename||"")+":"+(S.lineno||"?")+":"+(S.colno||"?"))),g&&g!=="String"&&g!=="Object"&&g!=="Error"&&(E||"")[Se](g)===-1&&(E=g+": "+E),E||""}o(Ci,"_formatMessage");function di(S){try{if((0,q.Kn)(S))return"hasFullStack"in S&&"typeName"in S}catch(g){}return!1}o(di,"_isExceptionDetailsInternal");function ur(S){try{if((0,q.Kn)(S))return"ver"in S&&"exceptions"in S&&"properties"in S}catch(g){}return!1}o(ur,"_isExceptionInternal");function T(S){return S&&S.src&&(0,q.HD)(S.src)&&S.obj&&(0,q.kJ)(S.obj)}o(T,"_isStackDetails");function ce(S){var g=S||"";(0,q.HD)(g)||((0,q.HD)(g[Xn])?g=g[Xn]:g=""+g);var E=g[_](`
`);return{src:g,obj:E}}o(ce,"_convertStackObj");function Ee(S){for(var g=[],E=S[_](`
`),P=0;P<E[O];P++){var ae=E[P];E[P+1]&&(ae+="@"+E[P+1],P++),g.push(ae)}return{src:S,obj:g}}o(Ee,"_getOperaStack");function Oe(S){var g=null;if(S)try{if(S[Xn])g=ce(S[Xn]);else if(S[xn]&&S[xn][Xn])g=ce(S[xn][Xn]);else if(S.exception&&S.exception[Xn])g=ce(S.exception[Xn]);else if(T(S))g=S;else if(T(S[Ar]))g=S[Ar];else if(window&&window.opera&&S[Yr])g=Ee(S[X]);else if(S.reason&&S.reason[Xn])g=ce(S.reason[Xn]);else if((0,q.HD)(S))g=ce(S);else{var E=S[Yr]||S[Tr]||"";(0,q.HD)(S[Sn])&&(E&&(E+=`
`),E+=" from "+S[Sn]),E&&(g=ce(E))}}catch(P){g=ce(P)}return g||{src:"",obj:null}}o(Oe,"_getStackFromErrorObj");function et(S){var g="";return S&&(S.obj?(0,q.tO)(S.obj,function(E){g+=E+`
`}):g=S.src||""),g}o(et,"_formatStackTrace");function Ue(S){var g,E=S.obj;if(E&&E[O]>0){g=[];var P=0,ae=0;(0,q.tO)(E,function(Mn){var _r=Mn[se]();if(St.regex.test(_r)){var Be=new St(_r,P++);ae+=Be[he],g.push(Be)}});var me=32*1024;if(ae>me)for(var We=0,je=g[O]-1,bt=0,mt=We,Ft=je;We<je;){var tn=g[We][he],Hn=g[je][he];if(bt+=tn+Hn,bt>me){var Xt=Ft-mt+1;g.splice(mt,Xt);break}mt=We,Ft=je,We++,je--}}return g}o(Ue,"_parseStack");function lt(S){var g="";if(S&&(g=S.typeName||S[$]||"",!g))try{var E=/function (.{1,200})\(/,P=E.exec(S.constructor[se]());g=P&&P[O]>1?P[1]:""}catch(ae){}return g}o(lt,"_getErrorType");function _t(S){if(S)try{if(!(0,q.HD)(S)){var g=lt(S),E=Hr(S,!1);return(!E||E==="{}")&&(S[xn]&&(S=S[xn],g=lt(S)),E=Hr(S,!0)),E[Se](g)!==0&&g!=="String"?g+":"+E:E}}catch(P){}return""+(S||"")}o(_t,"_formatErrorCode");var Rt=function(){function S(g,E,P,ae,me,We){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var je=this;je.ver=2,ur(E)?(je[He]=E[He]||[],je[ue]=E[ue],je[G]=E[G],E[Je]&&(je[Je]=E[Je]),E.id&&(je.id=E.id),E[oe]&&(je[oe]=E[oe]),(0,q.le)(E[nt])||(je[nt]=E[nt])):(P||(P={}),je[He]=[new cn(g,E,P)],je[ue]=Qn(g,P),je[G]=$n(g,ae),me&&(je[Je]=me),We&&(je.id=We))}return o(S,"Exception"),S.CreateAutoException=function(g,E,P,ae,me,We,je,bt){var mt,Ft=lt(me||We||g);return mt={},mt[X]=Ci(g,Ft),mt.url=E,mt.lineNumber=P,mt.columnNumber=ae,mt.error=_t(me||We||g),mt.evt=_t(We||g),mt[Le]=Ft,mt.stackDetails=Oe(je||me||We),mt.errorSrc=bt,mt},S.CreateFromInterface=function(g,E,P,ae){var me=E[He]&&(0,q.Mr)(E[He],function(je){return cn[ft](g,je)}),We=new S(g,(0,v.uc)((0,v.uc)({},E),{exceptions:me}),P,ae);return We},S.prototype.toInterface=function(){var g,E=this,P=E.exceptions,ae=E.properties,me=E.measurements,We=E.severityLevel,je=E.problemGroup,bt=E.id,mt=E.isManual,Ft=P instanceof Array&&(0,q.Mr)(P,function(tn){return tn.toInterface()})||void 0;return g={ver:"4.0"},g[He]=Ft,g.severityLevel=We,g.properties=ae,g.measurements=me,g.problemGroup=je,g.id=bt,g.isManual=mt,g},S.CreateSimpleException=function(g,E,P,ae,me,We){var je;return{exceptions:[(je={},je[L]=!0,je.message=g,je.stack=me,je.typeName=E,je)]}},S.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",S.dataType="ExceptionData",S.formatError=_t,S}(),cn=function(){function S(g,E,P){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var ae=this;if(di(E))ae[Le]=E[Le],ae[X]=E[X],ae[Xn]=E[Xn],ae[fe]=E[fe]||[],ae[L]=E[L];else{var me=E,We=me&&me.evt;(0,q.VZ)(me)||(me=me[xn]||We||me),ae[Le]=Gt(g,lt(me))||U,ae[X]=wn(g,Ci(E||me,ae[Le]))||U;var je=E[Ar]||Oe(E);ae[fe]=Ue(je),(0,q.kJ)(ae[fe])&&(0,q.Mr)(ae[fe],function(bt){return bt[ht]=Gt(g,bt[ht])}),ae[Xn]=jn(g,et(je)),ae.hasFullStack=(0,q.kJ)(ae.parsedStack)&&ae.parsedStack[O]>0,P&&(P[Le]=P[Le]||ae[Le])}}return o(S,"_ExceptionDetails"),S.prototype.toInterface=function(){var g,E=this,P=E[fe]instanceof Array&&(0,q.Mr)(E[fe],function(me){return me.toInterface()}),ae=(g={id:E.id,outerId:E.outerId,typeName:E[Le],message:E[X],hasFullStack:E[L],stack:E[Xn]},g[fe]=P||void 0,g);return ae},S.CreateFromInterface=function(g,E){var P=E[fe]instanceof Array&&(0,q.Mr)(E[fe],function(me){return St[ft](me)})||E[fe],ae=new S(g,(0,v.uc)((0,v.uc)({},E),{parsedStack:P}));return ae},S}(),St=function(){function S(g,E){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var P=this;if(P[he]=0,typeof g=="string"){var ae=g;P[H]=E,P[te]=Br,P[ht]=(0,q.nd)(ae),P[ge]="",P[$e]=0;var me=ae.match(S.regex);me&&me[O]>=5&&(P[te]=(0,q.nd)(me[2])||P[te],P[ge]=(0,q.nd)(me[4]),P[$e]=parseInt(me[5])||0)}else P[H]=g[H],P[te]=g[te],P[ht]=g[ht],P[ge]=g[ge],P[$e]=g[$e],P[he]=0;P.sizeInBytes+=P.method[O],P.sizeInBytes+=P.fileName[O],P.sizeInBytes+=P.assembly[O],P[he]+=S.baseSize,P.sizeInBytes+=P.level.toString()[O],P.sizeInBytes+=P.line.toString()[O]}return o(S,"_StackFrame"),S.CreateFromInterface=function(g){return new S(g,null)},S.prototype.toInterface=function(){var g=this;return{level:g[H],method:g[te],assembly:g[ht],fileName:g[ge],line:g[$e]}},S.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,S.baseSize=58,S}(),Jt=function(){function S(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return o(S,"DataPoint"),S}(),Nt=function(){function S(g,E,P,ae,me,We,je,bt,mt){this.aiDataContract={ver:1,metrics:1,properties:0};var Ft=this;Ft.ver=2;var tn=new Jt;tn[Z]=ae>0?ae:void 0,tn.max=isNaN(We)||We===null?void 0:We,tn.min=isNaN(me)||me===null?void 0:me,tn[$]=Gt(g,E)||U,tn.value=P,tn.stdDev=isNaN(je)||je===null?void 0:je,Ft.metrics=[tn],Ft[ue]=Qn(g,bt),Ft[G]=$n(g,mt)}return o(S,"Metric"),S.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",S.dataType="MetricData",S}(),Ot=b(5843),Tt=b(3242),Gn=b(4878),Cn=b(4869);function dr(S){var g=null;if((0,q.mf)(Event))g=new Event(S);else{var E=(0,re.Me)();E&&E.createEvent&&(g=E.createEvent("Event"),g.initEvent(S,!0,!0))}return g}o(dr,"createDomEvent");var On=b(4873),fr=(0,On.cc)({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),qr=b(2091),Wr=(0,On.By)({LocalStorage:0,SessionStorage:1}),Zn=(0,On.By)({AI:0,AI_AND_W3C:1,W3C:2}),kr=void 0,Dt=void 0;function zn(){return Sr()?bn(Wr.LocalStorage):null}o(zn,"_getLocalStorageObject");function bn(S){try{if((0,q.le)((0,qr.Rd)()))return null;var g=new Date()[se](),E=(0,re.a8)(S===Wr.LocalStorage?"localStorage":"sessionStorage");E.setItem(g,g);var P=E.getItem(g)!==g;if(E[Ae](g),!P)return E}catch(ae){}return null}o(bn,"_getVerifiedStorageObject");function Tn(){return Ii()?bn(Wr.SessionStorage):null}o(Tn,"_getSessionStorageObject");function Un(){kr=!1,Dt=!1}o(Un,"utlDisableStorage");function sr(){kr=Sr(!0),Dt=Ii(!0)}o(sr,"utlEnableStorage");function Sr(S){return(S||kr===void 0)&&(kr=!!bn(Wr.LocalStorage)),kr}o(Sr,"utlCanUseLocalStorage");function xr(S,g){var E=zn();if(E!==null)try{return E.getItem(g)}catch(P){kr=!1,(0,Re.kP)(S,2,1,"Browser failed read of local storage. "+(0,q.jj)(P),{exception:(0,re.eU)(P)})}return null}o(xr,"utlGetLocalStorage");function Dr(S,g,E){var P=zn();if(P!==null)try{return P.setItem(g,E),!0}catch(ae){kr=!1,(0,Re.kP)(S,2,3,"Browser failed write to local storage. "+(0,q.jj)(ae),{exception:(0,re.eU)(ae)})}return!1}o(Dr,"utlSetLocalStorage");function Zi(S,g){var E=zn();if(E!==null)try{return E[Ae](g),!0}catch(P){kr=!1,(0,Re.kP)(S,2,5,"Browser failed removal of local storage item. "+(0,q.jj)(P),{exception:(0,re.eU)(P)})}return!1}o(Zi,"utlRemoveStorage");function Ii(S){return(S||Dt===void 0)&&(Dt=!!bn(Wr.SessionStorage)),Dt}o(Ii,"utlCanUseSessionStorage");function sa(){var S=[];return Ii()&&(0,q.rW)((0,re.a8)("sessionStorage"),function(g){S.push(g)}),S}o(sa,"utlGetSessionStorageKeys");function Li(S,g){var E=Tn();if(E!==null)try{return E.getItem(g)}catch(P){Dt=!1,(0,Re.kP)(S,2,2,"Browser failed read of session storage. "+(0,q.jj)(P),{exception:(0,re.eU)(P)})}return null}o(Li,"utlGetSessionStorage");function Ki(S,g,E){var P=Tn();if(P!==null)try{return P.setItem(g,E),!0}catch(ae){Dt=!1,(0,Re.kP)(S,2,4,"Browser failed write to session storage. "+(0,q.jj)(ae),{exception:(0,re.eU)(ae)})}return!1}o(Ki,"utlSetSessionStorage");function ea(S,g){var E=Tn();if(E!==null)try{return E[Ae](g),!0}catch(P){Dt=!1,(0,Re.kP)(S,2,6,"Browser failed removal of session storage item. "+(0,q.jj)(P),{exception:(0,re.eU)(P)})}return!1}o(ea,"utlRemoveSessionStorage");var Gi=(0,re.Me)()||{},ta=0,fi=[null,null,null,null,null];function Qr(S){var g=ta,E=fi,P=E[g];return Gi.createElement?E[g]||(P=E[g]=Gi.createElement("a")):P={host:ri(S,!0)},P.href=S,g++,g>=E[O]&&(g=0),ta=g,P}o(Qr,"urlParseUrl");function hi(S){var g,E=Qr(S);return E&&(g=E.href),g}o(hi,"urlGetAbsoluteUrl");function Ni(S){var g,E=Qr(S);return E&&(g=E[Pe]),g}o(Ni,"urlGetPathName");function ga(S,g){return S?S.toUpperCase()+" "+g:g}o(ga,"urlGetCompleteUrl");function ri(S,g){var E=zi(S,g)||"";if(E){var P=E.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(P!=null&&P[O]>3&&(0,q.HD)(P[2])&&P[2][O]>0)return P[2]+(P[3]||"")}return E}o(ri,"urlParseHost");function zi(S,g){var E=null;if(S){var P=S.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(P!=null&&P[O]>2&&(0,q.HD)(P[2])&&P[2][O]>0&&(E=P[2]||"",g&&P[O]>2)){var ae=(P[1]||"")[F](),me=P[3]||"";(ae==="http"&&me===":80"||ae==="https"&&me===":443")&&(me=""),E+=me}}return E}o(zi,"urlParseFullHost");var Fe=[m+y,"https://breeze.aimon.applicationinsights.io"+y,"https://dc-int.services.visualstudio.com"+y];function tt(S){return(0,q.UA)(Fe,S[F]())!==-1}o(tt,"isInternalApplicationInsightsEndpoint");var vt={NotSpecified:U,createDomEvent:dr,disableStorage:Un,isInternalApplicationInsightsEndpoint:tt,canUseLocalStorage:Sr,getStorage:xr,setStorage:Dr,removeStorage:Zi,canUseSessionStorage:Ii,getSessionStorageKeys:sa,getSessionStorage:Li,setSessionStorage:Ki,removeSessionStorage:ea,disableCookies:Ot.oF,canUseCookies:Ot.vn,disallowsSameSiteNone:Tt.UY,setCookie:Ot.d8,stringToBoolOrDefault:an,getCookie:Ot.ej,deleteCookie:Ot.kT,trim:q.nd,newId:Gn.pZ,random32:function(){return(0,Gn._l)(!0)},generateW3CId:Ot.DO,isArray:q.kJ,isError:q.VZ,isDate:q.J_,toISOStringForIE8:q.Y6,getIEVersion:re.sA,msToTimeSpan:Rn,isCrossOriginError:pr,dump:re.eU,getExceptionName:q.jj,addEventHandler:Cn.pZ,IsBeaconApiSupported:re.MF,getExtension:ar},rt={parseUrl:Qr,getAbsoluteUrl:hi,getPathName:Ni,getCompleteUrl:ga,parseHost:ri,parseFullHost:zi},Ut={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(S,g,E){if(!g||S&&S.disableCorrelationHeaders)return!1;if(S&&S[ne]){for(var P=0;P<S.correlationHeaderExcludePatterns[O];P++)if(S[ne][P].test(g))return!1}var ae=Qr(g).host[F]();if(ae&&(ae[Se](":443")!==-1||ae[Se](":80")!==-1)&&(ae=(zi(g,!0)||"")[F]()),(!S||!S.enableCorsCorrelation)&&ae&&ae!==E)return!1;var me=S&&S.correlationHeaderDomains;if(me){var We;if((0,q.tO)(me,function(mt){var Ft=new RegExp(mt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));We=We||Ft.test(ae)}),!We)return!1}var je=S&&S.correlationHeaderExcludedDomains;if(!je||je[O]===0)return!0;for(var P=0;P<je[O];P++){var bt=new RegExp(je[P].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(bt.test(ae))return!1}return ae&&ae[O]>0},getCorrelationContext:function(S){if(S){var g=Ut.getCorrelationContextValue(S,fr[1]);if(g&&g!==Ut.correlationIdPrefix)return g}},getCorrelationContextValue:function(S,g){if(S)for(var E=S[_](","),P=0;P<E[O];++P){var ae=E[P][_]("=");if(ae[O]===2&&ae[0]===g)return ae[1]}}};function jt(S,g,E,P){var ae,me=P,We=P;if(g&&g[O]>0){var je=Qr(g);if(ae=je.host,!me)if(je[Pe]!=null){var bt=je.pathname[O]===0?"/":je[Pe];bt.charAt(0)!=="/"&&(bt="/"+bt),We=je[Pe],me=Gt(S,E?E+" "+bt:bt)}else me=Gt(S,g)}else ae=P,me=P;return{target:ae,name:me,data:We}}o(jt,"AjaxHelperParseDependencyPath");function pt(){var S=(0,re.r)();if(S&&S.now&&S.timing){var g=S.now()+S.timing.navigationStart;if(g>0)return g}return(0,q.m6)()}o(pt,"dateTimeUtilsNow");function rn(S,g){var E=null;return S!==0&&g!==0&&!(0,q.le)(S)&&!(0,q.le)(g)&&(E=g-S),E}o(rn,"dateTimeUtilsDuration");var Bt={Now:pt,GetDuration:rn};function mn(S,g){var E=S||{};return{getName:function(){return E[_DYN_NAME]},setName:function(P){g&&g.setName(P),E[_DYN_NAME]=P},getTraceId:function(){return E.traceID},setTraceId:function(P){g&&g.setTraceId(P),isValidTraceId(P)&&(E.traceID=P)},getSpanId:function(){return E.parentID},setSpanId:function(P){g&&g.setSpanId(P),isValidSpanId(P)&&(E.parentID=P)},getTraceFlags:function(){return E.traceFlags},setTraceFlags:function(P){g&&g.setTraceFlags(P),E.traceFlags=P}}}o(mn,"createDistributedTraceContextFromTrace");var _n=function(){function S(g,E,P,ae,me,We,je,bt,mt,Ft,tn,Hn){mt===void 0&&(mt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Xt=this;Xt.ver=2,Xt.id=E,Xt[ke]=Rn(me),Xt.success=We,Xt.resultCode=je+"",Xt.type=Gt(g,mt);var Mn=jt(g,P,bt,ae);Xt.data=Ln(g,ae)||Mn.data,Xt.target=Gt(g,Mn.target),Ft&&(Xt.target="".concat(Xt.target," | ").concat(Ft)),Xt[$]=Gt(g,Mn[$]),Xt[ue]=Qn(g,tn),Xt[G]=$n(g,Hn)}return o(S,"RemoteDependencyData"),S.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",S.dataType="RemoteDependencyData",S}(),tr="AppInsightsPropertiesPlugin",Jn="AppInsightsChannelPlugin",hr="ApplicationInsightsAnalytics",fn=b(5883),Yt=b(4063);function Vt(S){var g="ai."+S+".";return function(E){return g+E}}o(Vt,"_aiNameFunc");var kt=Vt("application"),hn=Vt("device"),M=Vt("location"),ee=Vt("operation"),ze=Vt("session"),ot=Vt("user"),Ht=Vt("cloud"),At=Vt("internal"),gn=function(S){(0,v.ne)(g,S);function g(){return S.call(this)||this}return o(g,"ContextTagKeys"),g}((0,q.hl)({applicationVersion:kt("ver"),applicationBuild:kt("build"),applicationTypeId:kt("typeId"),applicationId:kt("applicationId"),applicationLayer:kt("layer"),deviceId:hn("id"),deviceIp:hn("ip"),deviceLanguage:hn("language"),deviceLocale:hn("locale"),deviceModel:hn("model"),deviceFriendlyName:hn("friendlyName"),deviceNetwork:hn("network"),deviceNetworkName:hn("networkName"),deviceOEMName:hn("oemName"),deviceOS:hn("os"),deviceOSVersion:hn("osVersion"),deviceRoleInstance:hn("roleInstance"),deviceRoleName:hn("roleName"),deviceScreenResolution:hn("screenResolution"),deviceType:hn("type"),deviceMachineName:hn("machineName"),deviceVMName:hn("vmName"),deviceBrowser:hn("browser"),deviceBrowserVersion:hn("browserVersion"),locationIp:M("ip"),locationCountry:M("country"),locationProvince:M("province"),locationCity:M("city"),operationId:ee("id"),operationName:ee("name"),operationParentId:ee("parentId"),operationRootId:ee("rootId"),operationSyntheticSource:ee("syntheticSource"),operationCorrelationVector:ee("correlationVector"),sessionId:ze("id"),sessionIsFirst:ze("isFirst"),sessionIsNew:ze("isNew"),userAccountAcquisitionDate:ot("accountAcquisitionDate"),userAccountId:ot("accountId"),userAgent:ot("userAgent"),userId:ot("id"),userStoreRegion:ot("storeRegion"),userAuthUserId:ot("authUserId"),userAnonymousUserAcquisitionDate:ot("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ot("authUserAcquisitionDate"),cloudName:Ht("name"),cloudRole:Ht("role"),cloudRoleVer:Ht("roleVer"),cloudRoleInstance:Ht("roleInstance"),cloudEnvironment:Ht("environment"),cloudLocation:Ht("location"),cloudDeploymentUnit:Ht("deploymentUnit"),internalNodeName:At("nodeName"),internalSdkVersion:At("sdkVersion"),internalAgentVersion:At("agentVersion"),internalSnippet:At("snippet"),internalSdkSrc:At("sdkSrc")})),vn={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},qt=new gn,un=function(){function S(g,E,P){var ae=this,me=this;me.ver=1,me.sampleRate=100,me.tags={},me[$]=Gt(g,P)||U,me.data=E,me.time=(0,q.Y6)(new Date),me.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return ae.sampleRate===100?4:1},tags:1,data:1}}return o(S,"Envelope"),S}(),pn=function(){function S(g,E){this.aiDataContract={baseType:1,baseData:1},this.baseType=g,this.baseData=E}return o(S,"Data"),S}(),Kt="duration",ut="tags",kn="deviceType",Pn="data",Fn="name",nr="traceID",It="length",Bn="stringify",yr="measurements",In="dataType",Zr="envelopeType",Fr="toString",Cr="onLine",gi="isOnline",gr="enqueue",ii="count",Xr="push",Mr="emitLineDelimitedJson",vi="clear",pi="batchPayloads",ai="markAsSent",oi="clearSent",$r="bufferOverride",Kr="BUFFER_KEY",ei="SENT_BUFFER_KEY",ti="MAX_BUFFER_SIZE",Yn="namePrefix",mi="maxBatchSizeInBytes",ye="triggerSend",Ze="diagLog",st="onunloadDisableBeacon",wt="isBeaconApiDisabled",Et="_sender",Wt="_senderConfig",ln="enableSessionStorageBuffer",pe="_buffer",Ne="samplingPercentage",Ge="instrumentationKey",dt="endpointUrl",xt="customHeaders",Qt="disableXhr",Dn="onunloadDisableFetch",An="disableTelemetry",Vn="baseType",si="sampleRate",li="convertUndefined",bi="_xhrReadyStateChange",or="_onError",_i="_onPartialSuccess",Ei="_onSuccess",yi="itemsAccepted",na="itemsReceived",br="isRetryDisabled",Ai="setRequestHeader",ra="maxBatchInterval",Vi="eventsSendRequest",Ji="disableInstrumentationKeyValidation",ji="getSamplingScore",Ra="getHashCodeScore",ia="baseType",rr="baseData",Nr="properties",Ta="true";function wr(S,g,E){return(0,q.sO)(S,g,E,q.fQ)}o(wr,"_setValueIf");function va(S,g,E){var P=E[ut]=E[ut]||{},ae=g.ext=g.ext||{},me=g[ut]=g[ut]||[],We=ae.user;We&&(wr(P,qt.userAuthUserId,We.authId),wr(P,qt.userId,We.id||We.localId));var je=ae.app;je&&wr(P,qt.sessionId,je.sesId);var bt=ae.device;bt&&(wr(P,qt.deviceId,bt.id||bt.localId),wr(P,qt[kn],bt.deviceClass),wr(P,qt.deviceIp,bt.ip),wr(P,qt.deviceModel,bt.model),wr(P,qt[kn],bt[kn]));var mt=g.ext.web;if(mt){wr(P,qt.deviceLanguage,mt.browserLang),wr(P,qt.deviceBrowserVersion,mt.browserVer),wr(P,qt.deviceBrowser,mt.browser);var Ft=E[Pn]=E[Pn]||{},tn=Ft[rr]=Ft[rr]||{},Hn=tn[Nr]=tn[Nr]||{};wr(Hn,"domain",mt.domain),wr(Hn,"isManual",mt.isManual?Ta:null),wr(Hn,"screenRes",mt.screenRes),wr(Hn,"userConsent",mt.userConsent?Ta:null)}var Xt=ae.os;Xt&&wr(P,qt.deviceOS,Xt[Fn]);var Mn=ae.trace;Mn&&(wr(P,qt.operationParentId,Mn.parentID),wr(P,qt.operationName,Gt(S,Mn[Fn])),wr(P,qt.operationId,Mn[nr]));for(var _r={},Be=me[It]-1;Be>=0;Be--){var lr=me[Be];(0,q.rW)(lr,function(er,Er){_r[er]=Er}),me.splice(Be,1)}(0,q.rW)(me,function(er,Er){_r[er]=Er});var qn=(0,v.uc)((0,v.uc)({},P),_r);qn[qt.internalSdkVersion]||(qn[qt.internalSdkVersion]="javascript:".concat(Ja.Version)),E[ut]=(0,q.Ax)(qn)}o(va,"_extractPartAExtensions");function ki(S,g,E){(0,q.le)(S)||(0,q.rW)(S,function(P,ae){(0,q.hj)(ae)?E[P]=ae:(0,q.HD)(ae)?g[P]=ae:(0,re.nS)()&&(g[P]=(0,re.xA)()[Bn](ae))})}o(ki,"_extractPropsAndMeasurements");function Gr(S,g){(0,q.le)(S)||(0,q.rW)(S,function(E,P){S[E]=P||g})}o(Gr,"_convertPropsUndefinedToCustomDefinedValue");function xi(S,g,E,P){var ae=new un(S,P,g);wr(ae,"sampleRate",E[w]),(E[rr]||{}).startTime&&(ae.time=(0,q.Y6)(E[rr].startTime)),ae.iKey=E.iKey;var me=E.iKey.replace(/-/g,"");return ae[Fn]=ae[Fn].replace("{0}",me),va(S,E,ae),E[ut]=E[ut]||[],(0,q.Ax)(ae)}o(xi,"_createEnvelope");function Oi(S,g){(0,q.le)(g[rr])&&(0,Re.kP)(S,1,46,"telemetryItem.baseData cannot be null.")}o(Oi,"EnvelopeCreatorInit");var Ja={Version:"2.8.12"};function ja(S,g,E){Oi(S,g);var P=g[rr][yr]||{},ae=g[rr][Nr]||{};ki(g[Pn],ae,P),(0,q.le)(E)||Gr(ae,E);var me=g[rr];if((0,q.le)(me))return(0,Re.jV)(S,"Invalid input for dependency data"),null;var We=me[Nr]&&me[Nr][N]?me[Nr][N]:"GET",je=new _n(S,me.id,me.target,me[Fn],me[Kt],me.success,me.responseCode,We,me.type,me.correlationContext,ae,P),bt=new pn(_n[In],je);return xi(S,_n[Zr],g,bt)}o(ja,"DependencyEnvelopeCreator");function Ma(S,g,E){Oi(S,g);var P={},ae={};g[ia]!==$t[In]&&(P.baseTypeSource=g[ia]),g[ia]===$t[In]?(P=g[rr][Nr]||{},ae=g[rr][yr]||{}):g[rr]&&ki(g[rr],P,ae),ki(g[Pn],P,ae),(0,q.le)(E)||Gr(P,E);var me=g[rr][Fn],We=new $t(S,me,P,ae),je=new pn($t[In],We);return xi(S,$t[Zr],g,je)}o(Ma,"EventEnvelopeCreator");function Ya(S,g,E){Oi(S,g);var P=g[rr][yr]||{},ae=g[rr][Nr]||{};ki(g[Pn],ae,P),(0,q.le)(E)||Gr(ae,E);var me=g[rr],We=Rt.CreateFromInterface(S,me,ae,P),je=new pn(Rt[In],We);return xi(S,Rt[Zr],g,je)}o(Ya,"ExceptionEnvelopeCreator");function qa(S,g,E){Oi(S,g);var P=g[rr],ae=P[Nr]||{},me=P[yr]||{};ki(g[Pn],ae,me),(0,q.le)(E)||Gr(ae,E);var We=new Nt(S,P[Fn],P.average,P.sampleCount,P.min,P.max,P.stdDev,ae,me),je=new pn(Nt[In],We);return xi(S,Nt[Zr],g,je)}o(qa,"MetricEnvelopeCreator");function Qa(S,g,E){Oi(S,g);var P,ae=g[rr];!(0,q.le)(ae)&&!(0,q.le)(ae[Nr])&&!(0,q.le)(ae[Nr][Kt])?(P=ae[Nr][Kt],delete ae[Nr][Kt]):!(0,q.le)(g[Pn])&&!(0,q.le)(g[Pn][Kt])&&(P=g[Pn][Kt],delete g[Pn][Kt]);var me=g[rr],We;((g.ext||{}).trace||{})[nr]&&(We=g.ext.trace[nr]);var je=me.id||We,bt=me[Fn],mt=me.uri,Ft=me[Nr]||{},tn=me[yr]||{};if((0,q.le)(me.refUri)||(Ft.refUri=me.refUri),(0,q.le)(me.pageType)||(Ft.pageType=me.pageType),(0,q.le)(me.isLoggedIn)||(Ft.isLoggedIn=me.isLoggedIn[Fr]()),!(0,q.le)(me[Nr])){var Hn=me[Nr];(0,q.rW)(Hn,function(_r,Be){Ft[_r]=Be})}ki(g[Pn],Ft,tn),(0,q.le)(E)||Gr(Ft,E);var Xt=new Kn(S,bt,mt,P,Ft,tn,je),Mn=new pn(Kn[In],Xt);return xi(S,Kn[Zr],g,Mn)}o(Qa,"PageViewEnvelopeCreator");function pa(S,g,E){Oi(S,g);var P=g[rr],ae=P[Fn],me=P.uri||P.url,We=P[Nr]||{},je=P[yr]||{};ki(g[Pn],We,je),(0,q.le)(E)||Gr(We,E);var bt=new mr(S,ae,me,void 0,We,je,P),mt=new pn(mr[In],bt);return xi(S,mr[Zr],g,mt)}o(pa,"PageViewPerformanceEnvelopeCreator");function Xa(S,g,E){Oi(S,g);var P=g[rr].message,ae=g[rr].severityLevel,me=g[rr][Nr]||{},We=g[rr][yr]||{};ki(g[Pn],me,We),(0,q.le)(E)||Gr(me,E);var je=new nn(S,P,ae,me,We),bt=new pn(nn[In],je);return xi(S,nn[Zr],g,bt)}o(Xa,"TraceEnvelopeCreator");function Pa(S,g){(0,Cn.QY)(S,null,null,g)}o(Pa,"_disableEvents");function Za(S){var g,E=(0,re.Me)(),P=(0,re.jW)(),ae=!1,me=!0,We=(0,Cn.jU)((0,fn.J)("OfflineListener"),S);try{if(bt((0,re.Jj)())&&(ae=!0),E){var je=E.body||E;je.ononline&&bt(je)&&(ae=!0)}ae&&P&&!(0,q.le)(P[Cr])&&(me=P[Cr])}catch(Xt){ae=!1}function bt(Xt){var Mn=!1;return Xt&&(Mn=(0,Cn.XO)(Xt,"online",mt,We),Mn&&(0,Cn.XO)(Xt,"offline",Ft,We)),Mn}o(bt,"_enableEvents");function mt(){me=!0}o(mt,"_setOnline");function Ft(){me=!1}o(Ft,"_setOffline");function tn(){var Xt=!0;return ae?Xt=me:P&&!(0,q.le)(P[Cr])&&(Xt=P[Cr]),Xt}o(tn,"_isOnline");function Hn(){var Xt=(0,re.Jj)();if(Xt&&ae){if(Pa(Xt,We),E){var Mn=E.body||E;(0,q.o8)(Mn.ononline)||Pa(Mn,We)}ae=!1}}return o(Hn,"_unload"),g={},g[gi]=tn,g.isListening=function(){return ae},g.unload=Hn,g}o(Za,"createOfflineListener");var aa=function(){function S(g,E){var P=[],ae=!1;this._get=function(){return P},this._set=function(me){return P=me,P},(0,R.Z)(S,this,function(me){me[gr]=function(We){if(me[ii]()>=E.eventsLimitInMem()){ae||((0,Re.kP)(g,2,105,"Maximum in-memory buffer size reached: "+me[ii](),!0),ae=!0);return}P[Xr](We)},me[ii]=function(){return P[It]},me.size=function(){for(var We=P[It],je=0;je<P[It];je++)We+=P[je][It];return E[Mr]()||(We+=2),We},me[vi]=function(){P=[],ae=!1},me.getItems=function(){return P.slice(0)},me[pi]=function(We){if(We&&We[It]>0){var je=E[Mr]()?We.join(`
`):"["+We.join(",")+"]";return je}return null}})}return o(S,"BaseSendBuffer"),S.__ieDyn=1,S}(),eo=function(S){(0,v.ne)(g,S);function g(E,P){var ae=S.call(this,E,P)||this;return(0,R.Z)(g,ae,function(me,We){me[ai]=function(je){We[vi]()},me[oi]=function(je){}}),ae}return o(g,"ArraySendBuffer"),g.__ieDyn=1,g}(aa),Ia=function(S){(0,v.ne)(g,S);function g(E,P){var ae=S.call(this,E,P)||this,me=!1,We=P[$r]()||{getItem:Li,setItem:Ki},je=We.getItem,bt=We.setItem;return(0,R.Z)(g,ae,function(mt,Ft){var tn=_r(g[Kr]),Hn=_r(g[ei]),Xt=mt._set(tn.concat(Hn));Xt[It]>g[ti]&&(Xt[It]=g[ti]),Be(g[ei],[]),Be(g[Kr],Xt),mt[gr]=function(lr){if(mt[ii]()>=g[ti]){me||((0,Re.kP)(E,2,67,"Maximum buffer size reached: "+mt[ii](),!0),me=!0);return}Ft[gr](lr),Be(g[Kr],mt._get())},mt[vi]=function(){Ft[vi](),Be(g[Kr],mt._get()),Be(g[ei],[]),me=!1},mt[ai]=function(lr){Be(g[Kr],mt._set(Mn(lr,mt._get())));var qn=_r(g[ei]);qn instanceof Array&&lr instanceof Array&&(qn=qn.concat(lr),qn[It]>g[ti]&&((0,Re.kP)(E,1,67,"Sent buffer reached its maximum size: "+qn[It],!0),qn[It]=g[ti]),Be(g[ei],qn))},mt[oi]=function(lr){var qn=_r(g[ei]);qn=Mn(lr,qn),Be(g[ei],qn)};function Mn(lr,qn){var er=[];return(0,q.tO)(qn,function(Er){!(0,q.mf)(Er)&&(0,q.UA)(lr,Er)===-1&&er[Xr](Er)}),er}o(Mn,"_removePayloadsFromBuffer");function _r(lr){var qn=lr;try{qn=P[Yn]&&P[Yn]()?P[Yn]()+"_"+qn:qn;var er=je(E,qn);if(er){var Er=(0,re.xA)().parse(er);if((0,q.HD)(Er)&&(Er=(0,re.xA)().parse(Er)),Er&&(0,q.kJ)(Er))return Er}}catch(Bi){(0,Re.kP)(E,1,42," storage key: "+qn+", "+(0,q.jj)(Bi),{exception:(0,re.eU)(Bi)})}return[]}o(_r,"_getBuffer");function Be(lr,qn){var er=lr;try{er=P[Yn]&&P[Yn]()?P[Yn]()+"_"+er:er;var Er=JSON[Bn](qn);bt(E,er,Er)}catch(Bi){bt(E,er,JSON[Bn]([])),(0,Re.kP)(E,2,41," storage key: "+er+", "+(0,q.jj)(Bi)+". Buffer cleared",{exception:(0,re.eU)(Bi)})}}o(Be,"_setBuffer")}),ae}return o(g,"SessionStorageSendBuffer"),g.BUFFER_KEY="AI_buffer",g.SENT_BUFFER_KEY="AI_sentBuffer",g.MAX_BUFFER_SIZE=2e3,g}(aa),La=function(){function S(g){(0,R.Z)(S,this,function(E){E.serialize=function(We){var je=P(We,"root");try{return(0,re.xA)()[Bn](je)}catch(bt){(0,Re.kP)(g,1,48,bt&&(0,q.mf)(bt[Fr])?bt[Fr]():"Error serializing object",null,!0)}};function P(We,je){var bt="__aiCircularRefCheck",mt={};if(!We)return(0,Re.kP)(g,1,48,"cannot serialize object because it is null or undefined",{name:je},!0),mt;if(We[bt])return(0,Re.kP)(g,2,50,"Circular reference detected while serializing object",{name:je},!0),mt;if(!We.aiDataContract){if(je==="measurements")mt=me(We,"number",je);else if(je==="properties")mt=me(We,"string",je);else if(je==="tags")mt=me(We,"string",je);else if((0,q.kJ)(We))mt=ae(We,je);else{(0,Re.kP)(g,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:je},!0);try{(0,re.xA)()[Bn](We),mt=We}catch(Ft){(0,Re.kP)(g,1,48,Ft&&(0,q.mf)(Ft[Fr])?Ft[Fr]():"Error serializing object",null,!0)}}return mt}return We[bt]=!0,(0,q.rW)(We.aiDataContract,function(Ft,tn){var Hn=(0,q.mf)(tn)?tn()&1:tn&1,Xt=(0,q.mf)(tn)?tn()&4:tn&4,Mn=tn&2,_r=We[Ft]!==void 0,Be=(0,q.Kn)(We[Ft])&&We[Ft]!==null;if(Hn&&!_r&&!Mn)(0,Re.kP)(g,1,24,"Missing required field specification. The field is required but not present on source",{field:Ft,name:je});else if(!Xt){var lr=void 0;Be?Mn?lr=ae(We[Ft],Ft):lr=P(We[Ft],Ft):lr=We[Ft],lr!==void 0&&(mt[Ft]=lr)}}),delete We[bt],mt}o(P,"_serializeObject");function ae(We,je){var bt;if(We)if(!(0,q.kJ)(We))(0,Re.kP)(g,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:je},!0);else{bt=[];for(var mt=0;mt<We[It];mt++){var Ft=We[mt],tn=P(Ft,je+"["+mt+"]");bt[Xr](tn)}}return bt}o(ae,"_serializeArray");function me(We,je,bt){var mt;return We&&(mt={},(0,q.rW)(We,function(Ft,tn){if(je==="string")tn===void 0?mt[Ft]="undefined":tn===null?mt[Ft]="null":tn[Fr]?mt[Ft]=tn[Fr]():mt[Ft]="invalid field: toString() is not defined.";else if(je==="number")if(tn===void 0)mt[Ft]="undefined";else if(tn===null)mt[Ft]="null";else{var Hn=parseFloat(tn);isNaN(Hn)?mt[Ft]="NaN":mt[Ft]=Hn}else mt[Ft]="invalid field: "+bt+" is of unknown type.",(0,Re.kP)(g,1,mt[Ft],null,!0)})),mt}o(me,"_serializeStringMap")})}return o(S,"Serializer"),S.__ieDyn=1,S}(),to=8,no=function(){function S(){}return o(S,"HashCodeScoreGenerator"),S.prototype.getHashCodeScore=function(g){var E=this.getHashCode(g)/S.INT_MAX_VALUE;return E*100},S.prototype.getHashCode=function(g){if(g==="")return 0;for(;g[It]<to;)g=g.concat(g);for(var E=5381,P=0;P<g[It];++P)E=(E<<5)+E+g.charCodeAt(P),E=E&E;return Math.abs(E)},S.INT_MAX_VALUE=2147483647,S}(),Di=function(){function S(){var g=this,E=new no,P=new gn;g[ji]=function(ae){var me=0;return ae[ut]&&ae[ut][P.userId]?me=E.getHashCodeScore(ae[ut][P.userId]):ae.ext&&ae.ext.user&&ae.ext.user.id?me=E[Ra](ae.ext.user.id):ae[ut]&&ae[ut][P.operationId]?me=E.getHashCodeScore(ae[ut][P.operationId]):ae.ext&&ae.ext.telemetryTrace&&ae.ext.telemetryTrace[nr]?me=E.getHashCodeScore(ae.ext.telemetryTrace[nr]):me=Math.random()*100,me}}return o(S,"SamplingScoreGenerator"),S}(),ro=function(){function S(g,E){this.INT_MAX_VALUE=2147483647;var P=E||(0,Re.vH)(null);(g>100||g<0)&&(P.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:g},!0),g=100),this[si]=g,this.samplingScoreGenerator=new Di}return o(S,"Sample"),S.prototype.isSampledIn=function(g){var E=this[si],P=!1;return E==null||E>=100||g.baseType===Nt[In]?!0:(P=this.samplingScoreGenerator[ji](g)<E,P)},S}(),Ri,io=65e3;function la(S){try{return S.responseText}catch(g){}return null}o(la,"_getResponseText");function ka(){var S,g,E;return S={endpointUrl:function(){return m+y}},S[Mr]=function(){return!1},S[ra]=function(){return 15e3},S[mi]=function(){return 102400},S[An]=function(){return!1},S[ln]=function(){return!0},S[$r]=function(){return!1},S[br]=function(){return!1},S[wt]=function(){return!0},S[Qt]=function(){return!1},S[Dn]=function(){return!1},S[st]=function(){return!1},S[Ge]=function(){return g},S[Yn]=function(){return g},S[Ne]=function(){return 100},S[xt]=function(){return E},S[li]=function(){return g},S.eventsLimitInMem=function(){return 1e4},S}o(ka,"_getDefaultAppInsightsChannelConfig");var ao=(Ri={},Ri[$t.dataType]=Ma,Ri[nn.dataType]=Xa,Ri[Kn.dataType]=Qa,Ri[mr.dataType]=pa,Ri[Rt.dataType]=Ya,Ri[Nt.dataType]=qa,Ri[_n.dataType]=ja,Ri),Ro=function(S){(0,v.ne)(g,S);function g(){var E=S.call(this)||this;E.priority=1001,E.identifier=Jn,E._senderConfig=ka();var P,ae,me,We,je,bt,mt,Ft,tn=0,Hn,Xt,Mn,_r;return(0,R.Z)(g,E,function(Be,lr){Oa(),Be.pause=function(){ba(),We=!0},Be.resume=function(){We&&(We=!1,ae=null,Be._buffer.size()>Be._senderConfig[mi]()&&Be[ye](!0,null,10),qi())},Be.flush=function(Te,Ct,Mt){if(Te===void 0&&(Te=!0),!We){ba();try{Be[ye](Te,null,Mt||1)}catch(on){(0,Re.kP)(Be[Ze](),1,22,"flush failed, telemetry will not be collected: "+(0,q.jj)(on),{exception:(0,re.eU)(on)})}}},Be.onunloadFlush=function(){if(!We)if((Be._senderConfig[st]()===!1||Be[Wt][wt]()===!1)&&(0,re.MF)())try{Be[ye](!0,Bi,2)}catch(Te){(0,Re.kP)(Be[Ze](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+(0,q.jj)(Te),{exception:(0,re.eU)(Te)})}else Be.flush()},Be.addHeader=function(Te,Ct){Ft[Te]=Ct},Be.initialize=function(Te,Ct,Mt,on){Be.isInitialized()&&(0,Re.kP)(Be[Ze](),1,28,"Sender is already initialized"),lr.initialize(Te,Ct,Mt,on);var En=Be._getTelCtx(),Nn=Be.identifier;bt=new La(Ct.logger),P=0,ae=null,me=0,Be[Et]=null,mt=0;var Wn=Be[Ze]();_r=(0,Cn.jU)((0,fn.J)("Sender"),Ct.evtNamespace&&Ct.evtNamespace()),Mn=Za(_r);var Pr=ka();(0,q.rW)(Pr,function(Jr,ir){Be[Wt][Jr]=function(){var ua=En.getConfig(Nn,Jr,ir());return!ua&&Jr==="endpointUrl"&&(ua=ir()),ua}});var Si=Be[Wt][ln]()&&!!(Be._senderConfig[$r]()||Ii());Be[pe]=Si?new Ia(Wn,Be[Wt]):new eo(Wn,Be[Wt]),Be._sample=new ro(Be[Wt][Ne](),Wn),fo(Te)||(0,Re.kP)(Wn,1,100,"Invalid Instrumentation key "+Te[Ge]),!tt(Be._senderConfig.endpointUrl())&&Be._senderConfig.customHeaders()&&Be._senderConfig.customHeaders()[It]>0&&(0,q.tO)(Be[Wt][xt](),function(Jr){E.addHeader(Jr.header,Jr.value)});var Or=Be[Wt],Vr=null;!Or[Qt]()&&(0,re.cp)()?Vr=co:!Or[Qt]()&&(0,re.Z3)()&&(Vr=Ca),!Vr&&(0,re.JO)()&&(Vr=so),Hn=Vr||Ca,!Or[wt]()&&(0,re.MF)()&&(Vr=Sa),Be[Et]=Vr||Ca,!Or[Dn]()&&(0,re.JO)(!0)?Xt=zr:(0,re.MF)()?Xt=Sa:!Or[Qt]()&&(0,re.cp)()?Xt=co:!Or[Qt]()&&(0,re.Z3)()?Xt=Ca:Xt=Hn},Be.processTelemetry=function(Te,Ct){Ct=Be._getTelCtx(Ct);var Mt=Ct[Ze]();try{if(Be[Wt][An]())return;if(!Te){(0,Re.kP)(Mt,1,7,"Cannot send empty telemetry");return}if(Te.baseData&&!Te[Vn]){(0,Re.kP)(Mt,1,70,"Cannot send telemetry without baseData and baseType");return}if(Te[Vn]||(Te[Vn]="EventData"),!Be[Et]){(0,Re.kP)(Mt,1,28,"Sender was not initialized");return}if(qn(Te))Te[w]=Be._sample[si];else{(0,Re.kP)(Mt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:Be._sample[si]});return}var on=Be[Wt][li]()||void 0,En=Te.iKey||Be[Wt][Ge](),Nn=g.constructEnvelope(Te,En,Mt,on);if(!Nn){(0,Re.kP)(Mt,1,47,"Unable to create an AppInsights envelope");return}var Wn=!1;if(Te[ut]&&Te[ut][B]&&((0,q.tO)(Te[ut][B],function(Vr){try{Vr&&Vr(Nn)===!1&&(Wn=!0,(0,Re.jV)(Mt,"Telemetry processor check returns false"))}catch(Jr){(0,Re.kP)(Mt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,q.jj)(Jr),{exception:(0,re.eU)(Jr)},!0)}}),delete Te[ut][B]),Wn)return;var Pr=bt.serialize(Nn),Si=Be[pe],Or=Si.size();Or+Pr[It]>Be[Wt][mi]()&&(!Mn||Mn[gi]())&&Be[ye](!0,null,10),Si[gr](Pr),qi()}catch(Vr){(0,Re.kP)(Mt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+(0,q.jj)(Vr),{exception:(0,re.eU)(Vr)})}Be.processNext(Te,Ct)},Be[bi]=function(Te,Ct,Mt){Te.readyState===4&&er(Te.status,Ct,Te.responseURL,Mt,wi(Te),la(Te)||Te.response)},Be[ye]=function(Te,Ct,Mt){if(Te===void 0&&(Te=!0),!We)try{var on=Be[pe];if(Be[Wt][An]())on[vi]();else{if(on[ii]()>0){var En=on.getItems();ts(Mt||0,Te),Ct?Ct.call(E,En,Te):Be[Et](En,Te)}me=+new Date}ba()}catch(Wn){var Nn=(0,re.sA)();(!Nn||Nn>9)&&(0,Re.kP)(Be[Ze](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+(0,q.jj)(Wn),{exception:(0,re.eU)(Wn)})}},Be._doTeardown=function(Te,Ct){Be.onunloadFlush(),Mn.unload(),Oa()},Be[or]=function(Te,Ct,Mt){(0,Re.kP)(Be[Ze](),2,26,"Failed to send telemetry.",{message:Ct}),Be._buffer[oi](Te)},Be[_i]=function(Te,Ct){for(var Mt=[],on=[],En=Ct.errors.reverse(),Nn=0,Wn=En;Nn<Wn.length;Nn++){var Pr=Wn[Nn],Si=Te.splice(Pr.index,1)[0];Na(Pr.statusCode)?on[Xr](Si):Mt[Xr](Si)}Te[It]>0&&Be[Ei](Te,Ct[yi]),Mt[It]>0&&Be[or](Mt,wi(null,["partial success",Ct[yi],"of",Ct.itemsReceived].join(" "))),on[It]>0&&(ca(on),(0,Re.kP)(Be[Ze](),2,40,"Partial success. Delivered: "+Te[It]+", Failed: "+Mt[It]+". Will retry to send "+on[It]+" our of "+Ct[na]+" items"))},Be[Ei]=function(Te,Ct){Be._buffer[oi](Te)},Be._xdrOnLoad=function(Te,Ct){var Mt=la(Te);if(Te&&(Mt+""=="200"||Mt===""))P=0,Be[Ei](Ct,0);else{var on=xa(Mt);on&&on.itemsReceived&&on.itemsReceived>on[yi]&&!Be[Wt][br]()?Be[_i](Ct,on):Be[or](Ct,uo(Te))}};function qn(Te){return Be._sample.isSampledIn(Te)}o(qn,"_isSampledIn");function er(Te,Ct,Mt,on,En,Nn){var Wn=null;if(Be._appId||(Wn=xa(Nn),Wn&&Wn.appId&&(Be._appId=Wn.appId)),(Te<200||Te>=300)&&Te!==0){if((Te===301||Te===307||Te===308)&&!Er(Mt)){Be[or](Ct,En);return}!Be[Wt][br]()&&Na(Te)?(ca(Ct),(0,Re.kP)(Be[Ze](),2,40,". Response code "+Te+". Will retry to send "+Ct[It]+" items.")):Be[or](Ct,En)}else if(Mn&&!Mn[gi]()){if(!Be[Wt][br]()){var Pr=10;ca(Ct,Pr),(0,Re.kP)(Be[Ze](),2,40,". Offline - Response Code: ".concat(Te,". Offline status: ").concat(!Mn.isOnline(),". Will retry to send ").concat(Ct.length," items."))}}else Er(Mt),Te===206?(Wn||(Wn=xa(Nn)),Wn&&!Be[Wt][br]()?Be[_i](Ct,Wn):Be[or](Ct,En)):(P=0,Be[Ei](Ct,on))}o(er,"_checkResponsStatus");function Er(Te){return mt>=10?!1:!(0,q.le)(Te)&&Te!==""&&Te!==Be[Wt][dt]()?(Be[Wt][dt]=function(){return Te},++mt,!0):!1}o(Er,"_checkAndUpdateEndPointUrl");function Bi(Te,Ct){Xt?Xt(Te,!1):Sa(Te,Ct)}o(Bi,"_doUnloadSend");function ni(Te){var Ct=(0,re.jW)(),Mt=Be[pe],on=Be[Wt][dt](),En=Be._buffer[pi](Te),Nn=new Blob([En],{type:"text/plain;charset=UTF-8"}),Wn=Ct.sendBeacon(on,Nn);return Wn&&(Mt[ai](Te),Be._onSuccess(Te,Te[It])),Wn}o(ni,"_doBeaconSend");function Sa(Te,Ct){if((0,q.kJ)(Te)&&Te[It]>0&&!ni(Te)){for(var Mt=[],on=0;on<Te[It];on++){var En=Te[on];ni([En])||Mt[Xr](En)}Mt[It]>0&&(Hn&&Hn(Mt,!0),(0,Re.kP)(Be[Ze](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}o(Sa,"_beaconSender");function Ca(Te,Ct){var Mt=new XMLHttpRequest,on=Be[Wt][dt]();try{Mt[I]=!0}catch(Nn){}Mt.open("POST",on,Ct),Mt[Ai]("Content-type","application/json"),tt(on)&&Mt[Ai](fr[6],fr[7]),(0,q.tO)((0,q.FY)(Ft),function(Nn){Mt[Ai](Nn,Ft[Nn])}),Mt.onreadystatechange=function(){return Be._xhrReadyStateChange(Mt,Te,Te[It])},Mt.onerror=function(Nn){return Be[or](Te,wi(Mt),Nn)};var En=Be._buffer[pi](Te);Mt.send(En),Be._buffer[ai](Te)}o(Ca,"_xhrSender");function zr(Te,Ct){if((0,q.kJ)(Te)){for(var Mt=Te[It],on=0;on<Te[It];on++)Mt+=Te[on][It];tn+Mt<=io?lo(Te,!1):(0,re.MF)()?Sa(Te,Ct):(Hn&&Hn(Te,!0),(0,Re.kP)(Be[Ze](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}o(zr,"_fetchKeepAliveSender");function so(Te,Ct){lo(Te,!0)}o(so,"_fetchSender");function lo(Te,Ct){var Mt,on=Be[Wt][dt](),En=Be._buffer[pi](Te),Nn=new Blob([En],{type:"application/json"}),Wn=new Headers,Pr=En[It],Si=!1,Or=!1;tt(on)&&Wn.append(fr[6],fr[7]),(0,q.tO)((0,q.FY)(Ft),function(ir){Wn.append(ir,Ft[ir])});var Vr=(Mt={method:"POST",headers:Wn,body:Nn},Mt[I]=!0,Mt);Ct||(Vr.keepalive=!0,Si=!0,tn+=Pr);var Jr=new Request(on,Vr);try{Jr[I]=!0}catch(ir){}Be._buffer[ai](Te);try{fetch(Jr).then(function(ir){Ct||(tn-=Pr,Pr=0),Or||(Or=!0,ir.ok?ir.text().then(function(ua){er(ir.status,Te,ir.url,Te[It],ir.statusText,ua)}):Be[or](Te,ir.statusText))}).catch(function(ir){Ct||(tn-=Pr,Pr=0),Or||(Or=!0,Be[or](Te,ir.message))})}catch(ir){Or||Be[or](Te,(0,re.eU)(ir))}Si&&!Or&&(Or=!0,Be._onSuccess(Te,Te[It]))}o(lo,"_doFetchSender");function xa(Te){try{if(Te&&Te!==""){var Ct=(0,re.xA)().parse(Te);if(Ct&&Ct.itemsReceived&&Ct.itemsReceived>=Ct[yi]&&Ct.itemsReceived-Ct.itemsAccepted===Ct.errors[It])return Ct}}catch(Mt){(0,Re.kP)(Be[Ze](),1,43,"Cannot parse the response. "+(0,q.jj)(Mt),{response:Te})}return null}o(xa,"_parseResponse");function ca(Te,Ct){if(Ct===void 0&&(Ct=1),!(!Te||Te[It]===0)){var Mt=Be[pe];Mt[oi](Te),P++;for(var on=0,En=Te;on<En.length;on++){var Nn=En[on];Mt[gr](Nn)}Fa(Ct),qi()}}o(ca,"_resendPayload");function Fa(Te){var Ct=10,Mt;if(P<=1)Mt=Ct;else{var on=(Math.pow(2,P)-1)/2,En=Math.floor(Math.random()*on*Ct)+1;En=Te*En,Mt=Math.max(Math.min(En,3600),Ct)}var Nn=(0,q.m6)()+Mt*1e3;ae=Nn}o(Fa,"_setRetryTime");function qi(){if(!je&&!We){var Te=ae?Math.max(0,ae-(0,q.m6)()):0,Ct=Math.max(Be[Wt][ra](),Te);je=setTimeout(function(){je=null,Be[ye](!0,null,1)},Ct)}}o(qi,"_setupTimer");function ba(){clearTimeout(je),je=null,ae=null}o(ba,"_clearScheduledTimer");function Na(Te){return Te===401||Te===403||Te===408||Te===429||Te===500||Te===502||Te===503||Te===504}o(Na,"_isRetriable");function wi(Te,Ct){return Te?"XMLHttpRequest,Status:"+Te.status+",Response:"+la(Te)||0||0:Ct}o(wi,"_formatErrorMessageXhr");function co(Te,Ct){var Mt=Be[pe],on=(0,re.Jj)(),En=new XDomainRequest;En.onload=function(){return Be._xdrOnLoad(En,Te)},En.onerror=function(Si){return Be[or](Te,uo(En),Si)};var Nn=on&&on.location&&on.location.protocol||"";if(Be[Wt][dt]().lastIndexOf(Nn,0)!==0){(0,Re.kP)(Be[Ze](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),Mt[vi]();return}var Wn=Be[Wt][dt]().replace(/^(https?:)/,"");En.open("POST",Wn);var Pr=Mt[pi](Te);En.send(Pr),Mt[ai](Te)}o(co,"_xdrSender");function uo(Te,Ct){return Te?"XDomainRequest,Response:"+la(Te)||0:Ct}o(uo,"_formatErrorMessageXdr");function Po(){var Te="getNotifyMgr";return Be.core[Te]?Be.core[Te]():Be.core._notificationManager}o(Po,"_getNotifyMgr");function ts(Te,Ct){var Mt=Po();if(Mt&&Mt[Vi])try{Mt[Vi](Te,Ct)}catch(on){(0,Re.kP)(Be[Ze](),1,74,"send request notification failed: "+(0,q.jj)(on),{exception:(0,re.eU)(on)})}}o(ts,"_notifySendRequest");function fo(Te){var Ct=(0,q.le)(Te[Ji])?!1:Te[Ji];if(Ct)return!0;var Mt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",on=new RegExp(Mt);return on.test(Te[Ge])}o(fo,"_validateInstrumentationKey");function Oa(){Be[Et]=null,Be[pe]=null,Be._appId=null,Be._sample=null,Ft={},Mn=null,P=0,ae=null,me=null,We=!1,je=null,bt=null,mt=0,tn=0,Hn=null,Xt=null,_r=null}o(Oa,"_initDefaults")}),E}return o(g,"Sender"),g.constructEnvelope=function(E,P,ae,me){var We;P!==E.iKey&&!(0,q.le)(P)?We=(0,v.uc)((0,v.uc)({},E),{iKey:P}):We=E;var je=ao[We.baseType]||Ma;return je(ae,We,me)},g}(Yt.i),oo=";",To="=";function Ve(S){if(!S)return{};var g=S[_](oo),E=(0,q.Xz)(g,function(ae,me){var We=me[_](To);if(We[O]===2){var je=We[0][F](),bt=We[1];ae[je]=bt}return ae},{});if((0,q.FY)(E)[O]>0){if(E.endpointsuffix){var P=E.location?E.location+".":"";E[V]=E[V]||"https://"+P+"dc."+E.endpointsuffix}E[V]=E[V]||m}return E}o(Ve,"parseConnectionString");var ma={parse:Ve},ya=b(5121),wa="instrumentationKey",ci="connectionString",Yi="diagnosticLogInterval",Mo=b(7310),Ti=(0,On.By)({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Ui=function(){function S(g){var E=new ya.F;((0,q.le)(g)||(0,q.le)(g[wa])&&(0,q.le)(g[ci]))&&(0,q._y)("Invalid input configuration"),(0,R.Z)(S,this,function(P){if(g[ci]){var ae=Ve(g[ci]),me=ae.ingestionendpoint;g.endpointUrl=me?me+y:g.endpointUrl,g[wa]=ae.instrumentationkey||g[wa]}P.config=g,We(),P.initialize=We,P.getSKUDefaults=function(){P.config[Yi]=P.config[Yi]&&P.config[Yi]>0?P.config[Yi]:1e4},P.getSKUDefaults(),(0,q.Vb)(P,E,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb"]);function We(){E.initialize(P.config,[new Ro]),E.pollInternalLogs()}o(We,"_initialize")})}return o(S,"ApplicationInsights"),S.__ieDyn=1,S}()},1679:(at,l,b)=>{"use strict";b.d(l,{Z:()=>ht});/*!
 * Microsoft Dynamic Proto Utility, 1.1.9
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var R,v="undefined",I="constructor",w="prototype",B="function",N="_dynInstFuncs",m="_isDynProxy",y="_dynClass",U="_dynCls$",W="_dynInstChk",_=W,O="_dfOpts",F="_unknown_",V="__proto__",se="_dyn"+V,Ae="__dynProto$Gbl",$="_dynInstProto",X="useBaseInst",Z="setInstFuncs",k=Object,j=k.getPrototypeOf,x=k.getOwnPropertyNames;function le(){var L;return typeof globalThis!==v&&(L=globalThis),!L&&typeof self!==v&&(L=self),!L&&typeof window!==v&&(L=window),!L&&typeof b.g!==v&&(L=b.g),L||{}}o(le,"_getGlobal");var K=le(),ve=K[Ae]||(K[Ae]={o:(R={},R[Z]=!0,R[X]=!0,R),n:1e3});function _e(L,H){return L&&k[w].hasOwnProperty.call(L,H)}o(_e,"_hasOwnProperty");function Pe(L){return L&&(L===k[w]||L===Array[w])}o(Pe,"_isObjectOrArrayPrototype");function ne(L){return Pe(L)||L===Function[w]}o(ne,"_isObjectArrayOrFunctionPrototype");function Se(L){var H;if(L){if(j)return j(L);var te=L[V]||L[w]||(L[I]?L[I][w]:null);H=L[se]||te,_e(L,se)||(delete L[$],H=L[se]=L[$]||L[se],L[$]=te)}return H}o(Se,"_getObjProto");function D(L,H){var te=[];if(x)te=x(L);else for(var ge in L)typeof ge=="string"&&_e(L,ge)&&te.push(ge);if(te&&te.length>0)for(var $e=0;$e<te.length;$e++)H(te[$e])}o(D,"_forEachProp");function He(L,H,te){return H!==I&&typeof L[H]===B&&(te||_e(L,H))}o(He,"_isDynamicCandidate");function fe(L){throw new TypeError("DynamicProto: "+L)}o(fe,"_throwTypeError");function ue(L){var H={};return D(L,function(te){!H[te]&&He(L,te,!1)&&(H[te]=L[te])}),H}o(ue,"_getInstanceFuncs");function G(L,H){for(var te=L.length-1;te>=0;te--)if(L[te]===H)return!0;return!1}o(G,"_hasVisited");function he(L,H,te,ge){function $e(Me,Xe,be){var xe=Xe[be];if(xe[m]&&ge){var q=Me[N]||{};q[_]!==!1&&(xe=(q[Xe[y]]||{})[be]||xe)}return function(){return xe.apply(Me,arguments)}}o($e,"_instFuncProxy");var ke={};D(te,function(Me){ke[Me]=$e(H,te,Me)});for(var de=Se(L),Ce=[];de&&!ne(de)&&!G(Ce,de);)D(de,function(Me){!ke[Me]&&He(de,Me,!j)&&(ke[Me]=$e(H,de,Me))}),Ce.push(de),de=Se(de);return ke}o(he,"_getBaseFuncs");function Le(L,H,te,ge){var $e=null;if(L&&_e(te,y)){var ke=L[N]||{};if($e=(ke[te[y]]||{})[H],$e||fe("Missing ["+H+"] "+B),!$e[W]&&ke[_]!==!1){for(var de=!_e(L,H),Ce=Se(L),Me=[];de&&Ce&&!ne(Ce)&&!G(Me,Ce);){var Xe=Ce[H];if(Xe){de=Xe===ge;break}Me.push(Ce),Ce=Se(Ce)}try{de&&(L[H]=$e),$e[W]=1}catch(be){ke[_]=!1}}}return $e}o(Le,"_getInstFunc");function Je(L,H,te){var ge=H[L];return ge===te&&(ge=Se(H)[L]),typeof ge!==B&&fe("["+L+"] is not a "+B),ge}o(Je,"_getProtoFunc");function oe(L,H,te,ge,$e){function ke(Me,Xe){var be=o(function(){var xe=Le(this,Xe,Me,be)||Je(Xe,Me,be);return xe.apply(this,arguments)},"dynProtoProxy");return be[m]=1,be}if(o(ke,"_createDynamicPrototype"),!Pe(L)){var de=te[N]=te[N]||{},Ce=de[H]=de[H]||{};de[_]!==!1&&(de[_]=!!$e),D(te,function(Me){He(te,Me,!1)&&te[Me]!==ge[Me]&&(Ce[Me]=te[Me],delete te[Me],(!_e(L,Me)||L[Me]&&!L[Me][m])&&(L[Me]=ke(L,Me)))})}}o(oe,"_populatePrototype");function nt(L,H){if(j){for(var te=[],ge=Se(H);ge&&!ne(ge)&&!G(te,ge);){if(ge===L)return!0;te.push(ge),ge=Se(ge)}return!1}return!0}o(nt,"_checkPrototype");function ft(L,H){return _e(L,w)?L.name||H||F:((L||{})[I]||{}).name||H||F}o(ft,"_getObjName");function ht(L,H,te,ge){_e(L,w)||fe("theClass is an invalid class definition.");var $e=L[w];nt($e,H)||fe("["+ft(L)+"] not in hierarchy of ["+ft(H)+"]");var ke=null;_e($e,y)?ke=$e[y]:(ke=U+ft(L,"_")+"$"+ve.n,ve.n++,$e[y]=ke);var de=ht[O],Ce=!!de[X];Ce&&ge&&ge[X]!==void 0&&(Ce=!!ge[X]);var Me=ue(H),Xe=he($e,H,Me,Ce);te(H,Xe);var be=!!j&&!!de[Z];be&&ge&&(be=!!ge[Z]),oe($e,ke,H,Me,be!==!1)}o(ht,"dynamicProto"),ht[O]=ve.o},6232:(at,l,b)=>{"use strict";const R=b(8641),v=b(8692),I=b(1474),w=b(5870),B=o((N,m={})=>{let y=[];if(Array.isArray(N))for(const U of N){const W=B.create(U,m);Array.isArray(W)?y.push(...W):y.push(W)}else y=[].concat(B.create(N,m));return m&&m.expand===!0&&m.nodupes===!0&&(y=[...new Set(y)]),y},"braces");B.parse=(N,m={})=>w(N,m),B.stringify=(N,m={})=>R(typeof N=="string"?B.parse(N,m):N,m),B.compile=(N,m={})=>(typeof N=="string"&&(N=B.parse(N,m)),v(N,m)),B.expand=(N,m={})=>{typeof N=="string"&&(N=B.parse(N,m));let y=I(N,m);return m.noempty===!0&&(y=y.filter(Boolean)),m.nodupes===!0&&(y=[...new Set(y)]),y},B.create=(N,m={})=>N===""||N.length<3?[N]:m.expand!==!0?B.compile(N,m):B.expand(N,m),at.exports=B},8692:(at,l,b)=>{"use strict";const R=b(1516),v=b(3596),I=o((w,B={})=>{const N=o((m,y={})=>{const U=v.isInvalidBrace(y),W=m.invalid===!0&&B.escapeInvalid===!0,_=U===!0||W===!0,O=B.escapeInvalid===!0?"\\":"";let F="";if(m.isOpen===!0)return O+m.value;if(m.isClose===!0)return console.log("node.isClose",O,m.value),O+m.value;if(m.type==="open")return _?O+m.value:"(";if(m.type==="close")return _?O+m.value:")";if(m.type==="comma")return m.prev.type==="comma"?"":_?m.value:"|";if(m.value)return m.value;if(m.nodes&&m.ranges>0){const V=v.reduce(m.nodes),se=R(...V,{...B,wrap:!1,toRegex:!0,strictZeros:!0});if(se.length!==0)return V.length>1&&se.length>1?`(${se})`:se}if(m.nodes)for(const V of m.nodes)F+=N(V,m);return F},"walk");return N(w)},"compile");at.exports=I},7007:at=>{"use strict";at.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}},1474:(at,l,b)=>{"use strict";const R=b(1516),v=b(8641),I=b(3596),w=o((N="",m="",y=!1)=>{const U=[];if(N=[].concat(N),m=[].concat(m),!m.length)return N;if(!N.length)return y?I.flatten(m).map(W=>`{${W}}`):m;for(const W of N)if(Array.isArray(W))for(const _ of W)U.push(w(_,m,y));else for(let _ of m)y===!0&&typeof _=="string"&&(_=`{${_}}`),U.push(Array.isArray(_)?w(W,_,y):W+_);return I.flatten(U)},"append"),B=o((N,m={})=>{const y=m.rangeLimit===void 0?1e3:m.rangeLimit,U=o((W,_={})=>{W.queue=[];let O=_,F=_.queue;for(;O.type!=="brace"&&O.type!=="root"&&O.parent;)O=O.parent,F=O.queue;if(W.invalid||W.dollar){F.push(w(F.pop(),v(W,m)));return}if(W.type==="brace"&&W.invalid!==!0&&W.nodes.length===2){F.push(w(F.pop(),["{}"]));return}if(W.nodes&&W.ranges>0){const $=I.reduce(W.nodes);if(I.exceedsLimit(...$,m.step,y))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let X=R(...$,m);X.length===0&&(X=v(W,m)),F.push(w(F.pop(),X)),W.nodes=[];return}const V=I.encloseBrace(W);let se=W.queue,Ae=W;for(;Ae.type!=="brace"&&Ae.type!=="root"&&Ae.parent;)Ae=Ae.parent,se=Ae.queue;for(let $=0;$<W.nodes.length;$++){const X=W.nodes[$];if(X.type==="comma"&&W.type==="brace"){$===1&&se.push(""),se.push("");continue}if(X.type==="close"){F.push(w(F.pop(),se,V));continue}if(X.value&&X.type!=="open"){se.push(w(se.pop(),X.value));continue}X.nodes&&U(X,W)}return se},"walk");return I.flatten(U(N))},"expand");at.exports=B},5870:(at,l,b)=>{"use strict";const R=b(8641),{MAX_LENGTH:v,CHAR_BACKSLASH:I,CHAR_BACKTICK:w,CHAR_COMMA:B,CHAR_DOT:N,CHAR_LEFT_PARENTHESES:m,CHAR_RIGHT_PARENTHESES:y,CHAR_LEFT_CURLY_BRACE:U,CHAR_RIGHT_CURLY_BRACE:W,CHAR_LEFT_SQUARE_BRACKET:_,CHAR_RIGHT_SQUARE_BRACKET:O,CHAR_DOUBLE_QUOTE:F,CHAR_SINGLE_QUOTE:V,CHAR_NO_BREAK_SPACE:se,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ae}=b(7007),$=o((X,Z={})=>{if(typeof X!="string")throw new TypeError("Expected a string");const k=Z||{},j=typeof k.maxLength=="number"?Math.min(v,k.maxLength):v;if(X.length>j)throw new SyntaxError(`Input length (${X.length}), exceeds max characters (${j})`);const x={type:"root",input:X,nodes:[]},le=[x];let K=x,ve=x,_e=0;const Pe=X.length;let ne=0,Se=0,D;const He=o(()=>X[ne++],"advance"),fe=o(ue=>{if(ue.type==="text"&&ve.type==="dot"&&(ve.type="text"),ve&&ve.type==="text"&&ue.type==="text"){ve.value+=ue.value;return}return K.nodes.push(ue),ue.parent=K,ue.prev=ve,ve=ue,ue},"push");for(fe({type:"bos"});ne<Pe;)if(K=le[le.length-1],D=He(),!(D===Ae||D===se)){if(D===I){fe({type:"text",value:(Z.keepEscaping?D:"")+He()});continue}if(D===O){fe({type:"text",value:"\\"+D});continue}if(D===_){_e++;let ue;for(;ne<Pe&&(ue=He());){if(D+=ue,ue===_){_e++;continue}if(ue===I){D+=He();continue}if(ue===O&&(_e--,_e===0))break}fe({type:"text",value:D});continue}if(D===m){K=fe({type:"paren",nodes:[]}),le.push(K),fe({type:"text",value:D});continue}if(D===y){if(K.type!=="paren"){fe({type:"text",value:D});continue}K=le.pop(),fe({type:"text",value:D}),K=le[le.length-1];continue}if(D===F||D===V||D===w){const ue=D;let G;for(Z.keepQuotes!==!0&&(D="");ne<Pe&&(G=He());){if(G===I){D+=G+He();continue}if(G===ue){Z.keepQuotes===!0&&(D+=G);break}D+=G}fe({type:"text",value:D});continue}if(D===U){Se++;const ue=ve.value&&ve.value.slice(-1)==="$"||K.dollar===!0;K=fe({type:"brace",open:!0,close:!1,dollar:ue,depth:Se,commas:0,ranges:0,nodes:[]}),le.push(K),fe({type:"open",value:D});continue}if(D===W){if(K.type!=="brace"){fe({type:"text",value:D});continue}const ue="close";K=le.pop(),K.close=!0,fe({type:ue,value:D}),Se--,K=le[le.length-1];continue}if(D===B&&Se>0){if(K.ranges>0){K.ranges=0;const ue=K.nodes.shift();K.nodes=[ue,{type:"text",value:R(K)}]}fe({type:"comma",value:D}),K.commas++;continue}if(D===N&&Se>0&&K.commas===0){const ue=K.nodes;if(Se===0||ue.length===0){fe({type:"text",value:D});continue}if(ve.type==="dot"){if(K.range=[],ve.value+=D,ve.type="range",K.nodes.length!==3&&K.nodes.length!==5){K.invalid=!0,K.ranges=0,ve.type="text";continue}K.ranges++,K.args=[];continue}if(ve.type==="range"){ue.pop();const G=ue[ue.length-1];G.value+=ve.value+D,ve=G,K.ranges--;continue}fe({type:"dot",value:D});continue}fe({type:"text",value:D})}do if(K=le.pop(),K.type!=="root"){K.nodes.forEach(he=>{he.nodes||(he.type==="open"&&(he.isOpen=!0),he.type==="close"&&(he.isClose=!0),he.nodes||(he.type="text"),he.invalid=!0)});const ue=le[le.length-1],G=ue.nodes.indexOf(K);ue.nodes.splice(G,1,...K.nodes)}while(le.length>0);return fe({type:"eos"}),x},"parse");at.exports=$},8641:(at,l,b)=>{"use strict";const R=b(3596);at.exports=(v,I={})=>{const w=o((B,N={})=>{const m=I.escapeInvalid&&R.isInvalidBrace(N),y=B.invalid===!0&&I.escapeInvalid===!0;let U="";if(B.value)return(m||y)&&R.isOpenOrClose(B)?"\\"+B.value:B.value;if(B.value)return B.value;if(B.nodes)for(const W of B.nodes)U+=w(W);return U},"stringify");return w(v)}},3596:(at,l)=>{"use strict";l.isInteger=b=>typeof b=="number"?Number.isInteger(b):typeof b=="string"&&b.trim()!==""?Number.isInteger(Number(b)):!1,l.find=(b,R)=>b.nodes.find(v=>v.type===R),l.exceedsLimit=(b,R,v=1,I)=>I===!1||!l.isInteger(b)||!l.isInteger(R)?!1:(Number(R)-Number(b))/Number(v)>=I,l.escapeNode=(b,R=0,v)=>{const I=b.nodes[R];!I||(v&&I.type===v||I.type==="open"||I.type==="close")&&I.escaped!==!0&&(I.value="\\"+I.value,I.escaped=!0)},l.encloseBrace=b=>b.type!=="brace"?!1:b.commas>>0+b.ranges>>0==0?(b.invalid=!0,!0):!1,l.isInvalidBrace=b=>b.type!=="brace"?!1:b.invalid===!0||b.dollar?!0:b.commas>>0+b.ranges>>0==0||b.open!==!0||b.close!==!0?(b.invalid=!0,!0):!1,l.isOpenOrClose=b=>b.type==="open"||b.type==="close"?!0:b.open===!0||b.close===!0,l.reduce=b=>b.reduce((R,v)=>(v.type==="text"&&R.push(v.value),v.type==="range"&&(v.type="text"),R),[]),l.flatten=(...b)=>{const R=[],v=o(I=>{for(let w=0;w<I.length;w++){const B=I[w];if(Array.isArray(B)){v(B);continue}B!==void 0&&R.push(B)}return R},"flat");return v(b),R}},1516:(at,l,b)=>{"use strict";/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */const R=b(6529),v=b(2999),I=o(k=>k!==null&&typeof k=="object"&&!Array.isArray(k),"isObject"),w=o(k=>j=>k===!0?Number(j):String(j),"transform"),B=o(k=>typeof k=="number"||typeof k=="string"&&k!=="","isValidValue"),N=o(k=>Number.isInteger(+k),"isNumber"),m=o(k=>{let j=`${k}`,x=-1;if(j[0]==="-"&&(j=j.slice(1)),j==="0")return!1;for(;j[++x]==="0";);return x>0},"zeros"),y=o((k,j,x)=>typeof k=="string"||typeof j=="string"?!0:x.stringify===!0,"stringify"),U=o((k,j,x)=>{if(j>0){let le=k[0]==="-"?"-":"";le&&(k=k.slice(1)),k=le+k.padStart(le?j-1:j,"0")}return x===!1?String(k):k},"pad"),W=o((k,j)=>{let x=k[0]==="-"?"-":"";for(x&&(k=k.slice(1),j--);k.length<j;)k="0"+k;return x?"-"+k:k},"toMaxLen"),_=o((k,j,x)=>{k.negatives.sort((Pe,ne)=>Pe<ne?-1:Pe>ne?1:0),k.positives.sort((Pe,ne)=>Pe<ne?-1:Pe>ne?1:0);let le=j.capture?"":"?:",K="",ve="",_e;return k.positives.length&&(K=k.positives.map(Pe=>W(String(Pe),x)).join("|")),k.negatives.length&&(ve=`-(${le}${k.negatives.map(Pe=>W(String(Pe),x)).join("|")})`),K&&ve?_e=`${K}|${ve}`:_e=K||ve,j.wrap?`(${le}${_e})`:_e},"toSequence"),O=o((k,j,x,le)=>{if(x)return v(k,j,{wrap:!1,...le});let K=String.fromCharCode(k);if(k===j)return K;let ve=String.fromCharCode(j);return`[${K}-${ve}]`},"toRange"),F=o((k,j,x)=>{if(Array.isArray(k)){let le=x.wrap===!0,K=x.capture?"":"?:";return le?`(${K}${k.join("|")})`:k.join("|")}return v(k,j,x)},"toRegex"),V=o((...k)=>new RangeError("Invalid range arguments: "+R.inspect(...k)),"rangeError"),se=o((k,j,x)=>{if(x.strictRanges===!0)throw V([k,j]);return[]},"invalidRange"),Ae=o((k,j)=>{if(j.strictRanges===!0)throw new TypeError(`Expected step "${k}" to be a number`);return[]},"invalidStep"),$=o((k,j,x=1,le={})=>{let K=Number(k),ve=Number(j);if(!Number.isInteger(K)||!Number.isInteger(ve)){if(le.strictRanges===!0)throw V([k,j]);return[]}K===0&&(K=0),ve===0&&(ve=0);let _e=K>ve,Pe=String(k),ne=String(j),Se=String(x);x=Math.max(Math.abs(x),1);let D=m(Pe)||m(ne)||m(Se),He=D?Math.max(Pe.length,ne.length,Se.length):0,fe=D===!1&&y(k,j,le)===!1,ue=le.transform||w(fe);if(le.toRegex&&x===1)return O(W(k,He),W(j,He),!0,le);let G={negatives:[],positives:[]},he=o(oe=>G[oe<0?"negatives":"positives"].push(Math.abs(oe)),"push"),Le=[],Je=0;for(;_e?K>=ve:K<=ve;)le.toRegex===!0&&x>1?he(K):Le.push(U(ue(K,Je),He,fe)),K=_e?K-x:K+x,Je++;return le.toRegex===!0?x>1?_(G,le,He):F(Le,null,{wrap:!1,...le}):Le},"fillNumbers"),X=o((k,j,x=1,le={})=>{if(!N(k)&&k.length>1||!N(j)&&j.length>1)return se(k,j,le);let K=le.transform||(fe=>String.fromCharCode(fe)),ve=`${k}`.charCodeAt(0),_e=`${j}`.charCodeAt(0),Pe=ve>_e,ne=Math.min(ve,_e),Se=Math.max(ve,_e);if(le.toRegex&&x===1)return O(ne,Se,!1,le);let D=[],He=0;for(;Pe?ve>=_e:ve<=_e;)D.push(K(ve,He)),ve=Pe?ve-x:ve+x,He++;return le.toRegex===!0?F(D,null,{wrap:!1,options:le}):D},"fillLetters"),Z=o((k,j,x,le={})=>{if(j==null&&B(k))return[k];if(!B(k)||!B(j))return se(k,j,le);if(typeof x=="function")return Z(k,j,1,{transform:x});if(I(x))return Z(k,j,0,x);let K={...le};return K.capture===!0&&(K.wrap=!0),x=x||K.step||1,N(x)?N(k)&&N(j)?$(k,j,x,K):X(k,j,Math.max(Math.abs(x),1),K):x!=null&&!I(x)?Ae(x,K):Z(k,j,1,x)},"fill");at.exports=Z},3338:at=>{"use strict";/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */at.exports=function(l){return typeof l=="number"?l-l==0:typeof l=="string"&&l.trim()!==""?Number.isFinite?Number.isFinite(+l):isFinite(+l):!1}},5179:(at,l,b)=>{at=b.nmd(at);var R=200,v="__lodash_hash_undefined__",I=1,w=2,B=9007199254740991,N="[object Arguments]",m="[object Array]",y="[object AsyncFunction]",U="[object Boolean]",W="[object Date]",_="[object Error]",O="[object Function]",F="[object GeneratorFunction]",V="[object Map]",se="[object Number]",Ae="[object Null]",$="[object Object]",X="[object Promise]",Z="[object Proxy]",k="[object RegExp]",j="[object Set]",x="[object String]",le="[object Symbol]",K="[object Undefined]",ve="[object WeakMap]",_e="[object ArrayBuffer]",Pe="[object DataView]",ne="[object Float32Array]",Se="[object Float64Array]",D="[object Int8Array]",He="[object Int16Array]",fe="[object Int32Array]",ue="[object Uint8Array]",G="[object Uint8ClampedArray]",he="[object Uint16Array]",Le="[object Uint32Array]",Je=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,ft={};ft[ne]=ft[Se]=ft[D]=ft[He]=ft[fe]=ft[ue]=ft[G]=ft[he]=ft[Le]=!0,ft[N]=ft[m]=ft[_e]=ft[U]=ft[Pe]=ft[W]=ft[_]=ft[O]=ft[V]=ft[se]=ft[$]=ft[k]=ft[j]=ft[x]=ft[ve]=!1;var ht=typeof b.g=="object"&&b.g&&b.g.Object===Object&&b.g,L=typeof self=="object"&&self&&self.Object===Object&&self,H=ht||L||Function("return this")(),te=l&&!l.nodeType&&l,ge=te&&!0&&at&&!at.nodeType&&at,$e=ge&&ge.exports===te,ke=$e&&ht.process,de=function(){try{return ke&&ke.binding&&ke.binding("util")}catch(M){}}(),Ce=de&&de.isTypedArray;function Me(M,ee){for(var ze=-1,ot=M==null?0:M.length,Ht=0,At=[];++ze<ot;){var gn=M[ze];ee(gn,ze,M)&&(At[Ht++]=gn)}return At}o(Me,"arrayFilter");function Xe(M,ee){for(var ze=-1,ot=ee.length,Ht=M.length;++ze<ot;)M[Ht+ze]=ee[ze];return M}o(Xe,"arrayPush");function be(M,ee){for(var ze=-1,ot=M==null?0:M.length;++ze<ot;)if(ee(M[ze],ze,M))return!0;return!1}o(be,"arraySome");function xe(M,ee){for(var ze=-1,ot=Array(M);++ze<M;)ot[ze]=ee(ze);return ot}o(xe,"baseTimes");function q(M){return function(ee){return M(ee)}}o(q,"baseUnary");function Re(M,ee){return M.has(ee)}o(Re,"cacheHas");function re(M,ee){return M==null?void 0:M[ee]}o(re,"getValue");function J(M){var ee=-1,ze=Array(M.size);return M.forEach(function(ot,Ht){ze[++ee]=[Ht,ot]}),ze}o(J,"mapToArray");function qe(M,ee){return function(ze){return M(ee(ze))}}o(qe,"overArg");function Lt(M){var ee=-1,ze=Array(M.size);return M.forEach(function(ot){ze[++ee]=ot}),ze}o(Lt,"setToArray");var Gt=Array.prototype,Ln=Function.prototype,wn=Object.prototype,jn=H["__core-js_shared__"],Qn=Ln.toString,$n=wn.hasOwnProperty,vr=function(){var M=/[^.]+$/.exec(jn&&jn.keys&&jn.keys.IE_PROTO||"");return M?"Symbol(src)_1."+M:""}(),Ir=wn.toString,Lr=RegExp("^"+Qn.call($n).replace(Je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ct=$e?H.Buffer:void 0,$t=H.Symbol,nn=H.Uint8Array,en=wn.propertyIsEnumerable,an=Gt.splice,Rn=$t?$t.toStringTag:void 0,ar=Object.getOwnPropertySymbols,pr=ct?ct.isBuffer:void 0,Kn=qe(Object.keys,Object),mr=hi(H,"DataView"),Br=hi(H,"Map"),xn=hi(H,"Promise"),Xn=hi(H,"Set"),Ar=hi(H,"WeakMap"),Sn=hi(Object,"create"),Yr=Ut(mr),Tr=Ut(Br),Hr=Ut(xn),Ci=Ut(Xn),di=Ut(Ar),ur=$t?$t.prototype:void 0,T=ur?ur.valueOf:void 0;function ce(M){var ee=-1,ze=M==null?0:M.length;for(this.clear();++ee<ze;){var ot=M[ee];this.set(ot[0],ot[1])}}o(ce,"Hash");function Ee(){this.__data__=Sn?Sn(null):{},this.size=0}o(Ee,"hashClear");function Oe(M){var ee=this.has(M)&&delete this.__data__[M];return this.size-=ee?1:0,ee}o(Oe,"hashDelete");function et(M){var ee=this.__data__;if(Sn){var ze=ee[M];return ze===v?void 0:ze}return $n.call(ee,M)?ee[M]:void 0}o(et,"hashGet");function Ue(M){var ee=this.__data__;return Sn?ee[M]!==void 0:$n.call(ee,M)}o(Ue,"hashHas");function lt(M,ee){var ze=this.__data__;return this.size+=this.has(M)?0:1,ze[M]=Sn&&ee===void 0?v:ee,this}o(lt,"hashSet"),ce.prototype.clear=Ee,ce.prototype.delete=Oe,ce.prototype.get=et,ce.prototype.has=Ue,ce.prototype.set=lt;function _t(M){var ee=-1,ze=M==null?0:M.length;for(this.clear();++ee<ze;){var ot=M[ee];this.set(ot[0],ot[1])}}o(_t,"ListCache");function Rt(){this.__data__=[],this.size=0}o(Rt,"listCacheClear");function cn(M){var ee=this.__data__,ze=sr(ee,M);if(ze<0)return!1;var ot=ee.length-1;return ze==ot?ee.pop():an.call(ee,ze,1),--this.size,!0}o(cn,"listCacheDelete");function St(M){var ee=this.__data__,ze=sr(ee,M);return ze<0?void 0:ee[ze][1]}o(St,"listCacheGet");function Jt(M){return sr(this.__data__,M)>-1}o(Jt,"listCacheHas");function Nt(M,ee){var ze=this.__data__,ot=sr(ze,M);return ot<0?(++this.size,ze.push([M,ee])):ze[ot][1]=ee,this}o(Nt,"listCacheSet"),_t.prototype.clear=Rt,_t.prototype.delete=cn,_t.prototype.get=St,_t.prototype.has=Jt,_t.prototype.set=Nt;function Ot(M){var ee=-1,ze=M==null?0:M.length;for(this.clear();++ee<ze;){var ot=M[ee];this.set(ot[0],ot[1])}}o(Ot,"MapCache");function Tt(){this.size=0,this.__data__={hash:new ce,map:new(Br||_t),string:new ce}}o(Tt,"mapCacheClear");function Gn(M){var ee=Qr(this,M).delete(M);return this.size-=ee?1:0,ee}o(Gn,"mapCacheDelete");function Cn(M){return Qr(this,M).get(M)}o(Cn,"mapCacheGet");function dr(M){return Qr(this,M).has(M)}o(dr,"mapCacheHas");function On(M,ee){var ze=Qr(this,M),ot=ze.size;return ze.set(M,ee),this.size+=ze.size==ot?0:1,this}o(On,"mapCacheSet"),Ot.prototype.clear=Tt,Ot.prototype.delete=Gn,Ot.prototype.get=Cn,Ot.prototype.has=dr,Ot.prototype.set=On;function fr(M){var ee=-1,ze=M==null?0:M.length;for(this.__data__=new Ot;++ee<ze;)this.add(M[ee])}o(fr,"SetCache");function qr(M){return this.__data__.set(M,v),this}o(qr,"setCacheAdd");function Wr(M){return this.__data__.has(M)}o(Wr,"setCacheHas"),fr.prototype.add=fr.prototype.push=qr,fr.prototype.has=Wr;function Zn(M){var ee=this.__data__=new _t(M);this.size=ee.size}o(Zn,"Stack");function kr(){this.__data__=new _t,this.size=0}o(kr,"stackClear");function Dt(M){var ee=this.__data__,ze=ee.delete(M);return this.size=ee.size,ze}o(Dt,"stackDelete");function zn(M){return this.__data__.get(M)}o(zn,"stackGet");function bn(M){return this.__data__.has(M)}o(bn,"stackHas");function Tn(M,ee){var ze=this.__data__;if(ze instanceof _t){var ot=ze.__data__;if(!Br||ot.length<R-1)return ot.push([M,ee]),this.size=++ze.size,this;ze=this.__data__=new Ot(ot)}return ze.set(M,ee),this.size=ze.size,this}o(Tn,"stackSet"),Zn.prototype.clear=kr,Zn.prototype.delete=Dt,Zn.prototype.get=zn,Zn.prototype.has=bn,Zn.prototype.set=Tn;function Un(M,ee){var ze=rn(M),ot=!ze&&pt(M),Ht=!ze&&!ot&&mn(M),At=!ze&&!ot&&!Ht&&Yt(M),gn=ze||ot||Ht||At,vn=gn?xe(M.length,String):[],qt=vn.length;for(var un in M)(ee||$n.call(M,un))&&!(gn&&(un=="length"||Ht&&(un=="offset"||un=="parent")||At&&(un=="buffer"||un=="byteLength"||un=="byteOffset")||zi(un,qt)))&&vn.push(un);return vn}o(Un,"arrayLikeKeys");function sr(M,ee){for(var ze=M.length;ze--;)if(jt(M[ze][0],ee))return ze;return-1}o(sr,"assocIndexOf");function Sr(M,ee,ze){var ot=ee(M);return rn(M)?ot:Xe(ot,ze(M))}o(Sr,"baseGetAllKeys");function xr(M){return M==null?M===void 0?K:Ae:Rn&&Rn in Object(M)?Ni(M):rt(M)}o(xr,"baseGetTag");function Dr(M){return fn(M)&&xr(M)==N}o(Dr,"baseIsArguments");function Zi(M,ee,ze,ot,Ht){return M===ee?!0:M==null||ee==null||!fn(M)&&!fn(ee)?M!==M&&ee!==ee:Ii(M,ee,ze,ot,Zi,Ht)}o(Zi,"baseIsEqual");function Ii(M,ee,ze,ot,Ht,At){var gn=rn(M),vn=rn(ee),qt=gn?m:ri(M),un=vn?m:ri(ee);qt=qt==N?$:qt,un=un==N?$:un;var pn=qt==$,Kt=un==$,ut=qt==un;if(ut&&mn(M)){if(!mn(ee))return!1;gn=!0,pn=!1}if(ut&&!pn)return At||(At=new Zn),gn||Yt(M)?ea(M,ee,ze,ot,Ht,At):Gi(M,ee,qt,ze,ot,Ht,At);if(!(ze&I)){var kn=pn&&$n.call(M,"__wrapped__"),Pn=Kt&&$n.call(ee,"__wrapped__");if(kn||Pn){var Fn=kn?M.value():M,nr=Pn?ee.value():ee;return At||(At=new Zn),Ht(Fn,nr,ze,ot,At)}}return ut?(At||(At=new Zn),ta(M,ee,ze,ot,Ht,At)):!1}o(Ii,"baseIsEqualDeep");function sa(M){if(!hr(M)||tt(M))return!1;var ee=tr(M)?Lr:oe;return ee.test(Ut(M))}o(sa,"baseIsNative");function Li(M){return fn(M)&&Jn(M.length)&&!!ft[xr(M)]}o(Li,"baseIsTypedArray");function Ki(M){if(!vt(M))return Kn(M);var ee=[];for(var ze in Object(M))$n.call(M,ze)&&ze!="constructor"&&ee.push(ze);return ee}o(Ki,"baseKeys");function ea(M,ee,ze,ot,Ht,At){var gn=ze&I,vn=M.length,qt=ee.length;if(vn!=qt&&!(gn&&qt>vn))return!1;var un=At.get(M);if(un&&At.get(ee))return un==ee;var pn=-1,Kt=!0,ut=ze&w?new fr:void 0;for(At.set(M,ee),At.set(ee,M);++pn<vn;){var kn=M[pn],Pn=ee[pn];if(ot)var Fn=gn?ot(Pn,kn,pn,ee,M,At):ot(kn,Pn,pn,M,ee,At);if(Fn!==void 0){if(Fn)continue;Kt=!1;break}if(ut){if(!be(ee,function(nr,It){if(!Re(ut,It)&&(kn===nr||Ht(kn,nr,ze,ot,At)))return ut.push(It)})){Kt=!1;break}}else if(!(kn===Pn||Ht(kn,Pn,ze,ot,At))){Kt=!1;break}}return At.delete(M),At.delete(ee),Kt}o(ea,"equalArrays");function Gi(M,ee,ze,ot,Ht,At,gn){switch(ze){case Pe:if(M.byteLength!=ee.byteLength||M.byteOffset!=ee.byteOffset)return!1;M=M.buffer,ee=ee.buffer;case _e:return!(M.byteLength!=ee.byteLength||!At(new nn(M),new nn(ee)));case U:case W:case se:return jt(+M,+ee);case _:return M.name==ee.name&&M.message==ee.message;case k:case x:return M==ee+"";case V:var vn=J;case j:var qt=ot&I;if(vn||(vn=Lt),M.size!=ee.size&&!qt)return!1;var un=gn.get(M);if(un)return un==ee;ot|=w,gn.set(M,ee);var pn=ea(vn(M),vn(ee),ot,Ht,At,gn);return gn.delete(M),pn;case le:if(T)return T.call(M)==T.call(ee)}return!1}o(Gi,"equalByTag");function ta(M,ee,ze,ot,Ht,At){var gn=ze&I,vn=fi(M),qt=vn.length,un=fi(ee),pn=un.length;if(qt!=pn&&!gn)return!1;for(var Kt=qt;Kt--;){var ut=vn[Kt];if(!(gn?ut in ee:$n.call(ee,ut)))return!1}var kn=At.get(M);if(kn&&At.get(ee))return kn==ee;var Pn=!0;At.set(M,ee),At.set(ee,M);for(var Fn=gn;++Kt<qt;){ut=vn[Kt];var nr=M[ut],It=ee[ut];if(ot)var Bn=gn?ot(It,nr,ut,ee,M,At):ot(nr,It,ut,M,ee,At);if(!(Bn===void 0?nr===It||Ht(nr,It,ze,ot,At):Bn)){Pn=!1;break}Fn||(Fn=ut=="constructor")}if(Pn&&!Fn){var yr=M.constructor,In=ee.constructor;yr!=In&&"constructor"in M&&"constructor"in ee&&!(typeof yr=="function"&&yr instanceof yr&&typeof In=="function"&&In instanceof In)&&(Pn=!1)}return At.delete(M),At.delete(ee),Pn}o(ta,"equalObjects");function fi(M){return Sr(M,Vt,ga)}o(fi,"getAllKeys");function Qr(M,ee){var ze=M.__data__;return Fe(ee)?ze[typeof ee=="string"?"string":"hash"]:ze.map}o(Qr,"getMapData");function hi(M,ee){var ze=re(M,ee);return sa(ze)?ze:void 0}o(hi,"getNative");function Ni(M){var ee=$n.call(M,Rn),ze=M[Rn];try{M[Rn]=void 0;var ot=!0}catch(At){}var Ht=Ir.call(M);return ot&&(ee?M[Rn]=ze:delete M[Rn]),Ht}o(Ni,"getRawTag");var ga=ar?function(M){return M==null?[]:(M=Object(M),Me(ar(M),function(ee){return en.call(M,ee)}))}:kt,ri=xr;(mr&&ri(new mr(new ArrayBuffer(1)))!=Pe||Br&&ri(new Br)!=V||xn&&ri(xn.resolve())!=X||Xn&&ri(new Xn)!=j||Ar&&ri(new Ar)!=ve)&&(ri=o(function(M){var ee=xr(M),ze=ee==$?M.constructor:void 0,ot=ze?Ut(ze):"";if(ot)switch(ot){case Yr:return Pe;case Tr:return V;case Hr:return X;case Ci:return j;case di:return ve}return ee},"getTag"));function zi(M,ee){return ee=ee==null?B:ee,!!ee&&(typeof M=="number"||nt.test(M))&&M>-1&&M%1==0&&M<ee}o(zi,"isIndex");function Fe(M){var ee=typeof M;return ee=="string"||ee=="number"||ee=="symbol"||ee=="boolean"?M!=="__proto__":M===null}o(Fe,"isKeyable");function tt(M){return!!vr&&vr in M}o(tt,"isMasked");function vt(M){var ee=M&&M.constructor,ze=typeof ee=="function"&&ee.prototype||wn;return M===ze}o(vt,"isPrototype");function rt(M){return Ir.call(M)}o(rt,"objectToString");function Ut(M){if(M!=null){try{return Qn.call(M)}catch(ee){}try{return M+""}catch(ee){}}return""}o(Ut,"toSource");function jt(M,ee){return M===ee||M!==M&&ee!==ee}o(jt,"eq");var pt=Dr(function(){return arguments}())?Dr:function(M){return fn(M)&&$n.call(M,"callee")&&!en.call(M,"callee")},rn=Array.isArray;function Bt(M){return M!=null&&Jn(M.length)&&!tr(M)}o(Bt,"isArrayLike");var mn=pr||hn;function _n(M,ee){return Zi(M,ee)}o(_n,"isEqual");function tr(M){if(!hr(M))return!1;var ee=xr(M);return ee==O||ee==F||ee==y||ee==Z}o(tr,"isFunction");function Jn(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=B}o(Jn,"isLength");function hr(M){var ee=typeof M;return M!=null&&(ee=="object"||ee=="function")}o(hr,"isObject");function fn(M){return M!=null&&typeof M=="object"}o(fn,"isObjectLike");var Yt=Ce?q(Ce):Li;function Vt(M){return Bt(M)?Un(M):Ki(M)}o(Vt,"keys");function kt(){return[]}o(kt,"stubArray");function hn(){return!1}o(hn,"stubFalse"),at.exports=_n},919:(at,l,b)=>{"use strict";const R=b(6391),v=b(6232),I=b(6796),w=b(292),B=o(m=>m===""||m==="./","isEmptyString"),N=o((m,y,U)=>{y=[].concat(y),m=[].concat(m);let W=new Set,_=new Set,O=new Set,F=0,V=o($=>{O.add($.output),U&&U.onResult&&U.onResult($)},"onResult");for(let $=0;$<y.length;$++){let X=I(String(y[$]),{...U,onResult:V},!0),Z=X.state.negated||X.state.negatedExtglob;Z&&F++;for(let k of m){let j=X(k,!0);!(Z?!j.isMatch:j.isMatch)||(Z?W.add(j.output):(W.delete(j.output),_.add(j.output)))}}let Ae=(F===y.length?[...O]:[..._]).filter($=>!W.has($));if(U&&Ae.length===0){if(U.failglob===!0)throw new Error(`No matches found for "${y.join(", ")}"`);if(U.nonull===!0||U.nullglob===!0)return U.unescape?y.map($=>$.replace(/\\/g,"")):y}return Ae},"micromatch");N.match=N,N.matcher=(m,y)=>I(m,y),N.isMatch=(m,y,U)=>I(y,U)(m),N.any=N.isMatch,N.not=(m,y,U={})=>{y=[].concat(y).map(String);let W=new Set,_=[],O=o(V=>{U.onResult&&U.onResult(V),_.push(V.output)},"onResult"),F=new Set(N(m,y,{...U,onResult:O}));for(let V of _)F.has(V)||W.add(V);return[...W]},N.contains=(m,y,U)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);if(Array.isArray(y))return y.some(W=>N.contains(m,W,U));if(typeof y=="string"){if(B(m)||B(y))return!1;if(m.includes(y)||m.startsWith("./")&&m.slice(2).includes(y))return!0}return N.isMatch(m,y,{...U,contains:!0})},N.matchKeys=(m,y,U)=>{if(!w.isObject(m))throw new TypeError("Expected the first argument to be an object");let W=N(Object.keys(m),y,U),_={};for(let O of W)_[O]=m[O];return _},N.some=(m,y,U)=>{let W=[].concat(m);for(let _ of[].concat(y)){let O=I(String(_),U);if(W.some(F=>O(F)))return!0}return!1},N.every=(m,y,U)=>{let W=[].concat(m);for(let _ of[].concat(y)){let O=I(String(_),U);if(!W.every(F=>O(F)))return!1}return!0},N.all=(m,y,U)=>{if(typeof m!="string")throw new TypeError(`Expected a string: "${R.inspect(m)}"`);return[].concat(y).every(W=>I(W,U)(m))},N.capture=(m,y,U)=>{let W=w.isWindows(U),O=I.makeRe(String(m),{...U,capture:!0}).exec(W?w.toPosixSlashes(y):y);if(O)return O.slice(1).map(F=>F===void 0?"":F)},N.makeRe=(...m)=>I.makeRe(...m),N.scan=(...m)=>I.scan(...m),N.parse=(m,y)=>{let U=[];for(let W of[].concat(m||[]))for(let _ of v(String(W),y))U.push(I.parse(_,y));return U},N.braces=(m,y)=>{if(typeof m!="string")throw new TypeError("Expected a string");return y&&y.nobrace===!0||!/\{.*\}/.test(m)?[m]:v(m,y)},N.braceExpand=(m,y)=>{if(typeof m!="string")throw new TypeError("Expected a string");return N.braces(m,{...y,expand:!0})},at.exports=N},6796:(at,l,b)=>{"use strict";at.exports=b(5761)},3889:(at,l,b)=>{"use strict";const R=b(6470),v="\\\\/",I=`[^${v}]`,w="\\.",B="\\+",N="\\?",m="\\/",y="(?=.)",U="[^/]",W=`(?:${m}|$)`,_=`(?:^|${m})`,O=`${w}{1,2}${W}`,F=`(?!${w})`,V=`(?!${_}${O})`,se=`(?!${w}{0,1}${W})`,Ae=`(?!${O})`,$=`[^.${m}]`,X=`${U}*?`,Z={DOT_LITERAL:w,PLUS_LITERAL:B,QMARK_LITERAL:N,SLASH_LITERAL:m,ONE_CHAR:y,QMARK:U,END_ANCHOR:W,DOTS_SLASH:O,NO_DOT:F,NO_DOTS:V,NO_DOT_SLASH:se,NO_DOTS_SLASH:Ae,QMARK_NO_DOT:$,STAR:X,START_ANCHOR:_},k={...Z,SLASH_LITERAL:`[${v}]`,QMARK:I,STAR:`${I}*?`,DOTS_SLASH:`${w}{1,2}(?:[${v}]|$)`,NO_DOT:`(?!${w})`,NO_DOTS:`(?!(?:^|[${v}])${w}{1,2}(?:[${v}]|$))`,NO_DOT_SLASH:`(?!${w}{0,1}(?:[${v}]|$))`,NO_DOTS_SLASH:`(?!${w}{1,2}(?:[${v}]|$))`,QMARK_NO_DOT:`[^.${v}]`,START_ANCHOR:`(?:^|[${v}])`,END_ANCHOR:`(?:[${v}]|$)`},j={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};at.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:j,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:R.sep,extglobChars(x){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${x.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(x){return x===!0?k:Z}}},3969:(at,l,b)=>{"use strict";const R=b(3889),v=b(292),{MAX_LENGTH:I,POSIX_REGEX_SOURCE:w,REGEX_NON_SPECIAL_CHARS:B,REGEX_SPECIAL_CHARS_BACKREF:N,REPLACEMENTS:m}=R,y=o((_,O)=>{if(typeof O.expandRange=="function")return O.expandRange(..._,O);_.sort();const F=`[${_.join("-")}]`;try{new RegExp(F)}catch(V){return _.map(se=>v.escapeRegex(se)).join("..")}return F},"expandRange"),U=o((_,O)=>`Missing ${_}: "${O}" - use "\\\\${O}" to match literal characters`,"syntaxError"),W=o((_,O)=>{if(typeof _!="string")throw new TypeError("Expected a string");_=m[_]||_;const F={...O},V=typeof F.maxLength=="number"?Math.min(I,F.maxLength):I;let se=_.length;if(se>V)throw new SyntaxError(`Input length: ${se}, exceeds maximum allowed length: ${V}`);const Ae={type:"bos",value:"",output:F.prepend||""},$=[Ae],X=F.capture?"":"?:",Z=v.isWindows(O),k=R.globChars(Z),j=R.extglobChars(k),{DOT_LITERAL:x,PLUS_LITERAL:le,SLASH_LITERAL:K,ONE_CHAR:ve,DOTS_SLASH:_e,NO_DOT:Pe,NO_DOT_SLASH:ne,NO_DOTS_SLASH:Se,QMARK:D,QMARK_NO_DOT:He,STAR:fe,START_ANCHOR:ue}=k,G=o(re=>`(${X}(?:(?!${ue}${re.dot?_e:x}).)*?)`,"globstar"),he=F.dot?"":Pe,Le=F.dot?D:He;let Je=F.bash===!0?G(F):fe;F.capture&&(Je=`(${Je})`),typeof F.noext=="boolean"&&(F.noextglob=F.noext);const oe={input:_,index:-1,start:0,dot:F.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:$};_=v.removePrefix(_,oe),se=_.length;const nt=[],ft=[],ht=[];let L=Ae,H;const te=o(()=>oe.index===se-1,"eos"),ge=oe.peek=(re=1)=>_[oe.index+re],$e=oe.advance=()=>_[++oe.index]||"",ke=o(()=>_.slice(oe.index+1),"remaining"),de=o((re="",J=0)=>{oe.consumed+=re,oe.index+=J},"consume"),Ce=o(re=>{oe.output+=re.output!=null?re.output:re.value,de(re.value)},"append"),Me=o(()=>{let re=1;for(;ge()==="!"&&(ge(2)!=="("||ge(3)==="?");)$e(),oe.start++,re++;return re%2==0?!1:(oe.negated=!0,oe.start++,!0)},"negate"),Xe=o(re=>{oe[re]++,ht.push(re)},"increment"),be=o(re=>{oe[re]--,ht.pop()},"decrement"),xe=o(re=>{if(L.type==="globstar"){const J=oe.braces>0&&(re.type==="comma"||re.type==="brace"),qe=re.extglob===!0||nt.length&&(re.type==="pipe"||re.type==="paren");re.type!=="slash"&&re.type!=="paren"&&!J&&!qe&&(oe.output=oe.output.slice(0,-L.output.length),L.type="star",L.value="*",L.output=Je,oe.output+=L.output)}if(nt.length&&re.type!=="paren"&&(nt[nt.length-1].inner+=re.value),(re.value||re.output)&&Ce(re),L&&L.type==="text"&&re.type==="text"){L.value+=re.value,L.output=(L.output||"")+re.value;return}re.prev=L,$.push(re),L=re},"push"),q=o((re,J)=>{const qe={...j[J],conditions:1,inner:""};qe.prev=L,qe.parens=oe.parens,qe.output=oe.output;const Lt=(F.capture?"(":"")+qe.open;Xe("parens"),xe({type:re,value:J,output:oe.output?"":ve}),xe({type:"paren",extglob:!0,value:$e(),output:Lt}),nt.push(qe)},"extglobOpen"),Re=o(re=>{let J=re.close+(F.capture?")":""),qe;if(re.type==="negate"){let Lt=Je;if(re.inner&&re.inner.length>1&&re.inner.includes("/")&&(Lt=G(F)),(Lt!==Je||te()||/^\)+$/.test(ke()))&&(J=re.close=`)$))${Lt}`),re.inner.includes("*")&&(qe=ke())&&/^\.[^\\/.]+$/.test(qe)){const Gt=W(qe,{...O,fastpaths:!1}).output;J=re.close=`)${Gt})${Lt})`}re.prev.type==="bos"&&(oe.negatedExtglob=!0)}xe({type:"paren",extglob:!0,value:H,output:J}),be("parens")},"extglobClose");if(F.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(_)){let re=!1,J=_.replace(N,(qe,Lt,Gt,Ln,wn,jn)=>Ln==="\\"?(re=!0,qe):Ln==="?"?Lt?Lt+Ln+(wn?D.repeat(wn.length):""):jn===0?Le+(wn?D.repeat(wn.length):""):D.repeat(Gt.length):Ln==="."?x.repeat(Gt.length):Ln==="*"?Lt?Lt+Ln+(wn?Je:""):Je:Lt?qe:`\\${qe}`);return re===!0&&(F.unescape===!0?J=J.replace(/\\/g,""):J=J.replace(/\\+/g,qe=>qe.length%2==0?"\\\\":qe?"\\":"")),J===_&&F.contains===!0?(oe.output=_,oe):(oe.output=v.wrapOutput(J,oe,O),oe)}for(;!te();){if(H=$e(),H==="\0")continue;if(H==="\\"){const qe=ge();if(qe==="/"&&F.bash!==!0||qe==="."||qe===";")continue;if(!qe){H+="\\",xe({type:"text",value:H});continue}const Lt=/^\\+/.exec(ke());let Gt=0;if(Lt&&Lt[0].length>2&&(Gt=Lt[0].length,oe.index+=Gt,Gt%2!=0&&(H+="\\")),F.unescape===!0?H=$e():H+=$e(),oe.brackets===0){xe({type:"text",value:H});continue}}if(oe.brackets>0&&(H!=="]"||L.value==="["||L.value==="[^")){if(F.posix!==!1&&H===":"){const qe=L.value.slice(1);if(qe.includes("[")&&(L.posix=!0,qe.includes(":"))){const Lt=L.value.lastIndexOf("["),Gt=L.value.slice(0,Lt),Ln=L.value.slice(Lt+2),wn=w[Ln];if(wn){L.value=Gt+wn,oe.backtrack=!0,$e(),!Ae.output&&$.indexOf(L)===1&&(Ae.output=ve);continue}}}(H==="["&&ge()!==":"||H==="-"&&ge()==="]")&&(H=`\\${H}`),H==="]"&&(L.value==="["||L.value==="[^")&&(H=`\\${H}`),F.posix===!0&&H==="!"&&L.value==="["&&(H="^"),L.value+=H,Ce({value:H});continue}if(oe.quotes===1&&H!=='"'){H=v.escapeRegex(H),L.value+=H,Ce({value:H});continue}if(H==='"'){oe.quotes=oe.quotes===1?0:1,F.keepQuotes===!0&&xe({type:"text",value:H});continue}if(H==="("){Xe("parens"),xe({type:"paren",value:H});continue}if(H===")"){if(oe.parens===0&&F.strictBrackets===!0)throw new SyntaxError(U("opening","("));const qe=nt[nt.length-1];if(qe&&oe.parens===qe.parens+1){Re(nt.pop());continue}xe({type:"paren",value:H,output:oe.parens?")":"\\)"}),be("parens");continue}if(H==="["){if(F.nobracket===!0||!ke().includes("]")){if(F.nobracket!==!0&&F.strictBrackets===!0)throw new SyntaxError(U("closing","]"));H=`\\${H}`}else Xe("brackets");xe({type:"bracket",value:H});continue}if(H==="]"){if(F.nobracket===!0||L&&L.type==="bracket"&&L.value.length===1){xe({type:"text",value:H,output:`\\${H}`});continue}if(oe.brackets===0){if(F.strictBrackets===!0)throw new SyntaxError(U("opening","["));xe({type:"text",value:H,output:`\\${H}`});continue}be("brackets");const qe=L.value.slice(1);if(L.posix!==!0&&qe[0]==="^"&&!qe.includes("/")&&(H=`/${H}`),L.value+=H,Ce({value:H}),F.literalBrackets===!1||v.hasRegexChars(qe))continue;const Lt=v.escapeRegex(L.value);if(oe.output=oe.output.slice(0,-L.value.length),F.literalBrackets===!0){oe.output+=Lt,L.value=Lt;continue}L.value=`(${X}${Lt}|${L.value})`,oe.output+=L.value;continue}if(H==="{"&&F.nobrace!==!0){Xe("braces");const qe={type:"brace",value:H,output:"(",outputIndex:oe.output.length,tokensIndex:oe.tokens.length};ft.push(qe),xe(qe);continue}if(H==="}"){const qe=ft[ft.length-1];if(F.nobrace===!0||!qe){xe({type:"text",value:H,output:H});continue}let Lt=")";if(qe.dots===!0){const Gt=$.slice(),Ln=[];for(let wn=Gt.length-1;wn>=0&&($.pop(),Gt[wn].type!=="brace");wn--)Gt[wn].type!=="dots"&&Ln.unshift(Gt[wn].value);Lt=y(Ln,F),oe.backtrack=!0}if(qe.comma!==!0&&qe.dots!==!0){const Gt=oe.output.slice(0,qe.outputIndex),Ln=oe.tokens.slice(qe.tokensIndex);qe.value=qe.output="\\{",H=Lt="\\}",oe.output=Gt;for(const wn of Ln)oe.output+=wn.output||wn.value}xe({type:"brace",value:H,output:Lt}),be("braces"),ft.pop();continue}if(H==="|"){nt.length>0&&nt[nt.length-1].conditions++,xe({type:"text",value:H});continue}if(H===","){let qe=H;const Lt=ft[ft.length-1];Lt&&ht[ht.length-1]==="braces"&&(Lt.comma=!0,qe="|"),xe({type:"comma",value:H,output:qe});continue}if(H==="/"){if(L.type==="dot"&&oe.index===oe.start+1){oe.start=oe.index+1,oe.consumed="",oe.output="",$.pop(),L=Ae;continue}xe({type:"slash",value:H,output:K});continue}if(H==="."){if(oe.braces>0&&L.type==="dot"){L.value==="."&&(L.output=x);const qe=ft[ft.length-1];L.type="dots",L.output+=H,L.value+=H,qe.dots=!0;continue}if(oe.braces+oe.parens===0&&L.type!=="bos"&&L.type!=="slash"){xe({type:"text",value:H,output:x});continue}xe({type:"dot",value:H,output:x});continue}if(H==="?"){if(!(L&&L.value==="(")&&F.noextglob!==!0&&ge()==="("&&ge(2)!=="?"){q("qmark",H);continue}if(L&&L.type==="paren"){const Lt=ge();let Gt=H;if(Lt==="<"&&!v.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(L.value==="("&&!/[!=<:]/.test(Lt)||Lt==="<"&&!/<([!=]|\w+>)/.test(ke()))&&(Gt=`\\${H}`),xe({type:"text",value:H,output:Gt});continue}if(F.dot!==!0&&(L.type==="slash"||L.type==="bos")){xe({type:"qmark",value:H,output:He});continue}xe({type:"qmark",value:H,output:D});continue}if(H==="!"){if(F.noextglob!==!0&&ge()==="("&&(ge(2)!=="?"||!/[!=<:]/.test(ge(3)))){q("negate",H);continue}if(F.nonegate!==!0&&oe.index===0){Me();continue}}if(H==="+"){if(F.noextglob!==!0&&ge()==="("&&ge(2)!=="?"){q("plus",H);continue}if(L&&L.value==="("||F.regex===!1){xe({type:"plus",value:H,output:le});continue}if(L&&(L.type==="bracket"||L.type==="paren"||L.type==="brace")||oe.parens>0){xe({type:"plus",value:H});continue}xe({type:"plus",value:le});continue}if(H==="@"){if(F.noextglob!==!0&&ge()==="("&&ge(2)!=="?"){xe({type:"at",extglob:!0,value:H,output:""});continue}xe({type:"text",value:H});continue}if(H!=="*"){(H==="$"||H==="^")&&(H=`\\${H}`);const qe=B.exec(ke());qe&&(H+=qe[0],oe.index+=qe[0].length),xe({type:"text",value:H});continue}if(L&&(L.type==="globstar"||L.star===!0)){L.type="star",L.star=!0,L.value+=H,L.output=Je,oe.backtrack=!0,oe.globstar=!0,de(H);continue}let re=ke();if(F.noextglob!==!0&&/^\([^?]/.test(re)){q("star",H);continue}if(L.type==="star"){if(F.noglobstar===!0){de(H);continue}const qe=L.prev,Lt=qe.prev,Gt=qe.type==="slash"||qe.type==="bos",Ln=Lt&&(Lt.type==="star"||Lt.type==="globstar");if(F.bash===!0&&(!Gt||re[0]&&re[0]!=="/")){xe({type:"star",value:H,output:""});continue}const wn=oe.braces>0&&(qe.type==="comma"||qe.type==="brace"),jn=nt.length&&(qe.type==="pipe"||qe.type==="paren");if(!Gt&&qe.type!=="paren"&&!wn&&!jn){xe({type:"star",value:H,output:""});continue}for(;re.slice(0,3)==="/**";){const Qn=_[oe.index+4];if(Qn&&Qn!=="/")break;re=re.slice(3),de("/**",3)}if(qe.type==="bos"&&te()){L.type="globstar",L.value+=H,L.output=G(F),oe.output=L.output,oe.globstar=!0,de(H);continue}if(qe.type==="slash"&&qe.prev.type!=="bos"&&!Ln&&te()){oe.output=oe.output.slice(0,-(qe.output+L.output).length),qe.output=`(?:${qe.output}`,L.type="globstar",L.output=G(F)+(F.strictSlashes?")":"|$)"),L.value+=H,oe.globstar=!0,oe.output+=qe.output+L.output,de(H);continue}if(qe.type==="slash"&&qe.prev.type!=="bos"&&re[0]==="/"){const Qn=re[1]!==void 0?"|$":"";oe.output=oe.output.slice(0,-(qe.output+L.output).length),qe.output=`(?:${qe.output}`,L.type="globstar",L.output=`${G(F)}${K}|${K}${Qn})`,L.value+=H,oe.output+=qe.output+L.output,oe.globstar=!0,de(H+$e()),xe({type:"slash",value:"/",output:""});continue}if(qe.type==="bos"&&re[0]==="/"){L.type="globstar",L.value+=H,L.output=`(?:^|${K}|${G(F)}${K})`,oe.output=L.output,oe.globstar=!0,de(H+$e()),xe({type:"slash",value:"/",output:""});continue}oe.output=oe.output.slice(0,-L.output.length),L.type="globstar",L.output=G(F),L.value+=H,oe.output+=L.output,oe.globstar=!0,de(H);continue}const J={type:"star",value:H,output:Je};if(F.bash===!0){J.output=".*?",(L.type==="bos"||L.type==="slash")&&(J.output=he+J.output),xe(J);continue}if(L&&(L.type==="bracket"||L.type==="paren")&&F.regex===!0){J.output=H,xe(J);continue}(oe.index===oe.start||L.type==="slash"||L.type==="dot")&&(L.type==="dot"?(oe.output+=ne,L.output+=ne):F.dot===!0?(oe.output+=Se,L.output+=Se):(oe.output+=he,L.output+=he),ge()!=="*"&&(oe.output+=ve,L.output+=ve)),xe(J)}for(;oe.brackets>0;){if(F.strictBrackets===!0)throw new SyntaxError(U("closing","]"));oe.output=v.escapeLast(oe.output,"["),be("brackets")}for(;oe.parens>0;){if(F.strictBrackets===!0)throw new SyntaxError(U("closing",")"));oe.output=v.escapeLast(oe.output,"("),be("parens")}for(;oe.braces>0;){if(F.strictBrackets===!0)throw new SyntaxError(U("closing","}"));oe.output=v.escapeLast(oe.output,"{"),be("braces")}if(F.strictSlashes!==!0&&(L.type==="star"||L.type==="bracket")&&xe({type:"maybe_slash",value:"",output:`${K}?`}),oe.backtrack===!0){oe.output="";for(const re of oe.tokens)oe.output+=re.output!=null?re.output:re.value,re.suffix&&(oe.output+=re.suffix)}return oe},"parse");W.fastpaths=(_,O)=>{const F={...O},V=typeof F.maxLength=="number"?Math.min(I,F.maxLength):I,se=_.length;if(se>V)throw new SyntaxError(`Input length: ${se}, exceeds maximum allowed length: ${V}`);_=m[_]||_;const Ae=v.isWindows(O),{DOT_LITERAL:$,SLASH_LITERAL:X,ONE_CHAR:Z,DOTS_SLASH:k,NO_DOT:j,NO_DOTS:x,NO_DOTS_SLASH:le,STAR:K,START_ANCHOR:ve}=R.globChars(Ae),_e=F.dot?x:j,Pe=F.dot?le:j,ne=F.capture?"":"?:",Se={negated:!1,prefix:""};let D=F.bash===!0?".*?":K;F.capture&&(D=`(${D})`);const He=o(he=>he.noglobstar===!0?D:`(${ne}(?:(?!${ve}${he.dot?k:$}).)*?)`,"globstar"),fe=o(he=>{switch(he){case"*":return`${_e}${Z}${D}`;case".*":return`${$}${Z}${D}`;case"*.*":return`${_e}${D}${$}${Z}${D}`;case"*/*":return`${_e}${D}${X}${Z}${Pe}${D}`;case"**":return _e+He(F);case"**/*":return`(?:${_e}${He(F)}${X})?${Pe}${Z}${D}`;case"**/*.*":return`(?:${_e}${He(F)}${X})?${Pe}${D}${$}${Z}${D}`;case"**/.*":return`(?:${_e}${He(F)}${X})?${$}${Z}${D}`;default:{const Le=/^(.*?)\.(\w+)$/.exec(he);if(!Le)return;const Je=fe(Le[1]);return Je?Je+$+Le[2]:void 0}}},"create"),ue=v.removePrefix(_,Se);let G=fe(ue);return G&&F.strictSlashes!==!0&&(G+=`${X}?`),G},at.exports=W},5761:(at,l,b)=>{"use strict";const R=b(6470),v=b(9826),I=b(3969),w=b(292),B=b(3889),N=o(y=>y&&typeof y=="object"&&!Array.isArray(y),"isObject"),m=o((y,U,W=!1)=>{if(Array.isArray(y)){const X=y.map(k=>m(k,U,W));return o(k=>{for(const j of X){const x=j(k);if(x)return x}return!1},"arrayMatcher")}const _=N(y)&&y.tokens&&y.input;if(y===""||typeof y!="string"&&!_)throw new TypeError("Expected pattern to be a non-empty string");const O=U||{},F=w.isWindows(U),V=_?m.compileRe(y,U):m.makeRe(y,U,!1,!0),se=V.state;delete V.state;let Ae=o(()=>!1,"isIgnored");if(O.ignore){const X={...U,ignore:null,onMatch:null,onResult:null};Ae=m(O.ignore,X,W)}const $=o((X,Z=!1)=>{const{isMatch:k,match:j,output:x}=m.test(X,V,U,{glob:y,posix:F}),le={glob:y,state:se,regex:V,posix:F,input:X,output:x,match:j,isMatch:k};return typeof O.onResult=="function"&&O.onResult(le),k===!1?(le.isMatch=!1,Z?le:!1):Ae(X)?(typeof O.onIgnore=="function"&&O.onIgnore(le),le.isMatch=!1,Z?le:!1):(typeof O.onMatch=="function"&&O.onMatch(le),Z?le:!0)},"matcher");return W&&($.state=se),$},"picomatch");m.test=(y,U,W,{glob:_,posix:O}={})=>{if(typeof y!="string")throw new TypeError("Expected input to be a string");if(y==="")return{isMatch:!1,output:""};const F=W||{},V=F.format||(O?w.toPosixSlashes:null);let se=y===_,Ae=se&&V?V(y):y;return se===!1&&(Ae=V?V(y):y,se=Ae===_),(se===!1||F.capture===!0)&&(F.matchBase===!0||F.basename===!0?se=m.matchBase(y,U,W,O):se=U.exec(Ae)),{isMatch:Boolean(se),match:se,output:Ae}},m.matchBase=(y,U,W,_=w.isWindows(W))=>(U instanceof RegExp?U:m.makeRe(U,W)).test(R.basename(y)),m.isMatch=(y,U,W)=>m(U,W)(y),m.parse=(y,U)=>Array.isArray(y)?y.map(W=>m.parse(W,U)):I(y,{...U,fastpaths:!1}),m.scan=(y,U)=>v(y,U),m.compileRe=(y,U,W=!1,_=!1)=>{if(W===!0)return y.output;const O=U||{},F=O.contains?"":"^",V=O.contains?"":"$";let se=`${F}(?:${y.output})${V}`;y&&y.negated===!0&&(se=`^(?!${se}).*$`);const Ae=m.toRegex(se,U);return _===!0&&(Ae.state=y),Ae},m.makeRe=(y,U={},W=!1,_=!1)=>{if(!y||typeof y!="string")throw new TypeError("Expected a non-empty string");let O={negated:!1,fastpaths:!0};return U.fastpaths!==!1&&(y[0]==="."||y[0]==="*")&&(O.output=I.fastpaths(y,U)),O.output||(O=I(y,U)),m.compileRe(O,U,W,_)},m.toRegex=(y,U)=>{try{const W=U||{};return new RegExp(y,W.flags||(W.nocase?"i":""))}catch(W){if(U&&U.debug===!0)throw W;return/$^/}},m.constants=B,at.exports=m},9826:(at,l,b)=>{"use strict";const R=b(292),{CHAR_ASTERISK:v,CHAR_AT:I,CHAR_BACKWARD_SLASH:w,CHAR_COMMA:B,CHAR_DOT:N,CHAR_EXCLAMATION_MARK:m,CHAR_FORWARD_SLASH:y,CHAR_LEFT_CURLY_BRACE:U,CHAR_LEFT_PARENTHESES:W,CHAR_LEFT_SQUARE_BRACKET:_,CHAR_PLUS:O,CHAR_QUESTION_MARK:F,CHAR_RIGHT_CURLY_BRACE:V,CHAR_RIGHT_PARENTHESES:se,CHAR_RIGHT_SQUARE_BRACKET:Ae}=b(3889),$=o(k=>k===y||k===w,"isPathSeparator"),X=o(k=>{k.isPrefix!==!0&&(k.depth=k.isGlobstar?1/0:1)},"depth"),Z=o((k,j)=>{const x=j||{},le=k.length-1,K=x.parts===!0||x.scanToEnd===!0,ve=[],_e=[],Pe=[];let ne=k,Se=-1,D=0,He=0,fe=!1,ue=!1,G=!1,he=!1,Le=!1,Je=!1,oe=!1,nt=!1,ft=!1,ht=!1,L=0,H,te,ge={value:"",depth:0,isGlob:!1};const $e=o(()=>Se>=le,"eos"),ke=o(()=>ne.charCodeAt(Se+1),"peek"),de=o(()=>(H=te,ne.charCodeAt(++Se)),"advance");for(;Se<le;){te=de();let xe;if(te===w){oe=ge.backslashes=!0,te=de(),te===U&&(Je=!0);continue}if(Je===!0||te===U){for(L++;$e()!==!0&&(te=de());){if(te===w){oe=ge.backslashes=!0,de();continue}if(te===U){L++;continue}if(Je!==!0&&te===N&&(te=de())===N){if(fe=ge.isBrace=!0,G=ge.isGlob=!0,ht=!0,K===!0)continue;break}if(Je!==!0&&te===B){if(fe=ge.isBrace=!0,G=ge.isGlob=!0,ht=!0,K===!0)continue;break}if(te===V&&(L--,L===0)){Je=!1,fe=ge.isBrace=!0,ht=!0;break}}if(K===!0)continue;break}if(te===y){if(ve.push(Se),_e.push(ge),ge={value:"",depth:0,isGlob:!1},ht===!0)continue;if(H===N&&Se===D+1){D+=2;continue}He=Se+1;continue}if(x.noext!==!0&&(te===O||te===I||te===v||te===F||te===m)===!0&&ke()===W){if(G=ge.isGlob=!0,he=ge.isExtglob=!0,ht=!0,te===m&&Se===D&&(ft=!0),K===!0){for(;$e()!==!0&&(te=de());){if(te===w){oe=ge.backslashes=!0,te=de();continue}if(te===se){G=ge.isGlob=!0,ht=!0;break}}continue}break}if(te===v){if(H===v&&(Le=ge.isGlobstar=!0),G=ge.isGlob=!0,ht=!0,K===!0)continue;break}if(te===F){if(G=ge.isGlob=!0,ht=!0,K===!0)continue;break}if(te===_){for(;$e()!==!0&&(xe=de());){if(xe===w){oe=ge.backslashes=!0,de();continue}if(xe===Ae){ue=ge.isBracket=!0,G=ge.isGlob=!0,ht=!0;break}}if(K===!0)continue;break}if(x.nonegate!==!0&&te===m&&Se===D){nt=ge.negated=!0,D++;continue}if(x.noparen!==!0&&te===W){if(G=ge.isGlob=!0,K===!0){for(;$e()!==!0&&(te=de());){if(te===W){oe=ge.backslashes=!0,te=de();continue}if(te===se){ht=!0;break}}continue}break}if(G===!0){if(ht=!0,K===!0)continue;break}}x.noext===!0&&(he=!1,G=!1);let Ce=ne,Me="",Xe="";D>0&&(Me=ne.slice(0,D),ne=ne.slice(D),He-=D),Ce&&G===!0&&He>0?(Ce=ne.slice(0,He),Xe=ne.slice(He)):G===!0?(Ce="",Xe=ne):Ce=ne,Ce&&Ce!==""&&Ce!=="/"&&Ce!==ne&&$(Ce.charCodeAt(Ce.length-1))&&(Ce=Ce.slice(0,-1)),x.unescape===!0&&(Xe&&(Xe=R.removeBackslashes(Xe)),Ce&&oe===!0&&(Ce=R.removeBackslashes(Ce)));const be={prefix:Me,input:k,start:D,base:Ce,glob:Xe,isBrace:fe,isBracket:ue,isGlob:G,isExtglob:he,isGlobstar:Le,negated:nt,negatedExtglob:ft};if(x.tokens===!0&&(be.maxDepth=0,$(te)||_e.push(ge),be.tokens=_e),x.parts===!0||x.tokens===!0){let xe;for(let q=0;q<ve.length;q++){const Re=xe?xe+1:D,re=ve[q],J=k.slice(Re,re);x.tokens&&(q===0&&D!==0?(_e[q].isPrefix=!0,_e[q].value=Me):_e[q].value=J,X(_e[q]),be.maxDepth+=_e[q].depth),(q!==0||J!=="")&&Pe.push(J),xe=re}if(xe&&xe+1<k.length){const q=k.slice(xe+1);Pe.push(q),x.tokens&&(_e[_e.length-1].value=q,X(_e[_e.length-1]),be.maxDepth+=_e[_e.length-1].depth)}be.slashes=ve,be.parts=Pe}return be},"scan");at.exports=Z},292:(at,l,b)=>{"use strict";var R=b(6038);const v=b(6470),I=R.platform==="win32",{REGEX_BACKSLASH:w,REGEX_REMOVE_BACKSLASH:B,REGEX_SPECIAL_CHARS:N,REGEX_SPECIAL_CHARS_GLOBAL:m}=b(3889);l.isObject=y=>y!==null&&typeof y=="object"&&!Array.isArray(y),l.hasRegexChars=y=>N.test(y),l.isRegexChar=y=>y.length===1&&l.hasRegexChars(y),l.escapeRegex=y=>y.replace(m,"\\$1"),l.toPosixSlashes=y=>y.replace(w,"/"),l.removeBackslashes=y=>y.replace(B,U=>U==="\\"?"":U),l.supportsLookbehinds=()=>{const y=R.version.slice(1).split(".").map(Number);return y.length===3&&y[0]>=9||y[0]===8&&y[1]>=10},l.isWindows=y=>y&&typeof y.windows=="boolean"?y.windows:I===!0||v.sep==="\\",l.escapeLast=(y,U,W)=>{const _=y.lastIndexOf(U,W);return _===-1?y:y[_-1]==="\\"?l.escapeLast(y,U,_-1):`${y.slice(0,_)}\\${y.slice(_)}`},l.removePrefix=(y,U={})=>{let W=y;return W.startsWith("./")&&(W=W.slice(2),U.prefix="./"),W},l.wrapOutput=(y,U={},W={})=>{const _=W.contains?"":"^",O=W.contains?"":"$";let F=`${_}(?:${y})${O}`;return U.negated===!0&&(F=`(?:^(?!${F}).*$)`),F}},6038:at=>{var l=at.exports={},b,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function I(){throw new Error("clearTimeout has not been defined")}o(I,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?b=setTimeout:b=v}catch(V){b=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=I}catch(V){R=I}}();function w(V){if(b===setTimeout)return setTimeout(V,0);if((b===v||!b)&&setTimeout)return b=setTimeout,setTimeout(V,0);try{return b(V,0)}catch(se){try{return b.call(null,V,0)}catch(Ae){return b.call(this,V,0)}}}o(w,"runTimeout");function B(V){if(R===clearTimeout)return clearTimeout(V);if((R===I||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(V);try{return R(V)}catch(se){try{return R.call(null,V)}catch(Ae){return R.call(this,V)}}}o(B,"runClearTimeout");var N=[],m=!1,y,U=-1;function W(){!m||!y||(m=!1,y.length?N=y.concat(N):U=-1,N.length&&_())}o(W,"cleanUpNextTick");function _(){if(!m){var V=w(W);m=!0;for(var se=N.length;se;){for(y=N,N=[];++U<se;)y&&y[U].run();U=-1,se=N.length}y=null,m=!1,B(V)}}o(_,"drainQueue"),l.nextTick=function(V){var se=new Array(arguments.length-1);if(arguments.length>1)for(var Ae=1;Ae<arguments.length;Ae++)se[Ae-1]=arguments[Ae];N.push(new O(V,se)),N.length===1&&!m&&w(_)};function O(V,se){this.fun=V,this.array=se}o(O,"Item"),O.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function F(){}o(F,"noop"),l.on=F,l.addListener=F,l.once=F,l.off=F,l.removeListener=F,l.removeAllListeners=F,l.emit=F,l.prependListener=F,l.prependOnceListener=F,l.listeners=function(V){return[]},l.binding=function(V){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(V){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},2999:(at,l,b)=>{"use strict";/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const R=b(3338),v=o(($,X,Z)=>{if(R($)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(X===void 0||$===X)return String($);if(R(X)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let k={relaxZeros:!0,...Z};typeof k.strictZeros=="boolean"&&(k.relaxZeros=k.strictZeros===!1);let j=String(k.relaxZeros),x=String(k.shorthand),le=String(k.capture),K=String(k.wrap),ve=$+":"+X+"="+j+x+le+K;if(v.cache.hasOwnProperty(ve))return v.cache[ve].result;let _e=Math.min($,X),Pe=Math.max($,X);if(Math.abs(_e-Pe)===1){let fe=$+"|"+X;return k.capture?`(${fe})`:k.wrap===!1?fe:`(?:${fe})`}let ne=se($)||se(X),Se={min:$,max:X,a:_e,b:Pe},D=[],He=[];if(ne&&(Se.isPadded=ne,Se.maxLen=String(Se.max).length),_e<0){let fe=Pe<0?Math.abs(Pe):1;He=N(fe,Math.abs(_e),Se,k),_e=Se.a=0}return Pe>=0&&(D=N(_e,Pe,Se,k)),Se.negatives=He,Se.positives=D,Se.result=I(He,D,k),k.capture===!0?Se.result=`(${Se.result})`:k.wrap!==!1&&D.length+He.length>1&&(Se.result=`(?:${Se.result})`),v.cache[ve]=Se,Se.result},"toRegexRange");function I($,X,Z){let k=m($,X,"-",!1,Z)||[],j=m(X,$,"",!1,Z)||[],x=m($,X,"-?",!0,Z)||[];return k.concat(x).concat(j).join("|")}o(I,"collatePatterns");function w($,X){let Z=1,k=1,j=_($,Z),x=new Set([X]);for(;$<=j&&j<=X;)x.add(j),Z+=1,j=_($,Z);for(j=O(X+1,k)-1;$<j&&j<=X;)x.add(j),k+=1,j=O(X+1,k)-1;return x=[...x],x.sort(U),x}o(w,"splitToRanges");function B($,X,Z){if($===X)return{pattern:$,count:[],digits:0};let k=y($,X),j=k.length,x="",le=0;for(let K=0;K<j;K++){let[ve,_e]=k[K];ve===_e?x+=ve:ve!=="0"||_e!=="9"?x+=V(ve,_e,Z):le++}return le&&(x+=Z.shorthand===!0?"\\d":"[0-9]"),{pattern:x,count:[le],digits:j}}o(B,"rangeToPattern");function N($,X,Z,k){let j=w($,X),x=[],le=$,K;for(let ve=0;ve<j.length;ve++){let _e=j[ve],Pe=B(String(le),String(_e),k),ne="";if(!Z.isPadded&&K&&K.pattern===Pe.pattern){K.count.length>1&&K.count.pop(),K.count.push(Pe.count[0]),K.string=K.pattern+F(K.count),le=_e+1;continue}Z.isPadded&&(ne=Ae(_e,Z,k)),Pe.string=ne+Pe.pattern+F(Pe.count),x.push(Pe),le=_e+1,K=Pe}return x}o(N,"splitToPatterns");function m($,X,Z,k,j){let x=[];for(let le of $){let{string:K}=le;!k&&!W(X,"string",K)&&x.push(Z+K),k&&W(X,"string",K)&&x.push(Z+K)}return x}o(m,"filterPatterns");function y($,X){let Z=[];for(let k=0;k<$.length;k++)Z.push([$[k],X[k]]);return Z}o(y,"zip");function U($,X){return $>X?1:X>$?-1:0}o(U,"compare");function W($,X,Z){return $.some(k=>k[X]===Z)}o(W,"contains");function _($,X){return Number(String($).slice(0,-X)+"9".repeat(X))}o(_,"countNines");function O($,X){return $-$%Math.pow(10,X)}o(O,"countZeros");function F($){let[X=0,Z=""]=$;return Z||X>1?`{${X+(Z?","+Z:"")}}`:""}o(F,"toQuantifier");function V($,X,Z){return`[${$}${X-$==1?"":"-"}${X}]`}o(V,"toCharacterClass");function se($){return/^-?(0+)\d/.test($)}o(se,"hasPadding");function Ae($,X,Z){if(!X.isPadded)return $;let k=Math.abs(X.maxLen-String($).length),j=Z.relaxZeros!==!1;switch(k){case 0:return"";case 1:return j?"0?":"0";case 2:return j?"0{0,2}":"00";default:return j?`0{0,${k}}`:`0{${k}}`}}o(Ae,"padZeros"),v.cache={},v.clearCache=()=>v.cache={},at.exports=v},6724:()=>{},6470:(at,l,b)=>{"use strict";var R=b(4155);function v(N){if(typeof N!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(N))}o(v,"assertPath");function I(N,m){for(var y="",U=0,W=-1,_=0,O,F=0;F<=N.length;++F){if(F<N.length)O=N.charCodeAt(F);else{if(O===47)break;O=47}if(O===47){if(!(W===F-1||_===1))if(W!==F-1&&_===2){if(y.length<2||U!==2||y.charCodeAt(y.length-1)!==46||y.charCodeAt(y.length-2)!==46){if(y.length>2){var V=y.lastIndexOf("/");if(V!==y.length-1){V===-1?(y="",U=0):(y=y.slice(0,V),U=y.length-1-y.lastIndexOf("/")),W=F,_=0;continue}}else if(y.length===2||y.length===1){y="",U=0,W=F,_=0;continue}}m&&(y.length>0?y+="/..":y="..",U=2)}else y.length>0?y+="/"+N.slice(W+1,F):y=N.slice(W+1,F),U=F-W-1;W=F,_=0}else O===46&&_!==-1?++_:_=-1}return y}o(I,"normalizeStringPosix");function w(N,m){var y=m.dir||m.root,U=m.base||(m.name||"")+(m.ext||"");return y?y===m.root?y+U:y+N+U:U}o(w,"_format");var B={resolve:o(function(){for(var m="",y=!1,U,W=arguments.length-1;W>=-1&&!y;W--){var _;W>=0?_=arguments[W]:(U===void 0&&(U=R.cwd()),_=U),v(_),_.length!==0&&(m=_+"/"+m,y=_.charCodeAt(0)===47)}return m=I(m,!y),y?m.length>0?"/"+m:"/":m.length>0?m:"."},"resolve"),normalize:o(function(m){if(v(m),m.length===0)return".";var y=m.charCodeAt(0)===47,U=m.charCodeAt(m.length-1)===47;return m=I(m,!y),m.length===0&&!y&&(m="."),m.length>0&&U&&(m+="/"),y?"/"+m:m},"normalize"),isAbsolute:o(function(m){return v(m),m.length>0&&m.charCodeAt(0)===47},"isAbsolute"),join:o(function(){if(arguments.length===0)return".";for(var m,y=0;y<arguments.length;++y){var U=arguments[y];v(U),U.length>0&&(m===void 0?m=U:m+="/"+U)}return m===void 0?".":B.normalize(m)},"join"),relative:o(function(m,y){if(v(m),v(y),m===y||(m=B.resolve(m),y=B.resolve(y),m===y))return"";for(var U=1;U<m.length&&m.charCodeAt(U)===47;++U);for(var W=m.length,_=W-U,O=1;O<y.length&&y.charCodeAt(O)===47;++O);for(var F=y.length,V=F-O,se=_<V?_:V,Ae=-1,$=0;$<=se;++$){if($===se){if(V>se){if(y.charCodeAt(O+$)===47)return y.slice(O+$+1);if($===0)return y.slice(O+$)}else _>se&&(m.charCodeAt(U+$)===47?Ae=$:$===0&&(Ae=0));break}var X=m.charCodeAt(U+$),Z=y.charCodeAt(O+$);if(X!==Z)break;X===47&&(Ae=$)}var k="";for($=U+Ae+1;$<=W;++$)($===W||m.charCodeAt($)===47)&&(k.length===0?k+="..":k+="/..");return k.length>0?k+y.slice(O+Ae):(O+=Ae,y.charCodeAt(O)===47&&++O,y.slice(O))},"relative"),_makeLong:o(function(m){return m},"_makeLong"),dirname:o(function(m){if(v(m),m.length===0)return".";for(var y=m.charCodeAt(0),U=y===47,W=-1,_=!0,O=m.length-1;O>=1;--O)if(y=m.charCodeAt(O),y===47){if(!_){W=O;break}}else _=!1;return W===-1?U?"/":".":U&&W===1?"//":m.slice(0,W)},"dirname"),basename:o(function(m,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');v(m);var U=0,W=-1,_=!0,O;if(y!==void 0&&y.length>0&&y.length<=m.length){if(y.length===m.length&&y===m)return"";var F=y.length-1,V=-1;for(O=m.length-1;O>=0;--O){var se=m.charCodeAt(O);if(se===47){if(!_){U=O+1;break}}else V===-1&&(_=!1,V=O+1),F>=0&&(se===y.charCodeAt(F)?--F==-1&&(W=O):(F=-1,W=V))}return U===W?W=V:W===-1&&(W=m.length),m.slice(U,W)}else{for(O=m.length-1;O>=0;--O)if(m.charCodeAt(O)===47){if(!_){U=O+1;break}}else W===-1&&(_=!1,W=O+1);return W===-1?"":m.slice(U,W)}},"basename"),extname:o(function(m){v(m);for(var y=-1,U=0,W=-1,_=!0,O=0,F=m.length-1;F>=0;--F){var V=m.charCodeAt(F);if(V===47){if(!_){U=F+1;break}continue}W===-1&&(_=!1,W=F+1),V===46?y===-1?y=F:O!==1&&(O=1):y!==-1&&(O=-1)}return y===-1||W===-1||O===0||O===1&&y===W-1&&y===U+1?"":m.slice(y,W)},"extname"),format:o(function(m){if(m===null||typeof m!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof m);return w("/",m)},"format"),parse:o(function(m){v(m);var y={root:"",dir:"",base:"",ext:"",name:""};if(m.length===0)return y;var U=m.charCodeAt(0),W=U===47,_;W?(y.root="/",_=1):_=0;for(var O=-1,F=0,V=-1,se=!0,Ae=m.length-1,$=0;Ae>=_;--Ae){if(U=m.charCodeAt(Ae),U===47){if(!se){F=Ae+1;break}continue}V===-1&&(se=!1,V=Ae+1),U===46?O===-1?O=Ae:$!==1&&($=1):O!==-1&&($=-1)}return O===-1||V===-1||$===0||$===1&&O===V-1&&O===F+1?V!==-1&&(F===0&&W?y.base=y.name=m.slice(1,V):y.base=y.name=m.slice(F,V)):(F===0&&W?(y.name=m.slice(1,O),y.base=m.slice(1,V)):(y.name=m.slice(F,O),y.base=m.slice(F,V)),y.ext=m.slice(O,V)),F>0?y.dir=m.slice(0,F-1):W&&(y.dir="/"),y},"parse"),sep:"/",delimiter:":",win32:null,posix:null};B.posix=B,at.exports=B},4155:at=>{var l=at.exports={},b,R;function v(){throw new Error("setTimeout has not been defined")}o(v,"defaultSetTimout");function I(){throw new Error("clearTimeout has not been defined")}o(I,"defaultClearTimeout"),function(){try{typeof setTimeout=="function"?b=setTimeout:b=v}catch(V){b=v}try{typeof clearTimeout=="function"?R=clearTimeout:R=I}catch(V){R=I}}();function w(V){if(b===setTimeout)return setTimeout(V,0);if((b===v||!b)&&setTimeout)return b=setTimeout,setTimeout(V,0);try{return b(V,0)}catch(se){try{return b.call(null,V,0)}catch(Ae){return b.call(this,V,0)}}}o(w,"runTimeout");function B(V){if(R===clearTimeout)return clearTimeout(V);if((R===I||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(V);try{return R(V)}catch(se){try{return R.call(null,V)}catch(Ae){return R.call(this,V)}}}o(B,"runClearTimeout");var N=[],m=!1,y,U=-1;function W(){!m||!y||(m=!1,y.length?N=y.concat(N):U=-1,N.length&&_())}o(W,"cleanUpNextTick");function _(){if(!m){var V=w(W);m=!0;for(var se=N.length;se;){for(y=N,N=[];++U<se;)y&&y[U].run();U=-1,se=N.length}y=null,m=!1,B(V)}}o(_,"drainQueue"),l.nextTick=function(V){var se=new Array(arguments.length-1);if(arguments.length>1)for(var Ae=1;Ae<arguments.length;Ae++)se[Ae-1]=arguments[Ae];N.push(new O(V,se)),N.length===1&&!m&&w(_)};function O(V,se){this.fun=V,this.array=se}o(O,"Item"),O.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function F(){}o(F,"noop"),l.on=F,l.addListener=F,l.once=F,l.off=F,l.removeListener=F,l.removeAllListeners=F,l.emit=F,l.prependListener=F,l.prependOnceListener=F,l.listeners=function(V){return[]},l.binding=function(V){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(V){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},6529:()=>{},6391:()=>{}},Va={};function cr(at){var l=Va[at];if(l!==void 0)return l.exports;var b=Va[at]={id:at,loaded:!1,exports:{}};return Ao[at](b,b.exports,cr),b.loaded=!0,b.exports}o(cr,"__webpack_require__"),(()=>{cr.n=at=>{var l=at&&at.__esModule?()=>at.default:()=>at;return cr.d(l,{a:l}),l}})(),(()=>{cr.d=(at,l)=>{for(var b in l)cr.o(l,b)&&!cr.o(at,b)&&Object.defineProperty(at,b,{enumerable:!0,get:l[b]})}})(),(()=>{cr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(at){if(typeof window=="object")return window}}()})(),(()=>{cr.o=(at,l)=>Object.prototype.hasOwnProperty.call(at,l)})(),(()=>{cr.r=at=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(at,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(at,"__esModule",{value:!0})}})(),(()=>{cr.nmd=at=>(at.paths=[],at.children||(at.children=[]),at)})();var Do={};(()=>{"use strict";cr.r(Do),cr.d(Do,{AllowedProviderExtensionIds:()=>jo,StateKeys:()=>ha,activate:()=>Cc,ensureProvidersRegistered:()=>Ur,getOpenActionsService:()=>bo,getState:()=>el,isPreRelease:()=>Sc,updateState:()=>Jo});var at={};cr.r(at),cr.d(at,{max:()=>Tl,min:()=>Rl});const l=require("vscode"),b=new TextDecoder,R=new TextEncoder,v=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function I(t){const e=R.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=v[e[r]];return n.join("")}o(I,"encodeUtf8Hex");function w(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return b.decode(n)}o(w,"decodeUtf8Hex");const B=/^[0-9a-f]{40}$/i;function N(t){return t!==void 0&&B.test(t)}o(N,"isSha");const m=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function y(t){return m.test(t)}o(y,"isValidBranchName");function U(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}o(U,"shortenRef");const W=47;function _(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}o(_,"asKey");function O(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}o(O,"asFileKey");function F(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}o(F,"asFileStorageKey");function V(t){const e=typeof t=="string"?t:t.path;let n=0,r=-1,i=!0;for(let a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===W){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?"":e.slice(n,r)}o(V,"basename");function se(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===W){if(!i){r=a;break}}else i=!1;return r===-1?"/":e.slice(0,r)}o(se,"dirname");function Ae(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}o(Ae,"getParent");function $(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?l.Uri.joinPath(t,n.substr(t.path.length)):l.Uri.joinPath(t,n)}o($,"joinRelativePath");function X(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),Z(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):Z(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}o(X,"isChild");function Z(t,e){if(typeof t=="string")return e=typeof e=="string"?e:e.path,e.startsWith("/")||(e=`/${e}`),e.length===1||t.startsWith(e.endsWith("/")?e:`${e}/`);if(typeof e=="string"){e.startsWith("/")||(e=`/${e}`);const n=typeof t=="string"?t:t.path;return e.length===1||n.startsWith(e.endsWith("/")?e:`${e}/`)}return e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}o(Z,"isDescendent");function k(t){return t&&typeof t=="object"&&"scheme"in t}o(k,"isSerializedUri");function j(t){return t.split("/").map(e=>encodeURIComponent(e)).join("/")}o(j,"encodeURIComponentExceptSlashes");var x;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=l.Uri.parse(`${t.scheme}://`);function e(d){const{authority:f}=d,h=f.indexOf(t.authoritySeparator);return h!==-1?f.substr(0,h):f}o(e,"getProviderId"),t.getProviderId=e;function n(d){return d.scheme!==t.scheme?d:d.with({scheme:e(d)})}o(n,"getProviderUri"),t.getProviderUri=n;function r(d,f){const h=new Map,p=l.workspace.textDocuments;if(p.length===0)return h;for(const C of p)C.uri.scheme===d&&f.some(Q=>Z(C.uri,Q))&&h.set(_(C.uri),C.uri);return h}o(r,"getOpenUris"),t.getOpenUris=r;function i(d){return d.scheme===t.scheme?d:d.with({scheme:t.scheme})}o(i,"getVirtualUri"),t.getVirtualUri=i;function a(d,f){const[h,p]=d.authority.split(t.authoritySeparator);let C;if(p)try{const Q=JSON.parse(w(p));C=f?f(Q):Q}catch{}return{scheme:h,metadata:C}}o(a,"decodeAuthority"),t.decodeAuthority=a;function s(d,f){const h=f?`${t.authoritySeparator}${I(JSON.stringify(f))}`:"";return`${d}${h}`}o(s,"encodeAuthority"),t.encodeAuthority=s;function c(d){return d.authority.indexOf(t.authoritySeparator)===-1}o(c,"isCanonicalUri"),t.isCanonicalUri=c;function u(){var d,f;return(f=(d=l.workspace.workspaceFolders)==null?void 0:d.every(h=>h.uri.scheme===t.scheme))!=null?f:!1}o(u,"isVirtualWorkspace"),t.isVirtualWorkspace=u})(x||(x={}));var le;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(le||(le={}));var K;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(K||(K={}));var ve;(function(t){function e(n){return n!==void 0&&n.type===ne.Active}o(e,"isActive"),t.isActive=e})(ve||(ve={}));var _e;(function(t){function e(n){const r=x.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:Pe.Latest};if(N(r.idx))return{type:Pe.SHA,sha:r.idx}}}o(e,"decode"),t.decode=e})(_e||(_e={}));var Pe;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Pe||(Pe={}));var ne;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(ne||(ne={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(ne||(ne={}));var Se;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(Se||(Se={}));var D;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(D||(D={}));var He;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})(He||(He={}));var fe;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(fe||(fe={}));var ue;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(ue||(ue={}));var G;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(G||(G={}));var he;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(he||(he={}));var Le;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Le||(Le={}));var Je;(function(t){t.Browse="browse",t.Edit="edit"})(Je||(Je={}));var oe;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.CommitToProtectedBranchError="CommitToProtectedBranchError",t.CommitToArchivedRepositoryError="CommitToArchivedRepositoryError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(oe||(oe={}));class nt extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new nt("Failed to create and push commit",oe.CommitFailedError)}static DetachedHEADError(e){return new nt(e,oe.DetachedHEADError)}static CommitToProtectedBranchError(e){return new nt(e,oe.CommitToProtectedBranchError)}static CommitToArchivedRepositoryError(e){return new nt(e,oe.CommitToArchivedRepositoryError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new nt(r,oe.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new nt(e,oe.InvalidCredentialsError,n)}static MergeConflictError(e){return new nt(e,oe.MergeConflictError)}static NothingToCommitError(e){return new nt(e,oe.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new nt(n,oe.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new nt(e,oe.SyncConflictsError)}static UnresolvedConflictsError(){return new nt("You have unresolved merge conflicts.",oe.UnresolvedConflictsError)}static InvalidRepositoryError(){return new nt("The current repository is invalid",oe.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:oe.Unknown}}o(nt,"VirtualProviderError");const ft=6;var ht;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(ht||(ht={}));var L;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(L||(L={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}o(e,"sanitize"),t.sanitize=e}(L||(L={}));var H;(function(t){t.Browse="browse",t.Edit="edit"})(H||(H={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}o(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}o(n,"toggle"),t.toggle=n}(H||(H={}));var te;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}o(e,"equals"),t.equals=e})(te||(te={}));var ge;(function(t){const e=new Map([[he.Branch,L.None],[he.RemoteBranch,L.None],[he.PullRequestBranch,L.Match],[he.PullRequestRemoteBranch,L.Match],[he.Commit,L.Match],[he.Tag,L.Match]]),n=new Map([[he.Branch,H.Edit],[he.RemoteBranch,H.Edit],[he.PullRequestBranch,H.Browse],[he.PullRequestRemoteBranch,H.Browse],[he.Commit,H.Browse],[he.Tag,H.Browse]]);function r(a){var s,c;return{display:(s=n.get(a))!=null?s:H.Edit,index:(c=e.get(a))!=null?c:L.None}}o(r,"getDefault"),t.getDefault=r;function i(a){switch(a){case he.Branch:case he.RemoteBranch:return{display:H.Browse,index:L.Latest};case he.PullRequestBranch:case he.PullRequestRemoteBranch:return{display:H.Browse,index:L.Match};case he.Commit:case he.Tag:return{display:H.Browse,index:L.Match};default:return{display:H.Edit,index:L.None}}}o(i,"getIndexDefault"),t.getIndexDefault=i})(ge||(ge={}));const $e=null;var ke=cr(5179),de=cr.n(ke);const Ce="modes",Me="indexMemento";class Xe{constructor(){this._onDidChange=new l.EventEmitter,this._onDidChangeAny=new l.EventEmitter,this.memoryState=new Map}static configure(e,n){be.configPrefix=e,be.state=n.workspaceState,n.subscriptions.push(l.workspace.onDidChangeConfiguration(be.onConfigurationChanged,be))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(Ce),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(Ce,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(Me),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}getEffective(e,n,r){const i=this.inspect(e,n);return i===void 0&&r!==void 0?r:(i==null?void 0:i.workspaceFolderValue)!==void 0?i.workspaceFolderValue:(i==null?void 0:i.workspaceValue)!==void 0?i.workspaceValue:i==null?void 0:i.globalValue}get(e,n,r){return r===void 0?l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const a=e.toString();let s=this.modes!==void 0?this.modes[a]:void 0;if(s!==void 0)return{display:H.sanitize(s.display),index:L.sanitize(s.index)};if(s=this.memoryState.get(a),s!==void 0)return s;if(n===he.Branch||n===he.RemoteBranch)switch((i=l.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:H.Edit,index:L.None};case"latest":return{display:H.Browse,index:L.Latest};case"tipPlusLatest":return{display:H.Edit,index:L.TipPlusLatest}}if(!r)return ge.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(Ce,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(Me,this.indexMemento))}getAny(e,n,r){return r===void 0?l.workspace.getConfiguration(void 0,n).get(e):l.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return l.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return l.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=be.inspect(e);if(i===void 0)return!1;let a=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),a=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),a=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),a=!0),!a&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,l.ConfigurationTarget.Global),a=!0),a}async migrateIfMissing(e,n,r){const i=be.inspect(e);if(i===void 0)return;const a=be.inspect(n);i.globalValue!==void 0&&(a===void 0||a.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,l.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(a===void 0||a.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,l.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(a===void 0||a.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return l.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return l.workspace.getConfiguration(void 0,r===l.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=be.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):be.update(e,n,l.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):be.update(e,n,l.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):be.update(e,de()(n,r.defaultValue)?void 0:n,l.ConfigurationTarget.Global)}}o(Xe,"Configuration");const be=new Xe,xe="";var q;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(q||(q={}));const Re="[RemoteHub]",re=o(class{static configure(t,e){this._isDebugging=t.extensionMode===l.ExtensionMode.Development,this.outputChannelName=e}static enabled(t){return this.level>=this.toOrderedLevel(t)}static toOrderedLevel(t){switch(t){case l.LogLevel.Off:return 0;case l.LogLevel.Error:return 1;case l.LogLevel.Warning:return 2;case l.LogLevel.Info:return 3;case l.LogLevel.Debug:case l.LogLevel.Trace:return 4}}static get isDebugging(){return this._isDebugging}static ensureOutputChannel(){var t;this.level=this.toOrderedLevel(l.env.logLevel),this.output=(t=this.output)!=null?t:l.window.createOutputChannel(this.outputChannelName,{log:!0})}static debug(t,...e){var n;this.ensureOutputChannel(),re.isDebugging&&console.log(Re,t!=null?t:xe,...e),(n=this.output)==null||n.debug(`${t!=null?t:xe}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){var r;if(this.ensureOutputChannel(),!(this.level<1&&!re.isDebugging)){if(e===void 0){const i=t instanceof Error?t.stack:void 0;if(i){const a=/.*\s*?at\s(.+?)\s/.exec(i);a!==null&&(e=a[1])}}re.isDebugging&&console.error(Re,e!=null?e:xe,...n,t),(r=this.output)==null||r.error(`${e!=null?e:xe}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){var n;this.ensureOutputChannel(),re.isDebugging&&console.log(Re,t!=null?t:xe,...e),(n=this.output)==null||n.info(`${t!=null?t:xe}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){var n;this.ensureOutputChannel(),re.isDebugging&&console.warn(Re,t!=null?t:xe,...e),(n=this.output)==null||n.warn(`${t!=null?t:xe}${this.toLoggableParams(!1,e)}`)}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof l.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:xe}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:xe;const a=i.indexOf("_");return a===-1?i:i.substr(a+1)}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!re.isDebugging)return xe;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:xe}},"_Logger");let J=re;J.level=0;const qe=new TextDecoder,Lt=new TextEncoder;async function Gt(t){const e=typeof t=="string"?Lt.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new vr;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(qe.decode(n)))}o(Gt,"sha1");async function Ln(t){const e=await globalThis.crypto.subtle.digest({name:"sha-256"},t);return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")}o(Ln,"sha256");var wn;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(wn||(wn={}));function jn(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}o(jn,"leftRotate");function Qn(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}o(Qn,"fill");const $n=o(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const a=Math.min(64-n,i-r);for(let s=0;s<a;s++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,Qn(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Qn(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=$n._bigBlock32,e=this._buffDV;for(let f=0;f<64;f+=4)t.setUint32(f,e.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)t.setUint32(f,jn(t.getUint32(f-12,!1)^t.getUint32(f-32,!1)^t.getUint32(f-56,!1)^t.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,a=this._h3,s=this._h4,c,u,d;for(let f=0;f<80;f++)f<20?(c=r&i|~r&a,u=1518500249):f<40?(c=r^i^a,u=1859775393):f<60?(c=r&i|r&a|i&a,u=2400959708):(c=r^i^a,u=3395469782),d=jn(n,5)+c+s+u+t.getUint32(f*4,!1)&4294967295,s=a,a=i,i=jn(r,30),r=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+s&4294967295}},"_SHA1Computer");let vr=$n;vr._bigBlock32=new DataView(new ArrayBuffer(320));function Ir(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}o(Ir,"indexOfDifference");function Lr(t){return t.replace(/[\\{}*+?|^$.[\]()]/g,"\\$&")}o(Lr,"escapeRegExpCharacters");let ct;var $t;(function(t){function e(n){const r=en(n);return ct=l.env.uiKind===l.UIKind.Web,J.warn(`Running on the ${ct?"web":"desktop"}${n.extensionRuntime!==l.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}o(e,"configure"),t.configure=e})($t||($t={}));const nn=/\/workspaceStorage\/(?<id>[^/]+)/i;function en(t){var e;if(t.storageUri===void 0)return"";const n=nn.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=Ir(t.globalStorageUri.path,r),a=`/${t.extension.id}`;r.endsWith(a)?r=r.slice(i,-a.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}o(en,"getWorkspaceId");var an;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.ActiveResourceHasChanges="remoteHub:activeResourceHasChanges",t.OpenDiffOnClick="remoteHub:openDiffOnClick",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(an||(an={}));const Rn=new Map;function ar(t){return t==="isWeb"?isWeb:t==="remoteName"?env.remoteName:t==="virtualWorkspace"?VirtualProviderUtils.isVirtualWorkspace():t.startsWith("config.")?configuration.getAny(t.substring(7)):Rn.get(t)}o(ar,"getContext");function pr(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}o(pr,"isSupportedContextKey");async function Kn(t,e){Rn.set(t,e),!t.startsWith("continueOn:")&&await l.commands.executeCommand("setContext",t,e)}o(Kn,"setContext");const mr=o(async(t,e,n)=>{const r=await Promise.resolve().then(cr.bind(cr,850)),i=await Promise.resolve().then(cr.bind(cr,5229)),a=new r.AppInsightsCore,s=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){c.extensionConfig={};const f={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[s.identifier]=f}const d=e.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(c,[]),a.addTelemetryInitializer(f=>{var h,p;!d||(f.ext=(h=f.ext)!=null?h:{},f.ext.utc=(p=f.ext.utc)!=null?p:{},f.ext.utc.flags=8462029)}),a},"getAICore"),Br=o(async(t,e,n)=>{const r=await mr(t,e,n);return{logEvent:(a,s)=>{try{r==null||r.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{r==null||r.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}},"oneDataSystemClientFactory");var xn;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(xn||(xn={}));class Xn{constructor(e,n){this._instantiationStatus=xn.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==xn.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==xn.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===xn.NOT_INSTANTIATED&&(this._instantiationStatus=xn.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=xn.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=xn.INSTANTIATED}))}}o(Xn,"BaseTelemetrySender");class Ar{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,i){i?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}internalSendTelemetryException(e,n,r,i){i?this.telemetrySender.sendErrorData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryException(e,n,r){this.internalSendTelemetryException(e,n,r,!1)}sendDangerousTelemetryException(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryException(e,n,r,!0)}dispose(){return this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}}o(Ar,"BaseTelemetryReporter");class Sn{static applyReplacements(e,n){for(const r of Object.keys(e))for(const i of n)i.lookup.test(r)&&(i.replacementString!==void 0?e[r]=i.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.7.7"}}static getInstance(){return Sn._instance||(Sn._instance=new Sn),Sn._instance}}o(Sn,"TelemetryUtil");const Yr=o(async(t,e)=>{let n;try{const i=await Promise.resolve().then(cr.bind(cr,3268));n=new i.ApplicationInsights({instrumentationKey:t,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0})}catch(i){return Promise.reject(i)}return{logEvent:(i,a)=>{const s={...a==null?void 0:a.properties,...a==null?void 0:a.measurements};(e==null?void 0:e.length)&&Sn.applyReplacements(s,e),n==null||n.track({name:i,data:s})},flush:async()=>{n==null||n.flush()}}},"webAppInsightsClientFactory");function Tr(t){if(t.userAgentData){const e=t.userAgentData.brands[t.userAgentData.brands.length-1];return`${t.userAgentData.platform} - ${e==null?void 0:e.brand} v${e==null?void 0:e.version}}`}else return t.appVersion}o(Tr,"getBrowserRelease");class Hr extends Ar{constructor(e,n){let r=o(s=>Yr(s,n),"clientFactory");Sn.shouldUseOneDataSystemSDK(e)&&(r=o(s=>Br(s,l),"clientFactory"));const i={release:Tr(navigator),platform:"web",architecture:"web"},a=new Xn(e,r);if(e&&e.indexOf("AIF")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(a,l,{additionalCommonProperties:Sn.getAdditionalCommonProperties(i)})}}o(Hr,"TelemetryReporter");const Ci="Type of classified event does not match event properties",di=o(class{constructor(t){this.context=t,this.sharedProperties={},di._instance=this,this.reporter=new Hr(di.ingestionKey)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==Ci&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";l.env.appHost==="github.dev"&&(J.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},l.commands.executeCommand(e,t).then(n=>{},n=>{J.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let ur=di;ur.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function T(t,e){const n=l.l10n.t("Report Issue"),r=l.l10n.t("Reload");l.window.showErrorMessage(l.l10n.t("The {0} extension failed to activate.",t.extension.packageJSON.displayName),{modal:!0,detail:l.l10n.t("Please try reloading the window, or report an issue.")},r,n).then(i=>{i===n?l.commands.executeCommand("workbench.action.openIssueReporter",{extensionId:t.extension.id,issueTitle:"Extension activation failed",issueBody:e instanceof Error?e.toString():void 0}):i===r&&l.commands.executeCommand("workbench.action.reloadWindow")})}o(T,"handleExtensionActivationError");function ce(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}o(ce,"hrtime");let Ee=0;function Oe(){return Ee===Number.MAX_SAFE_INTEGER&&(Ee=0),++Ee}o(Oe,"getNextInstanceId");const et=o(class{constructor(t,e,...n){this.context=t,this.instance=`[${Oe().toString().padStart(5)}] `;var r,i,a,s,c,u;let d;if(typeof(e==null?void 0:e.log)=="boolean"?d=e.log?{}:void 0:d=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:l.LogLevel.Info,this.time=ce(),d){if(!J.enabled(this.logLevel))return;n.length?lt(this.logLevel,`${this.instance}${(a=d.prefix)!=null?a:""}${t}${(s=d.message)!=null?s:""}`,...n):lt(this.logLevel,`${this.instance}${(c=d.prefix)!=null?c:""}${t}${(u=d.message)!=null?u:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:ce(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=ce()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,a,s,c,u,d;if(!J.enabled(this.logLevel))return;let f="";if(this.step){const[Q,A]=ce(this.step.time),Y=Q*1e3+Math.floor(A/1e6);f=`${this.step.label?`${this.step.label} took `:""}${Y} ms`}if(!n){lt(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${f?` ${f}`:""}${(a=e==null?void 0:e.suffix)!=null?a:""}`);return}const[h,p]=ce(this.time),C=h*1e3+Math.floor(p/1e6);lt(C>500?l.LogLevel.Warning:this.logLevel,`${this.instance}${(s=e==null?void 0:e.prefix)!=null?s:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(u=e==null?void 0:e.took)!=null?u:" took "}${C} ms${f?` (${f})`:""}${(d=e==null?void 0:e.suffix)!=null?d:""}`)}static start(t,e,...n){var r;(r=et.watches.get(t))==null||r.log(),et.watches.set(t,new et(t,e,...n))}static log(t,e){var n;(n=et.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=et.watches.get(t))==null||n.stop(e),et.watches.delete(t)}},"_Stopwatch");let Ue=et;Ue.watches=new Map;function lt(t,e,...n){switch(t){case l.LogLevel.Warning:J.warn(e,...n);break;case l.LogLevel.Info:J.log(e,...n);break;default:J.debug(e,...n);break}}o(lt,"log");class _t{constructor(e){this.providerService=e}async provideCanonicalUri(e,n){var r,i;if(n.targetScheme==="https")switch(e.scheme){case x.scheme:{const a=this.providerService.getRepository(e);if(!a)return;const s=await this.providerService.getRepositoryContext(a,"http");return s.uri?l.Uri.parse(s.uri.endsWith(".git")?s.uri.slice(0,-4):s.uri):void 0}default:return(i=(r=this.providerService).getHttpsCloneUri)==null?void 0:i.call(r,e)}}}o(_t,"CanonicalUriProvider"),_t.SupportedSchemes=["https","ssh",x.scheme];class Rt{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=l.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),be.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(a=>{J.error(a)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=_(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const a=i();this.services.set(n,{service:a});break}}}}repositoryClosed(e){const n=_(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(_(e.uri)))}}o(Rt,"CodeNavigationServices");const cn=globalThis.fetch;async function St(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new l.CancellationError:i}}o(St,"fetchWithCancellation");async function Jt(t,e,n,r,i){if(n===0)throw new CancellationError;const a=new CancellationTokenSource;r.onCancellationRequested(()=>a.cancel());try{const s=await St(t,e,a.token);if(s.body){const c=[];let u=0;const d=s.body.getReader();let f=3;for(;;){let{done:h,value:p}=await d.read();if(h){const Q=c.reduce((we,ie)=>we+ie.length,0),A=new Uint8Array(Q);let Y=0;for(const we of c)A.set(we,Y),Y+=we.length;return A}p&&(c.push(p),u+=p.length);const C=Math.floor(u/(1024*1024));if(f<C){f=C;const Q={message:C+" MB"};i.report(Q)}if(n!==void 0&&u>n)throw d.cancel(),a.cancel(),new Error("LIMIT_HIT")}}}catch(s){throw r.isCancellationRequested?new CancellationError:s}throw new CancellationError}o(Jt,"fetchUInt8ArrayWithMaxSizeAndCancellation");const Nt=globalThis.crypto;function Ot(){return Nt.randomUUID()}o(Ot,"uuid");/*! (c) Andrea Giammarchi - ISC */var Tt={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;Tt.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,a=e.defineProperty,s=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,u=/\+/g,d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},f={append:function(ie,De){Q(this._ungap,ie,De)},delete:function(ie){delete this._ungap[ie]},get:function(ie){return this.has(ie)?this._ungap[ie][0]:null},getAll:function(ie){return this.has(ie)?this._ungap[ie].slice(0):[]},has:function(ie){return ie in this._ungap},set:function(ie,De){this._ungap[ie]=[n(De)]},forEach:function(ie,De){var Ie=this;for(var Ke in Ie._ungap)Ie._ungap[Ke].forEach(Qe,Ke);function Qe(it){ie.call(De,it,n(Ke),Ie)}o(Qe,"invoke")},toJSON:function(){return{}},toString:function(){var ie=[];for(var De in this._ungap)for(var Ie=Y(De),Ke=0,Qe=this._ungap[De];Ke<Qe.length;Ke++)ie.push(Ie+"="+Y(Qe[Ke]));return ie.join("&")}};for(var h in f)a(p.prototype,h,{configurable:!0,writable:!0,value:f[h]});Tt.URLSearchParams=p;function p(ie){var De=i(null);switch(a(this,"_ungap",{value:De}),!0){case!ie:break;case typeof ie=="string":ie.charAt(0)==="?"&&(ie=ie.slice(1));for(var Ie=ie.split("&"),Ke=0,Qe=Ie.length;Ke<Qe;Ke++){var it=Ie[Ke],Ye=it.indexOf("=");-1<Ye?Q(De,A(it.slice(0,Ye)),A(it.slice(Ye+1))):it.length&&Q(De,A(it),"")}break;case r(ie):for(var Ke=0,Qe=ie.length;Ke<Qe;Ke++){var it=ie[Ke];Q(De,it[0],it[1])}break;case"forEach"in ie:ie.forEach(C,De);break;default:for(var Pt in ie)Q(De,Pt,ie[Pt])}}o(p,"URLSearchParams");function C(ie,De){Q(this,De,ie)}o(C,"addEach");function Q(ie,De,Ie){var Ke=r(Ie)?Ie.join(","):Ie;De in ie?ie[De].push(Ke):ie[De]=[Ke]}o(Q,"appendTo");function A(ie){return decodeURIComponent(ie.replace(c,"%25").replace(u," "))}o(A,"decode");function Y(ie){return encodeURIComponent(ie).replace(s,we)}o(Y,"encode");function we(ie){return d[ie]}o(we,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=o(function(i,a){var s=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(u){!u.length||u in c||(c[u]=s.getAll(u)).forEach(function(d){i.call(a,d,u,s)})})},"forEach")),"keys"in t||(t.keys=o(function(){return n(this,function(i,a){this.push(a)})},"keys")),"values"in t||(t.values=o(function(){return n(this,function(i,a){this.push(i)})},"values")),"entries"in t||(t.entries=o(function(){return n(this,function(i,a){this.push([a,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=o(function(){for(var i=this.entries(),a=i.next(),s=a.done,c=[],u=Object.create(null),d,f,h;!s;)h=a.value,f=h[0],c.push(f),f in u||(u[f]=[]),u[f].push(h[1]),a=i.next(),s=a.done;for(c.sort(),d=0;d<c.length;d++)this.delete(c[d]);for(d=0;d<c.length;d++)f=c[d],this.append(f,u[f].shift())},"sort"));function n(r,i){var a=[];return r.forEach(i,a),e?a[Symbol.iterator]():{next:function(){var s=a.shift();return{done:s===void 0,value:s}}}}o(n,"iterator"),function(r){var i=r.defineProperty,a=r.getOwnPropertyDescriptor,s=o(function(h){function p(A,Y){t.append.call(this,A,Y),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}o(p,"append");function C(A){t.delete.call(this,A),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}o(C,"del");function Q(A,Y){t.set.call(this,A,Y),A=this.toString(),h.set.call(this._usp,A?"?"+A:"")}return o(Q,"set"),function(A,Y){return A.append=p,A.delete=C,A.set=Q,i(A,"_usp",{configurable:!0,writable:!0,value:Y})}},"createSearchParamsPollute"),c=o(function(h){return function(p,C){return i(p,"_searchParams",{configurable:!0,writable:!0,value:h(C,p)}),C}},"createSearchParamsCreate"),u=o(function(h){var p=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=p},"updateSearchParams"),d=o(function(h,p){if(!(h instanceof p))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+p.name)},"verifySearchParams"),f=o(function(h){var p=h.prototype,C=a(p,"searchParams"),Q=a(p,"href"),A=a(p,"search"),Y;!C&&A&&A.set&&(Y=c(s(A)),r.defineProperties(p,{href:{get:function(){return Q.get.call(this)},set:function(we){var ie=this._searchParams;Q.set.call(this,we),ie&&u(ie)}},search:{get:function(){return A.get.call(this)},set:function(we){var ie=this._searchParams;A.set.call(this,we),ie&&u(ie)}},searchParams:{get:function(){return d(this,h),this._searchParams||Y(this,new URLSearchParams(this.search.slice(1)))},set:function(we){d(this,h),Y(this,we)}}}))},"upgradeClass");try{f(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&f(URL)}catch(h){}}(Object)})(Tt.URLSearchParams.prototype,Object);const Gn=Tt.URLSearchParams,Cn=60,dr=Cn*60,On=dr*24,fr=On*7,qr=On*30,Wr=On*365;function Zn(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return l.l10n.t("in {0}",Zn(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?l.l10n.t("secs ago"):l.l10n.t("A few seconds ago"):(e==null?void 0:e.short)?l.l10n.t("now"):l.l10n.t("Just now");let r;return n<Cn?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec ago",r):l.l10n.t("{0} second ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs ago",r):l.l10n.t("{0} seconds ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} sec",r):l.l10n.t("{0} second",r):(e==null?void 0:e.short)?l.l10n.t("{0} secs",r):l.l10n.t("{0} seconds",r)):n<dr?(r=Math.floor(n/Cn),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min ago",r):l.l10n.t("{0} minute ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins ago",r):l.l10n.t("{0} minutes ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} min",r):l.l10n.t("{0} minute",r):(e==null?void 0:e.short)?l.l10n.t("{0} mins",r):l.l10n.t("{0} minutes",r)):n<On?(r=Math.floor(n/dr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr ago",r):l.l10n.t("{0} hour ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs ago",r):l.l10n.t("{0} hours ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} hr",r):l.l10n.t("{0} hour",r):(e==null?void 0:e.short)?l.l10n.t("{0} hrs",r):l.l10n.t("{0} hours",r)):n<fr?(r=Math.floor(n/On),(e==null?void 0:e.ago)?r===1?l.l10n.t("{0} day ago",r):l.l10n.t("{0} days ago",r):r===1?l.l10n.t("{0} day",r):l.l10n.t("{0} days",r)):n<qr?(r=Math.floor(n/fr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk ago",r):l.l10n.t("{0} week ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks ago",r):l.l10n.t("{0} weeks ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} wk",r):l.l10n.t("{0} week",r):(e==null?void 0:e.short)?l.l10n.t("{0} wks",r):l.l10n.t("{0} weeks",r)):n<Wr?(r=Math.floor(n/qr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo ago",r):l.l10n.t("{0} month ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos ago",r):l.l10n.t("{0} months ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} mo",r):l.l10n.t("{0} month",r):(e==null?void 0:e.short)?l.l10n.t("{0} mos",r):l.l10n.t("{0} months",r)):(r=Math.floor(n/Wr),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr ago",r):l.l10n.t("{0} year ago",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs ago",r):l.l10n.t("{0} years ago",r):r===1?(e==null?void 0:e.short)?l.l10n.t("{0} yr",r):l.l10n.t("{0} year",r):(e==null?void 0:e.short)?l.l10n.t("{0} yrs",r):l.l10n.t("{0} years",r))}o(Zn,"fromNow");var kr,Dt;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Dt||(Dt={}));class zn{constructor(){this[kr]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=Dt.None){const r=this._map.get(e);if(!!r)return n!==Dt.None&&this.touch(r,n),r.value}set(e,n,r=Dt.None){let i=this._map.get(e);if(i)i.value=n,r!==Dt.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Dt.None:this.addItemLast(i);break;case Dt.First:this.addItemFirst(i);break;case Dt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(kr=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Dt.First&&n!==Dt.Last)){if(n===Dt.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Dt.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}o(zn,"LinkedMap");class bn extends zn{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Dt.AsNew){return super.get(e,n)}peek(e){return super.get(e,Dt.None)}set(e,n){return super.set(e,n,Dt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}o(bn,"LRUCache");class Tn{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}o(Tn,"TaskDebouncer");const Un=Symbol("QuickPickGoBack");var sr;(function(t){async function e(n,r,i,a,s){const c=[],u=n.getRemoteWorkspaceSourceProviders();c.push(...u.map(C=>new Sr(C)));const d=await n.getRecentWorkspaceSourceProviders();if(d){const C=await d.provideSources();if(C){const Q=C.reduce((A,Y)=>("providerId"in Y&&A.push({label:`${Y.icon?`${Y.icon} `:""}${Y.name}`,description:Y.description,detail:Y.detail,url:Y.url,workspace:Y.url?void 0:Y.workspace,buttons:[Dr.OpenInNewWindow],showMore:void 0}),A),[]);c.push({label:l.l10n.t("recently opened"),kind:l.QuickPickItemKind.Separator},...Q)}}const f=l.window.createQuickPick(),h=[];let p=r;try{for(;;){const C=await new Promise(Q=>{h.push(f.onDidHide(()=>Q(void 0)),f.onDidChangeValue(A=>{if(A=A.trim(),A.length===0)f.items=c.map(Y=>(Y.kind===l.QuickPickItemKind.Separator||(Y.alwaysShow=!1),Y));else{const Y=new xr(n,A);if(Y.validate())f.items=[Y];else{let ie=!1;for(const De of c)if(De.label.includes(A)){ie=!0;break}ie?f.items=c:f.items=[...c.map(De=>(De.alwaysShow=!0,De))]}}}),f.onDidAccept(()=>{if(f.activeItems.length!==0){const[A]=f.activeItems;(!(A instanceof xr)||A.validate())&&Q(A)}}),f.onDidChangeActive(()=>{if(p!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[A]=f.activeItems;let Y=!0;if(A===void 0?Y=Boolean(f.value):Y=A instanceof xr,Y){if(f.buttons.length===1)return;f.buttons=[Dr.AddToWorkspace]}else{if(f.buttons.length===0)return;f.buttons=[]}}),f.onDidTriggerButton(A=>{if(A===Dr.AddToWorkspace){const[Y]=f.activeItems;if(!(Y instanceof xr))return;Y.validate()&&(p=He.AddToWorkspace,Q(Y))}}),f.onDidTriggerItemButton(A=>{switch(A.button){case Dr.OpenInNewWindow:p=He.NewWindow,Q(A.item);break;default:break}})),f.title=a,f.placeholder=i,f.matchOnDescription=!0,f.items=c,f.sortByLabel=!1,f.show()});if(C instanceof Sr){const Q=await C.show(p,C.placeholder,a,s);if(Q===Un)continue;const[A,Y]=Q;if(A&&"showMore"in A&&A.showMore!==void 0)continue;return[A,Y]}if(!(C&&"showMore"in C&&C.showMore!==void 0))return[C,p]}}finally{f.dispose(),h.forEach(C=>void C.dispose())}}o(e,"show"),t.show=e})(sr||(sr={}));class Sr{constructor(e){this.provider=e,this.alwaysShow=!1,this.kind=l.QuickPickItemKind.Default}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.label}`}get placeholder(){return this.provider.placeholder}async show(e,n,r,i){const a=l.window.createQuickPick(),s=new Tn(500),c=[s];async function u(Y,we,ie,De,Ie){const Ke=await Y.provideSources(we,ie,De,Ie);return Ke==null?void 0:Ke.map(Qe=>"showMore"in Qe?{label:Qe.label,showMore:Qe.showMore}:"kind"in Qe?Qe:{label:`${Qe.icon?`${Qe.icon} `:""}${Qe.name}`,description:Qe.description,detail:Qe.detail,url:Qe.url,workspace:Qe.workspace,buttons:[Dr.OpenInNewWindow]})}o(u,"getItems");async function d(Y){var we;C=void 0;const ie=a.activeItems;a.items=(we=Y!=null?Y:await A)!=null?we:[];const De=a.items.find(Ie=>Ie.url===a.value);De?a.items=[{...De,alwaysShow:!0},...a.items]:p&&ie.length!==0&&(a.activeItems=a.items.filter(Ie=>ie.some(Ke=>Ke.url===Ie.url))),a.busy=!1}o(d,"setItems");let f,h;if(this.provider.provideOrganization&&this.provider.provideProject){if(f=await this.provider.provideOrganization(),!f)return[void 0,void 0];if(h=await this.provider.provideProject(f),!h)return[void 0,void 0]}let p=!1,C,Q=e,A=u(this.provider,f,h,void 0,{sort:"updated"});try{const Y=await new Promise(we=>{c.push(a.onDidHide(()=>we(void 0)),a.onDidChangeValue(ie=>{p=!1,ie=ie.trim(),a.busy=!0;const De=s.debounce(ie?()=>u(this.provider,f,h,ie,{sort:"stars"}):()=>A);C===void 0&&(C=De.then(Ie=>d(Ie)))}),a.onDidAccept(async()=>{var ie;if(a.activeItems.length!==0){const[De]=a.activeItems;if("showMore"in De){await((ie=De.showMore)==null?void 0:ie.call(De)),A=u(this.provider,f,h,void 0,{sort:"updated"}),await d(await A);return}we(De)}}),a.onDidChangeActive(()=>{if(p=a.activeItems.length!==0,Q!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[ie]=a.activeItems;if(ie===void 0){if(a.buttons.length===1)return;a.buttons=[l.QuickInputButtons.Back]}else{if(a.buttons.length===2)return;a.buttons=[l.QuickInputButtons.Back,Dr.AddToWorkspace]}}),a.onDidTriggerButton(ie=>{if(ie===l.QuickInputButtons.Back){we(Un);return}if(ie===Dr.AddToWorkspace){const[De]=a.activeItems;if(De===void 0)return;Q=He.AddToWorkspace,we(De)}}),a.onDidTriggerItemButton(ie=>{switch(ie.button){case Dr.OpenInNewWindow:Q=He.NewWindow,we(ie.item);break;default:break}})),a.title=r,a.placeholder=n,a.matchOnDetail=!0,a.sortByLabel=!1,a.buttons=[l.QuickInputButtons.Back],a.busy=!0,a.show(),C=s.debounce(()=>A,100).then(ie=>d(ie))});return Y===Un?Y:[Y,Q]}finally{a.dispose(),c.forEach(Y=>void Y.dispose())}}}o(Sr,"RemoteSourceProviderPickerItem");class xr{constructor(e,n){this.url=n,this.alwaysShow=!0,this.canOpenResult=e.canOpenRemoteUrl(n)}get buttons(){return[Dr.OpenInNewWindow]}get label(){if(this.canOpenResult){const{provider:e,urlType:n}=this.canOpenResult;switch(n){case G.Branch:return l.l10n.t("Open Branch from {0} Repository",e.name);case G.Tag:return l.l10n.t("Open Tag from {0} Repository",e.name);case G.Commit:return l.l10n.t("Open Commit from {0} Repository",e.name);case G.File:return l.l10n.t("Open File from {0} Repository",e.name);case G.PullRequest:return l.l10n.t("Open Pull Request from {0} Repository",e.name);default:return l.l10n.t("Open {0} Repository",e.name)}}return l.l10n.t("Enter a Remote Url")}get description(){return this.url}validate(){return this.canOpenResult!==void 0}}o(xr,"RemoteUrlQuickPickItem");var Dr;(function(t){t.AddToWorkspace={iconPath:new l.ThemeIcon("plus"),tooltip:l.l10n.t("Add to Workspace")},t.OpenInNewWindow={iconPath:new l.ThemeIcon("empty-window"),tooltip:l.l10n.t("Open in New Window")}})(Dr||(Dr={}));function Zi(t,e){return t.reduce((r,i)=>{const a=e(i),s=r.get(a);return s===void 0?r.set(a,[i]):s.push(i),r},new Map)}o(Zi,"groupBy");function Ii(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}o(Ii,"isBinary");function sa(t,e,n=r=>r){return[...t.reduce((i,a)=>{const s=e(a),c=i.get(s);if(c===void 0)i.set(s,a);else{const u=n(c,a);u!==void 0&&i.set(s,u)}return i},new Map).values()]}o(sa,"uniqueBy");function Li(t,e){switch(t){case K.Branch:case K.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case K.Tag:return"$(tag)";case K.Commit:return"$(git-commit)"}}o(Li,"headTypeToCodicon");function Ki(t){switch(t){case ne.Active:return"$(layers-active)";case ne.Match:return"$(layers-dot)";case ne.Indexed:return"$(layers)"}}o(Ki,"indexTypeToCodicon");function ea(t,e){switch(t){case K.Branch:case K.RemoteBranch:return e?new l.ThemeIcon("git-pull-request"):new l.ThemeIcon("git-branch");case K.Tag:return new l.ThemeIcon("tag");case K.Commit:return new l.ThemeIcon("git-commit")}}o(ea,"headTypeToThemeIcon");function*Gi(t,e){for(const n of t)yield*e(n)}o(Gi,"flatMap");function*ta(t,e){for(const n of t)e(n)&&(yield n)}o(ta,"filter");function*fi(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}o(fi,"filterMap");function Qr(t,e){for(const n of t)if(e(n))return n}o(Qr,"find");function hi(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const a=i.value.toString();if(i=r.next(),i.done){n+=a;break}n+=a,n+=e}return n}o(hi,"join");function*Ni(t,e){for(const n of t)yield e(n)}o(Ni,"map");function ga(t,e){for(const n of t)if(e(n))return!0;return!1}o(ga,"some");function*ri(...t){for(const e of t)for(const n of e)yield n}o(ri,"union");function*zi(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}o(zi,"unique");const Fe="";function tt(...t){if(t.length===1){const e=t[0];return e===void 0?Fe:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(tt,"defaultResolver");function vt(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$serialize$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:tt)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];const d=o(()=>i.apply(this,s),"run");return u===void 0?u=d():u=u.then(d,d),this[c]=u,u}}}o(vt,"serialize");let rt=0;function Ut(){return rt===Number.MAX_SAFE_INTEGER&&(rt=0),String(++rt)}o(Ut,"getNextLockId");class jt{constructor(){this.id=Ut()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}o(jt,"Lock");class pt{constructor(e){this.lock=new jt,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new Ue(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:l.LogLevel.Debug});let a;await this.lock.synchronize(async()=>{this.writer&&await this.writer,a=new Promise(s=>r=s),this.readers.add(a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),a!==void 0&&this.readers.delete(a),r()}}async synchronizeWrite(e,n){let r;const i=new Ue(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:l.LogLevel.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const a=[...this.readers];this.readers.clear(),await Promise.all(a)}this.writer=new Promise(a=>r=a)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}o(pt,"ReaderWriterLock");class rn{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new pt(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new pt(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}o(rn,"KeyedReaderWriterLock");const Bt=o(class{constructor(t,e,n,r,i){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this.context=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new pt("WorkspaceRepositories"),this.disposable=l.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this),be.onDidChange(this.onConfigurationChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await l.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void l.window.showTextDocument(t)}onConfigurationChanged(t){if(!be.changed(t,"experimental.syncRecentList"))return;const e=be.get("experimental.syncRecentList")===!0?[Bt.storageKey]:[];this.context.globalState.setKeysForSync(e)}onChangeStoreChanged(t){const e=sa(t.map(n=>n.rootUri),n=>_(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=_(t);e=e.filter(r=>_(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Bt.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${_(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),a=await i.getChanges(r.uri);if(a.length!==0){const s={title:l.l10n.t("Yes")},c={title:l.l10n.t("No"),isCloseAffordance:!0};if(await l.window.showWarningMessage(a.length===1?l.l10n.t(`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):l.l10n.t(`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,a.length),{modal:!0},s,c)!==s)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Bt.storageKey,this.toStorage(e))}catch(s){throw J.error(s,"Failed to save workspace repositories"),s}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},a]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),s=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${_(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(a==null?void 0:a.type)&&ne.hasIndex(a.type)?{type:a.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:Jn(s),timestamp:Date.now()})}try{await this.storageService.store(Bt.storageKey,this.toStorage(e))}catch(n){throw J.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&k(r)?l.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return J.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Bt.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let mn=Bt;mn.storageKey="workspaceRepositories",mn.storageSchemaVersion=1;function _n(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}o(_n,"hasChanges");function tr(t){return _n(t.changes)}o(tr,"hasUncommittedChanges");function Jn(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case D.Created:e++;break;case D.Changed:n++;break;case D.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}o(Jn,"toChangesSummary");function hr(t,e,{compact:n=!0,preamble:r,separator:i=", ",short:a=!1,single:s=!1}={}){if(!_n(e))return t===K.Branch||t===K.RemoteBranch?l.l10n.t("Everything up to date"):l.l10n.t("No uncommitted changes");const{added:c,changed:u,deleted:d}=e;if(s){const h=c+u+d;return h===1?l.l10n.t("{0} change",h):l.l10n.t("{0} changes",h)}let f=`${r!=null?r:""}`;return(c||!n)&&(f+=a?`+${c}`:c===1?l.l10n.t("{0} file added",c):l.l10n.t("{0} files added",c),(u||d||!n)&&(f+=i)),(u||!n)&&(f+=a?`~${u}`:u===1?l.l10n.t("{0} file changed",u):l.l10n.t("{0} files changed",u),(d||!n)&&(f+=i)),(d||!n)&&(f+=a?`-${d}`:d===1?l.l10n.t("{0} file deleted",d):l.l10n.t("{0} files deleted",d)),f}o(hr,"formatChangesSummary");class fn extends Error{constructor(e){var n;const r=typeof e=="string"?e:Bn.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,fn)}}o(fn,"ProviderNotFoundError");class Yt{constructor(e,n,r,i,a){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:a.id,name:a.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}o(Yt,"VirtualRepository");var Vt;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(Vt||(Vt={}));var kt;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(kt||(kt={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}o(e,"hasIndex"),t.hasIndex=e}(kt||(kt={}));var hn;(function(t){function e(n){return n!==void 0&&n.type===3}o(e,"isActive"),t.isActive=e})(hn||(hn={}));var M;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(M||(M={}));var ee;(function(t){function e(n){const r=x.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(N(r.idx))return{type:2,sha:r.idx}}}o(e,"decode"),t.decode=e})(ee||(ee={}));function ze(t){return t!==void 0&&typeof t.then=="function"}o(ze,"isPromise");const ot="";function Ht(...t){if(t.length===1){const e=t[0];return e===void 0?ot:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof l.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}o(Ht,"gate_defaultResolver");function At(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const a=`$gate$${n}`;r.value=function(...s){const c=s.length===0?a:`${a}$${(t!=null?t:Ht)(...s)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let u=this[c];if(u===void 0){let d;try{if(d=i.apply(this,s),d==null||!ze(d))return d;this[c]=u=d.then(f=>(this[c]=void 0,f)).catch(f=>{throw this[c]=void 0,f})}catch(f){throw this[c]=void 0,f}}return u}}}o(At,"gate");var gn=Object.defineProperty,vn=Object.getOwnPropertyDescriptor,qt=o((t,e,n,r)=>{for(var i=r>1?void 0:r?vn(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&gn(e,n,i),i},"__decorateClass");class un{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=l.l10n.t("Open Repository");await l.window.showErrorMessage(l.l10n.t("The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&l.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return l.window.showErrorMessage(l.l10n.t("GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),l.l10n.t("OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate");await l.window.showErrorMessage(l.l10n.t("The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void l.window.showErrorMessage(l.l10n.t("The provided credentials do not have the required access."),l.l10n.t("OK"));const n=l.l10n.t("Reauthenticate"),r=l.l10n.t("The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await l.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=pn.get(e.id);if(n&&l.extensions.getExtension(n[0])===void 0){const r=l.l10n.t("Install");if(await l.window.showInformationMessage(l.l10n.t("Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await l.commands.executeCommand("workbench.extensions.installExtension",n[0]),await l.commands.executeCommand("workbench.action.reloadWindow")}}}o(un,"Messages"),qt([At(()=>"")],un.prototype,"showRepositoryNotValidMessage",1),qt([At(()=>"")],un.prototype,"showGitHubStatus500Message",1),qt([At(()=>"")],un.prototype,"showStatus401Message",1),qt([At(()=>"")],un.prototype,"showStatus403Message",1),qt([At()],un.prototype,"showProviderNotFoundMessage",1);const pn=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),Kt=new un;async function ut(t,e,n){var r,i,a,s,c;if(ur.instance.publicLog2("openWorkspace",{location:e.location}),e.location===He.AddToWorkspace){const d=(i=(r=l.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void l.workspace.updateWorkspaceFolders(d,0,{uri:e.uri,name:e.name})}if(e.location===He.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const d=await t.getWorkspaceProvidersWithChanges();if(d.length){const f={title:l.l10n.t("Continue")},h={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(ct?l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(C=>C.name).join(", ")):l.l10n.t(`You have uncommitted changes which you can pick up anytime by reopening this workspace.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace.

Do you want to continue opening a new workspace?`,d.map(C=>C.name).join(", ")),{modal:!0},f,h)!==f){ur.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const u=l.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===He.CurrentWindow&&u===void 0&&((a=l.workspace.workspaceFolders)==null?void 0:a.length)===1&&l.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((s=bo())==null?void 0:s.openPendingFiles(e.uri,e.filesToOpen)):await((c=bo())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),ur.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(u)}),void l.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===He.NewWindow,forceLocalWindow:u})}o(ut,"openWorkspace");var kn=cr(6724),Pn=Object.defineProperty,Fn=Object.getOwnPropertyDescriptor,nr=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Fn(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&Pn(e,n,i),i},"providers_decorateClass");const It=o(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new l.EventEmitter,this._onDidChangeChangeStore=new l.EventEmitter,this._onDidChangeWorkspaceRepositories=new l.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new l.EventEmitter,this._onDidChangeRepository=new l.EventEmitter,this._onDidSyncRepository=new l.EventEmitter,this._onDidRefresh=new l.EventEmitter,this._onWillRefresh=new l.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=l.Disposable.from(l.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this),l.workspace.onDidSaveTextDocument(this.onDocumentChanged,this),l.workspace.onDidSaveNotebookDocument(this.onDocumentChanged,this),l.window.onDidChangeActiveNotebookEditor(this.onDocumentChanged,this),l.window.onDidChangeActiveTextEditor(this.onDocumentChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(_(t.uri));!e||(J.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}addRepository(t){const e=_(t.uri);if(t.uri.scheme!==It.scheme||this._repositories.has(e))return;const n=this.getProvider(t.uri);if(!n)return;this._repositories.set(e,null);const{repo:r,name:i}=this.getVirtualUriMetadata(t.uri),a=new Yt(this,t.uri,r,i,n);this._repositories.set(e,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:n.id,repositories:this._repositories.size.toString()})}onDocumentChanged(t){var e,n;let r;t&&"uri"in t?r=t.uri:t&&"document"in t&&((e=l.window.activeTextEditor)==null?void 0:e.document.uri.toString())===t.document.uri.toString()?r=t.document.uri:t&&"notebook"in t&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.toString())===t.notebook.uri.toString()&&(r=t.notebook.uri);const i=r&&r.scheme===x.scheme?this.getVirtualRootUri(r):void 0;i&&this.changeStoreMaybeHasChanges(i,r)?Kn(an.ActiveResourceHasChanges,!0):Kn(an.ActiveResourceHasChanges,!1)}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added)this.addRepository(e);if(t.removed.length)for(const e of t.removed){const n=_(e.uri);if(e.uri.scheme!==It.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}Kn(an.HasVirtualFolders,this._repositories.size!==0),Kn(an.VirtualFolderProviders,hi(zi(Ni(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...Ni(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,a,s,c){var u;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const d={id:t,name:e,provider:n,fs:r,storage:i,changeStore:a,metadataStore:s,workspaceRepositories:c};this._providers.set(t,d);const f=l.Disposable.from(d.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),d.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),d.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();Kn(an.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[d],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(u=l.workspace.workspaceFolders)!=null?u:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[p,C]of[...this._repositories])(C==null?void 0:C.provider.id)===t&&(this._repositories.delete(p),h.push(C));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[d]}),f.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...Ni(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){var n;const r=l.workspace.getWorkspaceFolder(t);if(!r||r.uri.scheme!==It.scheme)return;const i=(n=this._repositories.get(_(r.uri)))!=null?n:this.addRepository(r);if(!(e!==void 0&&(i==null?void 0:i.provider.id)!==e))return i!=null?i:void 0}getRepositories(t){return ta(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:It.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:It.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new fn(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new fn(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new fn(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new fn(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new fn(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new fn(t)}async getRecentWorkspaceSourceProviders(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:l.l10n.t("Choose a recent repository"),provideSources:function(e,n,r,i){return t.sort((a,s)=>s.timestamp-a.timestamp).map(a=>({providerId:a.provider.id,name:a.name,icon:"$(repo)",description:Zn(a.timestamp,{ago:!0}),detail:`${a.provider.name}${a.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${a.pullRequest.id}`:""}${x.isCanonicalUri(a.uri)?"":`\xA0\xA0\u2022\xA0\xA0${Li(a.ref.type)} ${a.ref.name}`}\xA0\xA0\u2022\xA0\xA0${hr(a.ref.type,a.changes)}${a.idx?`\xA0\xA0\u2022\xA0\xA0${Ki(a.idx.type)}`:""}`,workspace:{uri:a.uri,name:a.name,location:He.CurrentWindow}}))}}}getRemoteWorkspaceSourceProviders(t){var e,n,r,i,a,s,c;if(t)return(i=(r=(e=this.getProvider(t))==null?void 0:(n=e.provider).getRemoteWorkspaceSourceProviders)==null?void 0:r.call(n))!=null?i:[];const u=new Map;for(const d of this._providers.values()){const f=(c=(s=(a=d.provider).getRemoteWorkspaceSourceProviders)==null?void 0:s.call(a))!=null?c:[];for(const h of f)if(h.qualifiedLabel){const p=u.get(h.label);p!==void 0?u.set(h.label,p.concat(h).map(C=>{var Q;return{...C,label:(Q=C.qualifiedLabel)!=null?Q:C.label}})):u.set(h.label,[h])}else u.set(h.label,[h])}return[...Gi(u.values(),d=>d)]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===x.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new fn(t);return e==null?void 0:e.provider.getAuthentication(t)}getHttpsCloneUri(t){var e,n;const r=this.canOpenRemoteUrl(t.toString());return(n=r==null?void 0:(e=r.provider.provider).getHttpsCloneUri)==null?void 0:n.call(e,t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=He.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return ut(this,t,e)}createProviderUri(t,e,n){return x.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(It.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return x.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===It.scheme?x.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return x.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(It.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e,n,r){const{provider:i,repo:a,ref:s}=this.getVirtualUriMetadata(t);if(e===Vt.Repository)return this.getRemoteUri(i.id,{repo:a,path:n,item:r});if(e===Vt.PullRequest||e===void 0&&(s==null?void 0:s.type)===fe.PullRequest){if((s==null?void 0:s.type)===fe.PullRequest)return this.getRemoteUri(i.id,{repo:a,pullRequest:{id:s.id},path:n,item:r});const{pullRequest:c}=await this.getMetadata(t);if(e===Vt.PullRequest&&c)return this.getRemoteUri(i.id,{repo:a,pullRequest:{id:c.id},path:n,item:r})}if(e===Vt.Branch||e===void 0&&(s==null?void 0:s.type)===fe.Branch){if((s==null?void 0:s.type)===fe.Branch)return this.getRemoteUri(i.id,{repo:a,branch:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(c.type===K.Branch||c.type===K.RemoteBranch&&e===Vt.Branch)return this.getRemoteUri(i.id,{repo:a,branch:c.branch.name,path:n,item:r})}if(e===Vt.Tag||e===void 0&&(s==null?void 0:s.type)===fe.Tag){if((s==null?void 0:s.type)===fe.Tag)return this.getRemoteUri(i.id,{repo:a,tag:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(c.type===K.Tag)return this.getRemoteUri(i.id,{repo:a,tag:c.detached.name,path:n,item:r})}if(e===Vt.Commit||e===void 0&&((s==null?void 0:s.type)===fe.Commit||(s==null?void 0:s.type)===fe.Tree&&N(s.id))){if((s==null?void 0:s.type)===fe.Commit||(s==null?void 0:s.type)===fe.Tree&&N(s.id))return this.getRemoteUri(i.id,{repo:a,sha:s.id,path:n,item:r});const{HEAD:c}=await this.getMetadata(t);if(e===Vt.Commit||c.type===K.Commit)return this.getRemoteUri(i.id,{repo:a,sha:c.sha,path:n,item:r})}if(e===void 0&&(s==null?void 0:s.type)===fe.Tree&&!N(s.id))return this.getRemoteUri(i.id,{repo:a,branch:s.id,path:n,item:r});if(e===void 0)return this.getRemoteUri(i.id,{repo:a,path:n,item:r})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(It.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){return this.getRepositoryProvider(t).getRemoteUri(e)}getProviderRootUri(t){return t=x.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=x.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=x.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(It.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return x.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=l.workspace.getWorkspaceFolder(x.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const a=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,a)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(a=>{const s=this.getRelativeFilePath(t,a.uri);switch(a.type){case D.Created:case D.Changed:return{type:a.type,path:s,fileType:a.fileType,content:n.readFile(a.uri).then(async c=>{if(!c)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await Gt(c)!==a.hash)throw this.telemetryService.publicLog2("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case D.Deleted:return{type:a.type,path:s,fileType:a.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return be.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=_(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);if(i!==void 0)return i;await this.getChangeStore(t).hasChanges(t)||(r=void 0);const a=this.getProvider(t);if(!a)throw new fn(t);const s=ee.decode(t);(s==null?void 0:s.type)===M.SHA&&(r=s.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const c=await n;return await this.updateMetadataCore(t,c,{silent:!0}),c}catch(c){throw nt.asVirtualProviderErrorCode(c)===oe.InvalidRepositoryError&&Kt.showRepositoryNotValidMessage(),c}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new Ue(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(x.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(x.getVirtualUri(t),e.HEAD.sha,e,n)}async getRepositoryContext(t,e){var n,r;e=e!=null?e:be.get("gitProtocol");let{HEAD:i,cloneUrl:a}=await this.getMetadata(t.uri);if(((n=i.branch)==null?void 0:n.remote)!==void 0){const s=this.getRemoteUri(t.provider.id,{repo:i.branch.remote.repo}),c=(r=await this.createWorkspaceForRemoteUrl(s.toString()))==null?void 0:r.uri;if(c===void 0)throw new Error(`Unable to determine repository context for remote url '${s.toString()}'`);return{cloneUrl:a}=await this.getMetadata(c),{uri:e==="http"?a.http:a.ssh,ref:i.branch.name,name:i.branch.remote.name}}return{uri:e==="http"?a.http:a.ssh,ref:i.name,name:t.name}}async clone(t){const{uri:e,ref:n}=await this.getRepositoryContext(t);if(!e)throw new Error("No url found for clone");let r=`${l.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(e)}`;if(n!==void 0&&(r+=`&ref=${encodeURIComponent(n)}`),ct)return l.Uri.parse(r);const i=o(async a=>{try{await a.activate(),await l.commands.executeCommand("git.clone",e,void 0,{ref:n})}catch(s){J.error(s,"Unable to clone repository");const c=l.l10n.t("Could not clone your repository as Git is not installed."),u=l.l10n.t("Download Git");await l.window.showErrorMessage(c,{modal:!0},u)===u&&await l.commands.executeCommand("vscode.open",l.Uri.parse("https://aka.ms/vscode-download-git"))}},"cloneRepository");if(l.workspace.isTrusted){const a=l.extensions.getExtension("vscode.git");if(a)await i(a);else throw new Error("Git extension not found")}else return l.Uri.parse(`${r}&windowId=_blank`)}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,a){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,a)}createPullRequest(t,e,n,r,i,a){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i,a)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranch(t,e){return this.getRepositoryProvider(t).getBranch(t,e)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSubmodules(t){var e,n;return(n=(e=this.getRepositoryProvider(t)).getSubmodules)==null?void 0:n.call(e,t)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return await Ur(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(_(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new fn(t);let{to:a,reason:s,...c}=e!=null?e:{};a===void 0&&i&&(a=await i.resolveIndexRef(t,s==="user"));const u=this.getChangeStore(t);if(await u.hasMergeConflicts(t))throw nt.UnresolvedConflictsError();return await r.provider.sync(t,u,{conflictResolution:ue.Abort,...c,to:a})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=l.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return Zi(t.sort((e,n)=>n.timestamp-e.timestamp),e=>_(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(It.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(It.authoritySeparator)===-1}},"_VirtualProviderService");let Bn=It;Bn.scheme="vscode-vfs",Bn.authoritySeparator="+",Bn.baseVirtualWorkspaceUri=l.Uri.parse(`${It.scheme}://`),nr([vt()],Bn.prototype,"getMetadataCore",1);var yr;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(yr||(yr={}));function In(t){return t instanceof l.Uri?{fileUri:t,lineNumber:void 0}:t!==void 0&&"lineNumber"in t&&"uri"in t?{fileUri:t.uri,lineNumber:t.lineNumber}:{fileUri:void 0,lineNumber:void 0}}o(In,"extractContext");function Zr(t){var e,n,r;let i;const{fileUri:a,lineNumber:s}=In(t),c=a!=null?a:(e=l.window.activeTextEditor)==null?void 0:e.document.uri;if(c){if(c.scheme==="vscode-notebook-cell"&&((n=l.window.activeNotebookEditor)==null?void 0:n.notebook.uri.fsPath)===c.fsPath){const u=l.window.activeNotebookEditor.notebook.getCells().find(f=>f.document.uri.fragment===(c==null?void 0:c.fragment)),d=(r=u==null?void 0:u.index)!=null?r:l.window.activeNotebookEditor.selection.start;return i=Fr(s),{type:2,uri:c,cellIndex:d,range:i}}return i=Fr(s),{type:1,uri:c,range:i}}if(l.window.activeNotebookEditor)return{type:2,uri:l.window.activeNotebookEditor.notebook.uri,cellIndex:l.window.activeNotebookEditor.selection.start,range:void 0}}o(Zr,"getFileAndPosition");function Fr(t){var e;return t!==void 0&&(!l.window.activeTextEditor||l.window.activeTextEditor.selection.isEmpty||!l.window.activeTextEditor.selection.contains(new l.Position(t-1,0)))?new l.Range(t-1,0,t-1,1):(e=l.window.activeTextEditor)==null?void 0:e.selection}o(Fr,"getRangeOrSelectionForLink");function Cr(){return`${l.env.appName.toLowerCase().includes("insiders")?"insiders.":""}vscode.dev`}o(Cr,"getVscodeDevHost");function gi(t,e,n){async function r(s,c){await Ur(t,void 0);const[u,d]=typeof s=="string"?[{url:s,workspace:void 0}]:await sr.show(t,c,l.l10n.t("Enter a remote url, or select a remote provider"),c===He.AddToWorkspace?l.l10n.t("Add Remote Repository to Workspace"):l.l10n.t("Open Remote Repository"),{allowAddToWorkspace:!1});if(!u){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{let f;if(u.workspace)f=u.workspace,f.location=d!=null?d:f.location;else if(f=await t.createWorkspaceForRemoteUrl(u.url,void 0,d!=null?d:c),!f){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});return}await ut(t,f)}catch(f){if(n.sendException(f),nt.asVirtualProviderErrorCode(f)===oe.InvalidCredentialsError){const{action:h}=f;if(h){Kt.showStatus401Message(()=>h());return}}J.error(f)}}o(r,"openRepository");async function i(s,c){const u=c?t.repositories.filter(d=>d.provider.id===c):t.repositories;if(u.length!==0){if(u.length>1){const d=await l.window.showQuickPick(u.map(f=>({label:f.name,description:f.provider.name,repository:f})),{placeHolder:s});return d?d.repository:void 0}return u[0]}}o(i,"getRepository");async function a(s,c,u=!1){var d;const f=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(f===void 0)return;const h=Zr(c);if(!h)return;const p=s.getRelativeFilePath(h.uri),C=await s.getMetadata(f.uri),Q=((d=C.HEAD.branch)==null?void 0:d.name)===C.defaultBranch.name||C.pullRequest?await s.getBestRemoteUri(f.uri,Vt.Branch,p,{selection:h.range,resourceUri:h.uri}):await s.getBestRemoteUri(f.uri,void 0,p,{selection:h.range,resourceUri:h.uri});if(Q!==void 0)return Q.with({authority:`${Cr()}/${Q.authority}`,fragment:u?Q.fragment:void 0,query:u?Q.query:void 0,path:j(Q.path)})}return o(a,"getLink"),[l.commands.registerCommand("remoteHub.openRepository",s=>(n.publicLog2("command.openRepository"),r(s))),l.commands.registerCommand("remoteHub.continueOn.openRepository",s=>(n.publicLog2("command.continueOn.openRepository"),r(s))),l.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),l.commands.registerCommand("remoteHub.continueOn",async()=>l.commands.executeCommand("_workbench.editSessions.actions.continueEditSession")),l.commands.registerCommand("remoteHub.openOnDesktop",async()=>{if(!ct)return;const s=await i(l.l10n.t("Choose which repository to open on the desktop"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return n.publicLog2("command.openOnDesktop"),l.Uri.parse(`${l.env.uriScheme}://${e}/open?url=${encodeURIComponent(c.toString(!0))}`)}),l.commands.registerCommand("remoteHub.clone",async()=>{const s=await i(l.l10n.t("Choose which repository to clone"),void 0);if(s!==void 0){if(n.publicLog2("command.clone"),await t.changeStoreHasChanges(s.uri)&&l.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const c={title:l.l10n.t("Continue")},u={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},c,u)!==c){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}return t.clone(s)}}),l.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(ct)return;const s=await i(l.l10n.t("Choose which repository to open on the web"));if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c!==void 0)return c.with({authority:`${Cr()}/${c.authority}`})}),l.commands.registerCommand("remoteHub.openOnWeb",async()=>{if(ct)return;const s=await i(l.l10n.t("Choose which repository to open on the web"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=c.with({authority:`${Cr()}/${c.authority}`});n.publicLog2("command.openOnWeb"),l.env.openExternal(u)}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const s=await i(l.l10n.t("Choose which repository to copy a vscode.dev link for"),void 0);if(s===void 0)return;const c=await t.getBestRemoteUri(s.uri);if(c===void 0)return;const u=c.with({authority:`${Cr()}/${c.authority}`});await l.env.clipboard.writeText(u.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLink",async s=>{const c=await a(t,s,!0);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.copyVscodeDevLinkWithoutRange",async s=>{const c=await a(t,s,!1);c&&await l.env.clipboard.writeText(c.toString(!0))}),l.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const s=await i(l.l10n.t("Choose which repository to open on the remote"));if(!s)return;const c={provider:s.provider,repo:s.id};return l.commands.executeCommand("remoteHub.openOnRemote",c)}),l.commands.registerCommand("remoteHub.openOnRemote",async s=>{n.publicLog2("command.openOnRemote");const{provider:c,...u}=s,d=t.getRemoteUri(c.id,u);if(d){await l.env.openExternal(d);return}l.window.showErrorMessage(l.l10n.t("Unable to open the resource on {0}",s.provider.name))}),l.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),l.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),l.commands.registerCommand("remoteHub.setContext",async(s,c)=>{if(!s.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await Kn(s,c)}),l.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const s={title:l.l10n.t("Continue Working On...")};await l.window.showInformationMessage(l.l10n.t("Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},s)===s&&await l.commands.executeCommand("remoteHub.continueOn")}),l.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>ct?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}o(gi,"registerCommands");function gr(t){return t}o(gr,"command");async function ii(t,e){return l.commands.executeCommand(t,e)}o(ii,"executeCommand");function Xr(t,e,n){return new Yn(new oi(t),new oi(e)).ComputeDiff(n).changes}o(Xr,"stringDiff");class Mr{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}o(Mr,"DiffChange");var vi;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(vi||(vi={}));function pi(t,e){return(e<<5)-e+t|0}o(pi,"numberHash");function ai(t,e){e=pi(149417,e);for(let n=0,r=t.length;n<r;n++)e=pi(t.charCodeAt(n),e);return e}o(ai,"stringHash");class oi{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}o(oi,"StringDiffSequence");class $r{static Assert(e,n){if(!e)throw new Error(n)}}o($r,"Debug");class Kr{static Copy(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}static Copy2(e,n,r,i,a){for(let s=0;s<a;s++)r[i+s]=e[n+s]}}o(Kr,"MyArray");var ei;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(ei||(ei={}));class ti{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Mr(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}o(ti,"DiffChangeHelper");class Yn{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,a,s]=Yn._getElements(e),[c,u,d]=Yn._getElements(n);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=a,this._modifiedStringElements=c,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(Yn._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,a=n.length;i<a;i++)r[i]=ai(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=Yn._getStrictElement(this._originalSequence,e),i=Yn._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,a){const s=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,s);return a&&(c=this.PrettifyChanges(c)),{quitEarly:s[0],changes:c}}ComputeDiffRecursive(e,n,r,i,a){for(a[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?($r.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new Mr(e,0,r,i-r+1)]):e<=n?($r.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Mr(e,n-e+1,r,0)]):($r.Assert(e===n+1,"originalStart should only be one more than originalEnd"),$r.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const s=[0],c=[0],u=this.ComputeRecursionPoint(e,n,r,i,s,c,a),d=s[0],f=c[0];if(u!==null)return u;if(!a[0]){const h=this.ComputeDiffRecursive(e,d,r,f,a);let p=[];return a[0]?p=[new Mr(d+1,n-(d+1)+1,f+1,i-(f+1)+1)]:p=this.ComputeDiffRecursive(d+1,n,f+1,i,a),this.ConcatenateChanges(h,p)}return[new Mr(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,a,s,c,u,d,f,h,p,C,Q,A,Y,we,ie){let De=null,Ie=null,Ke=new ti,Qe=n,it=r,Ye=C[0]-Y[0]-i,Pt=-1073741824,Zt=this.m_forwardHistory.length-1;do{const sn=Ye+e;sn===Qe||sn<it&&d[sn-1]<d[sn+1]?(h=d[sn+1],Q=h-Ye-i,h<Pt&&Ke.MarkNextChange(),Pt=h,Ke.AddModifiedElement(h+1,Q),Ye=sn+1-e):(h=d[sn-1]+1,Q=h-Ye-i,h<Pt&&Ke.MarkNextChange(),Pt=h-1,Ke.AddOriginalElement(h,Q+1),Ye=sn-1-e),Zt>=0&&(d=this.m_forwardHistory[Zt],e=d[0],Qe=1,it=d.length-1)}while(--Zt>=-1);if(De=Ke.getReverseChanges(),ie[0]){let sn=C[0]+1,zt=Y[0]+1;if(De!==null&&De.length>0){const dn=De[De.length-1];sn=Math.max(sn,dn.getOriginalEnd()),zt=Math.max(zt,dn.getModifiedEnd())}Ie=[new Mr(sn,p-sn+1,zt,A-zt+1)]}else{Ke=new ti,Qe=s,it=c,Ye=C[0]-Y[0]-u,Pt=1073741824,Zt=we?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const sn=Ye+a;sn===Qe||sn<it&&f[sn-1]>=f[sn+1]?(h=f[sn+1]-1,Q=h-Ye-u,h>Pt&&Ke.MarkNextChange(),Pt=h+1,Ke.AddOriginalElement(h+1,Q+1),Ye=sn+1-a):(h=f[sn-1],Q=h-Ye-u,h>Pt&&Ke.MarkNextChange(),Pt=h,Ke.AddModifiedElement(h+1,Q+1),Ye=sn-1-a),Zt>=0&&(f=this.m_reverseHistory[Zt],a=f[0],Qe=1,it=f.length-1)}while(--Zt>=-1);Ie=Ke.getChanges()}return this.ConcatenateChanges(De,Ie)}ComputeRecursionPoint(e,n,r,i,a,s,c){let u=0,d=0,f=0,h=0,p=0,C=0;e--,r--,a[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const Q=n-e+(i-r),A=Q+1,Y=new Int32Array(A),we=new Int32Array(A),ie=i-r,De=n-e,Ie=e-r,Ke=n-i,it=(De-ie)%2==0;Y[ie]=e,we[De]=n,c[0]=!1;for(let Ye=1;Ye<=Q/2+1;Ye++){let Pt=0,Zt=0;f=this.ClipDiagonalBound(ie-Ye,Ye,ie,A),h=this.ClipDiagonalBound(ie+Ye,Ye,ie,A);for(let zt=f;zt<=h;zt+=2){zt===f||zt<h&&Y[zt-1]<Y[zt+1]?u=Y[zt+1]:u=Y[zt-1]+1,d=u-(zt-ie)-Ie;const dn=u;for(;u<n&&d<i&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(Y[zt]=u,u+d>Pt+Zt&&(Pt=u,Zt=d),!it&&Math.abs(zt-De)<=Ye-1&&u>=we[zt])return a[0]=u,s[0]=d,dn<=we[zt]&&1447>0&&Ye<=1447+1?this.WALKTRACE(ie,f,h,Ie,De,p,C,Ke,Y,we,u,n,a,d,i,s,it,c):null}const sn=(Pt-e+(Zt-r)-Ye)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(Pt,sn))return c[0]=!0,a[0]=Pt,s[0]=Zt,sn>0&&1447>0&&Ye<=1447+1?this.WALKTRACE(ie,f,h,Ie,De,p,C,Ke,Y,we,u,n,a,d,i,s,it,c):(e++,r++,[new Mr(e,n-e+1,r,i-r+1)]);p=this.ClipDiagonalBound(De-Ye,Ye,De,A),C=this.ClipDiagonalBound(De+Ye,Ye,De,A);for(let zt=p;zt<=C;zt+=2){zt===p||zt<C&&we[zt-1]>=we[zt+1]?u=we[zt+1]-1:u=we[zt-1],d=u-(zt-De)-Ke;const dn=u;for(;u>e&&d>r&&this.ElementsAreEqual(u,d);)u--,d--;if(we[zt]=u,it&&Math.abs(zt-ie)<=Ye&&u<=Y[zt])return a[0]=u,s[0]=d,dn>=Y[zt]&&1447>0&&Ye<=1447+1?this.WALKTRACE(ie,f,h,Ie,De,p,C,Ke,Y,we,u,n,a,d,i,s,it,c):null}if(Ye<=1447){let zt=new Int32Array(h-f+2);zt[0]=ie-f+1,Kr.Copy2(Y,f,zt,1,h-f+1),this.m_forwardHistory.push(zt),zt=new Int32Array(C-p+2),zt[0]=De-p+1,Kr.Copy2(we,p,zt,1,C-p+1),this.m_reverseHistory.push(zt)}}return this.WALKTRACE(ie,f,h,Ie,De,p,C,Ke,Y,we,u,n,a,d,i,s,it,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,a=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,s=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<a&&(!s||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const d=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!d)break;r.originalStart++,r.modifiedStart++}let u=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],u)){e[n]=u[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,a=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,a=h.modifiedStart+h.modifiedLength}const s=r.originalLength>0,c=r.modifiedLength>0;let u=0,d=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const p=r.originalStart-h,C=r.modifiedStart-h;if(p<i||C<a||s&&!this.OriginalElementsAreEqual(p,p+r.originalLength)||c&&!this.ModifiedElementsAreEqual(C,C+r.modifiedLength))break;const A=(p===i&&C===a?5:0)+this._boundaryScore(p,r.originalLength,C,r.modifiedLength);A>d&&(d=A,u=h)}r.originalStart-=u,r.modifiedStart-=u;const f=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],f)){e[n-1]=f[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],a=e[n],s=a.originalStart-i.originalStart-i.originalLength,c=i.originalStart,u=a.originalStart+a.originalLength,d=u-c,f=i.modifiedStart,h=a.modifiedStart+a.modifiedLength,p=h-f;if(s<5&&d<20&&p<20){const C=this._findBetterContiguousSequence(c,d,f,p,s);if(C){const[Q,A]=C;(Q!==i.originalStart+i.originalLength||A!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=Q-i.originalStart,i.modifiedLength=A-i.modifiedStart,a.originalStart=Q+s,a.modifiedStart=A+s,a.originalLength=u-a.originalStart,a.modifiedLength=h-a.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,a){if(n<a||i<a)return null;const s=e+n-a+1,c=r+i-a+1;let u=0,d=0,f=0;for(let h=e;h<s;h++)for(let p=r;p<c;p++){const C=this._contiguousSequenceScore(h,p,a);C>0&&C>u&&(u=C,d=h,f=p)}return u>0?[d,f]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let a=0;a<r;a++){if(!this.ElementsAreEqual(e+a,n+a))return 0;i+=this._originalStringElements[e+a].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const a=this._OriginalRegionIsBoundary(e,n)?1:0,s=this._ModifiedRegionIsBoundary(r,i)?1:0;return a+s}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return Kr.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],Kr.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return Kr.Copy(e,0,i,0,e.length),Kr.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if($r.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),$r.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let a=e.originalLength;const s=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(a=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new Mr(i,a,s,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const a=r,s=i-r-1,c=n%2==0;if(e<0){const u=a%2==0;return c===u?0:1}else{const u=s%2==0;return c===u?i-1:i-2}}}o(Yn,"LcsDiff");var mi;(function(t){function e(r,i){return r instanceof Et?i:new l.Position(i.line,i.character)}o(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof Et?i:new l.Range(i.start.line,i.start.character,i.end.line,i.end.character)}o(n,"makeRange"),t.makeRange=n})(mi||(mi={}));var ye;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(ye||(ye={}));const Ze=o(class{constructor(t,e,n,r){this.diffCache=new bn(32),this.indexDocumentCache=new bn(32),this.codeDocumentCache=new bn(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const a=await this.getIndexDocument(n);if(a===void 0)return;const s=this.getDiff(2,a,t);if(s.length===0)return e;const c=t.offsetAt(new l.Position(e.line,e.character));let u=c;for(const p of s){if(p.modifiedStart<=c&&c<p.modifiedStart+p.modifiedLength)return;if(u<p.modifiedStart)break;u=u-(p.modifiedLength-p.originalLength)}const d=a.positionAt(u),f=this.getWordAtOffset(a.lineAt(d.line).text,d.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(f===void 0||h===void 0||f!==h))return new l.Position(d.line,d.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof l.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===D.Created||i===D.Deleted)return;const[a,s]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(a===void 0||s===void 0)return;const c=this.getDiff(1,a,s);if(c.length===0)return e;const u=a.offsetAt(e.start);let d=u;const f=a.offsetAt(e.end);let h=f;for(const Y of c){if(h<Y.originalStart)break;const we=Y.modifiedLength-Y.originalLength;if(Y.originalStart<=u){if(u<Y.originalStart+Y.originalLength)return;d+=we}else if(f<Y.originalStart+Y.originalLength)return;if(Y.originalStart<=f){if(f<Y.originalStart+Y.originalLength)return;h+=we}}const p=s.positionAt(d),C=s.positionAt(h),Q=a.getText(e),A=s.getText(mi.makeRange(s,{start:p,end:C}));if(Q===A)return new l.Range(p.line,p.character,C.line,C.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof l.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new Et(t,Number.MAX_VALUE,Ze.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:Xr(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,a=0;for(;a<t.length&&n!=="endFound";){switch(a===e&&(n="findEnd"),t[a]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=a+1;break;case"findEnd":i=a,n="endFound";break}break}a++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let st=Ze;st.textDecoder=new TextDecoder("utf8");var wt;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(wt||(wt={}));class Et{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let a=0;a<e.length;a++){const s=e.charCodeAt(a);(s===13||s===10)&&(s===13&&a+1<e.length&&e.charCodeAt(a+1)===10&&a++,i.push(r+a+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Et.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const a=this._content.substring(r,i);let s=a.length-1;for(;s>=0&&(a[s]===`
`||a[s]==="\r");)s--;return{lineNumber:e,text:a.substr(0,s+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const s=Math.floor((r+i)/2);n[s]>e?i=s:r=s+1}const a=r-1;return{line:a,character:e-n[a]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}o(Et,"TextDocument");var Wt;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(Wt||(Wt={}));var ln;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(ln||(ln={}));var pe;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=ln.MAX_VALUE),i===Number.MAX_VALUE&&(i=ln.MAX_VALUE),{line:r,character:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.objectLiteral(i)&&Ve.uinteger(i.line)&&Ve.uinteger(i.character)}o(n,"is"),t.is=n})(pe||(pe={}));var Ne;(function(t){function e(r,i,a,s){if(Ve.uinteger(r)&&Ve.uinteger(i)&&Ve.uinteger(a)&&Ve.uinteger(s))return{start:pe.create(r,i),end:pe.create(a,s)};if(pe.is(r)&&pe.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+a+", "+s+"]")}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.objectLiteral(i)&&pe.is(i.start)&&pe.is(i.end)}o(n,"is"),t.is=n})(Ne||(Ne={}));var Ge;(function(t){function e(r,i){return{uri:r,range:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ne.is(i.range)&&(Ve.string(i.uri)||Ve.undefined(i.uri))}o(n,"is"),t.is=n})(Ge||(Ge={}));var dt;(function(t){function e(r,i,a,s){return{targetUri:r,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ne.is(i.targetRange)&&Ve.string(i.targetUri)&&(Ne.is(i.targetSelectionRange)||Ve.undefined(i.targetSelectionRange))&&(Ne.is(i.originSelectionRange)||Ve.undefined(i.originSelectionRange))}o(n,"is"),t.is=n})(dt||(dt={}));var xt;(function(t){function e(r,i,a,s){return{red:r,green:i,blue:a,alpha:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.numberRange(i.red,0,1)&&Ve.numberRange(i.green,0,1)&&Ve.numberRange(i.blue,0,1)&&Ve.numberRange(i.alpha,0,1)}o(n,"is"),t.is=n})(xt||(xt={}));var Qt;(function(t){function e(r,i){return{range:r,color:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ne.is(i.range)&&xt.is(i.color)}o(n,"is"),t.is=n})(Qt||(Qt={}));var Dn;(function(t){function e(r,i,a){return{label:r,textEdit:i,additionalTextEdits:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.string(i.label)&&(Ve.undefined(i.textEdit)||yi.is(i))&&(Ve.undefined(i.additionalTextEdits)||Ve.typedArray(i.additionalTextEdits,yi.is))}o(n,"is"),t.is=n})(Dn||(Dn={}));var An;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(An||(An={}));var Vn;(function(t){function e(r,i,a,s,c){var u={startLine:r,endLine:i};return Ve.defined(a)&&(u.startCharacter=a),Ve.defined(s)&&(u.endCharacter=s),Ve.defined(c)&&(u.kind=c),u}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.uinteger(i.startLine)&&Ve.uinteger(i.startLine)&&(Ve.undefined(i.startCharacter)||Ve.uinteger(i.startCharacter))&&(Ve.undefined(i.endCharacter)||Ve.uinteger(i.endCharacter))&&(Ve.undefined(i.kind)||Ve.string(i.kind))}o(n,"is"),t.is=n})(Vn||(Vn={}));var si;(function(t){function e(r,i){return{location:r,message:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ge.is(i.location)&&Ve.string(i.message)}o(n,"is"),t.is=n})(si||(si={}));var li;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(li||(li={}));var bi;(function(t){t.Unnecessary=1,t.Deprecated=2})(bi||(bi={}));var or;(function(t){function e(n){var r=n;return r!=null&&Ve.string(r.href)}o(e,"is"),t.is=e})(or||(or={}));var _i;(function(t){function e(r,i,a,s,c,u){var d={range:r,message:i};return Ve.defined(a)&&(d.severity=a),Ve.defined(s)&&(d.code=s),Ve.defined(c)&&(d.source=c),Ve.defined(u)&&(d.relatedInformation=u),d}o(e,"create"),t.create=e;function n(r){var i,a=r;return Ve.defined(a)&&Ne.is(a.range)&&Ve.string(a.message)&&(Ve.number(a.severity)||Ve.undefined(a.severity))&&(Ve.integer(a.code)||Ve.string(a.code)||Ve.undefined(a.code))&&(Ve.undefined(a.codeDescription)||Ve.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(Ve.string(a.source)||Ve.undefined(a.source))&&(Ve.undefined(a.relatedInformation)||Ve.typedArray(a.relatedInformation,si.is))}o(n,"is"),t.is=n})(_i||(_i={}));var Ei;(function(t){function e(r,i){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var c={title:r,command:i};return Ve.defined(a)&&a.length>0&&(c.arguments=a),c}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ve.string(i.title)&&Ve.string(i.command)}o(n,"is"),t.is=n})(Ei||(Ei={}));var yi;(function(t){function e(a,s){return{range:a,newText:s}}o(e,"replace"),t.replace=e;function n(a,s){return{range:{start:a,end:a},newText:s}}o(n,"insert"),t.insert=n;function r(a){return{range:a,newText:""}}o(r,"del"),t.del=r;function i(a){var s=a;return Ve.objectLiteral(s)&&Ve.string(s.newText)&&Ne.is(s.range)}o(i,"is"),t.is=i})(yi||(yi={}));var na;(function(t){function e(r,i,a){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ve.string(i.description)||i.description===void 0)}o(n,"is"),t.is=n})(na||(na={}));var br;(function(t){function e(n){var r=n;return typeof r=="string"}o(e,"is"),t.is=e})(br||(br={}));var Ai;(function(t){function e(a,s,c){return{range:a,newText:s,annotationId:c}}o(e,"replace"),t.replace=e;function n(a,s,c){return{range:{start:a,end:a},newText:s,annotationId:c}}o(n,"insert"),t.insert=n;function r(a,s){return{range:a,newText:"",annotationId:s}}o(r,"del"),t.del=r;function i(a){var s=a;return yi.is(s)&&(na.is(s.annotationId)||br.is(s.annotationId))}o(i,"is"),t.is=i})(Ai||(Ai={}));var ra;(function(t){function e(r,i){return{textDocument:r,edits:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&va.is(i.textDocument)&&Array.isArray(i.edits)}o(n,"is"),t.is=n})(ra||(ra={}));var Vi;(function(t){function e(r,i,a){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||br.is(i.annotationId))}o(n,"is"),t.is=n})(Vi||(Vi={}));var Ji;(function(t){function e(r,i,a,s){var c={kind:"rename",oldUri:r,newUri:i};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),s!==void 0&&(c.annotationId=s),c}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&Ve.string(i.oldUri)&&Ve.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||br.is(i.annotationId))}o(n,"is"),t.is=n})(Ji||(Ji={}));var ji;(function(t){function e(r,i,a){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),a!==void 0&&(s.annotationId=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ve.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ve.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||br.is(i.annotationId))}o(n,"is"),t.is=n})(ji||(ji={}));var Ra;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return Ve.string(i.kind)?Vi.is(i)||Ji.is(i)||ji.is(i):ra.is(i)}))}o(e,"is"),t.is=e})(Ra||(Ra={}));var ia=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return o(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,a;if(r===void 0?i=yi.insert(e,n):br.is(r)?(a=r,i=Ai.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Ai.insert(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.replace=function(e,n,r){var i,a;if(r===void 0?i=yi.replace(e,n):br.is(r)?(a=r,i=Ai.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),i=Ai.replace(e,n,a)),this.edits.push(i),a!==void 0)return a},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=yi.del(e):br.is(n)?(i=n,r=Ai.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Ai.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),rr=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return o(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(br.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),Nr=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new rr(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(ra.is(r)){var i=new ia(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new ia(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return o(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(va.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],a={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(a),r=new ia(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new ia(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new rr,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;na.is(n)||br.is(n)?i=n:r=n;var a,s;if(i===void 0?a=Vi.create(e,r):(s=br.is(i)?i:this._changeAnnotations.manage(i),a=Vi.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;na.is(r)||br.is(r)?a=r:i=r;var s,c;if(a===void 0?s=Ji.create(e,n,i):(c=br.is(a)?a:this._changeAnnotations.manage(a),s=Ji.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(s),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;na.is(n)||br.is(n)?i=n:r=n;var a,s;if(i===void 0?a=ji.create(e,r):(s=br.is(i)?i:this._changeAnnotations.manage(i),a=ji.create(e,r,s)),this._workspaceEdit.documentChanges.push(a),s!==void 0)return s},t}(),Ta;(function(t){function e(r){return{uri:r}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ve.string(i.uri)}o(n,"is"),t.is=n})(Ta||(Ta={}));var wr;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.integer(i.version)}o(n,"is"),t.is=n})(wr||(wr={}));var va;(function(t){function e(r,i){return{uri:r,version:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ve.string(i.uri)&&(i.version===null||Ve.integer(i.version))}o(n,"is"),t.is=n})(va||(va={}));var ki;(function(t){function e(r,i,a,s){return{uri:r,languageId:i,version:a,text:s}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.string(i.languageId)&&Ve.integer(i.version)&&Ve.string(i.text)}o(n,"is"),t.is=n})(ki||(ki={}));var Gr;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(Gr||(Gr={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}o(e,"is"),t.is=e}(Gr||(Gr={}));var xi;(function(t){function e(n){var r=n;return Ve.objectLiteral(n)&&Gr.is(r.kind)&&Ve.string(r.value)}o(e,"is"),t.is=e})(xi||(xi={}));var Oi;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(Oi||(Oi={}));var Ja;(function(t){t.PlainText=1,t.Snippet=2})(Ja||(Ja={}));var ja;(function(t){t.Deprecated=1})(ja||(ja={}));var Ma;(function(t){function e(r,i,a){return{newText:r,insert:i,replace:a}}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ve.string(i.newText)&&Ne.is(i.insert)&&Ne.is(i.replace)}o(n,"is"),t.is=n})(Ma||(Ma={}));var Ya;(function(t){t.asIs=1,t.adjustIndentation=2})(Ya||(Ya={}));var qa;(function(t){function e(n){return{label:n}}o(e,"create"),t.create=e})(qa||(qa={}));var Qa;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}o(e,"create"),t.create=e})(Qa||(Qa={}));var pa;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}o(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return Ve.string(i)||Ve.objectLiteral(i)&&Ve.string(i.language)&&Ve.string(i.value)}o(n,"is"),t.is=n})(pa||(pa={}));var Xa;(function(t){function e(n){var r=n;return!!r&&Ve.objectLiteral(r)&&(xi.is(r.contents)||pa.is(r.contents)||Ve.typedArray(r.contents,pa.is))&&(n.range===void 0||Ne.is(n.range))}o(e,"is"),t.is=e})(Xa||(Xa={}));var Pa;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}o(e,"create"),t.create=e})(Pa||(Pa={}));var Za;(function(t){function e(n,r){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s={label:n};return Ve.defined(r)&&(s.documentation=r),Ve.defined(i)?s.parameters=i:s.parameters=[],s}o(e,"create"),t.create=e})(Za||(Za={}));var aa;(function(t){t.Text=1,t.Read=2,t.Write=3})(aa||(aa={}));var eo;(function(t){function e(n,r){var i={range:n};return Ve.number(r)&&(i.kind=r),i}o(e,"create"),t.create=e})(eo||(eo={}));var Ia;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Ia||(Ia={}));var La;(function(t){t.Deprecated=1})(La||(La={}));var to;(function(t){function e(n,r,i,a,s){var c={name:n,kind:r,location:{uri:a,range:i}};return s&&(c.containerName=s),c}o(e,"create"),t.create=e})(to||(to={}));var no;(function(t){function e(r,i,a,s,c,u){var d={name:r,detail:i,kind:a,range:s,selectionRange:c};return u!==void 0&&(d.children=u),d}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ve.string(i.name)&&Ve.number(i.kind)&&Ne.is(i.range)&&Ne.is(i.selectionRange)&&(i.detail===void 0||Ve.string(i.detail))&&(i.deprecated===void 0||Ve.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}o(n,"is"),t.is=n})(no||(no={}));var Di;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(Di||(Di={}));var ro;(function(t){function e(r,i){var a={diagnostics:r};return i!=null&&(a.only=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ve.typedArray(i.diagnostics,_i.is)&&(i.only===void 0||Ve.typedArray(i.only,Ve.string))}o(n,"is"),t.is=n})(ro||(ro={}));var Ri;(function(t){function e(r,i,a){var s={title:r},c=!0;return typeof i=="string"?(c=!1,s.kind=i):Ei.is(i)?s.command=i:s.edit=i,c&&a!==void 0&&(s.kind=a),s}o(e,"create"),t.create=e;function n(r){var i=r;return i&&Ve.string(i.title)&&(i.diagnostics===void 0||Ve.typedArray(i.diagnostics,_i.is))&&(i.kind===void 0||Ve.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||Ei.is(i.command))&&(i.isPreferred===void 0||Ve.boolean(i.isPreferred))&&(i.edit===void 0||Ra.is(i.edit))}o(n,"is"),t.is=n})(Ri||(Ri={}));var io;(function(t){function e(r,i){var a={range:r};return Ve.defined(i)&&(a.data=i),a}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ne.is(i.range)&&(Ve.undefined(i.command)||Ei.is(i.command))}o(n,"is"),t.is=n})(io||(io={}));var la;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ve.uinteger(i.tabSize)&&Ve.boolean(i.insertSpaces)}o(n,"is"),t.is=n})(la||(la={}));var ka;(function(t){function e(r,i,a){return{range:r,target:i,data:a}}o(e,"create"),t.create=e;function n(r){var i=r;return Ve.defined(i)&&Ne.is(i.range)&&(Ve.undefined(i.target)||Ve.string(i.target))}o(n,"is"),t.is=n})(ka||(ka={}));var ao;(function(t){function e(r,i){return{range:r,parent:i}}o(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&Ne.is(i.range)&&(i.parent===void 0||t.is(i.parent))}o(n,"is"),t.is=n})(ao||(ao={}));var Ro=null,oo;(function(t){function e(a,s,c,u){return new To(a,s,c,u)}o(e,"create"),t.create=e;function n(a){var s=a;return!!(Ve.defined(s)&&Ve.string(s.uri)&&(Ve.undefined(s.languageId)||Ve.string(s.languageId))&&Ve.uinteger(s.lineCount)&&Ve.func(s.getText)&&Ve.func(s.positionAt)&&Ve.func(s.offsetAt))}o(n,"is"),t.is=n;function r(a,s){for(var c=a.getText(),u=i(s,function(Q,A){var Y=Q.range.start.line-A.range.start.line;return Y===0?Q.range.start.character-A.range.start.character:Y}),d=c.length,f=u.length-1;f>=0;f--){var h=u[f],p=a.offsetAt(h.range.start),C=a.offsetAt(h.range.end);if(C<=d)c=c.substring(0,p)+h.newText+c.substring(C,c.length);else throw new Error("Overlapping edit");d=p}return c}o(r,"applyEdits"),t.applyEdits=r;function i(a,s){if(a.length<=1)return a;var c=a.length/2|0,u=a.slice(0,c),d=a.slice(c);i(u,s),i(d,s);for(var f=0,h=0,p=0;f<u.length&&h<d.length;){var C=s(u[f],d[h]);C<=0?a[p++]=u[f++]:a[p++]=d[h++]}for(;f<u.length;)a[p++]=u[f++];for(;h<d.length;)a[p++]=d[h++];return a}o(i,"mergeSort")})(oo||(oo={}));var To=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return o(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var a=n.charAt(i);r=a==="\r"||a===`
`,a==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return pe.create(0,e);for(;r<i;){var a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}var s=r-1;return pe.create(s,e-n[s])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),Ve;(function(t){var e=Object.prototype.toString;function n(C){return typeof C!="undefined"}o(n,"defined"),t.defined=n;function r(C){return typeof C=="undefined"}o(r,"undefined"),t.undefined=r;function i(C){return C===!0||C===!1}o(i,"boolean"),t.boolean=i;function a(C){return e.call(C)==="[object String]"}o(a,"string"),t.string=a;function s(C){return e.call(C)==="[object Number]"}o(s,"number"),t.number=s;function c(C,Q,A){return e.call(C)==="[object Number]"&&Q<=C&&C<=A}o(c,"numberRange"),t.numberRange=c;function u(C){return e.call(C)==="[object Number]"&&-2147483648<=C&&C<=2147483647}o(u,"integer"),t.integer=u;function d(C){return e.call(C)==="[object Number]"&&0<=C&&C<=2147483647}o(d,"uinteger"),t.uinteger=d;function f(C){return e.call(C)==="[object Function]"}o(f,"func"),t.func=f;function h(C){return C!==null&&typeof C=="object"}o(h,"objectLiteral"),t.objectLiteral=h;function p(C,Q){return Array.isArray(C)&&C.every(Q)}o(p,"typedArray"),t.typedArray=p})(Ve||(Ve={}));var ma;(function(t){function e(r){return typeof r=="string"||r instanceof String}o(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}o(n,"number"),t.number=n})(ma||(ma={}));var ya;(function(t){function e(n){const r=n;return r!=null&&(ma.number(r.value)||ma.string(r.value))&&ma.string(r.target)}o(e,"is"),t.is=e})(ya||(ya={}));class wa extends l.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}o(wa,"ProtocolDiagnostic");var ci;(function(t){const e=Object.prototype.toString;function n(f){return typeof f!="undefined"}o(n,"defined"),t.defined=n;function r(f){return f===!0||f===!1}o(r,"boolean"),t.boolean=r;function i(f){return e.call(f)==="[object String]"}o(i,"string"),t.string=i;function a(f){return e.call(f)==="[object Number]"}o(a,"number"),t.number=a;function s(f){return f!==null&&typeof f=="object"}o(s,"objectLiteral"),t.objectLiteral=s;function c(f){return Array.isArray(f)}o(c,"array"),t.array=c;function u(f){return c(f)&&f.every(h=>i(h))}o(u,"stringArray"),t.stringArray=u;function d(f,h){return Array.isArray(f)&&f.every(h)}o(d,"typedArray"),t.typedArray=d})(ci||(ci={}));var Yi;(function(t){function e(n){const r=n;return r&&ci.string(r.language)&&ci.string(r.value)}o(e,"is"),t.is=e})(Yi||(Yi={}));function Mo(t){const e=o(z=>l.Uri.parse(z),"nullConverter"),n=t!=null?t:e;function r(z){return n(z)}o(r,"asUri");function i(z){return z.map(a)}o(i,"asDiagnostics");function a(z){const yt=new wa(h(z.range),z.message,C(z.severity),z.data);return z.code!==void 0&&(or.is(z.codeDescription)?yt.code={value:z.code,target:r(z.codeDescription.href)}:ya.is(z.code)?(yt.hasDiagnosticCode=!0,yt.code={value:z.code.value,target:r(z.code.target)}):yt.code=z.code),z.source&&(yt.source=z.source),z.relatedInformation&&(yt.relatedInformation=s(z.relatedInformation)),Array.isArray(z.tags)&&(yt.tags=u(z.tags)),yt}o(a,"asDiagnostic");function s(z){return z.map(c)}o(s,"asRelatedInformation");function c(z){return new l.DiagnosticRelatedInformation(Ye(z.location),z.message)}o(c,"asDiagnosticRelatedInformation");function u(z){if(!z)return;const yt=[];for(const yn of z){const jr=d(yn);jr!==void 0&&yt.push(jr)}return yt.length>0?yt:void 0}o(u,"asDiagnosticTags");function d(z){switch(z){case bi.Unnecessary:return l.DiagnosticTag.Unnecessary;case bi.Deprecated:return l.DiagnosticTag.Deprecated;default:return}}o(d,"asDiagnosticTag");function f(z){if(!!z)return new l.Position(z.line,z.character)}o(f,"asPosition");function h(z){if(!!z)return new l.Range(f(z.start),f(z.end))}o(h,"asRange");function p(z){return z.map(yt=>h(yt))}o(p,"asRanges");function C(z){if(z==null)return l.DiagnosticSeverity.Error;switch(z){case li.Error:return l.DiagnosticSeverity.Error;case li.Warning:return l.DiagnosticSeverity.Warning;case li.Information:return l.DiagnosticSeverity.Information;case li.Hint:return l.DiagnosticSeverity.Hint}return l.DiagnosticSeverity.Error}o(C,"asDiagnosticSeverity");function Q(z){if(ci.string(z))return new l.MarkdownString(z);if(Yi.is(z))return new l.MarkdownString().appendCodeblock(z.value,z.language);if(Array.isArray(z)){const yn=[];for(const jr of z){const za=new l.MarkdownString;Yi.is(jr)?za.appendCodeblock(jr.value,jr.language):za.appendMarkdown(jr),yn.push(za)}return yn}let yt;switch(z.kind){case Gr.Markdown:return new l.MarkdownString(z.value);case Gr.PlainText:return yt=new l.MarkdownString,yt.appendText(z.value),yt;default:return yt=new l.MarkdownString,yt.appendText(`Unsupported Markup content received. Kind is: ${z.kind}`),yt}}o(Q,"asHoverContent");function A(z){if(ci.string(z))return z;switch(z.kind){case Gr.Markdown:return new l.MarkdownString(z.value);case Gr.PlainText:return z.value;default:return`Unsupported Markup content received. Kind is: ${z.kind}`}}o(A,"asDocumentation");function Y(z){if(!!z)return new l.Hover(Q(z.contents),h(z.range))}o(Y,"asHover");function we(z){if(!!z)return new l.TextEdit(h(z.range),z.newText)}o(we,"asTextEdit");function ie(z){if(!!z)return z.map(we)}o(ie,"asTextEdits");function De(z){if(!z)return;const yt=new l.SignatureHelp;return ci.number(z.activeSignature)?yt.activeSignature=z.activeSignature:yt.activeSignature=0,ci.number(z.activeParameter)?yt.activeParameter=z.activeParameter:yt.activeParameter=0,z.signatures&&(yt.signatures=Ie(z.signatures)),yt}o(De,"asSignatureHelp");function Ie(z){return z.map(Ke)}o(Ie,"asSignatureInformations");function Ke(z){const yt=new l.SignatureInformation(z.label);return z.documentation!==void 0&&(yt.documentation=A(z.documentation)),z.parameters!==void 0&&(yt.parameters=Qe(z.parameters)),z.activeParameter!==void 0&&(yt.activeParameter=z.activeParameter),yt}o(Ke,"asSignatureInformation");function Qe(z){return z.map(it)}o(Qe,"asParameterInformations");function it(z){const yt=new l.ParameterInformation(z.label);return z.documentation&&(yt.documentation=A(z.documentation)),yt}o(it,"asParameterInformation");function Ye(z){if(!!z)return new l.Location(n(z.uri),h(z.range))}o(Ye,"asLocation");function Pt(z){if(!!z)return zt(z)}o(Pt,"asDeclarationResult");function Zt(z){if(!!z)return zt(z)}o(Zt,"asDefinitionResult");function sn(z){if(!z)return;const yt={targetUri:n(z.targetUri),targetRange:h(z.targetSelectionRange),originSelectionRange:h(z.originSelectionRange),targetSelectionRange:h(z.targetSelectionRange)};if(!yt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return yt}o(sn,"asLocationLink");function zt(z){if(!!z)return ci.array(z)?z.length===0?[]:dt.is(z[0])?z.map(jr=>sn(jr)):z.map(yn=>Ye(yn)):dt.is(z)?[sn(z)]:Ye(z)}o(zt,"asLocationResult");function dn(z){if(!!z)return z.map(yt=>Ye(yt))}o(dn,"asReferences");function Rr(z){if(!!z)return z.map(Mi)}o(Rr,"asDocumentHighlights");function Mi(z){const yt=new l.DocumentHighlight(h(z.range));return ci.number(z.kind)&&(yt.kind=Pi(z.kind)),yt}o(Mi,"asDocumentHighlight");function Pi(z){switch(z){case aa.Text:return l.DocumentHighlightKind.Text;case aa.Read:return l.DocumentHighlightKind.Read;case aa.Write:return l.DocumentHighlightKind.Write}return l.DocumentHighlightKind.Text}o(Pi,"asDocumentHighlightKind");function oa(z,yt){if(!!z)return z.map(yn=>rl(yn,yt))}o(oa,"asSymbolInformations");function Fi(z){return z<=Ia.TypeParameter?z-1:l.SymbolKind.Property}o(Fi,"asSymbolKind");function Da(z){switch(z){case La.Deprecated:return l.SymbolTag.Deprecated;default:return}}o(Da,"asSymbolTag");function Eo(z){if(z==null)return;const yt=[];for(const yn of z){const jr=Da(yn);jr!==void 0&&yt.push(jr)}return yt.length===0?void 0:yt}o(Eo,"asSymbolTags");function rl(z,yt){const yn=new l.SymbolInformation(z.name,Fi(z.kind),h(z.location.range),z.location.uri?n(z.location.uri):yt);return il(yn,z),z.containerName&&(yn.containerName=z.containerName),yn}o(rl,"asSymbolInformation");function Rc(z){if(z!=null)return z.map(Qo)}o(Rc,"asDocumentSymbols");function Qo(z){var yt;const yn=new l.DocumentSymbol(z.name,(yt=z.detail)!=null?yt:"",Fi(z.kind),h(z.range),h(z.selectionRange));if(il(yn,z),z.children!==void 0&&z.children.length>0){const jr=[];for(const za of z.children)jr.push(Qo(za));yn.children=jr}return yn}o(Qo,"asDocumentSymbol");function il(z,yt){z.tags=Eo(yt.tags),yt.deprecated&&(z.tags?z.tags.includes(l.SymbolTag.Deprecated)||(z.tags=z.tags.concat(l.SymbolTag.Deprecated)):z.tags=[l.SymbolTag.Deprecated])}o(il,"fillTags");function Xo(z){const yt={title:z.title,command:z.command};return z.arguments&&(yt.arguments=z.arguments),yt}o(Xo,"asCommand");function Tc(z){if(!!z)return z.map(Xo)}o(Tc,"asCommands");const Xi=new Map;Xi.set(Di.Empty,l.CodeActionKind.Empty),Xi.set(Di.QuickFix,l.CodeActionKind.QuickFix),Xi.set(Di.Refactor,l.CodeActionKind.Refactor),Xi.set(Di.RefactorExtract,l.CodeActionKind.RefactorExtract),Xi.set(Di.RefactorInline,l.CodeActionKind.RefactorInline),Xi.set(Di.RefactorRewrite,l.CodeActionKind.RefactorRewrite),Xi.set(Di.Source,l.CodeActionKind.Source),Xi.set(Di.SourceOrganizeImports,l.CodeActionKind.SourceOrganizeImports);function Zo(z){if(z==null)return;let yt=Xi.get(z);if(yt)return yt;const yn=z.split(".");yt=l.CodeActionKind.Empty;for(const jr of yn)yt=yt.append(jr);return yt}o(Zo,"asCodeActionKind");function Mc(z){if(z!=null)return z.map(yt=>Zo(yt))}o(Mc,"asCodeActionKinds");function Pc(z){if(z==null)return;const yt=new l.CodeAction(z.title);return z.kind!==void 0&&(yt.kind=Zo(z.kind)),z.diagnostics&&(yt.diagnostics=i(z.diagnostics)),z.edit&&(yt.edit=al(z.edit)),z.command&&(yt.command=Xo(z.command)),z.isPreferred!==void 0&&(yt.isPreferred=z.isPreferred),yt}o(Pc,"asCodeAction");function al(z){if(!z)return;const yt=new l.WorkspaceEdit;return z.documentChanges?z.documentChanges.forEach(yn=>{if(Vi.is(yn))yt.createFile(n(yn.uri),yn.options);else if(Ji.is(yn))yt.renameFile(n(yn.oldUri),n(yn.newUri),yn.options);else if(ji.is(yn))yt.deleteFile(n(yn.uri),yn.options);else if(ra.is(yn))yt.set(n(yn.textDocument.uri),ie(yn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(yn,void 0,4)}`)}):z.changes&&Object.keys(z.changes).forEach(yn=>{yt.set(n(yn),ie(z.changes[yn]))}),yt}o(al,"asWorkspaceEdit");function ol(z){return new l.Color(z.red,z.green,z.blue,z.alpha)}o(ol,"asColor");function sl(z){return new l.ColorInformation(h(z.range),ol(z.color))}o(sl,"asColorInformation");function Ic(z){if(Array.isArray(z))return z.map(sl)}o(Ic,"asColorInformations");function ll(z){const yt=new l.ColorPresentation(z.label);return yt.additionalTextEdits=ie(z.additionalTextEdits),z.textEdit&&(yt.textEdit=we(z.textEdit)),yt}o(ll,"asColorPresentation");function Lc(z){if(Array.isArray(z))return z.map(ll)}o(Lc,"asColorPresentations");function cl(z){if(z)switch(z){case An.Comment:return l.FoldingRangeKind.Comment;case An.Imports:return l.FoldingRangeKind.Imports;case An.Region:return l.FoldingRangeKind.Region}}o(cl,"asFoldingRangeKind");function ul(z){return new l.FoldingRange(z.startLine,z.endLine,cl(z.kind))}o(ul,"asFoldingRange");function kc(z){if(Array.isArray(z))return z.map(ul)}o(kc,"asFoldingRanges");function es(z){return new l.SelectionRange(h(z.range),z.parent?es(z.parent):void 0)}o(es,"asSelectionRange");function xc(z){if(!Array.isArray(z))return[];const yt=[];for(const yn of z)yt.push(es(yn));return yt}return o(xc,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:a,asRange:h,asRanges:p,asPosition:f,asDiagnosticSeverity:C,asDiagnosticTag:d,asHover:Y,asTextEdit:we,asTextEdits:ie,asSignatureHelp:De,asSignatureInformations:Ie,asSignatureInformation:Ke,asParameterInformations:Qe,asParameterInformation:it,asDeclarationResult:Pt,asDefinitionResult:Zt,asLocation:Ye,asReferences:dn,asDocumentHighlights:Rr,asDocumentHighlight:Mi,asDocumentHighlightKind:Pi,asSymbolKind:Fi,asSymbolTag:Da,asSymbolTags:Eo,asSymbolInformations:oa,asSymbolInformation:rl,asDocumentSymbols:Rc,asDocumentSymbol:Qo,asCommand:Xo,asCommands:Tc,asCodeAction:Pc,asCodeActionKind:Zo,asCodeActionKinds:Mc,asWorkspaceEdit:al,asFoldingRangeKind:cl,asFoldingRange:ul,asFoldingRanges:kc,asColor:ol,asColorInformation:sl,asColorInformations:Ic,asColorPresentation:ll,asColorPresentations:Lc,asSelectionRange:es,asSelectionRanges:xc}}o(Mo,"createConverter");var Ti;(function(t){function e(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:a,repo:s}=i instanceof l.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(a.id,{repo:s})}o(n,"externalIndexUri"),t.externalIndexUri=n})(Ti||(Ti={}));var Ui;(function(t){function e(i){if(i.HEAD.type===K.Branch||i.HEAD.type===K.RemoteBranch)return i.HEAD.name}o(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==K.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const a=i.HEAD.name;return a===void 0||a.startsWith("refs/heads/")?a:`refs/heads/${a}`}o(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,a,s=P.timeout){const c=await i.getMetadata(a),u=Ti.externalIndexUri(i,c),d=t.getIndexBranchName(c);if(!(u===void 0||d===void 0))return P.getIndexedTip(u,d,{authentication:i.getAuthentication(a)},s)}o(r,"getIndexedTip"),t.getIndexedTip=r})(Ui||(Ui={}));var S;(function(t){const e=new bn(1024);function n(s,c,u){let d=e.get(u);return d!==void 0||(d=s.getCommit(c,u),e.set(u,d)),d}o(n,"get"),t.get=n;async function r(s,c,u){const d=[];for(const h of u)d.push(n(s,c,h));const f=[];for(const h of await Promise.all(d))h!==void 0&&f.push(h);return f}o(r,"all"),t.all=r;function i(s,c){const u=s.commitDate,d=c.commitDate;return u===void 0&&d===void 0?0:u===void 0?1:d===void 0?-1:u<d?1:u>d?-1:0}o(i,"sort"),t.sort=i;function a(s){const c=s.authorName!==void 0?`  \u2022  ${s.authorName}`:"",u=s.commitDate!==void 0?`  \u2022  ${Zn(s.commitDate,{ago:!0})}`:"",d=s.branchName!==void 0?` - ${s.branchName}`:"",f=s.tags!==void 0?typeof s.tags=="string"?`  \u2022  ${s.tags}`:`  \u2022  ${s.tags.join(" ")}`:"";return{author:c,date:u,branch:d,tag:f}}o(a,"getCommitInfo"),t.getCommitInfo=a})(S||(S={}));var g;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(g||(g={}));var E;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}o(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}o(n,"getBranchName")})(E||(E={}));var P;(function(t){t.timeout=5*60*1e3;const e=new bn(32),n=new bn(32);async function r(h,p,C,Q=t.timeout){const A=await i(h,p,C,Q);if(!(A===void 0||A.length===0))return A[0]}o(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,p,C,Q=t.timeout){const A=c(h,p);let Y=e.get(A);if(Y===void 0||Y!==void 0&&Date.now()-Y.time>Q){const we=me.getAllWorkspaceSnapshots(h,C,p);Y={time:Date.now(),promise:we,snapshots:void 0},e.set(A,Y)}if(Y.snapshots!==null){if(Y.snapshots===void 0){let we=await Y.promise;if(we===void 0){Y.snapshots=null;return}we.sort((ie,De)=>De.creationDate.getTime()-ie.creationDate.getTime()),we=we.filter(ie=>ie.state===5||ie.state===3),Y.snapshots=we}return Y.snapshots}}o(i,"all"),t.all=i;async function a(h,p,C,Q,A=t.timeout){const Y=s(h,p);let we=n.get(Y);if(we===null)return;if(we!==void 0)return we;const ie=c(h,C),De=e.get(ie);if(De!==void 0&&Date.now()-De.time<=A){if(De.snapshots===null)return;const Ie=De.snapshots!==void 0?De.snapshots:await i(h,C,Q);if(Ie!==void 0){for(const Ke of Ie)if(Ke.commitId===p)return n.set(Y,Ke),Ke}return}if(we=await me.getWorkspaceSnapshot(p,Q),we===void 0){n.set(Y,null);return}return n.set(Y,we),we}o(a,"single"),t.single=a;function s(h,p){return`${h.toString()}/${p}`}o(s,"getSingleCacheKey");function c(h,p){return p!==void 0?`${p}\\${h.toString()}`:h.toString()}o(c,"getAllCacheKey");async function u(h,p,C,Q=t.timeout){return await a(h,p,void 0,C,Q)!==void 0}o(u,"exists"),t.exists=u;async function d(h,p,C,Q=t.timeout){return await i(h,p,C,Q)!==void 0}o(d,"branch"),t.branch=d;async function f(h,p,C){const Q=new Map(C.map(we=>[we.commitId,we])),A=await S.all(h,p.uri,C.map(we=>we.commitId));if(A.length===0)return;const Y=[];for(const we of A){const ie=Q.get(we.hash);ie!==void 0&&Y.push({...ie,commit:we})}if(Y.length!==0)return Y}o(f,"resolve"),t.resolve=f})(P||(P={}));var ae;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}o(e,"create"),t.create=e})(ae||(ae={}));var me;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api",r=10*1e3;function i(Ie,Ke){const Qe=setTimeout(()=>{Ie.cancel()},Ke);return{dispose:()=>clearTimeout(Qe)}}o(i,"timeout");async function a(Ie,Ke,Qe,it){var Ye;const Pt=await St(Ie,{method:"POST",body:JSON.stringify(Ke),headers:{"Content-Type":"application/json",...(await Qe.authentication).getRichNavigationHeaders(),"x-correlation-id":(Ye=Qe.correlationId)!=null?Ye:Ot()}},it);if(!!Pt.ok)return Pt.json()}o(a,"postRequest");async function s(Ie,Ke,Qe,it){const Ye=await St(Ie,{method:"POST",body:Ke,headers:(await Qe.authentication).getRichNavigationHeaders()},it);if(!!Ye.ok)return await Ye.json()}o(s,"postForm");function c(Ie,Ke){return`${n}/${e}/HttpLanguageService/${Ie}/${Ke}`}o(c,"makeRequestUrl");async function u(Ie,Ke){const Qe=new l.CancellationTokenSource,it=i(Qe,r);try{const Ye=await St(`${n}/${e}/WorkspaceSnapshot?commitId=${Ie}`,{headers:(await Ke.authentication).getRichNavigationHeaders()},Qe.token);if(Ye.ok){const Pt=await Ye.json();return{workspaceId:Pt.workspaceId,snapshotId:Pt.snapshotId,state:Pt.state,commitId:Ie.toLowerCase(),branchName:void 0,creationDate:new Date}}return}catch(Ye){if(Ye instanceof l.CancellationError){J.log(`RichNav request getWorkspaceSnapshot timed out after ${r/1e3} seconds`);return}throw Ye}finally{it.dispose()}}o(u,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=u;async function d(Ie,Ke,Qe){const it=new Gn;it.append("uriString",Ie.toString(!0)),Qe!==void 0&&it.append("branchName",Qe);const Ye=new l.CancellationTokenSource,Pt=i(Ye,r);try{const Zt=await s(`${n}/${e}/WorkspaceSnapshot/all`,it,Ke,Ye.token);return Zt===void 0?void 0:Zt.map(E.asWorkspaceSnapshot)}catch(Zt){Zt instanceof l.CancellationError?J.log(`RichNav request getAllWorkspaceSnapshots timed out after ${r/1e3}  seconds`):J.error(Zt);return}finally{Pt.dispose()}}o(d,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=d;async function f(Ie,Ke,Qe){const it=new Gn;it.append("uriString",Ie.toString(!0)),Qe!==void 0&&it.append("branchName",Qe);const Ye=new l.CancellationTokenSource,Pt=i(Ye,r);try{const Zt=await s(`${n}/${e}/WorkspaceSnapshot/latest`,it,Ke,Ye.token);return Zt===void 0?void 0:E.asWorkspaceSnapshot(Zt)}catch(Zt){Zt instanceof l.CancellationError?J.log(`RichNav request getLatestWorkspaceSnapshot timed out after ${r/1e3}  seconds`):J.error(Zt);return}finally{Pt.dispose()}}o(f,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=f;async function h(Ie,Ke,Qe,it){try{return a(c(Ie,"textDocument/capabilities"),Ke,Qe,it)}catch(Ye){J.error(Ye);return}}o(h,"capabilities"),t.capabilities=h;async function p(Ie,Ke,Qe,it){try{return a(c(Ie,"textDocument/hover"),Ke,Qe,it)}catch(Ye){J.error(Ye);return}}o(p,"provideHover"),t.provideHover=p;async function C(Ie,Ke,Qe,it){try{return a(c(Ie,"textDocument/definition"),Ke,Qe,it)}catch(Ye){J.error(Ye);return}}o(C,"provideDefinition"),t.provideDefinition=C;async function Q(Ie,Ke,Qe,it){try{return a(c(Ie,"textDocument/declaration"),Ke,Qe,it)}catch(Ye){J.error(Ye);return}}o(Q,"provideDeclaration"),t.provideDeclaration=Q;async function A(Ie,Ke,Qe,it){try{return a(c(Ie,"textDocument/typeDefinition"),Ke,Qe,it)}catch(Ye){J.error(Ye);return}}o(A,"provideTypeDefinition"),t.provideTypeDefinition=A;async function Y(Ie,Ke,Qe,it){try{return a(c(Ie,"textDocument/references"),Ke,Qe,it)}catch(Ye){J.error(Ye);return}}o(Y,"provideReferences"),t.provideReferences=Y;async function we(Ie,Ke,Qe,it){try{return a(c(Ie,"textDocument/foldingRange"),Ke,Qe,it)}catch(Ye){J.error(Ye);return}}o(we,"providerFoldingRanges"),t.providerFoldingRanges=we;async function ie(Ie,Ke,Qe,it){if(Ke=="")return;const Ye=await St(`${n}/${e}/Search/${Ie}/${Ke}`,{headers:(await Qe.authentication).getRichNavigationHeaders()},it);if(Ye.ok)return await Ye.json()}o(ie,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=ie;async function De(Ie,Ke,Qe){const it=l.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${Ie}/${Ke}/assets/designtime`,query:`id=${Qe}`});try{const Ye=new l.CancellationTokenSource,Pt=await St(it.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}},Ye.token);return Pt.ok?Pt.text():void 0}catch(Ye){J.error(Ye);return}}o(De,"getDesignTimeFileContent"),t.getDesignTimeFileContent=De})(me||(me={}));class We{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var a;for(const s of i.added){const c=s.uri,u=be.getIndexMemento(c);if(u!==void 0){const d=Ti.externalIndexUri(this.providerService,c);d!==void 0&&(typeof((a=u.branch)==null?void 0:a.name)=="string"?P.all(d,u.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof u.ref=="string"&&N(u.ref)&&P.single(d,u.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(d=>{const f={},h=d.pullRequest===void 0?Ui.getIndexBranchName(d):void 0;h!==void 0?f.branch={name:h}:f.ref=d.HEAD.sha,be.setIndexMemento(c,f).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const a=i.repository.uri,s=_(a);this.metadata.delete(s),this.getIndexMetadata(a).catch(void 0)})),this.disposable=l.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=ee.decode(e);if(i!==void 0){if(i.type===M.Latest)return r===he.Branch?this.getIndexedTip(e,n?0:P.timeout):void 0;if(i.type===M.SHA){const s=Ti.externalIndexUri(this.providerService,e);return s===void 0?void 0:await P.exists(s,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:P.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===L.Latest)return this.getIndexedTip(e,n?0:P.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=_(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=P.timeout){const r=await Ui.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new Ue(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=Ti.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),a=this.providerService.getModeRefType(e,i),s=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),u=s.pullRequest===void 0?Ui.getIndexBranchName(s):void 0,d=await P.single(r,s.HEAD.sha,u,{authentication:this.providerService.getAuthentication(e)});if(s.HEAD.type===K.Branch||s.HEAD.type===K.RemoteBranch){const C=ee.decode(e);if(C!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),d===void 0?C.type===M.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await P.branch(r,u,{authentication:this.providerService.getAuthentication(e)})?{type:kt.Indexed}:{type:kt.NotIndexed}):{type:kt.NotIndexed}:C.type===M.Latest||C.type===M.SHA?{type:kt.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}:{type:kt.Match,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await a),p=this.providerService.getVirtualUriMetadata(e);if((h.index===L.Latest||h.index===L.Match)&&d!==void 0)return{type:kt.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(h.index===L.TipPlusLatest&&p.provider.id==="github"){if(d!==void 0&&d.commitId===s.HEAD.sha)return{type:kt.Active,sha:Promise.resolve(d.commitId),branch:{name:d.branchName}};if(s.HEAD.type===K.Branch&&u!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const C=await P.all(r,u,{authentication:c});if(C!==void 0&&C.length>0)return{type:kt.Active,sha:this.computeClosestIndex(e,s.HEAD.sha,C),branch:{name:u}}}}return d!==void 0?{type:kt.Indexed}:s.HEAD.type===K.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),u!==void 0&&await P.branch(r,u,{authentication:c}))?{type:kt.Indexed}:{type:kt.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(f=>f.commitId)),a=await this.providerService.getCommits(e,{ref:n,limit:100});if(a===void 0)return;let s;for(const f of a.commits)if(f.hash===n){s=f;break}if(s===void 0)return;const c=new Map(a.commits.map(f=>[f.hash,f])),u=[s];let d;for(;u.length>0;){for(d=u.shift();d!==void 0&&!i.has(d.hash);)if(d.parents.length>0){for(let f=1;f<d.parents.length;f++){const h=c.get(d.parents[f]);h!==void 0&&u.push(h)}d=c.get(d.parents[0])}if(d!==void 0)break}return d!==void 0?d.hash:void 0}async getSnapshots(e,n){const r=Ti.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await P.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const a=[];for(const s of i)s.branchName!==void 0&&a.push({workspaceId:s.workspaceId,snapshotId:s.snapshotId,hash:s.commitId,branch:{name:s.branchName}});return a}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),a=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:s}=n,c=[];if(r!==void 0){let u;const d=[`${U(s.sha)}`];if(r.type===kt.Active){const f=await r.sha;a.index===L.Latest||a.index===L.Match?(u=a.display===H.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",d.push(l.l10n.t(`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):a.index===L.TipPlusLatest&&(u="$(layers-dot)",f!==n.HEAD.sha?d.push(l.l10n.t("The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):d.push(l.l10n.t("The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===kt.Match?(u="$(layers)",d.push(l.l10n.t(`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===kt.Indexed&&(u="$(layers)",d.push(l.l10n.t(`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));u&&c.push(gr({command:"remoteHub.indexMode.select",title:u,tooltip:d.join(`
`),arguments:[{uri:e}]}))}return c}}o(We,"RichNavIndexProvider");var je;(function(t){let e;function n(){return e=l.window.createStatusBarItem(l.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,l.window.onDidChangeActiveTextEditor(()=>{u()}),l.commands.registerCommand("remoteHub.indexMode.select",f=>{d(f).catch(h=>J.log("Selecting index mode failed.",h))})]}o(n,"create"),t.create=n;const r=new Map;function i(f){r.set(f.key(),f)}o(i,"addService"),t.addService=i;function a(f){r.delete(f.key())}o(a,"removeService"),t.removeService=a;function s(f){return r.get(_(f))}o(s,"getService");async function c(f){for(const h of r.values())if(await h.handles(f))return h}o(c,"getServiceForDocument");async function u(){try{let f=o(function(Q){const A=Q.lastIndexOf("/");return A<=0?Q:Q.substr(A+1)},"basename");const h=l.window.activeTextEditor;if(h===void 0){e.hide();return}const p=await c(h.document);if(p===void 0){e.hide();return}const C=await p.isDocumentIndexed(h.document);C===Hn.Indexed?(e.text="$(compass)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",f(h.document.uri.path))),e.show()):C===Hn.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new l.MarkdownString(l.l10n.t("The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",f(h.document.uri.path))),e.show()):e.hide()}catch(f){e.hide()}}o(u,"updateStatusBarItem"),t.updateStatusBarItem=u;async function d(f){var h;const p=f.uri,C=s(p);if(C===void 0)return;const[Q,A,Y,we]=await Promise.all([C.getBranchName(),C.getMetadata(),C.getIndexMetadata(),C.getModeRefType(p)]);if(Y===void 0||!kt.hasIndex(Y.type))return;let ie,De=!1;const Ie=ee.decode(p);(Ie==null?void 0:Ie.type)===M.Latest||(Ie==null?void 0:Ie.type)===M.SHA?(De=!0,ie={display:H.Browse,index:Ie.type===M.Latest?L.Latest:L.Match}):ie=(h=C.getCurrentIndexMode())!=null?h:C.getModeConfig(p,we);const Ke=C.getUriMetadata(),Qe=l.l10n.t("{0} current","$(check)"),it={indexKind:"disable",label:l.l10n.t("Disable"),description:ie.index===L.None?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Disable rich navigation.")};let Ye,Pt;if(we===he.PullRequestBranch||we===he.PullRequestRemoteBranch||we===he.Commit||we===he.Tag){const Zt={indexKind:"match",label:l.l10n.t("Current indexed commit - readonly"),description:ie.index===L.Match&&ie.display===H.Browse?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be read-only.")},sn={indexKind:"match+writeable",label:l.l10n.t("Current indexed commit - writable"),description:ie.index===L.Match&&ie.display===H.Edit?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation only if the current commit is indexed. Files will be writable.")};let zt=Ke.provider.id==="github";zt&&(zt=A.HEAD.type===K.RemoteBranch?A.HEAD.branch.remote.accessLevel>=le.Write:!0);const dn=zt?[Zt,sn,it]:[Zt,it];Pt=await l.window.showQuickPick(dn,{placeHolder:"Pick a rich navigation mode"})}else if(we===he.Branch||we===he.RemoteBranch){const Zt={indexKind:"latest",label:l.l10n.t("Latest indexed commit"),description:ie.index===L.Latest?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation on the latest indexed commit. Files will be read-only.")},sn={indexKind:"tip+latest",label:l.l10n.t("Current commit & latest index"),description:ie.index===L.TipPlusLatest?`  \u2022  ${Qe}`:void 0,detail:l.l10n.t("Enable rich navigation on the current commit using the latest index. Files will be writeable.")},zt=Ke.provider.id==="github"?[Zt,sn,it]:[Zt,it];Pt=await l.window.showQuickPick(zt,{placeHolder:l.l10n.t("Pick a rich navigation mode for branch {0}",Q)})}if(Pt!==void 0&&(Pt.indexKind==="disable"?Ye={display:H.Edit,index:L.None}:Pt.indexKind==="match"?Ye={display:H.Browse,index:L.Match}:Pt.indexKind==="match+writeable"?Ye={display:H.Edit,index:L.Match}:Pt.indexKind==="tip+latest"?Ye={display:H.Edit,index:L.TipPlusLatest}:Pt.indexKind==="latest"&&(Ye={display:H.Browse,index:L.Latest}),Ye!==void 0&&!te.equals(ie,Ye))){if(await C.hasChanges()&&Ye.display===H.Browse){await l.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await C.updateIndexMode(Ye),De){const Zt=await C.getNonIndexedWorkspaceDescriptor();Zt!==void 0&&ut(C.getProviderService(),Zt)}}}o(d,"toggleIndexMode")})(je||(je={}));class bt{constructor(e){this.telemetryService=e}static createStatus(){return je.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===kt.NotIndexed))return()=>new Mn(e,n,this.telemetryService)}}o(bt,"RichNavServiceProvider");var mt;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const a=e.exec(i);if(a===null||a.length!==5)return;const s={v:1,w:a[1],s:a[2],a:a[3]};return l.Uri.from({scheme:tn.scheme,authority:I(JSON.stringify(s)),path:a[4]})}o(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==tn.scheme)return;let a;try{return a=JSON.parse(w(i.authority)),a===void 0?void 0:{workspaceId:a.w,snapshotId:a.s,assetId:`${a.a}${i.path}`}}catch{return}}o(r,"toRichNavComponents"),t.toRichNavComponents=r})(mt||(mt={}));const Ft=o(class{constructor(){this._onDidChangeFile=new l.EventEmitter,this.cache=new bn(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return Ft.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return{type:l.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:l.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw l.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw l.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw l.FileSystemError.NoPermissions()}delete(t,e){throw l.FileSystemError.NoPermissions()}rename(t,e,n){throw l.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==Ft.scheme)return;const n=mt.toRichNavComponents(t);if(n===void 0)return;const r=await me.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let tn=Ft;tn.scheme="vsck-fs",tn.emptyDisposable={dispose:()=>{}};var Hn;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(Hn||(Hn={}));const Xt=o(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const a=this.localCapabilities.get(t);return(a==null?void 0:a[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=o((a=!1)=>{const s=this.repository.uri;a||(this.metadata=this.providerService.getMetadata(s),this.indexMetadata=this.providerService.getIndexMetadata(s)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(s,this.metadata)]).then(async c=>{var u,d;const[f,h,p]=this.currentlyResolved,[C,Q,A]=c,Y=this.providerService.getModeConfig(s,A);if(f!==void 0&&h!==void 0&&p!==void 0&&f.HEAD.sha===C.HEAD.sha&&Q!==void 0&&h.type===Q.type&&p.index===Y.index&&p.display===Y.display){const ie=(h==null?void 0:h.type)===kt.Active?await h.sha:void 0,De=(Q==null?void 0:Q.type)===kt.Active?await Q.sha:void 0;if(ie===De)return}const we={newDisplayMode:Y.display,newIndexMode:Y.index,newIndexType:(Q==null?void 0:Q.type)===void 0?"undefined":kt[Q==null?void 0:Q.type],currentDisplayMode:(u=p==null?void 0:p.display)!=null?u:"undefined",currentIndexMode:(d=p==null?void 0:p.index)!=null?d:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":kt[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",we),this.currentlyResolved=[C,Q,Y];for(const ie of this.registeredFeatures.values())ie.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,hn.isActive(Q)){const ie=Ti.externalIndexUri(this.providerService,C),De=await Q.sha;if(ie!==void 0&&De!==void 0){const Ie=await P.single(ie,De,Ui.getIndexBranchName(C),{authentication:this.providerService.getAuthentication(s)});Ie!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:Ie.snapshotId}),this.workspaceSnapshot=Ie,this.documentListeners=this.installDocumentListeners(),((Y==null?void 0:Y.display)===H.Edit||C.HEAD.sha!==De)&&(this.mapper=new st(this.providerService,s,De,C.HEAD.sha)))}}await je.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new bn(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(a=>{_(a.repository.uri)===_(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(a=>{for(const s of a)if(_(s)===_(this.repository.uri)){r();break}})),this.environmentListeners=l.Disposable.from(...i),r(!0),je.addService(this),this.indexMetadata.then(async a=>{var s;const c=this.repository.uri;let u=!1;const d=ee.decode(this.repository.uri);if(d!==void 0&&a!==void 0&&(d.type===M.Latest&&a.type!==kt.Active||d.type===M.SHA&&(a.type!==kt.Active||await a.sha!==d.sha))&&(u=!0),!u){await this.metadata;const f=await this.providerService.getModeRefType(c,this.metadata),h=(s=this.currentlyResolved[2])!=null?s:this.providerService.getModeConfig(c,f,!0);h!==void 0&&h.display===H.Browse&&a!==void 0&&h.index!==L.None&&a.type!==kt.Active?u=!0:(a==null?void 0:a.type)===kt.Active&&await a.sha===void 0&&((h==null?void 0:h.display)===H.Browse,u=!0)}u&&l.window.showWarningMessage(l.l10n.t("The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Xt.fileSystemProvider===void 0&&(Xt.fileSystemProvider=new tn,l.workspace.registerFileSystemProvider(tn.scheme,Xt.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(a=>setTimeout(a,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===L.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===L.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await be.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return _(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),je.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Bn.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return Ui.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:He.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===kt.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=Ti.externalIndexUri(this.providerService,t),n=Ui.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await P.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await S.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=Ti.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([S.get(this.providerService,this.repository.uri,t),P.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=o(async n=>{const r=n.uri.scheme;if(Bn.scheme!==r&&tn.scheme!==r)return;const i=n.uri.toString();if(r===Bn.scheme&&!i.startsWith(this.repositoryRoot)||r===tn.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const a=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(a===void 0)return;let s=this.capabilitiesCache.get(i);if(s!==null){if(s===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),s=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,s===void 0?null:s)}s===void 0||!l.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,s,a)}},"openHandler");return t.push(l.workspace.onDidOpenTextDocument(e)),l.workspace.textDocuments.forEach(e),t.push(l.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),l.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,s=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],u=new Promise((A,Y)=>{const we=`/${r.snapshotId}/source/`;this.metadata.then(ie=>{A(Mo(De=>{const Ie=l.Uri.parse(De);if(ie===void 0)return Ie;try{if(Ie.scheme==="vsck"&&Ie.authority===r.workspaceId&&Ie.path.startsWith(we))return this.repository.createRelativeUri(Ie.path.substr(we.length));const Ke=mt.toVSCode(De);return Ke!==void 0?(this.knownDesignTimeFiles.add(Ke.toString()),Ke):Ie}catch(Ke){return Ie}}))},Y)}),d=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function f(A){const Y=d.exec(A);return Y===null||Y.length===2}o(f,"designTimeFilter");function h(A){if(A==null)return A;if(Array.isArray(A)){if(A.length===0)return[];const Y=A[0];return typeof Y.uri=="string"?A.filter(De=>f(De.uri)):typeof Y.targetUri=="string"?A.filter(De=>f(De.targetUri)):[]}return d.exec(A.uri)===null?A:void 0}o(h,"filterDesignTimeFiles");async function p(A,Y,we){var ie,De,Ie;if(we==null||A===void 0)return we;const Ke=new Map(l.workspace.textDocuments.map(it=>[it.uri.toString(!0),it]));if(Array.isArray(we)){const it=[],Ye=[];if(we.length===0)return[];for(const Pt of we){const Zt=Pt;if(Zt.uri instanceof l.Uri){const sn=await A.mapRangeFromIndexToCode((ie=Ke.get(Zt.uri.toString()))!=null?ie:Zt.uri,Zt.range);sn!==void 0&&it.push(new l.Location(Zt.uri,sn))}else{const sn=Pt,zt=(De=Ke.get(sn.targetUri.toString()))!=null?De:sn.targetUri,dn=sn.originSelectionRange?await A.mapRangeFromIndexToCode(Y,sn.originSelectionRange):void 0;if(dn!==void 0||sn.originSelectionRange===void 0){const Rr=await A.mapRangeFromIndexToCode(zt,sn.targetRange);if(Rr!==void 0){const Mi=sn.targetSelectionRange?await A.mapRangeFromIndexToCode(zt,sn.targetSelectionRange):void 0;(Mi!==void 0||sn.targetSelectionRange===void 0)&&Ye.push({targetUri:sn.targetUri,targetRange:Rr,targetSelectionRange:Mi,originSelectionRange:dn})}}}}return it.length>0?it:Ye}const Qe=await A.mapRangeFromIndexToCode((Ie=Ke.get(we.uri.toString()))!=null?Ie:we.uri,we.range);if(Qe!==void 0)return new l.Location(we.uri,Qe)}o(p,"mapLocations");const C=o(A=>({authentication:this.providerService.getAuthentication(A.uri),correlationId:Ot()}),"getRestApiOptions"),Q=o((A,Y)=>{const we={method:A,correlationId:Y.correlationId};this.telemetryService.publicLog2("codex.restAPICall",we)},"sendTelemetry");Xt.registerCapability(i,"hoverProvider",e)&&c.push(l.languages.registerHoverProvider(s,{provideHover:async(A,Y,we)=>{const ie=await this.createTextDocumentPositionParams(A,Y);if(ie===void 0)return;const De=C(A);return Q("codex.provideHover",De),(await u).asHover(await me.provideHover(n,ie,De,we))}})),Xt.registerCapability(i,"definitionProvider",e)&&c.push(l.languages.registerDefinitionProvider(s,{provideDefinition:async(A,Y,we)=>{const ie=await this.createTextDocumentPositionParams(A,Y);if(ie===void 0)return;const De=C(A);return Q("codex.provideDefinition",De),p(this.mapper,A,(await u).asDefinitionResult(h(await me.provideDefinition(n,ie,De,we))))}})),Xt.registerCapability(i,"declarationProvider",e)&&c.push(l.languages.registerDeclarationProvider(s,{provideDeclaration:async(A,Y,we)=>{const ie=await this.createTextDocumentPositionParams(A,Y);if(ie===void 0)return;const De=C(A);return Q("codex.provideDeclaration",De),p(this.mapper,A,(await u).asDeclarationResult(h(await me.provideDeclaration(n,ie,De,we))))}})),Xt.registerCapability(i,"typeDefinitionProvider",e)&&c.push(l.languages.registerTypeDefinitionProvider(s,{provideTypeDefinition:async(A,Y,we)=>{const ie=await this.createTextDocumentPositionParams(A,Y);if(ie===void 0)return;const De=C(A);return Q("codex.provideTypeDefinition",De),p(this.mapper,A,(await u).asDefinitionResult(h(await me.provideTypeDefinition(n,ie,De,we))))}})),Xt.registerCapability(i,"referencesProvider",e)&&c.push(l.languages.registerReferenceProvider(s,{provideReferences:async(A,Y,we,ie)=>{const De=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(A,Y):Y;if(De===void 0)return;const Ie={position:{line:De.line,character:De.character},textDocument:{uri:this.createRichNavDocumentUri(A.uri).toString(!0)},context:{includeDeclaration:we.includeDeclaration}},Ke=C(A);return Q("codex.provideReferences",Ke),p(this.mapper,A,(await u).asReferences(h(await me.provideReferences(n,Ie,Ke,ie))))}})),Xt.registerCapability(i,"foldingRangeProvider",e)&&c.push(l.languages.registerFoldingRangeProvider(s,{provideFoldingRanges:async(A,Y,we)=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(A))return;const ie=C(A);return Q("codex.provideFoldingRanges",ie),(await u).asFoldingRanges(await me.providerFoldingRanges(n,this.createTextDocumentParams(A.uri),ie,we))}})),Xt.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(l.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async(A,Y)=>{const we=C(t),ie=await me.provideWorkspaceSymbols(n,A,we,Y);if(ie!==void 0)return(await u).asSymbolInformations(ie)}})),this.registeredFeatures.set(t.uri.toString(),l.Disposable.from(...c)),je.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n===void 0)return;const r=new l.CancellationTokenSource;return(e=await me.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)},r.token))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===tn.scheme){const r=mt.toRichNavComponents(t);return r===void 0?t:l.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return l.Uri.file(n.substr(e.length))}},"_RichNavService");let Mn=Xt;Mn.localCapabilities=new Map([["javascript",Object.assign(ae.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(ae.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(ae.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(ae.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),Mn.disabledCapabilities=new Map([["javascript",Object.assign(ae.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(ae.create(),{declarationProvider:!0})],["typescript",Object.assign(ae.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(ae.create(),{declarationProvider:!0})]]);var _r=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),Be=o((t,e,n)=>(_r(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),lr=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),qn=o((t,e,n,r)=>(_r(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),er;class Er{constructor(e){lr(this,er,void 0),qn(this,er,e)}async provideEditSessionIdentity(e,n){await Ur(Be(this,er),e.uri);const r=Be(this,er).getRepository(e.uri);if(!r||n.isCancellationRequested)return null;const{uri:i,ref:a}=await Be(this,er).getRepositoryContext(r,"http"),s=await Be(this,er).getMetadata(r.uri);return JSON.stringify({remote:i!=null?i:s.cloneUrl.http,ref:a,sha:s.HEAD.sha})}provideEditSessionIdentityMatch(e,n){try{const r=this.normalizeEditSessionIdentity(e),i=this.normalizeEditSessionIdentity(n);return r.remote===i.remote&&r.ref===i.ref&&r.sha===i.sha?l.EditSessionIdentityMatch.Complete:r.remote===i.remote&&r.ref===i.ref&&r.sha!==i.sha?l.EditSessionIdentityMatch.Partial:l.EditSessionIdentityMatch.None}catch(r){return l.EditSessionIdentityMatch.Partial}}normalizeEditSessionIdentity(e){var n,r,i;let{remote:a,ref:s,sha:c}=JSON.parse(e);return a=(i=(r=(n=Be(this,er)).getHttpsCloneUri)==null?void 0:r.call(n,a))!=null?i:typeof a=="string"&&a.endsWith(".git")?a.slice(0,a.length-4):a,{remote:a,ref:s,sha:c}}}o(Er,"EditSessionIdentityProvider"),er=new WeakMap;var Bi=o((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),ni=o((t,e,n)=>(Bi(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),Sa=o((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),Ca=o((t,e,n,r)=>(Bi(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),zr;class so{constructor(e){Sa(this,zr,void 0),Ca(this,zr,e),this.registerApiCommands()}registerApiCommands(){l.commands.registerCommand("remoteHub.api.getRepositoryContext",async e=>{if(!e)throw new Error("Please specify a repository uri.");await Ur(ni(this,zr),e);const n=ni(this,zr).getRepository(e);if(!n)throw new Error(`Unable to acquire repository context for ${e.toString(!0)}.`);return ni(this,zr).getRepositoryContext(n)})}async getMetadata(e){const n=ni(this,zr).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:a}=await ni(this,zr).getMetadata(e);return{type:a.type,name:a.name,revision:a.sha}}}}getProvider(e){return ni(this,zr).getRegisteredProvider(e)}getProviderUri(e){return x.getProviderUri(e)}getProviderRootUri(e){return ni(this,zr).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Bn.scheme&&ni(this,zr).hasProvider(e,n)}getVirtualUri(e){return x.getVirtualUri(e)}getVirtualWorkspaceUri(e){return ni(this,zr).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==x.scheme)return!1;await Ur(ni(this,zr),e);const n=ni(this,zr).getProviderRootUri(e);if(n.scheme!=="github")return!1;const r=new Ue(`RemoteHub.loadWorkspaceContents(${n.toString()})`,{log:!1,logLevel:l.LogLevel.Debug}),i=await ni(this,zr).loadWorkspaceContents(n);return r.stop(),i}}o(so,"ExtensionApi"),zr=new WeakMap;var lo=Object.defineProperty,xa=Object.getOwnPropertyDescriptor,ca=o((t,e,n,r)=>{for(var i=r>1?void 0:r?xa(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&lo(e,n,i),i},"fs_decorateClass");const Fa=l.FileSystemError.FileNotFound().code;class qi{constructor(e){this.providerService=e,this._onDidChangeFile=new l.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=l.Disposable.from(l.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),l.workspace.registerFileSearchProvider(this.scheme,this),l.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case D.Created:return{type:l.FileChangeType.Created,uri:i.uri};case D.Changed:return{type:l.FileChangeType.Changed,uri:i.uri};case D.Deleted:return{type:l.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Bn.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(J.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=x.getOpenUris(this.scheme,e);for(const[i,a]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(s=>Z(a,s))&&(this.implicitlyWatchedUris.delete(i),n.set(i,a));J.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(_(i),i);const r=[...n.values()].map(i=>({type:l.FileChangeType.Changed,uri:i}));setTimeout(()=>{J.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=_(e);this.watchedUris.set(r,e);const i=Ur(this.providerService,e).then(()=>this.providerService.watch(x.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new Ue(`fs.stat(${e.toString()})`);await Ur(this.providerService,e);const r=this.providerService.getVirtualRootUri(e),i=r.toString();this.syncedRootUris.has(i)||(this.syncedRootUris.add(i),await this.providerService.fetchOrSync(r));let a;try{if(this.providerService.changeStoreMaybeHasChanges(r,e)!==!1){if(n.logStep("ChangeStore query"),a=await this.providerService.changeStoreStat(e),a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(_(e),e);return a=await this.providerService.stat(x.getProviderUri(e)),a}finally{a===void 0&&this.implicitlyWatchedUris.delete(_(e)),n.stop()}}async readDirectory(e){const n=new Ue(`fs.readDirectory(${e.toString()})`);await Ur(this.providerService,e),this.implicitlyWatchedUris.set(_(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(x.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new Ue(`fs.createDirectory(${e.toString()})`);await Ur(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw J.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new Ue(`fs.readFile(${e.toString()})`),r=_(e);let i;await Ur(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const a=await this.providerService.changeStoreReadFile(e);if(a!==void 0)return a;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(x.getProviderUri(e)),i}catch(a){throw a instanceof fn&&Kt.showProviderNotFoundMessage(a),a}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new Ue(`fs.writeFile(${e.toString()})`,{},n.length,r);await Ur(this.providerService,e);try{let a;try{if(a=await this.stat(e),!r.overwrite)throw l.FileSystemError.FileExists()}catch(s){if(s instanceof l.FileSystemError&&s.code===Fa){if(!r.create)throw l.FileSystemError.FileNotFound(e)}else throw s}try{if(a===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let s;try{s=await this.providerService.readFile(x.getProviderUri(e))}catch(c){if(c instanceof l.FileSystemError&&c.code===Fa)s=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,s)}}catch(s){throw J.error(s,i.context),s}}catch(a){throw a instanceof fn&&Kt.showProviderNotFoundMessage(a),a}finally{i.stop()}}async delete(e,n){const r=new Ue(`fs.delete(${e.toString()})`,{},n);await Ur(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case l.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw l.FileSystemError.NoPermissions()}}catch(i){throw J.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new Ue(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,a])=>a===l.FileType.Directory))throw l.FileSystemError.NoPermissions();for(const[a,s]of i)s===l.FileType.Directory?await this.deleteDirectory(l.Uri.joinPath(e,a),n):await this.providerService.changeStoreDeleteFile(l.Uri.joinPath(e,a))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw J.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new Ue(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await Ur(this.providerService,e);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case l.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw J.error(a,i.context),a}finally{i.stop()}}async renameDirectory(e,n,r){const i=new Ue(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(a){throw J.error(a,i.context),a}finally{i.stop()}}async copy(e,n,r){const i=new Ue(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case l.FileType.File:{const s=await this.readFile(e);await this.writeFile(n,s,{create:!0,overwrite:r.overwrite});break}case l.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw l.FileSystemError.NoPermissions()}}catch(a){throw J.error(a,i.context),a}finally{i.stop()}}async copyDirectory(e,n,r){const i=new Ue(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw l.FileSystemError.FileExists();try{await this.createDirectory(n);const a=await this.readDirectory(e);for(const[s,c]of a)c===l.FileType.Directory?await this.copyDirectory(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r):await this.copy(l.Uri.joinPath(e,s),l.Uri.joinPath(n,s),r)}catch(a){throw J.error(a,i.context),a}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof l.FileSystemError&&n.code===Fa)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const a=new Ue(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:l.LogLevel.Debug});await Ur(this.providerService,n.folder);let s;try{return s=await this.providerService.provideFileSearchResults(e,{...n,folder:x.getProviderUri(n.folder)},r),s==null?void 0:s.map(c=>x.getVirtualUri(c))}catch(c){throw J.error(c,a.context),c}finally{a.stop({suffix:` \u2022 ${(i=s==null?void 0:s.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await Ur(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:x.getProviderUri(n.folder)},{report:a=>r.report({...a,uri:x.getVirtualUri(a.uri)})},i)}}o(qi,"ChangeTrackingFileSystem"),ca([vt()],qi.prototype,"stat",1),ca([vt()],qi.prototype,"readDirectory",1),ca([vt()],qi.prototype,"readFile",1);const ba=o(class{constructor(t){this.providerService=t,this.lock=new pt("PendingRepositoryOpenActions"),this.disposable=l.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const r=be.getEffective("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:s}=await this.providerService.getMetadata(e.uri);if(s===void 0||s.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),u=c.length===1?l.l10n.t("You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):l.l10n.t("You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let d="";s.behind===1?d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,s.behind.toString()):s.behind>1&&(d=l.l10n.t(`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,s.behind.toString()));const f=[u,d].join(`

`),h={title:l.l10n.t("Sync")},p={title:l.l10n.t("Continue Without Syncing"),isCloseAffordance:!0},C={title:l.l10n.t("Don't Show Again")},Q=await l.window.showInformationMessage(f,{modal:!0},h,p,C);switch(Q==null?void 0:Q.title){case h.title:await l.commands.executeCommand("remoteHub.sync");break;case C.title:await be.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){J.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){J.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){J.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,a;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),a=Number(r.groups.end),isNaN(a)&&(a=void 0),n=n.substring(0,r.index));const s=l.Uri.joinPath(t,n);let c;try{c=await l.workspace.fs.stat(s)}catch{}if((c==null?void 0:c.type)===l.FileType.Directory)l.commands.executeCommand("revealInExplorer",s);else{let u;i!==void 0&&(u={selection:new l.Range(Number(i)-1,0,a!=null?a:i,0)}),l.commands.executeCommand("vscode.open",s,u)}}}}setChangesetToApply(t,e){return J.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return J.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){J.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){J.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${_(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&k(r)?l.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return J.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:ba.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let Na=ba;Na.storageSchemaVersion=1;function wi(){}o(wi,"Diff"),wi.prototype={diff:o(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var a=this;function s(A){return i?(setTimeout(function(){i(void 0,A)},0),!0):A}o(s,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,u=e.length,d=1,f=c+u,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&p+1>=u)return s([{value:this.join(n),count:n.length}]);function C(){for(var A=-1*d;A<=d;A+=2){var Y=void 0,we=h[A-1],ie=h[A+1],De=(ie?ie.newPos:0)-A;we&&(h[A-1]=void 0);var Ie=we&&we.newPos+1<c,Ke=ie&&0<=De&&De<u;if(!Ie&&!Ke){h[A]=void 0;continue}if(!Ie||Ke&&we.newPos<ie.newPos?(Y=uo(ie),a.pushComponent(Y.components,void 0,!0)):(Y=we,Y.newPos++,a.pushComponent(Y.components,!0,void 0)),De=a.extractCommon(Y,n,e,A),Y.newPos+1>=c&&De+1>=u)return s(co(a,Y.components,n,e,a.useLongestToken));h[A]=Y}d++}if(o(C,"execEditLength"),i)o(function A(){setTimeout(function(){if(d>f)return i();C()||A()},0)},"exec")();else for(;d<=f;){var Q=C();if(Q)return Q}},"diff"),pushComponent:o(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:o(function(e,n,r,i){for(var a=n.length,s=r.length,c=e.newPos,u=c-i,d=0;c+1<a&&u+1<s&&this.equals(n[c+1],r[u+1]);)c++,u++,d++;return d&&e.components.push({count:d}),e.newPos=c,u},"extractCommon"),equals:o(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:o(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:o(function(e){return e},"castInput"),tokenize:o(function(e){return e.split("")},"tokenize"),join:o(function(e){return e.join("")},"join")};function co(t,e,n,r,i){for(var a=0,s=e.length,c=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var h=e[a-1];e[a-1]=e[a],e[a]=h}}else{if(!d.added&&i){var f=n.slice(c,c+d.count);f=f.map(function(C,Q){var A=r[u+Q];return A.length>C.length?A:C}),d.value=t.join(f)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var p=e[s-1];return s>1&&typeof p.value=="string"&&(p.added||p.removed)&&t.equals("",p.value)&&(e[s-2].value+=p.value,e.pop()),e}o(co,"buildValues");function uo(t){return{newPos:t.newPos,components:t.components.slice(0)}}o(uo,"clonePath");var Po=new wi;function ts(t,e,n){return Po.diff(t,e,n)}o(ts,"diffChars");function fo(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}o(fo,"generateOptions");var Oa=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Te=/\S/,Ct=new wi;Ct.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Te.test(t)&&!Te.test(e)},Ct.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&Oa.test(e[n])&&Oa.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function Mt(t,e,n){return n=fo(n,{ignoreWhitespace:!0}),Ct.diff(t,e,n)}o(Mt,"diffWords");function on(t,e,n){return Ct.diff(t,e,n)}o(on,"diffWordsWithSpace");var En=new wi;En.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function Nn(t,e,n){return En.diff(t,e,n)}o(Nn,"diffLines");function Wn(t,e,n){var r=fo(n,{ignoreWhitespace:!0});return En.diff(t,e,r)}o(Wn,"diffTrimmedLines");var Pr=new wi;Pr.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function Si(t,e,n){return Pr.diff(t,e,n)}o(Si,"diffSentences");var Or=new wi;Or.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Vr(t,e,n){return Or.diff(t,e,n)}o(Vr,"diffCss");function Jr(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jr=o(function(e){return typeof e},"_typeof"):Jr=o(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),Jr(t)}o(Jr,"_typeof");function ir(t){return ua(t)||dl(t)||fl(t)||hl()}o(ir,"_toConsumableArray");function ua(t){if(Array.isArray(t))return Io(t)}o(ua,"_arrayWithoutHoles");function dl(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}o(dl,"_iterableToArray");function fl(t,e){if(!!t){if(typeof t=="string")return Io(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Io(t,e)}}o(fl,"_unsupportedIterableToArray");function Io(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}o(Io,"_arrayLikeToArray");function hl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(hl,"_nonIterableSpread");var gl=Object.prototype.toString,_a=new wi;_a.useLongestToken=!0,_a.tokenize=En.tokenize,_a.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(a,s){return typeof s=="undefined"?n:s}:r;return typeof t=="string"?t:JSON.stringify(Lo(t,null,null,i),i,"  ")},_a.equals=function(t,e){return wi.prototype.equals.call(_a,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Nc(t,e,n){return _a.diff(t,e,n)}o(Nc,"diffJson");function Lo(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var a;for(a=0;a<e.length;a+=1)if(e[a]===t)return n[a];var s;if(gl.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),n.push(s),a=0;a<t.length;a+=1)s[a]=Lo(t[a],e,n,r,i);return e.pop(),n.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),Jr(t)==="object"&&t!==null){e.push(t),s={},n.push(s);var c=[],u;for(u in t)t.hasOwnProperty(u)&&c.push(u);for(c.sort(),a=0;a<c.length;a+=1)u=c[a],s[u]=Lo(t[u],e,n,r,u);e.pop(),n.pop()}else s=t;return s}o(Lo,"canonicalize");var ho=new wi;ho.tokenize=function(t){return t.slice()},ho.join=ho.removeEmpty=function(t){return t};function Oc(t,e,n){return ho.diff(t,e,n)}o(Oc,"diffArrays");function Ua(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],a=0;function s(){var d={};for(i.push(d);a<n.length;){var f=n[a];if(/^(\-\-\-|\+\+\+|@@)\s/.test(f))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(f);h&&(d.index=h[1]),a++}for(c(d),c(d),d.hunks=[];a<n.length;){var p=n[a];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(p))break;if(/^@@/.test(p))d.hunks.push(u());else{if(p&&e.strict)throw new Error("Unknown line "+(a+1)+" "+JSON.stringify(p));a++}}}o(s,"parseIndex");function c(d){var f=/^(---|\+\+\+)\s+(.*)$/.exec(n[a]);if(f){var h=f[1]==="---"?"old":"new",p=f[2].split("	",2),C=p[0].replace(/\\\\/g,"\\");/^".*"$/.test(C)&&(C=C.substr(1,C.length-2)),d[h+"FileName"]=C,d[h+"Header"]=(p[1]||"").trim(),a++}}o(c,"parseFileHeader");function u(){var d=a,f=n[a++],h=f.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),p={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};p.oldLines===0&&(p.oldStart+=1),p.newLines===0&&(p.newStart+=1);for(var C=0,Q=0;a<n.length&&!(n[a].indexOf("--- ")===0&&a+2<n.length&&n[a+1].indexOf("+++ ")===0&&n[a+2].indexOf("@@")===0);a++){var A=n[a].length==0&&a!=n.length-1?" ":n[a][0];if(A==="+"||A==="-"||A===" "||A==="\\")p.lines.push(n[a]),p.linedelimiters.push(r[a]||`
`),A==="+"?C++:A==="-"?Q++:A===" "&&(C++,Q++);else break}if(!C&&p.newLines===1&&(p.newLines=0),!Q&&p.oldLines===1&&(p.oldLines=0),e.strict){if(C!==p.newLines)throw new Error("Added line count did not match for hunk at line "+(d+1));if(Q!==p.oldLines)throw new Error("Removed line count did not match for hunk at line "+(d+1))}return p}for(o(u,"parseHunk");a<n.length;)s();return i}o(Ua,"parsePatch");function vl(t,e,n){var r=!0,i=!1,a=!1,s=1;return o(function c(){if(r&&!a){if(i?s++:r=!1,t+s<=n)return s;a=!0}if(!i)return a||(r=!0),e<=t-s?-s++:(i=!0,c())},"iterator")}o(vl,"distanceIterator");function ns(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=Ua(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],a=e.hunks,s=n.compareLine||function(Mi,Pi,oa,Fi){return Pi===Fi},c=0,u=n.fuzzFactor||0,d=0,f=0,h,p;function C(Mi,Pi){for(var oa=0;oa<Mi.lines.length;oa++){var Fi=Mi.lines[oa],Da=Fi.length>0?Fi[0]:" ",Eo=Fi.length>0?Fi.substr(1):Fi;if(Da===" "||Da==="-"){if(!s(Pi+1,r[Pi],Da,Eo)&&(c++,c>u))return!1;Pi++}}return!0}o(C,"hunkFits");for(var Q=0;Q<a.length;Q++){for(var A=a[Q],Y=r.length-A.oldLines,we=0,ie=f+A.oldStart-1,De=vl(ie,d,Y);we!==void 0;we=De())if(C(A,ie+we)){A.offset=f+=we;break}if(we===void 0)return!1;d=A.offset+A.oldStart+A.oldLines}for(var Ie=0,Ke=0;Ke<a.length;Ke++){var Qe=a[Ke],it=Qe.oldStart+Qe.offset+Ie-1;Ie+=Qe.newLines-Qe.oldLines;for(var Ye=0;Ye<Qe.lines.length;Ye++){var Pt=Qe.lines[Ye],Zt=Pt.length>0?Pt[0]:" ",sn=Pt.length>0?Pt.substr(1):Pt,zt=Qe.linedelimiters[Ye];if(Zt===" ")it++;else if(Zt==="-")r.splice(it,1),i.splice(it,1);else if(Zt==="+")r.splice(it,0,sn),i.splice(it,0,zt),it++;else if(Zt==="\\"){var dn=Qe.lines[Ye-1]?Qe.lines[Ye-1][0]:null;dn==="+"?h=!0:dn==="-"&&(p=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else p&&(r.push(""),i.push(`
`));for(var Rr=0;Rr<r.length-1;Rr++)r[Rr]=r[Rr]+i[Rr];return r.join("")}o(ns,"applyPatch");function Uc(t,e){typeof t=="string"&&(t=Ua(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(a,s){if(a)return e.complete(a);var c=ns(s,i,e);e.patched(i,c,function(u){if(u)return e.complete(u);r()})})}o(r,"processIndex"),r()}o(Uc,"applyPatches");function rs(t,e,n,r,i,a,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var c=Nn(n,r,s);c.push({value:"",lines:[]});function u(we){return we.map(function(ie){return" "+ie})}o(u,"contextLines");for(var d=[],f=0,h=0,p=[],C=1,Q=1,A=o(function(ie){var De=c[ie],Ie=De.lines||De.value.replace(/\n$/,"").split(`
`);if(De.lines=Ie,De.added||De.removed){var Ke;if(!f){var Qe=c[ie-1];f=C,h=Q,Qe&&(p=s.context>0?u(Qe.lines.slice(-s.context)):[],f-=p.length,h-=p.length)}(Ke=p).push.apply(Ke,ir(Ie.map(function(Rr){return(De.added?"+":"-")+Rr}))),De.added?Q+=Ie.length:C+=Ie.length}else{if(f)if(Ie.length<=s.context*2&&ie<c.length-2){var it;(it=p).push.apply(it,ir(u(Ie)))}else{var Ye,Pt=Math.min(Ie.length,s.context);(Ye=p).push.apply(Ye,ir(u(Ie.slice(0,Pt))));var Zt={oldStart:f,oldLines:C-f+Pt,newStart:h,newLines:Q-h+Pt,lines:p};if(ie>=c.length-2&&Ie.length<=s.context){var sn=/\n$/.test(n),zt=/\n$/.test(r),dn=Ie.length==0&&p.length>Zt.oldLines;!sn&&dn&&n.length>0&&p.splice(Zt.oldLines,0,"\\ No newline at end of file"),(!sn&&!dn||!zt)&&p.push("\\ No newline at end of file")}d.push(Zt),f=0,h=0,p=[]}C+=Ie.length,Q+=Ie.length}},"_loop"),Y=0;Y<c.length;Y++)A(Y);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:a,hunks:d}}o(rs,"structuredPatch");function pl(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}o(pl,"formatPatch");function ml(t,e,n,r,i,a,s){return pl(rs(t,e,n,r,i,a,s))}o(ml,"createTwoFilesPatch");function yl(t,e,n,r,i,a){return ml(t,t,e,n,r,i,a)}o(yl,"createPatch");function wl(t,e){return t.length!==e.length?!1:ko(t,e)}o(wl,"arrayEqual");function ko(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}o(ko,"arrayStartsWith");function Sl(t){var e=Fo(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}o(Sl,"calcLineCount");function Bc(t,e,n){t=is(t,n),e=is(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(as(t)?as(e)?(r.oldFileName=go(r,t.oldFileName,e.oldFileName),r.newFileName=go(r,t.newFileName,e.newFileName),r.oldHeader=go(r,t.oldHeader,e.oldHeader),r.newHeader=go(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,a=0,s=0,c=0;i<t.hunks.length||a<e.hunks.length;){var u=t.hunks[i]||{oldStart:1/0},d=e.hunks[a]||{oldStart:1/0};if(os(u,d))r.hunks.push(ss(u,s)),i++,c+=u.newLines-u.oldLines;else if(os(d,u))r.hunks.push(ss(d,c)),a++,s+=d.newLines-d.oldLines;else{var f={oldStart:Math.min(u.oldStart,d.oldStart),oldLines:0,newStart:Math.min(u.newStart+s,d.oldStart+c),newLines:0,lines:[]};Cl(f,u.oldStart,u.lines,d.oldStart,d.lines),a++,i++,r.hunks.push(f)}}return r}o(Bc,"merge");function is(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return Ua(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return rs(void 0,void 0,e,t)}return t}o(is,"loadPatch");function as(t){return t.newFileName&&t.newFileName!==t.oldFileName}o(as,"fileNameChanged");function go(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}o(go,"selectField");function os(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}o(os,"hunkBefore");function ss(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}o(ss,"cloneHunk");function Cl(t,e,n,r,i){var a={offset:e,lines:n,index:0},s={offset:r,lines:i,index:0};for(cs(t,a,s),cs(t,s,a);a.index<a.lines.length&&s.index<s.lines.length;){var c=a.lines[a.index],u=s.lines[s.index];if((c[0]==="-"||c[0]==="+")&&(u[0]==="-"||u[0]==="+"))bl(t,a,s);else if(c[0]==="+"&&u[0]===" "){var d;(d=t.lines).push.apply(d,ir(da(a)))}else if(u[0]==="+"&&c[0]===" "){var f;(f=t.lines).push.apply(f,ir(da(s)))}else c[0]==="-"&&u[0]===" "?ls(t,a,s):u[0]==="-"&&c[0]===" "?ls(t,s,a,!0):c===u?(t.lines.push(c),a.index++,s.index++):xo(t,da(a),da(s))}us(t,a),us(t,s),Sl(t)}o(Cl,"mergeLines");function bl(t,e,n){var r=da(e),i=da(n);if(ds(r)&&ds(i)){if(ko(r,i)&&fs(n,r,r.length-i.length)){var a;(a=t.lines).push.apply(a,ir(r));return}else if(ko(i,r)&&fs(e,i,i.length-r.length)){var s;(s=t.lines).push.apply(s,ir(i));return}}else if(wl(r,i)){var c;(c=t.lines).push.apply(c,ir(r));return}xo(t,r,i)}o(bl,"mutualChange");function ls(t,e,n,r){var i=da(e),a=_l(n,i);if(a.merged){var s;(s=t.lines).push.apply(s,ir(a.merged))}else xo(t,r?a:i,r?i:a)}o(ls,"removal");function xo(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}o(xo,"conflict");function cs(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}o(cs,"insertLeading");function us(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}o(us,"insertTrailing");function da(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}o(da,"collectChange");function _l(t,e){for(var n=[],r=[],i=0,a=!1,s=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],u=e[i];if(u[0]==="+")break;if(a=a||c[0]!==" ",r.push(u),i++,c[0]==="+")for(s=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];u.substr(1)===c.substr(1)?(n.push(c),t.index++):s=!0}if((e[i]||"")[0]==="+"&&a&&(s=!0),s)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}o(_l,"collectContext");function ds(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}o(ds,"allRemoves");function fs(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}o(fs,"skipRemoveSuperset");function Fo(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=Fo(r.mine),a=Fo(r.theirs);e!==void 0&&(i.oldLines===a.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===a.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}o(Fo,"calcOldNewLineCount");function Hc(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}o(Hc,"convertChangesToDMP");function Wc(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(El(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}o(Wc,"convertChangesToXML");function El(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}o(El,"escapeHTML");var hs=/[^a-zA-Z0-9]/,gs=/\s/,vs=/[\r\n]/,Al=/\n\r?\n$/,Dl=/^\r?\n\r?\n/,gt;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(gt||(gt={}));function Rl(t,e){return t<e?t:e}o(Rl,"min");function Tl(t,e){return t>e?t:e}o(Tl,"max");var ui=at,Ba=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return o(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case gt.DIFF_INSERT:i="+";break;case gt.DIFF_DELETE:i="-";break;case gt.DIFF_EQUAL:i=" ";break}r[a+1]=i+encodeURI(this.diffs[a][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),Ml=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return o(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var a=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[gt.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var s=r,c=this.diff_commonPrefix(e,n),u=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var d=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var f=this.diff_compute_(e,n,s,a);return u&&f.unshift([gt.DIFF_EQUAL,u]),d&&f.push([gt.DIFF_EQUAL,d]),this.diff_cleanupMerge(f),f},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=ui.min(e.length,n.length),a=i,s=0;r<a;)e.substring(s,a)===n.substring(s,a)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=ui.min(e.length,n.length),a=i,s=0;r<a;)e.substring(e.length-a,e.length-s)===n.substring(n.length-a,n.length-s)?(r=a,s=r):i=a,a=Math.floor((i-r)/2+r);return a},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=0,u=0,d=0,f=0;s<e.length;)e[s][0]===gt.DIFF_EQUAL?(r[i++]=s,c=d,u=f,d=0,f=0,a=e[s][1]):(e[s][0]===gt.DIFF_INSERT?d+=e[s][1].length:f+=e[s][1].length,a&&a.length<=ui.max(c,u)&&a.length<=ui.max(d,f)&&(e.splice(r[i-1],0,[gt.DIFF_DELETE,a]),e[r[i-1]+1][0]=gt.DIFF_INSERT,i--,i--,s=i>0?r[i-1]:-1,c=0,u=0,d=0,f=0,a=null,n=!0)),s++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),s=1;s<e.length;){if(e[s-1][0]===gt.DIFF_DELETE&&e[s][0]===gt.DIFF_INSERT){var h=e[s-1][1],p=e[s][1],C=this.diff_commonOverlap_(h,p),Q=this.diff_commonOverlap_(p,h);C>=Q?(C>=h.length/2||C>=p.length/2)&&(e.splice(s,0,[gt.DIFF_EQUAL,p.substring(0,C)]),e[s-1][1]=h.substring(0,h.length-C),e[s+1][1]=p.substring(C),s++):(Q>=h.length/2||Q>=p.length/2)&&(e.splice(s,0,[gt.DIFF_EQUAL,h.substring(0,Q)]),e[s-1][0]=gt.DIFF_INSERT,e[s-1][1]=p.substring(0,p.length-Q),e[s+1][0]=gt.DIFF_DELETE,e[s+1][1]=h.substring(Q),s++),s++}s++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===gt.DIFF_EQUAL&&e[n+1][0]===gt.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],a=e[n+1][1],s=this.diff_commonSuffix(r,i);if(s){var c=i.substring(i.length-s);r=r.substring(0,r.length-s),i=c+i.substring(0,i.length-s),a=c+a}for(var u=r,d=i,f=a,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);i.charAt(0)===a.charAt(0);){r+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var p=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,a);p>=h&&(h=p,u=r,d=i,f=a)}e[n-1][1]!==u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=d,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,a=null,s=0,c=!1,u=!1,d=!1,f=!1;s<e.length;)e[s][0]===gt.DIFF_EQUAL?(e[s][1].length<this.diffEditCost&&(d||f)?(r[i++]=s,c=d,u=f,a=e[s][1]):(i=0,a=null),d=f=!1):(e[s][0]===gt.DIFF_DELETE?f=!0:d=!0,a&&(c&&u&&d&&f||a.length<this.diffEditCost/2&&Number(c)+Number(u)+Number(d)+Number(f)===3)&&(e.splice(r[i-1],0,[gt.DIFF_DELETE,a]),e[r[i-1]+1][0]=gt.DIFF_INSERT,i--,a=null,c&&u?(d=f=!0,i=0):(i--,s=i>0?r[i-1]:-1,d=f=!1),n=!0)),s++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([gt.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,a="",s="",c;n<e.length;)switch(e[n][0]){case gt.DIFF_INSERT:i++,s+=e[n][1],n++;break;case gt.DIFF_DELETE:r++,a+=e[n][1],n++;break;case gt.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(s,a),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===gt.DIFF_EQUAL?e[n-r-i-1][1]+=s.substring(0,c):(e.splice(0,0,[gt.DIFF_EQUAL,s.substring(0,c)]),n++),s=s.substring(c),a=a.substring(c)),c=this.diff_commonSuffix(s,a),c!==0&&(e[n][1]=s.substring(s.length-c)+e[n][1],s=s.substring(0,s.length-c),a=a.substring(0,a.length-c))),n-=r+i,e.splice(n,r+i),a.length&&(e.splice(n,0,[gt.DIFF_DELETE,a]),n++),s.length&&(e.splice(n,0,[gt.DIFF_INSERT,s]),n++),n++):n!==0&&e[n-1][0]===gt.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,a="",s="";break}e[e.length-1][1]===""&&e.pop();var u=!1;for(n=1;n<e.length-1;)e[n-1][0]===gt.DIFF_EQUAL&&e[n+1][0]===gt.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,a=0,s=0,c;for(c=0;c<e.length&&(e[c][0]!==gt.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==gt.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)a=r,s=i;return e.length!==c&&e[c][0]===gt.DIFF_DELETE?s:s+(n-a)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,a=/>/g,s=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],f=d.replace(r,"&amp;").replace(i,"&lt;").replace(a,"&gt;").replace(s,"&para;<br>");switch(u){case gt.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+f+"</ins>";break;case gt.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+f+"</del>";break;case gt.DIFF_EQUAL:n[c]="<span>"+f+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==gt.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==gt.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,a=0;a<e.length;a++){var s=e[a][0],c=e[a][1];switch(s){case gt.DIFF_INSERT:r+=c.length;break;case gt.DIFF_DELETE:i+=c.length;break;case gt.DIFF_EQUAL:n+=ui.max(r,i),r=0,i=0;break}}return n+=ui.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case gt.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case gt.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case gt.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,a=0,s=n.split(/\t/g),c=0;c<s.length;c++){var u=s[c].substring(1);switch(s[c].charAt(0)){case"+":try{r[i++]=[gt.DIFF_INSERT,decodeURI(u)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var f=e.substring(a,a+=d);s[c].charAt(0)==="="?r[i++]=[gt.DIFF_EQUAL,f]:r[i++]=[gt.DIFF_DELETE,f];break;default:if(s[c])throw new Error("Invalid diff operation in diff_fromDelta: "+s[c])}}if(a!==e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var a=this.diff_linesToCharsMunge_(e,r,i,4e4),s=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:a,chars2:s,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],a=[],s=0;s<i.length;s++)a[s]=n[i.charCodeAt(s)];e[r][1]=a.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=ui.max(0,ui.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,a;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,a=this.diff_main(i,n,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")a=e,i=this.diff_text1(a);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,a=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,a=r;else throw new Error("Unknown call format to patch_make");if(a.length===0)return[];for(var s=[],c=new Ba,u=0,d=0,f=0,h=i,p=i,C=0;C<a.length;C++){var Q=a[C][0],A=a[C][1];switch(!u&&Q!==gt.DIFF_EQUAL&&(c.start1=d,c.start2=f),Q){case gt.DIFF_INSERT:c.diffs[u++]=a[C],c.length2+=A.length,p=p.substring(0,f)+A+p.substring(f);break;case gt.DIFF_DELETE:c.length1+=A.length,c.diffs[u++]=a[C],p=p.substring(0,f)+p.substring(f+A.length);break;case gt.DIFF_EQUAL:A.length<=2*this.patchMargin&&u&&a.length!==C+1?(c.diffs[u++]=a[C],c.length1+=A.length,c.length2+=A.length):A.length>=2*this.patchMargin&&u&&(this.patch_addContext_(c,h),s.push(c),c=new Ba,u=0,h=p,d=f);break}Q!==gt.DIFF_INSERT&&(d+=A.length),Q!==gt.DIFF_DELETE&&(f+=A.length)}return u&&(this.patch_addContext_(c,h),s.push(c)),s},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],a=new Ba,s=0;s<i.diffs.length;s++)a.diffs[s]=[i.diffs[s][0],i.diffs[s][1]];a.start1=i.start1,a.start2=i.start2,a.length1=i.length1,a.length2=i.length2,n[r]=a}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,a=[],s=0;s<e.length;s++){var c=e[s].start2+i,u=this.diff_text1(e[s].diffs),d=void 0,f=-1;if(u.length>this.matchMaxBits?(d=this.match_main(n,u.substring(0,this.matchMaxBits),c),d!==-1&&(f=this.match_main(n,u.substring(u.length-this.matchMaxBits),c+u.length-this.matchMaxBits),(f===-1||d>=f)&&(d=-1))):d=this.match_main(n,u,c),d===-1)a[s]=!1,i-=e[s].length2-e[s].length1;else{a[s]=!0,i=d-c;var h=void 0;if(f===-1?h=n.substring(d,d+u.length):h=n.substring(d,f+this.matchMaxBits),u===h)n=n.substring(0,d)+this.diff_text2(e[s].diffs)+n.substring(d+u.length);else{var p=this.diff_main(u,h,!1);if(u.length>this.matchMaxBits&&this.diff_levenshtein(p)/u.length>this.patchDeleteThreshold)a[s]=!1;else{this.diff_cleanupSemanticLossless(p);for(var C=0,Q=0,A=0;A<e[s].diffs.length;A++){var Y=e[s].diffs[A];Y[0]!==gt.DIFF_EQUAL&&(Q=this.diff_xIndex(p,C)),Y[0]===gt.DIFF_INSERT?n=n.substring(0,d+Q)+Y[1]+n.substring(d+Q):Y[0]===gt.DIFF_DELETE&&(n=n.substring(0,d+Q)+n.substring(d+this.diff_xIndex(p,C+Y[1].length))),Y[0]!==gt.DIFF_DELETE&&(C+=Y[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,a]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var a=e[0],s=a.diffs;if(s.length===0||s[0][0]!==gt.DIFF_EQUAL)s.unshift([gt.DIFF_EQUAL,r]),a.start1-=n,a.start2-=n,a.length1+=n,a.length2+=n;else if(n>s[0][1].length){var c=n-s[0][1].length;s[0][1]=r.substring(s[0][1].length)+s[0][1],a.start1-=c,a.start2-=c,a.length1+=c,a.length2+=c}if(a=e[e.length-1],s=a.diffs,s.length===0||s[s.length-1][0]!==gt.DIFF_EQUAL)s.push([gt.DIFF_EQUAL,r]),a.length1+=n,a.length2+=n;else if(n>s[s.length-1][1].length){var c=n-s[s.length-1][1].length;s[s.length-1][1]+=r.substring(0,c),a.length1+=c,a.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var a=i.start1,s=i.start2,c="";i.diffs.length!==0;){var u=new Ba,d=!0;for(u.start1=a-c.length,u.start2=s-c.length,c!==""&&(u.length1=u.length2=c.length,u.diffs.push([gt.DIFF_EQUAL,c]));i.diffs.length!==0&&u.length1<n-this.patchMargin;){var f=i.diffs[0][0],h=i.diffs[0][1];f===gt.DIFF_INSERT?(u.length2+=h.length,s+=h.length,u.diffs.push(i.diffs.shift()),d=!1):f===gt.DIFF_DELETE&&u.diffs.length===1&&u.diffs[0][0]===gt.DIFF_EQUAL&&h.length>2*n?(u.length1+=h.length,a+=h.length,d=!1,u.diffs.push([f,h]),i.diffs.shift()):(h=h.substring(0,n-u.length1-this.patchMargin),u.length1+=h.length,a+=h.length,f===gt.DIFF_EQUAL?(u.length2+=h.length,s+=h.length):d=!1,u.diffs.push([f,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(u.diffs),c=c.substring(c.length-this.patchMargin);var p=this.diff_text1(i.diffs).substring(0,this.patchMargin);p!==""&&(u.length1+=p.length,u.length2+=p.length,u.diffs.length!==0&&u.diffs[u.diffs.length-1][0]===gt.DIFF_EQUAL?u.diffs[u.diffs.length-1][1]+=p:u.diffs.push([gt.DIFF_EQUAL,p])),d||e.splice(++r,0,u)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var s=r[i].match(a);if(!s)throw new Error("Invalid patch string: "+r[i]);var c=new Ba;n.push(c),c.start1=parseInt(s[1],10),s[2]===""?(c.start1--,c.length1=1):s[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(s[2],10)),c.start2=parseInt(s[3],10),s[4]===""?(c.start2--,c.length2=1):s[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(s[4],10)),i++;for(var u=void 0,d=void 0,f=void 0;i<r.length;){u=r[i].charAt(0),f=r[i].substring(1);try{d=decodeURI(f)}catch(h){throw new Error("Illegal escape in patch_fromText: "+f)}if(u==="-")c.diffs.push([gt.DIFF_DELETE,d]);else if(u==="+")c.diffs.push([gt.DIFF_INSERT,d]);else if(u===" ")c.diffs.push([gt.DIFF_EQUAL,d]);else{if(u==="@")break;if(u!=="")throw new Error('Invalid patch mode "'+u+'" in: '+d)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var a;if(!e)return[[gt.DIFF_INSERT,n]];if(!n)return[[gt.DIFF_DELETE,e]];var s=e.length>n.length?e:n,c=e.length>n.length?n:e,u=s.indexOf(c);if(u!==-1)return a=[[gt.DIFF_INSERT,s.substring(0,u)],[gt.DIFF_EQUAL,c],[gt.DIFF_INSERT,s.substring(u+c.length)]],e.length>n.length&&(a[0][0]=gt.DIFF_DELETE,a[2][0]=gt.DIFF_DELETE),a;if(c.length===1)return[[gt.DIFF_DELETE,e],[gt.DIFF_INSERT,n]];var d=this.diff_halfMatch_(e,n);if(d){var f=d[0],h=d[1],p=d[2],C=d[3],Q=d[4],A=this.diff_main(f,p,r,i),Y=this.diff_main(h,C,r,i);return A.concat([[gt.DIFF_EQUAL,Q]],Y)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var a=i.lineArray,s=this.diff_main(e,n,!1,r);this.diff_charsToLines(s,a),this.diff_cleanupSemantic(s),s.push([gt.DIFF_EQUAL,""]);for(var c=0,u=0,d=0,f="",h="";c<s.length;){switch(s[c][0]){case gt.DIFF_INSERT:d++,h+=s[c][1];break;case gt.DIFF_DELETE:u++,f+=s[c][1];break;case gt.DIFF_EQUAL:if(u>=1&&d>=1){s.splice(c-u-d,u+d),c=c-u-d;for(var p=this.diff_main(f,h,!1,r),C=p.length-1;C>=0;C--)s.splice(c,0,p[C]);c=c+p.length}d=0,u=0,f="",h="";break}c++}return s.pop(),s},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,a=n.length,s=Math.ceil((i+a)/2),c=s,u=2*s,d=new Array(u),f=new Array(u),h=0;h<u;h++)d[h]=-1,f[h]=-1;d[c+1]=0,f[c+1]=0;for(var p=i-a,C=p%2!=0,Q=0,A=0,Y=0,we=0,ie=0;ie<s&&!(Date.now()>r);ie++){for(var De=-ie+Q;De<=ie-A;De+=2){var Ie=c+De,Ke=void 0;De===-ie||De!==ie&&d[Ie-1]<d[Ie+1]?Ke=d[Ie+1]:Ke=d[Ie-1]+1;for(var Qe=Ke-De;Ke<i&&Qe<a&&e.charAt(Ke)===n.charAt(Qe);)Ke++,Qe++;if(d[Ie]=Ke,Ke>i)A+=2;else if(Qe>a)Q+=2;else if(C){var it=c+p-De;if(it>=0&&it<u&&f[it]!==-1){var Ye=i-f[it];if(Ke>=Ye)return this.diff_bisectSplit_(e,n,Ke,Qe,r)}}}for(var Pt=-ie+Y;Pt<=ie-we;Pt+=2){var it=c+Pt,Ye=void 0;Pt===-ie||Pt!==ie&&f[it-1]<f[it+1]?Ye=f[it+1]:Ye=f[it-1]+1;for(var Zt=Ye-Pt;Ye<i&&Zt<a&&e.charAt(i-Ye-1)===n.charAt(a-Zt-1);)Ye++,Zt++;if(f[it]=Ye,Ye>i)we+=2;else if(Zt>a)Y+=2;else if(!C){var Ie=c+p-Pt;if(Ie>=0&&Ie<u&&d[Ie]!==-1){var Ke=d[Ie],Qe=c+Ke-Ie;if(Ye=i-Ye,Ke>=Ye)return this.diff_bisectSplit_(e,n,Ke,Qe,r)}}}}return[[gt.DIFF_DELETE,e],[gt.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,a){var s=e.substring(0,r),c=n.substring(0,i),u=e.substring(r),d=n.substring(i),f=this.diff_main(s,c,!1,a),h=this.diff_main(u,d,!1,a);return f.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var a="",s=0,c=-1,u=n.length;c<e.length-1;){c=e.indexOf(`
`,s),c===-1&&(c=e.length-1);var d=e.substring(s,c+1);(r.hasOwnProperty?r.hasOwnProperty(d):r[d]!==void 0)?a+=String.fromCharCode(r[d]):(u===i&&(d=e.substring(s),c=e.length),a+=String.fromCharCode(u),r[d]=u,n[u++]=d),s=c+1}return a},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var a=ui.min(r,i);if(e===n)return a;for(var s=0,c=1;;){var u=e.substring(a-c),d=n.indexOf(u);if(d===-1)return s;c+=d,(d===0||e.substring(a-c)===n.substring(0,c))&&(s=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),s=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!a&&!s)return null;s?a?c=a[4].length>s[4].length?a:s:c=s:c=a;var u,d,f,h,p=c[4];return e.length>n.length?(u=c[0],d=c[1],f=c[2],h=c[3]):(f=c[0],h=c[1],u=c[2],d=c[3]),[u,d,f,h,p]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),a="",s,c,u,d,f=n.indexOf(i,0);f!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(f)),p=this.diff_commonSuffix(e.substring(0,r),n.substring(0,f));a.length<p+h&&(a=n.substring(f-p,f)+n.substring(f,f+h),s=e.substring(0,r-p),c=e.substring(r+h),u=n.substring(0,f-p),d=n.substring(f+h)),f=n.indexOf(i,f+1)}return a.length*2>=e.length?[s,c,u,d,a]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),a=r.match(hs),s=i.match(hs),c=a&&r.match(gs),u=s&&i.match(gs),d=c&&r.match(vs),f=u&&i.match(vs),h=d&&e.match(Al),p=f&&n.match(Dl);return h||p?5:d||f?4:a&&!c&&u?3:c||u?2:a||s?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),a=this.matchThreshold,s=e.indexOf(n,r);s!==-1&&(a=ui.min(this.match_bitapScore_(0,s,n,r),a),s=e.lastIndexOf(n,r+n.length),s!==-1&&(a=ui.min(this.match_bitapScore_(0,s,n,r),a)));var c=1<<n.length-1;s=-1;for(var u,d,f=n.length+e.length,h,p=0;p<n.length;p++){for(u=0,d=f;u<d;)this.match_bitapScore_(p,r+d,n,r)<=a?u=d:f=d,d=Math.floor((f-u)/2+u);f=d;var C=ui.max(1,r-d+1),Q=ui.min(r+d,e.length)+n.length,A=Array(Q+2);A[Q+1]=(1<<p)-1;for(var Y=Q;Y>=C;Y--){var we=i[e.charAt(Y-1)];if(p===0?A[Y]=(A[Y+1]<<1|1)&we:A[Y]=(A[Y+1]<<1|1)&we|((h[Y+1]|h[Y])<<1|1)|h[Y+1],A[Y]&c){var ie=this.match_bitapScore_(p,Y-1,n,r);if(ie<=a)if(a=ie,s=Y-1,s>r)C=ui.max(1,2*r-s);else break}}if(this.match_bitapScore_(p+1,r,n,r)>a)break;h=A}return s},t.prototype.match_bitapScore_=function(e,n,r,i){var a=e/r.length,s=Math.abs(i-n);return this.matchDistance?a+s/this.matchDistance:s?1:a},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var a=n.substring(e.start2-i,e.start2);a&&e.diffs.unshift([gt.DIFF_EQUAL,a]);var s=n.substring(e.start2+e.length1,e.start2+e.length1+i);s&&e.diffs.push([gt.DIFF_EQUAL,s]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+s.length,e.length2+=a.length+s.length}},t}();function No(t,e){let n={};for(let a=0;a<e.length;a++){const s=e[a];n[s]?n[s].push(a):n[s]=[a]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let a=0;a<t.length;a++){const s=t[a],c=n[s]||[];let u=0,d=i[0];for(let f=0;f<c.length;f++){const h=c[f];let p;for(p=u;p<i.length&&!(i[p].buffer2index<h&&(p===i.length-1||i[p+1].buffer2index>h));p++);if(p<i.length){const C={buffer1index:a,buffer2index:h,chain:i[p]};if(u===i.length?i.push(d):i[u]=d,u=p+1,d=C,u===i.length)break}}i[u]=d}return i[i.length-1]}o(No,"LCS");function Pl(t,e){const n=No(t,e);let r=[],i=t.length,a=e.length,s={common:[]};function c(){s.common.length&&(s.common.reverse(),r.push(s),s={common:[]})}o(c,"processCommon");for(let u=n;u!==null;u=u.chain){let d={buffer1:[],buffer2:[]};for(;--i>u.buffer1index;)d.buffer1.push(t[i]);for(;--a>u.buffer2index;)d.buffer2.push(e[a]);(d.buffer1.length||d.buffer2.length)&&(c(),d.buffer1.reverse(),d.buffer2.reverse(),r.push(d)),i>=0&&s.common.push(t[i])}return c(),r.reverse(),r}o(Pl,"diffComm");function ps(t,e){const n=No(t,e);let r=[],i=t.length,a=e.length;for(let s=n;s!==null;s=s.chain){const c=i-s.buffer1index-1,u=a-s.buffer2index-1;i=s.buffer1index,a=s.buffer2index,(c||u)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[a+1,u],buffer2Content:e.slice(a+1,a+1+u)})}return r.reverse(),r}o(ps,"diffIndices");function $c(t,e){const n=No(t,e);let r=[],i=t.length,a=e.length;function s(c,u,d){let f=[];for(let h=0;h<d;h++)f.push(c[u+h]);return{offset:u,length:d,chunk:f}}o(s,"chunkDescription");for(let c=n;c!==null;c=c.chain){const u=i-c.buffer1index-1,d=a-c.buffer2index-1;i=c.buffer1index,a=c.buffer2index,(u||d)&&r.push({buffer1:s(t,c.buffer1index+1,u),buffer2:s(e,c.buffer2index+1,d)})}return r.reverse(),r}o($c,"diffPatch");function Il(t,e,n){let r=[];function i(u,d){r.push({ab:d,oStart:u.buffer1[0],oLength:u.buffer1[1],abStart:u.buffer2[0],abLength:u.buffer2[1]})}o(i,"addHunk"),ps(e,t).forEach(u=>i(u,"a")),ps(e,n).forEach(u=>i(u,"b")),r.sort((u,d)=>u.oStart-d.oStart);let a=[],s=0;function c(u){u>s&&(a.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:u-s,bufferContent:e.slice(s,u)}),s=u)}for(o(c,"advanceTo");r.length;){let u=r.shift(),d=u.oStart,f=u.oStart+u.oLength,h=[u];for(c(d);r.length;){const p=r[0],C=p.oStart;if(C>f)break;f=Math.max(f,C+p.oLength),h.push(r.shift())}if(h.length===1){if(u.abLength>0){const p=u.ab==="a"?t:n;a.push({stable:!0,buffer:u.ab,bufferStart:u.abStart,bufferLength:u.abLength,bufferContent:p.slice(u.abStart,u.abStart+u.abLength)})}}else{let p={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){u=h.shift();const ie=u.oStart,De=ie+u.oLength,Ie=u.abStart,Ke=Ie+u.abLength;let Qe=p[u.ab];Qe[0]=Math.min(Ie,Qe[0]),Qe[1]=Math.max(Ke,Qe[1]),Qe[2]=Math.min(ie,Qe[2]),Qe[3]=Math.max(De,Qe[3])}const C=p.a[0]+(d-p.a[2]),Q=p.a[1]+(f-p.a[3]),A=p.b[0]+(d-p.b[2]),Y=p.b[1]+(f-p.b[3]);let we={stable:!1,aStart:C,aLength:Q-C,aContent:t.slice(C,Q),oStart:d,oLength:f-d,oContent:e.slice(d,f),bStart:A,bLength:Y-A,bContent:n.slice(A,Y)};a.push(we)}s=f}return c(e.length),a}o(Il,"diff3MergeRegions");function Oo(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=typeof t=="string",s=typeof e=="string",c=typeof n=="string";a&&(t=t.split(r.stringSeparator)),s&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let u=[];const d=Il(t,e,n);let f=[];function h(){f.length&&u.push({ok:f}),f=[]}o(h,"flushOk");function p(C,Q){if(C.length!==Q.length)return!1;for(let A=0;A<C.length;A++)if(C[A]!==Q[A])return!1;return!0}return o(p,"isFalseConflict"),d.forEach(C=>{C.stable?f.push(...C.bufferContent):r.excludeFalseConflicts&&p(C.aContent,C.bContent)?f.push(...C.aContent):(h(),u.push({conflict:{a:C.aContent,aIndex:C.aStart,o:C.oContent,oIndex:C.oStart,b:C.bContent,bIndex:C.bStart}}))}),h(),u}o(Oo,"diff3Merge");function Kc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const a=Oo(t,e,n,r);let s=!1,c=[];return a.forEach(u=>{u.ok?c=c.concat(u.ok):u.conflict&&(s=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(u.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(u.conflict.o),c.push("======="),c=c.concat(u.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:s,result:c}}o(Kc,"mergeDiff3");function Ll(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const a=Oo(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];d.ok?c=c.concat(d.ok):(s=!0,c=c.concat([`
<<<<<<<<<
`],d.conflict.a,[`
=========
`],d.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:c}}o(Ll,"node_diff3_merge");function Gc(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const a=Oo(t,e,n,r);let s=!1,c=[];for(let u=0;u<a.length;u++){const d=a[u];if(d.ok)c=c.concat(d.ok);else{const f=Pl(d.conflict.a,d.conflict.b);for(let h=0;h<f.length;h++){let p=f[h];p.common?c=c.concat(p.common):(s=!0,c=c.concat([`
<<<<<<<<<
`],p.buffer1,[`
=========
`],p.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:c}}o(Gc,"mergeDigIn");function zc(t,e){let n=[],r=0;function i(a){for(;r<a;)n.push(t[r]),r++}o(i,"advanceTo");for(let a=0;a<e.length;a++){let s=e[a];i(s.buffer1.offset);for(let c=0;c<s.buffer2.chunk.length;c++)n.push(s.buffer2.chunk[c]);r+=s.buffer1.length}return i(t.length),n}o(zc,"patch");function Vc(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}o(Vc,"stripPatch");function Jc(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}o(Jc,"invertPatch");const Uo=new Ml;Uo.diffTimeout=0;function ms(t,e,n){return be.get("experimental.useDiffMatchPatch")===!0?Uo.patch_toText(Uo.patch_make(e,n)):yl(t,e,n)}o(ms,"diffs_createPatch");function ys(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return ms(t,e,n);case"add":{let a;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?a=`
\\ No newline at end of file`:a="";const s=/\r?\n/g,c=n.split(s),u=n.match(s)||[],d=c.length,f=[];for(let h=0;h<d;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&f.push("+"),f.push(c[h]),h<u.length&&f.push(u[h]);return n=f.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${d} @@
${n}${a}`}case"delete":{let a=0;return e=e.replace(/\r?\n/g,s=>(a++,`${s}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${a} +0,0 @@
-${e}`}}}o(ys,"createPatch2");function ws(t,e,n){return ns(t,e,n)}o(ws,"diffs_applyPatch");function kl(t,e){const n=[];for(const r of Ua(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(a=>a[0]==="-"?`+${a.slice(1)}`:a[0]==="+"?`-${a.slice(1)}`:a)}))}),n.push(r);return n}o(kl,"reversePatch");function Ss(t,e,n,r){let i=`
`;const a=t.match(/(?:\r?\n)/g);if(a!==null&&a.length!==0){const d=a.filter(f=>f===`\r
`).length;i=d>a.length-d?`\r
`:`
`}const s=Ll(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=s.result;let u=s.conflict;for(let d=0;d<c.length;d+=1)c[d]===`
<<<<<<<<<
`?c[d]="<<<<<<< HEAD":c[d]===`
=========
`?c[d]="=======":c[d]===`
>>>>>>>>>
`&&(c[d]=`>>>>>>> ${r}`);return{conflicts:u,mergedContent:c.join(i)}}o(Ss,"diffs_merge");var xl=Object.defineProperty,Fl=Object.getOwnPropertyDescriptor,Nl=o((t,e,n,r)=>{for(var i=r>1?void 0:r?Fl(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&xl(e,n,i),i},"changeStore_decorateClass");const Ol=l.FileSystemError.FileNotFound().code,Cs=`===================================================================
`,Hi=new TextDecoder,Ul=new TextEncoder;function Bl(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}o(Bl,"isOperation");function vo(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}o(vo,"toEvent");const Ha=o(class{constructor(t,e,n,r,i,a){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new l.EventEmitter,this.cache=new Map,this.lock=new rn,this.scopedStores=new Map,a===void 0&&(this.disposable=l.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await l.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void l.window.showTextDocument(i)}if(o(n,"exportCore"),t===void 0)for(const r of(e=l.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new Ue("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=l.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===x.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;J.log(n);const r=[];await this.lock.synchronizeWrite(_(t),async()=>{const i=await this.getWorkingOperations(t),a=[];let s=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(u=>u.staged));for(const u of i){if(c&&!u.staged){s.push(u);continue}u.fileType===l.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;if(u.type===D.Created&&u.fileType===l.FileType.Directory&&(i.some(f=>X(f.uri,u.uri))||(d={type:D.Deleted,rootUri:t,uri:u.uri})),r.push(d!=null?d:vo(u,t)),u.type===D.Created){let f=u.uri;for(;;){const{parent:h}=this.findParent(f,i,p=>p.type===D.Created);if(h){a.push(h),f=h.uri;continue}break}}}s.length>0&&a.length>0&&(s=s.filter(u=>a.includes(u)?(r.push(vo(u,t)),!1):!0)),await this.saveWorkingOperations(t,s)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;J.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){J.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=O(e),a=r.findIndex(u=>O(u.uri)===i);if(a===-1)return;const[s]=r.splice(a,1);let c;switch(s.type){case D.Created:c=D.Deleted;break;case D.Deleted:c=D.Created;break;default:c=s.type;break}if(n.push({type:c,rootUri:t,uri:e}),s.type===D.Created){let u=s.uri;for(;;){const{parent:d,parentIndex:f}=this.findNewParentWithOnlyChild(u,r);if(d){r.splice(f,1),n.push({type:D.Deleted,rootUri:t,uri:d.uri}),u=d.uri;continue}break}}else if(s.type===D.Deleted){let u=s.uri;const d=this.findDeletedParents(u,r);let f=[...r];d.forEach(({parent:h,parentIndex:p})=>{f[p]=void 0,n.push({type:D.Created,rootUri:t,uri:h.uri})}),r=f.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),s.fileType===l.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;J.log(r);const i=[];await this.lock.synchronizeWrite(_(t),async()=>{const a=await this.getWorkingOperations(t),s=[];let c=[];const u=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!a.some(d=>d.staged));for(const d of a){if(u&&!d.staged){c.push(d);continue}d.fileType===l.FileType.File&&await this.discardWorkingContent(t,d.uri);let f;switch(d.type){case D.Created:f=D.Deleted;break;case D.Deleted:f=D.Created;break;default:f=d.type;break}if(i.push({type:f,rootUri:t,uri:d.uri}),d.type===D.Created){let h=d.uri;for(;;){const{parent:p}=this.findNewParentWithOnlyChild(h,a);if(p){s.push(p),h=p.uri;continue}break}}}c.length>0&&s.length>0&&(c=c.filter(d=>s.includes(d)?(i.push({type:D.Deleted,rootUri:t,uri:d.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;J.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,a)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;J.log(e);const n=[];await this.lock.synchronizeWrite(_(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:a}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,a))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(D.Deleted)){const s=l.l10n.t("Yes");if(await l.window.showWarningMessage(l.l10n.t("Are you sure you want to stage {0} with merge conflicts?",V(e)),{modal:!0},s)!==s)return!1}const[,a]=n.conflicts.status;switch(a){case D.Changed:switch(n.type){case D.Created:return!1;case D.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case D.Deleted:const s=l.l10n.t("Keep Their Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by us and modified by them.

What would you like to do?`,V(e)),{modal:!0},s,c);return u===s?(await this.discardCore(t,e,r),!0):u===c?(await this.spliceOperation(e,i,{...n,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case D.Created:switch(n.type){case D.Changed:case D.Deleted:return!1;case D.Created:return await this.spliceOperation(e,i,{...n,type:D.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case D.Deleted:switch(n.type){case D.Created:case D.Changed:{const s=l.l10n.t("Keep Our Version"),c=l.l10n.t("Delete File"),u=await l.window.showInformationMessage(l.l10n.t(`File '{0}' was deleted by them and modified by us.

What would you like to do?`,V(e)),{modal:!0},s,c);return u===s?(await this.spliceOperation(e,i,{...n,type:D.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):u===c?(await this.discardCore(t,e,r),!0):!1}case D.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;J.log(n);const r=[];await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,a,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;J.log(e);const n=[];await this.lock.synchronizeWrite(_(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>vo(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=_(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=_(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const a=O(e);return i.some(s=>O(s.uri)===a)}async hasMergeConflicts(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(_(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(_(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:a}=e;r=r.filter(s=>{var c;return(!i||s.conflicts===void 0)&&((c=a==null?void 0:a(s))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(_(t),async()=>{var r,i;const a=await this.getWorkingOperations(t),s={conflicts:[],staged:[],working:[]};for(const c of a)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?s.conflicts.push(c):c.staged?s.staged.push(c):s.working.push(c));return s},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=_(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=Hi.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.conflicts!==void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(_(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,a;return!r.staged&&r.conflicts===void 0&&((a=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?a:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let a;Bl(n)?a=n:r=r!=null?r:n,J.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,a==null?void 0:a.uri,r==null?void 0:r.save);const s=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await s.createPatch(e.uri,a==null?void 0:a.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async u=>{const d=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId);return Hi.decode(await l.workspace.fs.readFile(d))},merge:async(u,d,f)=>{try{const h=x.getProviderUri(u),p=Hi.decode(await l.workspace.fs.readFile(h)),C=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,d),e.workspaceId),Q=Hi.decode(await l.workspace.fs.readFile(C)),A=await this.providerService.getMetadata(C);return{...Ss(f,p,Q,A.HEAD.sha),baseUri:h,incomingUri:C}}catch(h){throw new Error(`Unable to apply patch to ${d}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(J.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;J.debug(r,n==null?void 0:n.save);const i=new l.WorkspaceEdit,a=[],s=new Map;async function c(p){var C;const Q=_(p),A=l.workspace.textDocuments.find(Y=>_(Y.uri)===Q);return(C=A==null?void 0:A.getText())!=null?C:Hi.decode(await l.workspace.fs.readFile(p))}o(c,"getContent");async function u(p){try{const C=await l.workspace.fs.stat(p);return Boolean(C)}catch{return!1}}o(u,"exists");async function d(p,C,Q){let A=ws("",Q,{fuzzFactor:0});if(A===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${C}`);A=await n.getIncomingContent(C)}i.createFile(p,{overwrite:!0}),i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),A)}o(d,"applyCreate");async function f(p,C,Q,A){const Y=await c(p);let we=ws(Y,Q,{fuzzFactor:1});if(we===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${C}; Resulted in conflicts`);const ie={title:l.l10n.t("Merge")},De={title:l.l10n.t("Skip File"),isCloseAffordance:!0};if(await l.window.showWarningMessage(l.l10n.t(`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,C),{modal:!0},ie,De)!==ie)return;const Ke=await n.merge(p,C,Y);we=Ke.mergedContent,Ke.conflicts&&s.set(_(p),{type:A,baseUri:Ke.baseUri,incomingUri:Ke.incomingUri})}i.replace(p,new l.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),we)}o(f,"applyModification");const h=(n==null?void 0:n.reverse)?kl(e,{}):Ua(e,{});for(const p of h)if(p.oldFileName==="/dev/null"){if(!p.newFileName)continue;const C=p.newFileName.startsWith("b/")?p.newFileName.substr(2):p.newFileName,Q=this.providerService.createRelativeVirtualUri(t,C);a.push(_(Q)),!await u(Q)?await d(Q,C,p):await f(Q,C,p,D.Created)}else if(p.newFileName==="/dev/null"){if(!p.oldFileName)continue;const C=p.oldFileName.startsWith("a/")?p.oldFileName.substr(2):p.oldFileName,Q=this.providerService.createRelativeVirtualUri(t,C);await u(Q)&&i.deleteFile(Q)}else if(p.oldFileName===p.newFileName){if(!p.newFileName)continue;const C=this.providerService.createRelativeVirtualUri(t,p.newFileName);a.push(_(C)),!await u(C)?await d(C,p.newFileName,p):await f(C,p.newFileName,p,D.Changed)}else throw new Error(`Unable to apply patch to ${p.oldFileName}; Renames aren't currently supported`);if(await l.workspace.applyEdit(i),n.save&&a.length)for(const p of a){const C=l.workspace.textDocuments.find(Q=>_(Q.uri)===p);await(C==null?void 0:C.save())}s.size&&setTimeout(async()=>{const p=[];await this.lock.synchronizeWrite(_(t),async()=>{const C=await this.getWorkingOperations(t);if(C.length===0)return;let Q=-1;for(const A of C){Q++;const Y=s.get(_(A.uri));Y!==void 0&&await this.spliceOperation(A.uri,Q,{...A,conflicts:{baseUri:Y.baseUri,incomingUri:Y.incomingUri,status:[A.type,Y.type]},timestamp:Date.now()},p)}},r),p.length!==0&&this._onDidChange.fire(p)},0)}async createChangeset(t){J.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(J.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let a=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(a=a.filter(c=>c.staged)),a.length===0)return"";const s=[];for(const c of a){const u=await this.createPatchCore(t,c);s.push(u)}return s.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){if(e.fileType!==l.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===D.Created){let u=await this.getContent(e.uri);return ys(n,"",u,"add")}if(e.type===D.Deleted){let u=Hi.decode(await l.workspace.fs.readFile(x.getProviderUri(e.uri)));return ys(n,u,"","delete")}const i=await this.getContent(e.uri),a=Hi.decode(await l.workspace.fs.readFile(x.getProviderUri(e.uri))),s=ms(n,a,i),c=s.indexOf(Cs);return`${r}
${s.substr(c+Cs.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;J.log(r,e);const i=[];await this.lock.synchronizeWrite(_(n),async()=>{const{operation:a,index:s}=await this.getWorkingOperation(t,n);if(a===void 0)return;if(e===void 0&&a.conflicts){const[,u]=a.conflicts.status;switch(u){case D.Changed:switch(a.type){case D.Changed:case D.Created:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,type:D.Changed,size:a.size,hash:a.hash,originalHash:a.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case D.Deleted:switch(a.type){case D.Deleted:await this.discardCore(n,t,i);break;case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case D.Created:await this.spliceOperation(t,s,{...a,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case D.Changed:switch(a.type){case D.Deleted:await this.spliceOperation(t,s,{...a,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(a.type){case D.Changed:case D.Deleted:return;case D.Created:break}break;case D.Deleted:switch(a.type){case D.Deleted:return this.discardCore(n,t,i);case D.Changed:await this.spliceOperation(t,s,{...a,type:D.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case D.Created:return}}const c=e!==void 0?await l.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,s,{...a,type:D.Changed,originalHash:c!==void 0?await Gt(c):a.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;J.log(i,e,n);const a=[];await this.lock.synchronizeWrite(_(r),async()=>{const{operation:s,index:c}=await this.getWorkingOperation(t,r);if(s===void 0)return;switch(e.type){case D.Changed:switch(s.type){case D.Deleted:await this.spliceOperation(t,c,{...s,type:D.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:break;case D.Changed:break}break;case D.Created:switch(s.type){case D.Deleted:case D.Changed:return;case D.Created:const C=await l.workspace.fs.readFile(e.providerUri);await this.spliceOperation(t,c,{...s,originalHash:C!==void 0?await Gt(C):s.originalHash,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]},type:D.Changed,timestamp:Date.now()},a);break}break;case D.Deleted:switch(s.type){case D.Deleted:return this.discardCore(r,t,a);case D.Changed:await this.spliceOperation(t,c,{...s,type:D.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[s.type,e.type]},timestamp:Date.now()},a);return;case D.Created:return}}const u=await this.providerService.getMetadata(e.providerUri),d=await this.getWorkingContent(r,t),f=s.type===D.Created?new Uint8Array(0):await l.workspace.fs.readFile(n.providerUri),h=await l.workspace.fs.readFile(e.providerUri),p=Ss(Hi.decode(d),Hi.decode(f),Hi.decode(h),u.HEAD.sha);await this.writeFileCore(r,t,a,Ul.encode(p.mergedContent),h!=null?h:new Uint8Array(0),p.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[s.type,e.type]}:void 0)},i),a.length!==0&&this._onDidChange.fire(a)}async resolveDiffCommand(t,e,n,r){let i;const a=this.providerService.getVirtualRootUri(t);return a!==void 0&&({operation:i}=await this.getWorkingOperation(t,a)),(i==null?void 0:i.type)===D.Deleted?this.resolveOpenCommand(e):be.getAny("git.openDiffOnClick",void 0,!0)?((i==null?void 0:i.type)===D.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]}):this.resolveOpenCommand(t)}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;J.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new Ha.ScopedChangeStore(this,e,this.workspaceId):new Ha.ScopedChangeStore(new Ha(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=_(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var a;const{operation:s}=await this.getWorkingOperation(t,n);if(s!==void 0){if(s.type===D.Deleted)throw l.FileSystemError.FileNotFound(`The ${s.fileType===l.FileType.Directory?"folder":"file"} has been deleted.`);return{type:s.fileType,size:(a=s.size)!=null?a:0,ctime:0,mtime:s.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new Ue(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=_(r),a=this.cache.get(i);return(a==null?void 0:a.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const s=this.cache.get(i);if((s==null?void 0:s.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ue(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e),s=await this.providerService.getMetadata(t);let c;i===void 0?c={type:D.Created,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:i.type===D.Deleted?c={...i,type:D.Changed,revision:s.HEAD.sha,timestamp:Date.now(),size:0,hash:""}:c={...i,timestamp:Date.now()},await this.spliceOperation(t,a,c,r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ue(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const s=await this.providerService.getMetadata(t);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.Directory,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new Ue(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=_(n),a=this.cache.get(i);return(a==null?void 0:a.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:s}=$(n,t),c=await this.getWorkingOperations(n);for(const u of c)switch(u.type){case D.Changed:break;case D.Created:{if(X(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri);e.push([d,u.fileType])}break}case D.Deleted:{if(X(u.uri,s)){const d=this.providerService.getRelativeFilePath(t,u.uri),f=e.findIndex(([h])=>h===d);f!==-1&&e.splice(f,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=new Ue(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const s=[];if(await this.lock.synchronizeWrite(_(i),async()=>this.writeFileCore(i,t,s,e,n,r),a.context),s.length===0)return;this._onDidChange.fire(s)}finally{a.stop()}}async writeFileCore(t,e,n,r,i,a){const s=new Ue(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,a);try{const[{operation:c,index:u},d,f]=await Promise.all([this.getWorkingOperation(e,t),Gt(r),Gt(i)]);if(d===f&&(!c||(c==null?void 0:c.type)===D.Changed))return this.discardCore(t,e,n);if(d===(c==null?void 0:c.hash)&&f===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,u,c===void 0?{type:D.Changed,uri:e,fileType:l.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:d,originalHash:f,conflicts:a,staged:!1},n)}finally{s.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new Ue(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(_(n),async()=>{const[{operation:a,index:s},c,u]=await Promise.all([this.getWorkingOperation(t,n),Gt(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,s,a===void 0?{type:D.Created,uri:t,fileType:l.FileType.File,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:a.type===D.Deleted?{...a,type:D.Changed,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c}:{...a,type:D.Created,revision:u.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ue(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(_(e),async()=>{const{operation:i,index:a}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===D.Created)return this.discardCore(e,t,r);const[s]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,a,{type:D.Deleted,uri:t,fileType:l.FileType.File,revision:s.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=Ae(t),{operation:i,index:a}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:a}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=O(t);return this.findParent(t,e,(r,i)=>r.type===D.Created&&!i.some(a=>X(a.uri,r.uri)&&O(a.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===D.Deleted&&Z(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=O(t);let r=-1;const i=e.find((a,s)=>O(a.uri)!==n?!1:(r=s,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=_(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){J.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=_(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),J.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw J.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){J.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof l.FileSystemError&&n.code===Ol)return;throw J.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){J.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw J.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${F(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const a=await this.getWorkingOperations(i);e!==-1?a.splice(e,1,n):a.push(n),await this.saveWorkingOperations(i,a),r.push(vo(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&k(r)?typeof r=="string"?l.Uri.parse(r):l.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw J.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:Ha.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let Bo=Ha;Bo.operationsStorageSchemaVersion=1,Bo.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=l.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},Nl([At()],Bo.prototype,"getWorkingOperations",1);function Hl(t){switch(t){case D.Changed:return l.l10n.t("Modified");case D.Created:return l.l10n.t("Added");case D.Deleted:return l.l10n.t("Deleted")}}o(Hl,"getStatusText");function Wl(t){const[e,n]=t;switch(e){case D.Changed:switch(n){case D.Changed:case D.Created:return l.l10n.t("Modified by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Created:switch(n){case D.Changed:case D.Created:return l.l10n.t("Added by Both");case D.Deleted:return l.l10n.t("Deleted by Incoming")}case D.Deleted:switch(n){case D.Changed:case D.Created:return l.l10n.t("Deleted by Current");case D.Deleted:return l.l10n.t("Deleted by Both")}}}o(Wl,"getConflictStatusText");class bs{constructor(e,n){this.providerService=e,this.gitIgnoreFiles=n,this._onDidChangeFileDecorations=new l.EventEmitter,this._decorations=new Map,this._submodules=new Set,this.disposable=l.Disposable.from(l.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),e.onDidChangeRepositories(this.onDidChangeRepositories,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){let n;const r=e.map(({uri:i})=>(this._decorations.delete(_(i)),this.gitIgnoreFiles.isIgnoreFile(i)&&(n=i),i));n?(this.gitIgnoreFiles.getIgnoreFile(n,!0),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)):setTimeout(()=>this._onDidChangeFileDecorations.fire(r),0)}async onDidChangeRepositories(e){for(const n of e.added){this.gitIgnoreFiles.getIgnoreFile(n.uri,!1);const r=await this.providerService.getSubmodules(n.uri);if(!!r)for(const[i,a]of r)this._submodules.add(i)}for(const n of e.removed)this._submodules.delete(_(n.uri))}async provideFileDecoration(e,n){if(e.scheme!==Bn.scheme)return;await Ur(this.providerService,e);const r=_(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const a=await this.gitIgnoreFiles.getIgnoreFile(e,!1);let s=!1;try{s=(await l.workspace.fs.stat(e)).type===l.FileType.Directory}catch(f){f instanceof Error&&f.message==="The folder has been deleted."&&(s=!0)}if(a==null?void 0:a.isArbitraryPathIgnored(e.path,s))return i={color:new l.ThemeColor("remoteHub.decorations.ignoredResourceForeground")},this._decorations.set(r,i),i;const c=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let u;c.length>0&&(u=c.find(f=>_(f.uri)===r));const d=await this.providerService.changeStoreGetChange(e);if(d===void 0){if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u2193A",color:new l.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Added)")};break;case D.Deleted:i={badge:"\u2193D",color:new l.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Deleted)")};break;case D.Changed:i={badge:"\u2193M",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new l.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:l.l10n.t("Pending Incoming Changes")};break}else this._submodules.has(this.providerService.getRelativeFilePath(e))&&(i={badge:"S",color:new l.ThemeColor("remoteHub.decorations.submoduleForegroundColor"),tooltip:"Submodule"});return this._decorations.set(r,i!=null?i:null),i}if(d.conflicts)i={badge:"!",color:new l.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:l.l10n.t("Merge Conflicts ({0})",Wl(d.conflicts.status))};else if(u!==void 0)switch(u.type){case D.Created:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Added)")};break;case D.Deleted:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts (Deleted)")};break;case D.Changed:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new l.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:l.l10n.t("Possible Merge Conflicts")}}else switch(d.type){case D.Created:i={badge:"A",color:new l.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:l.l10n.t("Added")};break;case D.Changed:i={badge:"M",color:new l.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:l.l10n.t("Modified")};break;case D.Deleted:i={badge:"D",color:new l.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:l.l10n.t("Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}o(bs,"ScmDecorationProvider");var jc=cr(919);function Yc(t,e,n){if(!(e==null?void 0:e.length)&&!(n==null?void 0:n.length))return new Set(t);let r;if(e==null?void 0:e.length){const i=new Set([...e,...e.map(s=>`${s}/**`)]),a=micromatch(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}if(n==null?void 0:n.length){const i=new Set([...n,...n.map(a=>`${a}/**`)]);if(r===void 0){const a=micromatch.not(t,[...i],{dot:!0,nocase:!0});r=new Set(a)}else micromatch(t,[...i],{dot:!0,nocase:!0}).forEach(r.delete,r)}return r}o(Yc,"globFilter");function _s(t,e={}){if(!t)return Ms;if(typeof t=="string"||ec(t)){const n=Wo(t,e);if(n===Wi)return Ms;const r=o(function(i,a){return!!n(i,a)},"resultPattern");return n.allBasenames&&(r.allBasenames=n.allBasenames),n.allPaths&&(r.allPaths=n.allPaths),r}return nc(t,e)}o(_s,"parse");function $l(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}o($l,"equals");function Ho(t){return!!t&&typeof t.then=="function"}o(Ho,"isThenable");function qc(){return Object.create(null)}o(qc,"getEmptyExpression");const po="**",Es="/",mo="[/\\\\]",yo="[^/\\\\]",Qc=/\//g;function As(t,e){switch(t){case 0:return"";case 1:return`${yo}*?`;default:return`(?:${mo}|${yo}+${mo}${e?`|${mo}${yo}+`:""})*?`}}o(As,"starsToRegExp");function Ds(t,e){if(!t)return[];const n=[];let r=!1,i=!1,a="";for(const s of t){switch(s){case e:if(!r&&!i){n.push(a),a="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":i=!0;break;case"]":i=!1;break}a+=s}return a&&n.push(a),n}o(Ds,"splitGlobAware");function Rs(t){if(!t)return"";let e="";const n=Ds(t,Es);if(n.every(r=>r===po))e=".*";else{let r=!1;n.forEach((i,a)=>{if(i===po){if(r)return;e+=As(2,a===n.length-1)}else{let s=!1,c="",u=!1,d="";for(const f of i){if(f!=="}"&&s){c+=f;continue}if(u&&(f!=="]"||!d)){let h;f==="-"?h=f:(f==="^"||f==="!")&&!d?h="^":f===Es?h="":h=Lr(f),d+=h;continue}switch(f){case"{":s=!0;continue;case"[":u=!0;continue;case"}":{e+=`(?:${Ds(c,",").map(C=>Rs(C)).join("|")})`,s=!1,c="";break}case"]":{e+="["+d+"]",u=!1,d="";break}case"?":e+=yo;continue;case"*":e+=As(1);continue;default:e+=Lr(f)}}a<n.length-1&&(n[a+1]!==po||a+2<n.length)&&(e+=mo)}r=i===po})}return e}o(Rs,"parseRegExp");const Kl=/^\*\*\/\*\.[\w\.-]+$/,Gl=/^\*\*\/([\w\.-]+)\/?$/,zl=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Vl=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,Jl=/^\*\*((\/[\w\.-]+)+)\/?$/,jl=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Ts=new bn(1e4),Ms=o(function(){return!1},"FALSE"),Wi=o(function(){return null},"NULL");function Wo(t,e){if(!t)return Wi;let n;typeof t!="string"?n=t.pattern:n=t,n=n.trim();const r=`${n}_${!!e.trimForExclusions}`;let i=Ts.get(r);if(i)return Ps(i,t);let a;return Kl.test(n)?i=ql(n.substr(4),n):(a=Gl.exec($o(n,e)))?i=Ql(a[1],n):(e.trimForExclusions?Vl:zl).test(n)?i=Xl(n,e):(a=Jl.exec($o(n,e)))?i=Is(a[1].substr(1),n,!0):(a=jl.exec($o(n,e)))?i=Is(a[1],n,!1):i=Zl(n),Ts.set(r,i),Ps(i,t)}o(Wo,"parsePattern");function Yl(t,e){if(!t||!e)return t;const n=e.length;if(n===0||t.length===0)return t;let r=0;for(;t.indexOf(e,r)===r;)r=r+n;return t.substring(r)}o(Yl,"ltrim");function Ps(t,e){if(typeof e=="string")return t;const n=o(function(r,i){return Z(r,e.base)?t(Yl(r.substr(e.base.length),"/"),i):null},"wrappedPattern");return n.allBasenames=t.allBasenames,n.allPaths=t.allPaths,n.basenames=t.basenames,n.patterns=t.patterns,n}o(Ps,"wrapRelativePattern");function $o(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}o($o,"trimForExclusions");function ql(t,e){return function(n,r){return typeof n=="string"&&n.endsWith(t)?e:null}}o(ql,"trivia1");function Ql(t,e){const n=`/${t}`,r=`\\${t}`,i=o(function(s,c){return typeof s!="string"?null:c?c===t?e:null:s===t||s.endsWith(n)||s.endsWith(r)?e:null},"parsedPattern"),a=[t];return i.basenames=a,i.patterns=[e],i.allBasenames=a,i}o(Ql,"trivia2");function Xl(t,e){const n=Ls(t.slice(1,-1).split(",").map(c=>Wo(c,e)).filter(c=>c!==Wi),t),r=n.length;if(!r)return Wi;if(r===1)return n[0];const i=o(function(c,u){for(let d=0,f=n.length;d<f;d++)if(n[d](c,u))return t;return null},"parsedPattern"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(Xl,"trivia3");function Is(t,e,n){const r="/"+t;let i;return n?i=o(function(a,s){return typeof a=="string"&&a.endsWith(r)?e:null},"parsedPattern"):i=o(function(a,s){return null},"parsedPattern"),i.allPaths=[(n?"*/":"./")+t],i}o(Is,"trivia4and5");function Zl(t){try{const e=new RegExp(`^${Rs(t)}$`);return function(n){return e.lastIndex=0,typeof n=="string"&&e.test(n)?t:null}}catch(e){return Wi}}o(Zl,"toRegExp");function Xc(t,e,n){return!t||typeof e!="string"?!1:_s(t)(e,void 0,n)}o(Xc,"match");function ec(t){const e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}o(ec,"isRelativePattern");function Zc(t){return t.allBasenames||[]}o(Zc,"getBasenameTerms");function eu(t){return t.allPaths||[]}o(eu,"getPathTerms");function tc(t){let e=-1,n=0,r=-1,i=!0,a=0;for(let s=t.length-1;s>=0;--s){const c=t.charCodeAt(s);if(c===47){if(!i){n=s+1;break}continue}r===-1&&(i=!1,r=s+1),c===46?e===-1?e=s:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||r===-1||a===0||a===1&&e===r-1&&e===n+1?"":t.slice(e,r)}o(tc,"extname");function nc(t,e){const n=Ls(Object.getOwnPropertyNames(t).map(c=>rc(c,t[c],e)).filter(c=>c!==Wi)),r=n.length;if(!r)return Wi;if(!n.some(c=>!!c.requiresSiblings)){if(r===1)return n[0];const c=o(function(f,h){let p;for(let C=0,Q=n.length;C<Q;C++){const A=n[C](f,h);if(typeof A=="string")return A;Ho(A)&&(p||(p=[]),p.push(A))}return p?(async()=>{for(const C of p){const Q=await C;if(typeof Q=="string")return Q}return null})():null},"resultExpression2"),u=n.find(f=>!!f.allBasenames);u&&(c.allBasenames=u.allBasenames);const d=n.reduce((f,h)=>h.allPaths?f.concat(h.allPaths):f,[]);return d.length&&(c.allPaths=d),c}const i=o(function(c,u,d){let f,h;for(let p=0,C=n.length;p<C;p++){const Q=n[p];Q.requiresSiblings&&d&&(u||(u=V(c)),f||(f=u.substr(0,u.length-tc(c).length)));const A=Q(c,u,f,d);if(typeof A=="string")return A;Ho(A)&&(h||(h=[]),h.push(A))}return h?(async()=>{for(const p of h){const C=await p;if(typeof C=="string")return C}return null})():null},"resultExpression"),a=n.find(c=>!!c.allBasenames);a&&(i.allBasenames=a.allBasenames);const s=n.reduce((c,u)=>u.allPaths?c.concat(u.allPaths):c,[]);return s.length&&(i.allPaths=s),i}o(nc,"parsedExpression");function rc(t,e,n){if(e===!1)return Wi;const r=Wo(t,n);if(r===Wi)return Wi;if(typeof e=="boolean")return r;if(e){const i=e.when;if(typeof i=="string"){const a=o((s,c,u,d)=>{if(!d||!r(s,c))return null;const f=i.replace("$(basename)",()=>u),h=d(f);return Ho(h)?h.then(p=>p?t:null):h?t:null},"result");return a.requiresSiblings=!0,a}}return r}o(rc,"parseExpressionPattern");function Ls(t,e){const n=t.filter(c=>!!c.basenames);if(n.length<2)return t;const r=n.reduce((c,u)=>{const d=u.basenames;return d?c.concat(d):c},[]);let i;if(e){i=[];for(let c=0,u=r.length;c<u;c++)i.push(e)}else i=n.reduce((c,u)=>{const d=u.patterns;return d?c.concat(d):c},[]);const a=o(function(c,u){if(typeof c!="string")return null;if(!u){let f;for(f=c.length;f>0;f--){const h=c.charCodeAt(f-1);if(h===47||h===92)break}u=c.substr(f)}const d=r.indexOf(u);return d!==-1?i[d]:null},"aggregate");a.basenames=r,a.patterns=i,a.allBasenames=r;const s=t.filter(c=>!c.basenames);return s.push(a),s}o(Ls,"aggregateBasenameMatches");function tu(t,e){return $l(t,e,(n,r)=>typeof n=="string"&&typeof r=="string"?n===r:typeof n!="string"&&typeof r!="string"?n.base===r.base&&n.pattern===r.pattern:!1)}o(tu,"patternsEquals");class ks{constructor(e,n,r){if(this.location=n,this.parent=r,n[n.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");n[n.length-1]!=="/"&&(n+="/"),this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}updateContents(e){this.isPathIgnored=this.parseIgnoreFile(e,this.location,this.parent)}isPathIncludedInTraversal(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);return!this.isPathIgnored(e,n)}isArbitraryPathIgnored(e,n){if(e[0]!=="/"||e[e.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+e);const r=e.split("/").filter(s=>s);let i=!1,a="";for(let s=0;s<r.length;s++){const c=s===r.length-1,u=r[s];if(a=a+"/"+u,!this.isPathIncludedInTraversal(a,c?n:!0)){i=!0;break}}return i}gitignoreLinesToExpression(e,n,r){const i=e.map(s=>this.gitignoreLineToGlob(s,n)),a=Object.create(null);for(const s of i)a[s]=!0;return _s(a,{trimForExclusions:r})}parseIgnoreFile(e,n,r){const i=e.split(`
`).map(A=>A.trim()).filter(A=>A&&A[0]!=="#"),a=i.filter(A=>!A.endsWith("/")),s=a.filter(A=>!A.includes("!")),c=this.gitignoreLinesToExpression(s,n,!0),u=a.filter(A=>A.includes("!")).map(A=>A.replace(/!/g,"")),d=this.gitignoreLinesToExpression(u,n,!1),f=i.filter(A=>!A.includes("!")),h=this.gitignoreLinesToExpression(f,n,!0),p=i.filter(A=>A.includes("!")).map(A=>A.replace(/!/g,"")),C=this.gitignoreLinesToExpression(p,n,!1);return o((A,Y)=>{if(!A.startsWith(n))return!1;if(Y&&h(A)&&!C(A))return!0;const we=c(A),ie=d(A);return we&&!ie?!0:r?r.isPathIgnored(A,Y):!1},"isPathIgnored")}gitignoreLineToGlob(e,n){const r=e.indexOf("/");return r===-1||r===e.length-1?e="**/"+e:(r===0?n.slice(-1)==="/"&&(e=e.slice(1)):n.slice(-1)!=="/"&&(e="/"+e),e=n+e),e}}o(ks,"IgnoreFile");const xs=new TextDecoder;class Fs{constructor(e){this.providerService=e,this._gitIgnoreFiles=new Map}isIgnoreFile(e){return this.getIgnoreFileUri(e).toString()===e.toString()}async getIgnoreFile(e,n){const r=this.providerService.getVirtualRootUri(e),i=r.toString(),a=this._gitIgnoreFiles.get(i);if(a&&!n)return a;const s=this.doProcessIgnoreFile(r,a);return this._gitIgnoreFiles.set(i,s),s}getIgnoreFileUri(e){const n=this.providerService.getVirtualRootUri(e);return this.providerService.createRelativeUri(n,".gitignore")}async doProcessIgnoreFile(e,n){const r=this.providerService.createRelativeUri(e,".gitignore");try{if((await l.workspace.fs.stat(r)).type!==l.FileType.File)return;const a=await l.workspace.fs.readFile(r);if(n!==void 0){const s=await n;if(s)return s.updateContents(xs.decode(a)),s}return new ks(xs.decode(a),`${e.path}/`)}catch(i){}}}o(Fs,"IgnoreFileService");const Ns=o(t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296},"e");class Os{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:a,seed:s}=e;this.dictionaries=i,this.separator=r,this.length=n,this.style=a,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;e?(i=(s=>{if(typeof s=="string"){const c=s.split("").map(d=>d.charCodeAt(0)).reduce((d,f)=>d+f,1),u=Math.floor(Number(c));return Ns(u)}return Ns(s)})(e),e=4294967296*i):i=Math.random();let a=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")a=a.toLowerCase();else if(this.style==="capital"){const[s,...c]=a.split("");a=s.toUpperCase()+c.join("")}else this.style==="upperCase"&&(a=a.toUpperCase());return n?`${n}${this.separator}${a}`:`${a}`},"")}}o(Os,"a");const Us={separator:"_",dictionaries:[]},ic=o(t=>{const e=[...t&&t.dictionaries||Us.dictionaries],n={...Us,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new Os(n).generate()},"n");var ac=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blonde","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","chronic","chubby","circular","civic","civil","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colorful","colossal","coloured","colourful","combined","comfortable","commercial","common","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fatal","favourable","favourite","federal","fellow","few","fierce","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","implicit","important","impossible","impressed","impressive","improved","inadequate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mutual","mysterious","naked","narrow","nasty","national","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","only","open","operational","opposite","optimistic","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],oc=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],sc=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"],nu=null,ru=null,iu=null;class Bs{static generate(e={}){let n=e.min||1,r=e.max||999;if(e.length){const i=Math.pow(10,e.length);return n=i/10,r=i-1,[`${Math.floor(Math.random()*(r-n))+n}`]}return[`${Math.floor(Math.random()*(r-n))+n}`]}}o(Bs,"y");class Qi{constructor(e,n){this.command=e,this.show=n}get label(){return this.command.title}get identifier(){return this.command.command}async execute(){var e;return void await l.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}get alwaysShow(){var e;return(e=this.show)!=null?e:!1}get commandArguments(){return this.command.arguments}set commandArguments(e){this.command.arguments=e}}o(Qi,"CommandQuickPickItem");var wo;(function(t){async function e(n,r,i,a,s,c){let u;Array.isArray(s)?u=s:c===void 0&&(u=[],c=s);const d=l.window.createQuickPick(),f=new Tn(500),h=[f],{defaultBranch:p,HEAD:C}=await n.getMetadata(r);async function Q(De){const[Ie,Ke,Qe,it]=await Promise.all([n.getBranch(r,p.name),n.getBranches(r,{query:De,limit:100}),n.getTags(r,{query:De,limit:100}),n.getSnapshots(r)]),Ye=new Set,Pt=new Set;for(const dn of it)Ye.add(dn.hash),Pt.add(dn.branch.name);const Zt=((c==null?void 0:c.filterBranches)?Ke.branches.filter(c==null?void 0:c.filterBranches):Ke.branches).filter(dn=>dn.name!==p.name).sort((dn,Rr)=>dn.committedDate&&Rr.committedDate?Rr.committedDate.getTime()-dn.committedDate.getTime():0),sn=l.l10n.t("Open indexed commit"),zt=[{iconPath:new l.ThemeIcon("layers-active"),tooltip:sn}];if(De!==void 0&&u){for(const dn of u)if(dn.identifier==="remoteHub.createBranch"||dn.identifier==="remoteHub.createBranchFrom"){const Rr=dn.commandArguments;if(!Rr)continue;const Mi=Rr.findIndex(oa=>"uri"in oa);let Pi;Mi!==-1&&([Pi]=Rr.splice(Mi,1),Pi.branch=De,Rr.push(Pi),dn.commandArguments=Rr)}}return[...u,{label:"",kind:l.QuickPickItemKind.Separator},...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${U(C.sha)}${Ye.has(C.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:fe.Commit,name:void 0,sha:C.sha,buttons:Ye.has(C.sha)?zt:void 0}]:[],{label:`$(${(Ie==null?void 0:Ie.locked)?"lock":"git-branch"}) ${p.name} (default)`,description:`\u2022$(git-commit) ${U(p.sha)}${Pt.has(p.name)||Ye.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:fe.Branch,name:void 0,sha:p.sha,buttons:Pt.has(p.name)||Ye.has(p.sha)?zt:void 0},...Zt.map(dn=>({label:`$(${dn.locked?"lock":"git-branch"}) ${dn.name}`,description:`\u2022$(git-commit) ${U(dn.commit)}${Pt.has(dn.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:fe.Branch,name:dn.name,sha:dn.commit,buttons:Pt.has(dn.name)?zt:void 0})),...Qe.tags.map(dn=>({label:`$(tag) ${dn.name}`,description:`\u2022$(git-commit) ${U(dn.commit)}${Ye.has(dn.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:fe.Tag,name:dn.name,sha:dn.commit,buttons:Ye.has(dn.commit)?zt:void 0}))]}o(Q,"getItems");const A=Q(void 0);let Y,we=!1;async function ie(De){Y=void 0;const Ie=d.activeItems;d.items=De!=null?De:await A,we&&Ie.length!==0&&(d.activeItems=d.items.filter(Ke=>Ie.some(Qe=>Qe.label===Ke.label))),d.busy=!1}o(ie,"setItems");try{return await new Promise(Ie=>{var Ke;h.push(d.onDidHide(()=>Ie(void 0)),d.onDidChangeValue(Qe=>{if(we=!1,Qe=Qe.trim(),(c==null?void 0:c.allowResetToSha)&&C.branch&&N(Qe)){ie([{label:`Reset $(git-branch) ${C.branch.name} to $(git-commit) ${Qe}`,name:C.branch.name,sha:Qe,type:fe.Branch}]);return}d.busy=!0;const it=f.debounce(Qe?()=>Q(Qe):()=>A);Y===void 0&&(Y=it.then(async Ye=>ie(Ye)))}),d.onDidAccept(()=>{if(d.activeItems.length!==0){const[Qe]=d.activeItems;Ie(Qe)}}),d.onDidTriggerItemButton(Qe=>{const it=Qe.item;!(it instanceof Qi)&&it.kind!==l.QuickPickItemKind.Separator&&(it.useIndex=!0),Ie(it)})),d.title=a,d.placeholder=i,d.matchOnDescription=!0,d.ignoreFocusOut=(Ke=c==null?void 0:c.ignoreFocusOut)!=null?Ke:!0,d.busy=!0,d.show(),Y=f.debounce(async()=>A,0).then(Qe=>ie(Qe))})}finally{d.dispose(),h.forEach(De=>void De.dispose())}}o(e,"show"),t.show=e})(wo||(wo={}));const lc=new TextDecoder;class Hs{constructor(e,n,r,i){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this.ignoreFileService=i,this._onDidCloseRepository=new l.EventEmitter,this._onDidOpenRepository=new l.EventEmitter,this._onDidChangeState=new l.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.setContext(void 0),this.disposable=l.Disposable.from(be.onDidChange(this.onConfigurationChanged,this),be.onDidChangeAny(this.setContext,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:s})=>{const c=this.getScmProvider(x.getVirtualUri(s.uri));c!==void 0&&await this.updateStatusBarCommands(c,void 0)}),this.providerService.onDidSyncRepository(async({repository:s,syncing:c})=>{const u=this.getScmProvider(x.getVirtualUri(s.uri));u!==void 0&&(await this.updateStatusBarCommands(u,{syncing:c}),c===!1&&await this.update(s.uri))}),this.providerService.onDidRefresh(s=>{for(const c of s)this.update(c)}),this.providerService.onDidChangeChangeStore(s=>this.update(s[0].rootUri)),...this.registerCommands());const a=this.providerService.repositories;this.onRepositoriesChanged({added:a,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=be.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}setContext(e){if((e==null?void 0:e.affectsConfiguration("git.openDiffOnClick"))||e===void 0){const n=be.getAny("git.openDiffOnClick",void 0,!0);Kn(an.OpenDiffOnClick,n),this.refresh()}}onConfigurationChanged(e){be.changed(e,"staging")&&(this._staging=void 0,be.changed(e,"staging.enabled")&&this.refresh()),be.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>_(i.sourceControl.rootUri)===_(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[l.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),l.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),l.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),l.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),l.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(Ws(e)){const a=this.getSourceControlFrom(e);if((a==null?void 0:a.rootUri)===void 0)return;const c=e.resourceStates.filter(Wa);if(c.length!==0){if(await Go(c))for(const u of c)await this.providerService.getChangeStore(u.resourceUri).discard(u.resourceUri),await this.closeDiffEditors(a.rootUri,[u.resourceUri]);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await Go(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),l.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{const n=this.getSourceControlFrom(e[0]);if((n==null?void 0:n.rootUri)!==void 0)for(const r of e)!Wa(r)||(this.telemetryService.publicLog2("command.discardChanges"),await Go([r])?(await this.providerService.getChangeStore(r.resourceUri).discard(r.resourceUri),await this.closeDiffEditors(n.rootUri,[r.resourceUri])):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),l.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!Wa(i)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(i.resourceUri).stage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.unstageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.unstageAllChanges"),await this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri),await this.closeDiffEditors(n.rootUri,void 0))}),l.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{var n;const r=(n=this.getSourceControlFrom(e[0]))==null?void 0:n.rootUri;if(!!r)for(const i of e)!Wa(i)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(i.resourceUri).unstage(i.resourceUri),await this.closeDiffEditors(r,[i.resourceUri]))}),l.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!Wa(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),l.commands.registerCommand("remoteHub.openChanges",async e=>{if(e instanceof l.Uri){const i=await this.providerService.getMetadata(e),a=this.getOriginalVirtualUri(e,i);return void l.commands.executeCommand("vscode.diff",a,e,l.l10n.t("{0} (Working Tree)",V(e)))}const n=await this.providerService.getMetadata(e.resourceUri),r=this.getOriginalVirtualUri(e.resourceUri,n);return this.telemetryService.publicLog2("command.openChanges"),void l.commands.executeCommand("vscode.diff",r,e.resourceUri,l.l10n.t("{0} (Working Tree)",V(e.resourceUri)))}),l.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if(Ko(r)){const i=r,a=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:l.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await l.commands.executeCommand(a.command,...(n=a.arguments)!=null?n:[])}else if(r instanceof l.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await l.window.showTextDocument(i)}}),l.commands.registerCommand("remoteHub.createBranch",async e=>{await ii("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),l.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to create a new branch on"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);let a;if(i.accessLevel<le.Write&&(a=await this.providerService.getFork(r),a===void 0)){const A={title:l.l10n.t("Fork Repository")},Y={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You don't have access to create branches on this repository.

Do you want to create a branch on a fork?`),{modal:!0},A,Y)!==A){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions and declined to fork"});return}if(a=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",i.name)},()=>this.providerService.fork(r)),a===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"aborted fork failed"});return}}let s,c=e==null?void 0:e.branch,u=!1;try{(!c||!y(c))&&(c=await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),void 0,void 0)));let A;if(e==null?void 0:e.fromSha)A=e.fromSha,A==="HEAD"&&(A=i.HEAD.sha);else{const Y=await wo.show(this.providerService,r,l.l10n.t("Select a ref to create the new branch from"),void 0,{showHead:!0});if(!Y){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}A=Y.sha,u=Boolean(Y.useIndex)}c&&A&&(s=await this.providerService.createBranch(r,c,A,a))}catch(A){J.error(A),l.window.showErrorMessage(l.l10n.t("Unable to create the new branch."));return}if(!s){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const d=await this.providerService.switchTo(a?this.providerService.createVirtualUri(r,a):r,{type:fe.Branch,id:s});if(!d)return;const f=await this.providerService.getChangeStore(r).createChangeset(r);f&&await this.openActionsService.setChangesetToApply(d.uri,f);const h=l.l10n.t("Switch to Branch"),p=l.l10n.t("Open in New Window"),Q=be.get("switchToCreatedBranch")==="always"?h:await l.window.showInformationMessage(l.l10n.t(`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,s),{modal:!0},h,p);!Q||(await this.providerService.getChangeStore(r).discardAll(r),d.location=Q===p?He.NewWindow:He.CurrentWindow,u&&await be.setMode(d.uri,ge.getIndexDefault(he.Branch)),await ut(this.providerService,d,{skipChangesPrompt:!0}))}),l.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=l.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await l.window.showOpenDialog({openLabel:l.l10n.t("Open Patch"),title:l.l10n.t("Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=lc.decode(await l.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{l.window.showErrorMessage(l.l10n.t("Invalid patch file"))}}),l.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let a;Ko(r)&&(a=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const s=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,a),c=await l.workspace.openTextDocument({language:"diff",content:s});await l.window.showTextDocument(c)}}),l.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to switch branches on"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const a=[],s=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.push(new Qi(gr({command:"remoteHub.createBranch",title:l.l10n.t("{0} Create new branch...","$(add)"),arguments:[{uri:i}]}),!0),new Qi(gr({command:"remoteHub.createBranchFrom",title:l.l10n.t("{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}),!0)),s.HEAD.type){case K.Branch:a.push(new Qi(gr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));break;case K.RemoteBranch:a.push(new Qi(gr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Remote Branch on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.HEAD.branch.remote.repo,branch:s.HEAD.branch.name}]})));break;case K.Tag:a.push(new Qi(gr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Tag on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,tag:s.HEAD.detached.name}]})));break;case K.Commit:a.push(new Qi(gr({command:"remoteHub.openOnRemote",title:l.l10n.t("{0} Open Commit on {1}...","$(globe)",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})));break}const c=(r=s.HEAD.branch)==null?void 0:r.name,u=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),d=await wo.show(this.providerService,i,l.l10n.t("Select a branch or tag to checkout"),void 0,a,{allowResetToSha:u,filterBranches:c?f=>f.name!==c:void 0,ignoreFocusOut:!1});if(!d){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return d instanceof Qi?void d.execute():u&&d.type===fe.Branch&&d.name===c&&d.sha?l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:d.sha})}catch(f){J.error(f),l.window.showErrorMessage(l.l10n.t("Unable to reset the repository to commit '{0}'.",U(d.sha)))}}):void l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const f=await this.providerService.switchTo(i,d.name?{type:d.type,id:d.name}:void 0);if(f!==void 0){if(d.useIndex){const h=await this.providerService.getModeRefType(f.uri);await be.setMode(f.uri,ge.getIndexDefault(h))}return ut(this.providerService,f)}})}),l.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to fetch"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){l.window.showErrorMessage(l.l10n.t("Unable to fetch repository"))}}}),l.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await l.window.withProgress({location:l.ProgressLocation.SourceControl},async()=>{const i=[];for(const a of n)try{await this.providerService.fetch(a.uri)}catch(s){i.push(s)}return i})).length&&!(e==null?void 0:e.automated)&&l.window.showErrorMessage(n.length?l.l10n.t("Unable to fetch repositories"):l.l10n.t("Unable to fetch repository"))}),l.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to pull"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),l.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await $a(this._scmProviders,l.l10n.t("Choose which repository to sync"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),l.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),be.updateEffective("commitDirectlyWarning",ht.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(nt.asVirtualProviderErrorCode(i)===oe.SyncConflictsError){const a={title:l.l10n.t("Continue")},s={title:l.l10n.t("Cancel"),isCloseAffordance:!0};await l.window.showWarningMessage(n?l.l10n.t(`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):l.l10n.t(`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},a,s)===a?await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:ue.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(nt.asVirtualProviderErrorCode(i)===oe.UnresolvedConflictsError)await l.window.showErrorMessage(n?l.l10n.t("You must resolve any pending conflicts before pulling."):l.l10n.t("You must resolve any pending conflicts before syncing."),{modal:!0});else throw J.error(i),this.telemetryService.sendException(i),l.window.showErrorMessage(l.l10n.t("Unable to sync the repository.")),i}}async commitChanges(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(nt.asVirtualProviderErrorCode(r)===oe.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}J.error(r),l.window.showErrorMessage(l.l10n.t("Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new Ue(`VirtualSourceControl.commitChanges(${r.toString()})`);let a;try{const s=await this.providerService.getMetadata(r);let c,u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),a=": Aborted; Unresolved conflicts";return}const p=await this.providerService.getCommitOperations(r,{staged:d});if(p.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),a=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),a=": Aborted; No message";return}let C,Q;if(s.HEAD.type===K.RemoteBranch?(Q=s.HEAD.branch.remote.accessLevel<le.Write,C=Q&&s.accessLevel<le.Write):(C=s.accessLevel<le.Write,Q=C),u===void 0&&C&&(u=await this.providerService.getFork(r),u===void 0)){const A={title:l.l10n.t("Fork Repository")},Y={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t("You're trying to make changes in a project you don't have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},A,Y)!==A){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),a=": Aborted; Abandoned fork prompt";return}if(u=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",s.name)},()=>this.providerService.fork(r)),u===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),a=": Aborted; Fork failed";return}}if(u||Q){if(u===void 0){const we={title:l.l10n.t("Commit to a New Branch")},ie={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`You're trying to make changes to a branch you don't have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},we,ie)!==we){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),a=": Aborted; Abandoned commit to new branch prompt";return}}let A=0;try{const we=await this.providerService.getBranches(u?this.providerService.createVirtualUri(r,u):r,{query:"patch-"});for(const ie of we.branches){const De=/^patch-(?<num>\d+)$/.exec(ie.name);if(De==null?void 0:De.groups){const Ie=Number(De.groups.num);Ie>A&&(A=Ie)}}}catch{}const Y=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name),`patch-${A+1}`);if(Y&&(c=await this.providerService.createBranch(r,Y,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),a=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,p,c,n,u),await this.closeDiffEditors(r,void 0)}catch(A){const Y=nt.asVirtualProviderErrorCode(A);if(Y===oe.DetachedHEADError){const we={title:l.l10n.t("Commit to a New Branch")},ie={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showErrorMessage(l.l10n.t(`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},we,ie)!==we){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const Ie=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(Ie&&(c=await this.providerService.createBranch(r,Ie,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(Y===oe.MergeConflictError){const we={title:l.l10n.t("Pull")},ie={title:l.l10n.t("Sync (Pull & Push)")},De={title:l.l10n.t("Cancel"),isCloseAffordance:!0},Ie=await l.window.showErrorMessage(l.l10n.t(`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},we,ie,De);if(Ie!==we&&Ie!==ie){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),a=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:Ie===we,conflictResolution:ue.Merge}),Ie===we){a=': Aborted; Chose "pull" from merge changes prompt';return}continue}else if(Y===oe.CommitToProtectedBranchError){const we={title:l.l10n.t("Commit to a New Branch")},ie={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if((l.workspace.getConfiguration("git").get("branchProtectionPrompt")==="alwaysCommitToNewBranch"?we:await l.window.showErrorMessage(l.l10n.t(`You are trying to commit to a protected branch and you do not have permission to push your commits to the remote.

How would you like to proceed?`),{modal:!0},we,ie))!==we){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),a=": Aborted; Abandoned commit to new branch prompt (detached head)";return}const Ke=await Ka(this.providerService,r,l.l10n.t("Please provide a new branch name"),l.l10n.t("New branch name"),l.l10n.t("Commit \u2022 Create Branch \u2022 {0}",u?u.name:s.name));if(Ke&&(c=await this.providerService.createBranch(r,Ke,s.HEAD.sha,u)),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),a=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(Y===oe.CommitToArchivedRepositoryError){l.window.showErrorMessage(l.l10n.t("The current repository has been archived and is now read-only. Please contact the repository owner."),{modal:!0}),this.telemetryService.publicLog2("commit.abort",{reason:"archived repository"}),a=`: Aborted; ${String(A)}`;return}else throw J.error(A),a=`: Aborted; ${String(A)}`,A}break}if(e.inputBox.value="",u?await this.providerService.getChangeStore(r).discardAll(r,{staged:d}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:d}),Jo(ha.HasCommitted,!0),!u&&!c)return;async function f(){if(u){const A={title:l.l10n.t("Switch to Fork")},Y={title:l.l10n.t("Cancel"),isCloseAffordance:!0},we=await l.window.showInformationMessage(l.l10n.t("Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",s.name),{modal:!0},A,Y);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(we===A)}),we===A){let ie;c!==void 0?ie={type:fe.Branch,id:c}:s.HEAD.branch!==void 0&&(ie={type:fe.Branch,id:s.HEAD.branch.name}),ut(this.providerService,{name:u.name,uri:this.providerService.createVirtualUri(r,{repo:u.repo,ref:ie}),location:He.CurrentWindow})}return}const h={title:l.l10n.t("Switch to Branch")},p={title:l.l10n.t("Cancel"),isCloseAffordance:!0},C=be.get("switchToCreatedBranch")==="always",Q=C?h:await l.window.showInformationMessage(l.l10n.t("Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,p);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(Q===h),autoConfirm:String(C)}),Q===h&&ut(this.providerService,{name:s.name,uri:this.providerService.createVirtualUri(r,{repo:s.repo,ref:c?{type:fe.Branch,id:c}:void 0}),location:He.CurrentWindow})}o(f,"showSwitchToPrompt"),f.call(this)}finally{i.stop(a?{message:a}:void 0)}}async createPullRequest(e,n){try{await l.window.withProgress({location:l.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=nt.asVirtualProviderErrorCode(r);if(i===oe.NothingToCommitError){l.window.showInformationMessage(l.l10n.t("There are no changes to commit."));return}if(i===oe.CommitFailedError){l.window.showErrorMessage(l.l10n.t("Unable to commit."));return}J.error(r),l.window.showErrorMessage(l.l10n.t("Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,a=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(a),staging:String(this.staging.enabled)});const s=new Ue(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let u=o(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),d;const f=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(l.l10n.t("You must resolve any pending conflicts before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(d=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),d.length===0){e.inputBox.showValidationMessage(this.staging.enabled?l.l10n.t("There are no staged changes to commit."):l.l10n.t("There are no changes to commit."),l.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(l.l10n.t("You must specify a commit message before committing."),l.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const p=await this.providerService.getMetadata(i);let C,Q;p.HEAD.type===K.RemoteBranch?(Q=p.HEAD.branch.remote.accessLevel<le.Write,C=Q&&p.accessLevel<le.Write):(C=p.accessLevel<le.Write,Q=C);let A=n==null?void 0:n.fork;if(A===void 0&&C&&(A=await this.providerService.getFork(i),A===void 0)){const Qe={title:l.l10n.t("Fork Repository")},it={title:l.l10n.t("Cancel"),isCloseAffordance:!0};if(await l.window.showInformationMessage(l.l10n.t(`You're trying to make changes in a project you don't have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},Qe,it)!==Qe){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(A=await l.window.withProgress({location:l.ProgressLocation.Notification,title:l.l10n.t("Forking {0}...",p.name)},()=>this.providerService.fork(i)),A===void 0){l.window.showErrorMessage(l.l10n.t("Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const Y=h.trimStart().split(`
`),we=await l.window.showInputBox({ignoreFocusOut:!0,placeHolder:l.l10n.t("New pull request title"),prompt:l.l10n.t("Please provide a title for the new pull request"),value:Y[0]});if(!we){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function ie(Qe){let it=0;try{const Zt=await this.providerService.getBranches(A?this.providerService.createVirtualUri(i,A):i,{query:"patch-"});for(const sn of Zt.branches){const zt=/^patch-(?<num>\d+)$/.exec(sn.name);if(zt==null?void 0:zt.groups){const dn=Number(zt.groups.num);dn>it&&(it=dn)}}}catch{}const Ye=await Ka(this.providerService,i,l.l10n.t("Create a new branch for this pull request"),l.l10n.t("New branch name"),l.l10n.t("New Pull Request \u2022 Create Branch \u2022 {0}",A?A.name:p.name),`patch-${it+1}`);let Pt;return Ye&&(Pt=await this.providerService.createBranch(i,Ye,Qe,A)),Pt}o(ie,"createBranch");const De=await ie.call(this,p.HEAD.sha);if(!De){u.call(this);return}(d==null?void 0:d.length)&&await this.providerService.createAndPushCommit(i,h,d,De,void 0,A);const Ie=await this.providerService.createPullRequest(i,De,we,Y.slice(1).join(`
`),{draft:a},A);e.inputBox.value="",(d==null?void 0:d.length)&&(A?await this.providerService.getChangeStore(i).discardAll(i,{staged:f}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:f}));async function Ke(){const Qe={title:l.l10n.t("Switch to Pull Request")},it={title:l.l10n.t("Cancel"),isCloseAffordance:!0},Ye=await l.window.showInformationMessage(l.l10n.t("Created pull request #{0} in {1}. Do you want to switch to the new pull request?",Ie.id,p.name),{modal:!0},Qe,it);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(Ye===Qe)}),Ye===Qe&&ut(this.providerService,{name:p.name,uri:this.providerService.createVirtualUri(i,{repo:p.repo,ref:{type:fe.PullRequest,id:Ie.id}}),location:He.CurrentWindow})}o(Ke,"showSwitchToPrompt"),Ke.call(this)}finally{s.stop(c?{message:c}:void 0)}}async update(e){const n=l.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),a=await this.ignoreFileService.getIgnoreFile(e,!1),s=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:f=>f.fileType===l.FileType.File}),c=await Promise.all(s.conflicts.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,f.conflicts.incomingUri,l.l10n.t("{0} (Incoming Changes \u2194 Current Changes)",V(f.uri)))}))),u=await Promise.all(s.staged.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,this.getOriginalVirtualUri(f.uri,r),l.l10n.t("{0} (Index)",V(f.uri)))}))),d=await Promise.all(s.working.filter(f=>a?!a.isArbitraryPathIgnored(f.uri.path,!1):!0).map(async f=>({type:f.type,resourceUri:f.uri,decorations:{strikeThrough:f.type===D.Deleted},command:await this.providerService.getChangeStore(f.uri).resolveDiffCommand(f.uri,this.getOriginalVirtualUri(f.uri,r),l.l10n.t("{0} (Working Tree)",V(f.uri)))})));return i.sourceControl.actionButton=this.ensureActionButton(e),this.ensureMergeConflictsGroup(i).resourceStates=c,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?u:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?d:[...u,...d],i}getOriginalVirtualUri(e,n){return this.providerService.createVirtualUri(x.getProviderId(e),{repo:n.repo,ref:{type:fe.Commit,id:n.HEAD.sha}},this.providerService.getRelativeFilePath(e))}ensureActionButton(e){var n,r;const i=(n=this.providerService.getRegisteredProvider(e))==null?void 0:n.name;return{command:{title:l.l10n.t("Commit & Push"),tooltip:i!==void 0?l.l10n.t("Your changes will be committed and pushed directly to {0}.",i):l.l10n.t("Your changes will be committed and pushed directly to the remote."),command:"remoteHub.commit"},secondaryCommands:[[{title:l.l10n.t("Continue Working On..."),tooltip:l.l10n.t("Bring your working changes with you to a new development environment."),command:"remoteHub.continueOn"}]],enabled:(r=this.providerService.changeStoreMaybeHasChanges(e))!=null?r:!0}}async createOrUpdateScmProvider(e,n){var r,i;const a=await this.providerService.getMetadata(e);let s;const c=a.HEAD.branch?a.HEAD.name:void 0;let u=this.getScmProvider(e);if(u===void 0){n=a.name,s=l.scm.createSourceControl(`remoteHub:${a.provider.id}`,n,e),s.quickDiffProvider={provideOriginalResource:f=>x.getProviderUri(f)};const d=this.providerService.createIGitRepository(e,s,a);u={id:a.provider.id,name:a.provider.name,sourceControl:s,groups:[],repository:d},this.ensureMergeConflictsGroup(u),this.ensureStagedChangesGroup(u),this.ensureWorkingChangesGroup(u),this._scmProviders.push(u)}else s=u.sourceControl;return a.accessLevel>=le.Write||((i=(r=a.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&a.HEAD.branch.remote.accessLevel>=le.Write?(s.acceptInputCommand={command:"remoteHub.commit",title:l.l10n.t("Commit"),arguments:[s]},c?s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,a.provider.name):s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to commit and push to {0})",a.provider.name),be.get("commitDirectlyWarning")===ht.Off?s.inputBox.validateInput=void 0:s.inputBox.validateInput=d=>{if(be.get("commitDirectlyWarning")===ht.Auto&&el(ha.HasCommitted))return;const f=new l.MarkdownString(c?l.l10n.t("Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,a.provider.name):l.l10n.t("Your changes will be committed and immediately pushed to {0}.",a.provider.name)),h="remoteHub.disableCommitDirectlyWarning";return f.isTrusted={enabledCommands:[h]},f.appendMarkdown(`&nbsp; [${l.l10n.t("Don't show again")}](command:${h} '${l.l10n.t("Hide")}')`),{message:f,type:l.SourceControlInputBoxValidationType.Information}}):(s.acceptInputCommand={command:"remoteHub.createPullRequest",title:l.l10n.t("Create a Pull Request"),arguments:[s]},s.inputBox.placeholder=l.l10n.t("Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(u,{syncing:!1},a),u}async updateStatusBarCommands(e,n,r){var i,a,s,c,u;const d=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(d);const{HEAD:f}=r,h=await this.providerService.getIndexMetadata(d),p=(h==null?void 0:h.type)===kt.Active,C=(h==null?void 0:h.type)===kt.Active,Q=kt.hasIndex(h==null?void 0:h.type),A=await this.providerService.getChangeStore(d).hasChanges(d),Y=(a=f.type===K.Branch&&((i=await this.providerService.getBranch(d,f.branch.name))==null?void 0:i.locked)?"$(lock)":void 0)!=null?a:Li(f.type),we=[];if(we.push(gr({command:"remoteHub.switchToBranch",title:`${Y} ${f.name}${A?"*":""}`,tooltip:`${U(f.sha)}`,arguments:[{uri:d,commands:!0}]})),f.detached||((n==null?void 0:n.syncing)?we.push(gr({command:"",title:"$(sync~spin)",tooltip:l.l10n.t("Syncing Changes..."),arguments:[]})):we.push(gr({command:"remoteHub.sync",title:`$(sync)${((c=(s=r.state)==null?void 0:s.behind)!=null?c:0)>0?` ${(u=r.state)==null?void 0:u.behind}\u2193`:""}`,tooltip:p||C?l.l10n.t("Sync to latest indexed commit"):l.l10n.t("Sync (Pull & Push)"),arguments:[{uri:d}]}))),r.pullRequest&&we.push(gr({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:l.l10n.t(`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),Q){const ie=this.providerService.getIndexProvider(d);ie&&we.push(...await ie.getStatusBarContributions(d))}e.sourceControl.statusBarCommands=we}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,l.l10n.t("Changes")),e.groups.push(r)),r}getScmProvider(e){const n=_(e);return this._scmProviders.find(r=>_(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(cc(e))n=e;else if(Ws(e)){const r=e,i=this._scmProviders.find(a=>a.groups.find(s=>s.id===r.id));n=i==null?void 0:i.sourceControl}else if(Ko(e)){const r=e,i=this._scmProviders.find(a=>a.groups.some(s=>s.resourceStates.find(c=>c.resourceUri.toString()===r.resourceUri.toString())));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}async closeDiffEditors(e,n){if(!l.workspace.getConfiguration("git",e).get("closeDiffOnOperation",!1))return;const i=[];for(const a of l.window.tabGroups.all.map(s=>s.tabs).flat()){const{input:s}=a;(s instanceof l.TabInputTextDiff||s instanceof l.TabInputNotebookDiff)&&s.modified.scheme===x.scheme&&(!n||n.some(c=>c.path===s.modified.path))&&i.push(a)}await l.window.tabGroups.close(i,!0)}}o(Hs,"VirtualSourceControl");function cc(t){return"rootUri"in t&&"inputBox"in t}o(cc,"isSourceControl");function Ws(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}o(Ws,"isSourceControlResourceGroup");function Ko(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof l.Uri}o(Ko,"isSourceControlResourceState");function Wa(t){return"type"in t}o(Wa,"isTrackedChange");async function Go(t){var e,n,r;if(t.length===0)return!0;let i,a=l.l10n.t("Discard Changes");if(t.length===1){const c=t[0];c.type===D.Created?(i=l.l10n.t(`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,V((e=c.resourceUri)!=null?e:c.uri)),a=l.l10n.t("Delete file")):c.type===D.Deleted?(a=l.l10n.t("Restore file"),i=l.l10n.t("Are you sure you want to restore {0}?",V((n=c.resourceUri)!=null?n:c.uri))):i=l.l10n.t("Are you sure you want to discard changes in {0}?",V((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===D.Created)?i=l.l10n.t(`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===D.Deleted)?(a=l.l10n.t("Restore files"),i=l.l10n.t("Are you sure you want to restore {0} files?",t.length)):i=l.l10n.t("Are you sure you want to discard changes in {0} files?",t.length);return await l.window.showWarningMessage(i,{modal:!0},a)===a}o(Go,"confirmDiscard");async function $a(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await l.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}o($a,"getOrPickRootUri");async function Ka(t,e,n,r,i,a){let s;const c=l.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise(u=>{s=l.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(d=>{if(d=d.trim(),!d){c.validationMessage=l.l10n.t("Please enter a valid branch name");return}if(!y(d)){c.validationMessage=l.l10n.t("'{0}' isn't a valid branch name",d);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const d=c.value.trim();if((await t.getBranches(e,{query:d,limit:100})).branches.some(h=>h.name===d)){c.validationMessage=l.l10n.t("Branch '{0}' already exists",d);return}c.enabled=!1,c.busy=!0,u(d)})),c.prompt=n,c.placeholder=r,c.title=i,c.value=uc(a),c.show()})}finally{c.dispose(),s==null||s.dispose()}}o(Ka,"getBranchNameWithPrompt");function uc(t){const e=l.workspace.getConfiguration("git"),n=e.get("branchPrefix","");if(!t&&e.get("branchRandomName.enable",!1)===!0){const r=dc();return`${n}${r}`}return`${n}${t!=null?t:""}`}o(uc,"generateBranchName");function dc(){const t=l.workspace.getConfiguration("git"),e=t.get("branchRandomName.dictionary",["adjectives","animals"]),n=[];for(const r of e)r.toLowerCase()==="adjectives"&&n.push(ac),r.toLowerCase()==="animals"&&n.push(oc),r.toLowerCase()==="colors"&&n.push(sc),r.toLowerCase()==="numbers"&&n.push(Bs.generate({length:3}));return n.length===0?"":ic({dictionaries:n,length:n.length,separator:t.get("branchWhitespaceChar","-")})}o(dc,"generateRandomBranchName");class $s{constructor(e){this.providerService=e,this.id="remoteHubVsCodeDevLink",this.label="Copy vscode.dev Link",this.priority=10,l.env.appHost!=="codespaces"&&l.env.appHost!=="github.dev"&&l.window.registerShareProvider!==void 0&&(this._shareProviderRegistration=l.window.registerShareProvider({scheme:x.scheme},this))}dispose(){var e;(e=this._shareProviderRegistration)==null||e.dispose()}async provideShare(e){var n;const r=this.providerService.getRepository(e.resourceUri);if(!r)return;const i=this.providerService.getRelativeFilePath(r.uri,e.resourceUri),a=await this.providerService.getMetadata(r.uri),s=((n=a.HEAD.branch)==null?void 0:n.name)===a.defaultBranch.name||a.pullRequest?await this.providerService.getBestRemoteUri(r.uri,Vt.Branch,i,e):await this.providerService.getBestRemoteUri(r.uri,void 0,i,e);if(s!==void 0)return l.Uri.parse(`https://${Cr()}/${s.authority}${j(s.path)}${s.fragment?`#${s.fragment}`:""}${s.query?`?${s.query}`:""}`)}}o($s,"RemoteHubShareProvider");class $i extends l.TimelineItem{static is(e){return e instanceof $i}constructor(e,n,r,i,{dateType:a,showAuthor:s,dateFormatter:c}){var u;const d=r.message.indexOf(`
`),f=d!==-1?`${r.message.substring(0,d)} \u2026`:r.message,h=a==="authored"?r.authorDate:r.commitDate;super(f,(u=h==null?void 0:h.getTime())!=null?u:0);this.id=r.hash,this.contextValue=`${x.scheme}:${n}:file:commit`,this.command=i,s&&(this.description=r.authorName),this.tooltip=fc(r,c,h),this.iconPath=new l.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}o($i,"CommitTimelineItem");function fc(t,e,n){return t.authorName&&t.authorEmail?l.l10n.t(`{0} ({1}) \u2014 {2}
{3}

{4}`,t.authorName,t.authorEmail,U(t.hash),e.format(n),t.message):t.authorName&&!t.authorEmail?l.l10n.t(`{0} \u2014 {1}
{2}

{3}`,t.authorName,U(t.hash),e.format(n),t.message):l.l10n.t(`{0}
{1}

{2}`,U(t.hash),e.format(n),t.message)}o(fc,"getCommitTooltip");class fa extends l.TimelineItem{static is(e){return e instanceof fa}constructor(e,n,r,i,a,{dateFormatter:s}){const c=l.l10n.t("Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${x.scheme}:${n}:file:${this.id}`,this.command=a,this.iconPath=new l.ThemeIcon("git-commit"),this.tooltip=l.l10n.t(`{0}  \u2014 {1}
{2}

{3}`,l.l10n.t("You"),l.l10n.t("Index"),s.format(new Date(r.timestamp)),Hl(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}o(fa,"ChangeOperationTimelineItem");class Ks{constructor(e){this.providerService=e,this._onDidChange=new l.EventEmitter,this.id="github-file-history",this.label=l.l10n.t("GitHub File History"),this.debouncer=new Tn(500),this.disposable=l.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),be.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);!e.some(r=>_(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);(e.added.some(r=>_(r.uri)===n)||e.removed.some(r=>_(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||_(this.rootUri)!==_(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=_(this.rootUri);e.some(r=>_(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const Q of this.providerService.repositories)if(Q.uri.path===this.rootUri.path){this.rootUri=Q.uri;break}const a=this.providerService.getRelativeFilePath(this.rootUri,e),s=await this.providerService.getMetadata(this.rootUri);if(!s||r.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:a||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||r.isCancellationRequested)return{items:[]};const u=((i=c.paging)==null?void 0:i.more)?{cursor:c.paging.cursor}:void 0,d=new Intl.DateTimeFormat(l.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),f=be.getAny("git.timeline.date",void 0,"committed"),h=be.getAny("git.timeline.showAuthor",void 0,!0),p=await Promise.all(c.commits.map(async Q=>new $i(this.rootUri,s.provider.id,Q,await this.resolveDiffCommand(Q,s,e,a),{dateType:f,showAuthor:h,dateFormatter:d}))),C=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(C&&Boolean(C.staged&&be.get("staging.enabled"))){const A=new fa(this.rootUri,s.provider.id,C,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(C.uri,x.getProviderUri(C.uri),l.l10n.t("{0} (Index)",V(C.uri))),{dateFormatter:d});p.splice(0,0,A)}return{items:p,paging:u}}catch(a){return J.error(a),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=l.workspace.registerTimelineProvider([Bn.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[l.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!$i.is(n)||l.env.clipboard.writeText(n.hash)}),l.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!$i.is(n)||l.env.clipboard.writeText(n.message)}),l.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var a;!$i.is(n)&&!fa.is(n)||n.command!==void 0&&await l.commands.executeCommand(n.command.command,...(a=n.command.arguments)!=null?a:[])}),l.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),l.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!$i.is(n)&&!fa.is(n)||(e={uri:r,left:n},await l.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),l.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!$i.is(n)&&!fa.is(n)||_(r)!==_(e.uri))return;const{left:a}=e,s=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),u=V(r),d=a.parents[0];let f;d===void 0?f=l.l10n.t("{0} ({1})",u,U(n.hash)):a.hash===""?f=l.l10n.t("{0} (Working Tree)",u):a.hash==="~"?f=l.l10n.t("{0} (Index)",u):f=l.l10n.t("{0} ({1})",u,U(a.hash));let h=a.hash===""||a.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:fe.Commit,id:d!=null?d:"0000000000000000000000000000000000000000"}},s);d===void 0&&(h=h.with({query:"~"}));const p=n.parents[0];let C;p===void 0?C=l.l10n.t("{0} ({1})",u,U(n.hash)):p==="~"&&n.hash===""?C=l.l10n.t("{0} (Working Tree)",u):n.hash==="~"?C=l.l10n.t("{0} (Index)",u):C=l.l10n.t("{0} ({1})",u,U(n.hash));const Q=l.l10n.t("{0} \u27F7 {1}",f,C),A=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:fe.Commit,id:n.hash}},s);await l.commands.executeCommand("vscode.diff",h,A,Q)})]}async resolveDiffCommand(e,n,r,i,a){const s=V(r);let c=e.parents[0],u=this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:fe.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},i);try{await this.providerService.stat(u)}catch(h){c=void 0}let d;c===void 0?d=l.l10n.t("{0} ({1})",s,U(e.hash)):e.hash===""?d=l.l10n.t("{0} (Working Tree)",s):e.hash==="~"?d=l.l10n.t("{0} (Index)",s):d=l.l10n.t("{0} ({1}) \u27F7  {0} ({2})",s,U(c),U(e.hash)),c===void 0&&(u=u.with({query:"~"}));const f=e.hash===""||e.hash==="~"?r:this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:fe.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[u,f,d,a]}}async openOnRemote(e){if(!$i.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await ii("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}o(Ks,"VirtualTimelineProvider");class Gs{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=l.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new Ue(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await Ur(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,a;for(const c of e.query.split("&")){const[u,d]=c.split("=");switch(u){case"url":i=decodeURIComponent(d);break;case"location":a=d===He.CurrentWindow?He.CurrentWindow:He.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),a=a!=null?a:He.NewWindow;const s=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,a);if(!s){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});const c=l.l10n.t("Show Extensions");l.window.showErrorMessage(l.l10n.t(`Unable to open {0}.
You may need to install or enable additional extensions.`,i),c).then(u=>{u===c&&l.commands.executeCommand("workbench.view.extensions",`${jo.join(" ")}`)});return}r.log({message:`: Opening ${i} in ${a}`}),ut(this.providerService,s);break}case"/open-files":{let i;for(const s of e.query.split("&")){const[c,u]=s.split("=");if(c==="url"){i=decodeURIComponent(u);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const a=await this.providerService.createWorkspaceForRemoteUrl(i);if(!a){r.log({message:`: Unable to open files/folders for ${i}`});return}a.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=bo())==null?void 0:n.openPendingFiles(a.uri,a.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}o(Gs,"RemoteUriHandler");var hc=Object.defineProperty,gc=Object.getOwnPropertyDescriptor,vc=o((t,e,n,r)=>{for(var i=r>1?void 0:r?gc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&hc(e,n,i),i},"view_decorateClass"),Ea;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(Ea||(Ea={}));const zs=o(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof zs}get id(){}toString(){return`${J.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let Aa=zs;vc([At((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],Aa.prototype,"triggerChange",1);class Vs{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new l.EventEmitter,this.disposables=[];const a=!1;if(J.isDebugging&&a){const s=this.getTreeItem;this.getTreeItem=async function(c){var u;const d=await s.apply(this,[c]),f=c.getParent();return d.tooltip===void 0&&(d.tooltip=new l.MarkdownString(d.label!==void 0&&typeof d.label!="string"?d.label.label:(u=d.label)!=null?u:"")),typeof d.tooltip=="string"?d.tooltip=`${d.tooltip}

---
context: ${d.contextValue}
node: ${c.toString()}${f!==void 0?`
parent: ${f.toString()}`:""}`:d.tooltip.appendMarkdown(`

---

context: \`${d.contextValue}\`\\
node: \`${c.toString()}\`${f!==void 0?`\\
parent: \`${f.toString()}\``:""}`),d}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!be.changed(e,`views.${this.configKey}`)}dispose(){l.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=l.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(be.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await Ur(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const a=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&a===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){J.error(r)}}async show(){try{await l.commands.executeCommand(`${this.id}.focus`)}catch(e){J.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=be.get("views")[this.configKey]),this._config}}o(Vs,"View");class Js extends Aa{constructor(e,n,r,i,a,s,c){super(e,n);this._message=r,this._description=i,this._tooltip=a,this._iconPath=s,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new l.TreeItem(this._message,l.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:Ea.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}o(Js,"MessageNode");var pc=Object.defineProperty,mc=Object.getOwnPropertyDescriptor,zo=o((t,e,n,r)=>{for(var i=r>1?void 0:r?mc(e,n):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(i=(r?s(e,n,i):s(i))||i);return r&&i&&pc(e,n,i),i},"workspaceRepositoriesView_decorateClass");const js=o(class extends Aa{constructor(t,e,n,r,i,a,s){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=a,this.canApplyChanges=s}static getId(t,e,n){return`${Ga.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return js.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new l.TreeItem(t,l.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${Ea.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&be.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=x.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?l.l10n.t("{0} (Index)",V(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree)",V(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:fe.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?l.l10n.t("{0} (Index of {1})",V(this.operation.uri),this.workspaceRepository.ref.name):l.l10n.t("{0} (Working Tree of {1})",V(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await l.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await l.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){l.window.showErrorMessage(String(e))}}},"_FileChangeNode");let Ys=js;Ys.key=":changes";const qs=o(class extends Aa{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${So.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return qs.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||l.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new Ys(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=tr(this.workspaceRepository),n=Bn.isCanonicalUri(this.workspaceRepository.uri)?l.l10n.t("{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new l.TreeItem(this.root?this.canonical.name:n,e?l.TreeItemCollapsibleState.Collapsed:l.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${Ea.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${Zn(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new l.ThemeIcon("check"):this.root?Zs(this.canonical.provider.id):ea(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new l.MarkdownString(void 0,!0).appendMarkdown(l.l10n.t(`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?l.l10n.t(`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",yc(this.workspaceRepository.ref.type),Li(this.workspaceRepository.ref.type),n,t?` \u2014 _${l.l10n.t("Active")}_ `:"",Zn(this.workspaceRepository.timestamp,{ago:!0}),hr(this.workspaceRepository.ref.type,this.workspaceRepository.changes,{preamble:`${l.l10n.t("Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=l.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){l.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let Ga=qs;Ga.key=":wsrepo",zo([At()],Ga.prototype,"refresh",1);const Qs=o(class extends Aa{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return Qs.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new Js(this.view,this,l.l10n.t("No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new Ga(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new l.TreeItem(this.canonical.name,t?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed);return e.contextValue=Ea.WorkspaceRepositories,e.iconPath=Zs(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let So=Qs;So.key=":wsrepos",zo([At()],So.prototype,"refresh",1);class Vo extends Aa{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const a=l.Uri.parse(r);try{const{name:s,provider:c}=this.view.providerService.getVirtualUriMetadata(a),u={uri:a,name:s,provider:c,hasActive:i.some(d=>d.workspaceId===this.view.workspaceId)};i.length===1?n.push(new Ga(this.view,this,u,i[0],!0)):n.push(new So(this.view,this,u,i))}catch(s){if(s instanceof fn)continue;J.error(s)}}this.children=n}return this.children}getTreeItem(){return new l.TreeItem("Repositories",l.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}o(Vo,"WorkspaceRepositoriesViewNode"),zo([At()],Vo.prototype,"refresh",1);class Xs extends Vs{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",l.l10n.t("Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),l.window.registerFileDecorationProvider({provideFileDecoration:(i,a)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new l.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:l.l10n.t("Has Uncommitted Changes")}}}))}getRoot(){return new Vo(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[l.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),l.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),ut(this.providerService,{name:e.name,uri:e.uri,location:He.CurrentWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),ut(this.providerService,{name:e.name,uri:e.uri,location:He.NewWindow})),this),l.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),l.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),l.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),l.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=_(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(a=>_(a.canonicalUri)===n);return await wc(r,l.l10n.t("Choose a repository to apply the changeset to"))}}o(Xs,"WorkspaceRepositoriesView");function yc(t,e){switch(t){case K.Branch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Branch");case K.RemoteBranch:return e?l.l10n.t("Pull Request #{0}",e.id):l.l10n.t("Remote Branch");case K.Tag:return l.l10n.t("Tag");case K.Commit:return l.l10n.t("Commit")}}o(yc,"headTypeToString");function Zs(t){switch(t){case"github":return new l.ThemeIcon("github");case"azurerepos":return new l.ThemeIcon("azure-devops");default:return new l.ThemeIcon("vm")}}o(Zs,"providerToIconPath");async function wc(t,e){if(t.length!==0){if(t.length>1){const n=await l.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}o(wc,"getRepository");let Co;function bo(){return Co}o(bo,"getOpenActionsService");var ha;(function(t){t.HasCommitted="has:committed",t.Version="version"})(ha||(ha={}));let _o;function el(t){return _o.globalState.get(t)}o(el,"getState");async function Jo(t,e){return _o.globalState.update(t,e)}o(Jo,"updateState");let tl=!1;function Sc(){return tl}o(Sc,"isPreRelease");async function Cc(t){_o=t,Xe.configure("remoteHub",t),J.configure(t,"Remote Repositories"),Ue.start("Time to root directory",{log:!1});const e=$t.configure(t),n=new ur(t),r=t.extension.packageJSON.version;await Jo(ha.Version,r),await t.workspaceState.update(ha.Version,r);const[,i]=_o.extension.packageJSON.version.split(".");tl=Number.parseInt(i)%2==1;try{const a=new Bn(n,t.workspaceState);Co=new Na(a);const s=new Fs(a),c=new Hs(a,Co,n,s),u=new so(a);if(typeof l.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(l.workspace.registerEditSessionIdentityProvider(x.scheme,new Er(a))),typeof l.workspace.registerCanonicalUriProvider!==void 0&&!l.extensions.getExtension("vscode.git")){const d=new _t(a);try{t.subscriptions.push(..._t.SupportedSchemes.map(f=>l.workspace.registerCanonicalUriProvider(f,d)))}catch{}}return t.subscriptions.push(a.onDidChangeRepositories(async d=>{for(const f of d.added)try{const h=await f.getMetadata(),{HEAD:p,defaultBranch:C,name:Q,provider:A,pullRequest:Y}=h,we=p.name.replace(/\//g,"\u2009\u2215\u2009");let ie=" ";if(Y!==void 0)ie=` (PR ${Y.id}) `;else if(p.type===K.Tag)ie=` (${we}) `;else if(p.type===K.Commit)ie=` (${we}) `;else if(p.type===K.Branch||p.type===K.RemoteBranch){const Ie=p.branch.name.replace(/\//g,"\u2009\u2215\u2009");p.branch.name!==C.name&&(ie=` (${Ie}) `)}const De={uri:f.uri,type:"folder",label:`${Q}${ie}[${A.name}]`};l.commands.executeCommand("_workbench.addToRecentlyOpened",De)}catch(h){J.error(h,"Failed to add repository to recently opened")}}),new bs(a,s),new qi(a),new Gs(a,n),...gi(a,t.extension.id,n),...Dc(a,n),...await bc(a,c,t,n),new Ks(a),new $s(a),new Xs(a,e,n),c,Co,a,n),n.publicLog2("activate"),Promise.resolve(u)}catch(a){throw J.error(a),T(t,a),a}}o(Cc,"activate");async function bc(t,e,n,r){const i=[];if(nl()){const a=new We(t,r);t.registerVirtualIndexProvider("github",a),t.registerVirtualIndexProvider("azurerepos",a),i.push(a)}return i.push(Ec(t,e),_c(e),Ac(e)),i}o(bc,"registerProviders");function _c(t){async function e(){let r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps");r||await new Promise(a=>{const s=l.extensions.onDidChange(()=>{r=l.extensions.getExtension("ms-azuretools.vscode-azurestaticwebapps"),r&&(s.dispose(),a())})});const i=await r.activate();if(!(!i||typeof i.registerGitProvider!="function"))return i.registerGitProvider(t)}o(e,"registerWithStaticWebApps");const n=e();return l.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(_c,"registerStaticWebApps");function Ec(t,e){async function n(){var i;try{let a=(i=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");a||(J.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const p=l.extensions.onDidChange(()=>{var C;a=(C=l.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?C:l.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),a&&(p.dispose(),h())})})),J.log("[ GHPR] Registering..."),Kn(an.HasPullRequestExtension,!0);const s=await a.activate();if(!s)throw new Error("Unable to get registration api");const c=s.registerGitProvider(e),u=t.onDidChangeRepositories(h=>d(h));async function d(h){const p=h.added.filter(C=>C.provider.id==="github");if(p.length!==0){J.log("[ GHPR] Checking for opened PRs...");for(const C of p){const Q=await t.getBestRemoteUri(C.uri,Vt.PullRequest);if(!!Q){u.dispose(),J.log("[ GHPR] Opened PR found; preloading"),l.commands.executeCommand("github.api.preloadPullRequest",Q.toString());return}}J.log("[ GHPR] No opened PRs found")}}o(d,"onRepositoriesChanged"),J.log("[ GHPR] Registration complete");const f=t.repositories;return f.length&&d({added:f,removed:[]}),l.Disposable.from(c,u)}catch(a){return J.error(a,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}o(n,"registerWithGHPR");const r=n();return l.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}o(Ec,"registerGitHub");function Ac(t){async function e(){try{let r=l.extensions.getExtension("ms-edu.vscode-learning");r||(J.log("[ VSCodeEdu ] Not currently installed or enabled; waiting..."),await new Promise(s=>{const c=l.extensions.onDidChange(()=>{r=l.extensions.getExtension("ms-edu.vscode-learning"),r&&(c.dispose(),s())})})),J.log("[ VSCodeEdu ] Registering...");const i=await r.activate();if(!i||typeof i.registerGitProvider!="function"){J.error("[ VSCodeEdu ] Unable to get registration api");return}const a=i.registerGitProvider(t);return J.log("[ VSCodeEdu ] Registration complete"),a}catch(r){return J.error(r,"[ VSCodeEdu ] Registration failed;"),{dispose:()=>{}}}}o(e,"registerWithVSCodeEdu");const n=e();return l.Disposable.from({dispose:async()=>{var r;return void((r=await n)==null?void 0:r.dispose())}})}o(Ac,"registerVSCodeEdu");function Dc(t,e){if(!nl())return[];e.publicLog2("codex.enableRichNav",{});const n=new Rt(t);return[n,n.register(new bt(e)),...bt.createStatus()]}o(Dc,"registerNavigationServiceProviders");function nl(){return!1}o(nl,"isRichNavEnabled");const jo=["github.remotehub","ms-vscode.azure-repos"],Yo=new Map,qo=new Map;async function Ur(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=Bn.getProviderId(e)),e&&qo.has(e)){const a=qo.get(e);if(!a)return;await Yo.get(a);return}for(const a of l.extensions.all){const s=a.id,{contributes:c}=a.packageJSON;if(!c||!jo.includes(s.toLowerCase()))continue;const u=Yo.get(s),d=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],f=d.find(p=>p===e)!==void 0,h=d.length&&e===void 0;if(!u&&(h||f)){const p=(i=l.extensions.getExtension(s))==null?void 0:i.activate().then(C=>C.registerVirtualProviderService(t));if(p===void 0)return;Yo.set(s,p);for(const C of d)qo.set(C,s);if(await p,e!==void 0&&f)return}else u&&await u}}o(Ur,"ensureProvidersRegistered")})(),module.exports=Do})();
